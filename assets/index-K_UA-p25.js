var ad=f=>{throw TypeError(f)};var Pl=(f,t,e)=>t.has(f)||ad("Cannot "+e);var jt=(f,t,e)=>(Pl(f,t,"read from private field"),e?e.call(f):t.get(f)),hn=(f,t,e)=>t.has(f)?ad("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(f):t.set(f,e),Me=(f,t,e,r)=>(Pl(f,t,"write to private field"),r?r.call(f,e):t.set(f,e),e),dn=(f,t,e)=>(Pl(f,t,"access private method"),e);var od=(f,t,e,r)=>({set _(i){Me(f,t,i,e)},get _(){return jt(f,t,r)}});(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function e(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=e(i);fetch(i.href,a)}})();var Il={exports:{}},Us={},kl={exports:{}},Ct={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ld;function vg(){if(ld)return Ct;ld=1;var f=Symbol.for("react.element"),t=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),o=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),g=Symbol.iterator;function v(L){return L===null||typeof L!="object"?null:(L=g&&L[g]||L["@@iterator"],typeof L=="function"?L:null)}var w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,A={};function E(L,j,st){this.props=L,this.context=j,this.refs=A,this.updater=st||w}E.prototype.isReactComponent={},E.prototype.setState=function(L,j){if(typeof L!="object"&&typeof L!="function"&&L!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,L,j,"setState")},E.prototype.forceUpdate=function(L){this.updater.enqueueForceUpdate(this,L,"forceUpdate")};function x(){}x.prototype=E.prototype;function R(L,j,st){this.props=L,this.context=j,this.refs=A,this.updater=st||w}var C=R.prototype=new x;C.constructor=R,S(C,E.prototype),C.isPureReactComponent=!0;var P=Array.isArray,T=Object.prototype.hasOwnProperty,I={current:null},M={key:!0,ref:!0,__self:!0,__source:!0};function _(L,j,st){var ct,wt={},G=null,H=null;if(j!=null)for(ct in j.ref!==void 0&&(H=j.ref),j.key!==void 0&&(G=""+j.key),j)T.call(j,ct)&&!M.hasOwnProperty(ct)&&(wt[ct]=j[ct]);var Y=arguments.length-2;if(Y===1)wt.children=st;else if(1<Y){for(var at=Array(Y),bt=0;bt<Y;bt++)at[bt]=arguments[bt+2];wt.children=at}if(L&&L.defaultProps)for(ct in Y=L.defaultProps,Y)wt[ct]===void 0&&(wt[ct]=Y[ct]);return{$$typeof:f,type:L,key:G,ref:H,props:wt,_owner:I.current}}function F(L,j){return{$$typeof:f,type:L.type,key:j,ref:L.ref,props:L.props,_owner:L._owner}}function U(L){return typeof L=="object"&&L!==null&&L.$$typeof===f}function W(L){var j={"=":"=0",":":"=2"};return"$"+L.replace(/[=:]/g,function(st){return j[st]})}var q=/\/+/g;function J(L,j){return typeof L=="object"&&L!==null&&L.key!=null?W(""+L.key):j.toString(36)}function rt(L,j,st,ct,wt){var G=typeof L;(G==="undefined"||G==="boolean")&&(L=null);var H=!1;if(L===null)H=!0;else switch(G){case"string":case"number":H=!0;break;case"object":switch(L.$$typeof){case f:case t:H=!0}}if(H)return H=L,wt=wt(H),L=ct===""?"."+J(H,0):ct,P(wt)?(st="",L!=null&&(st=L.replace(q,"$&/")+"/"),rt(wt,j,st,"",function(bt){return bt})):wt!=null&&(U(wt)&&(wt=F(wt,st+(!wt.key||H&&H.key===wt.key?"":(""+wt.key).replace(q,"$&/")+"/")+L)),j.push(wt)),1;if(H=0,ct=ct===""?".":ct+":",P(L))for(var Y=0;Y<L.length;Y++){G=L[Y];var at=ct+J(G,Y);H+=rt(G,j,st,at,wt)}else if(at=v(L),typeof at=="function")for(L=at.call(L),Y=0;!(G=L.next()).done;)G=G.value,at=ct+J(G,Y++),H+=rt(G,j,st,at,wt);else if(G==="object")throw j=String(L),Error("Objects are not valid as a React child (found: "+(j==="[object Object]"?"object with keys {"+Object.keys(L).join(", ")+"}":j)+"). If you meant to render a collection of children, use an array instead.");return H}function gt(L,j,st){if(L==null)return L;var ct=[],wt=0;return rt(L,ct,"","",function(G){return j.call(st,G,wt++)}),ct}function X(L){if(L._status===-1){var j=L._result;j=j(),j.then(function(st){(L._status===0||L._status===-1)&&(L._status=1,L._result=st)},function(st){(L._status===0||L._status===-1)&&(L._status=2,L._result=st)}),L._status===-1&&(L._status=0,L._result=j)}if(L._status===1)return L._result.default;throw L._result}var $={current:null},V={transition:null},nt={ReactCurrentDispatcher:$,ReactCurrentBatchConfig:V,ReactCurrentOwner:I};function tt(){throw Error("act(...) is not supported in production builds of React.")}return Ct.Children={map:gt,forEach:function(L,j,st){gt(L,function(){j.apply(this,arguments)},st)},count:function(L){var j=0;return gt(L,function(){j++}),j},toArray:function(L){return gt(L,function(j){return j})||[]},only:function(L){if(!U(L))throw Error("React.Children.only expected to receive a single React element child.");return L}},Ct.Component=E,Ct.Fragment=e,Ct.Profiler=i,Ct.PureComponent=R,Ct.StrictMode=r,Ct.Suspense=c,Ct.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=nt,Ct.act=tt,Ct.cloneElement=function(L,j,st){if(L==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+L+".");var ct=S({},L.props),wt=L.key,G=L.ref,H=L._owner;if(j!=null){if(j.ref!==void 0&&(G=j.ref,H=I.current),j.key!==void 0&&(wt=""+j.key),L.type&&L.type.defaultProps)var Y=L.type.defaultProps;for(at in j)T.call(j,at)&&!M.hasOwnProperty(at)&&(ct[at]=j[at]===void 0&&Y!==void 0?Y[at]:j[at])}var at=arguments.length-2;if(at===1)ct.children=st;else if(1<at){Y=Array(at);for(var bt=0;bt<at;bt++)Y[bt]=arguments[bt+2];ct.children=Y}return{$$typeof:f,type:L.type,key:wt,ref:G,props:ct,_owner:H}},Ct.createContext=function(L){return L={$$typeof:o,_currentValue:L,_currentValue2:L,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},L.Provider={$$typeof:a,_context:L},L.Consumer=L},Ct.createElement=_,Ct.createFactory=function(L){var j=_.bind(null,L);return j.type=L,j},Ct.createRef=function(){return{current:null}},Ct.forwardRef=function(L){return{$$typeof:u,render:L}},Ct.isValidElement=U,Ct.lazy=function(L){return{$$typeof:p,_payload:{_status:-1,_result:L},_init:X}},Ct.memo=function(L,j){return{$$typeof:d,type:L,compare:j===void 0?null:j}},Ct.startTransition=function(L){var j=V.transition;V.transition={};try{L()}finally{V.transition=j}},Ct.unstable_act=tt,Ct.useCallback=function(L,j){return $.current.useCallback(L,j)},Ct.useContext=function(L){return $.current.useContext(L)},Ct.useDebugValue=function(){},Ct.useDeferredValue=function(L){return $.current.useDeferredValue(L)},Ct.useEffect=function(L,j){return $.current.useEffect(L,j)},Ct.useId=function(){return $.current.useId()},Ct.useImperativeHandle=function(L,j,st){return $.current.useImperativeHandle(L,j,st)},Ct.useInsertionEffect=function(L,j){return $.current.useInsertionEffect(L,j)},Ct.useLayoutEffect=function(L,j){return $.current.useLayoutEffect(L,j)},Ct.useMemo=function(L,j){return $.current.useMemo(L,j)},Ct.useReducer=function(L,j,st){return $.current.useReducer(L,j,st)},Ct.useRef=function(L){return $.current.useRef(L)},Ct.useState=function(L){return $.current.useState(L)},Ct.useSyncExternalStore=function(L,j,st){return $.current.useSyncExternalStore(L,j,st)},Ct.useTransition=function(){return $.current.useTransition()},Ct.version="18.3.1",Ct}var ud;function ql(){return ud||(ud=1,kl.exports=vg()),kl.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cd;function yg(){if(cd)return Us;cd=1;var f=ql(),t=Symbol.for("react.element"),e=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=f.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function o(u,c,d){var p,g={},v=null,w=null;d!==void 0&&(v=""+d),c.key!==void 0&&(v=""+c.key),c.ref!==void 0&&(w=c.ref);for(p in c)r.call(c,p)&&!a.hasOwnProperty(p)&&(g[p]=c[p]);if(u&&u.defaultProps)for(p in c=u.defaultProps,c)g[p]===void 0&&(g[p]=c[p]);return{$$typeof:t,type:u,key:v,ref:w,props:g,_owner:i.current}}return Us.Fragment=e,Us.jsx=o,Us.jsxs=o,Us}var hd;function wg(){return hd||(hd=1,Il.exports=yg()),Il.exports}var Bt=wg(),Gr=ql(),fa={},Ml={exports:{}},Oe={},Ol={exports:{}},Ll={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dd;function Ag(){return dd||(dd=1,(function(f){function t(V,nt){var tt=V.length;V.push(nt);t:for(;0<tt;){var L=tt-1>>>1,j=V[L];if(0<i(j,nt))V[L]=nt,V[tt]=j,tt=L;else break t}}function e(V){return V.length===0?null:V[0]}function r(V){if(V.length===0)return null;var nt=V[0],tt=V.pop();if(tt!==nt){V[0]=tt;t:for(var L=0,j=V.length,st=j>>>1;L<st;){var ct=2*(L+1)-1,wt=V[ct],G=ct+1,H=V[G];if(0>i(wt,tt))G<j&&0>i(H,wt)?(V[L]=H,V[G]=tt,L=G):(V[L]=wt,V[ct]=tt,L=ct);else if(G<j&&0>i(H,tt))V[L]=H,V[G]=tt,L=G;else break t}}return nt}function i(V,nt){var tt=V.sortIndex-nt.sortIndex;return tt!==0?tt:V.id-nt.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;f.unstable_now=function(){return a.now()}}else{var o=Date,u=o.now();f.unstable_now=function(){return o.now()-u}}var c=[],d=[],p=1,g=null,v=3,w=!1,S=!1,A=!1,E=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,R=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function C(V){for(var nt=e(d);nt!==null;){if(nt.callback===null)r(d);else if(nt.startTime<=V)r(d),nt.sortIndex=nt.expirationTime,t(c,nt);else break;nt=e(d)}}function P(V){if(A=!1,C(V),!S)if(e(c)!==null)S=!0,X(T);else{var nt=e(d);nt!==null&&$(P,nt.startTime-V)}}function T(V,nt){S=!1,A&&(A=!1,x(_),_=-1),w=!0;var tt=v;try{for(C(nt),g=e(c);g!==null&&(!(g.expirationTime>nt)||V&&!W());){var L=g.callback;if(typeof L=="function"){g.callback=null,v=g.priorityLevel;var j=L(g.expirationTime<=nt);nt=f.unstable_now(),typeof j=="function"?g.callback=j:g===e(c)&&r(c),C(nt)}else r(c);g=e(c)}if(g!==null)var st=!0;else{var ct=e(d);ct!==null&&$(P,ct.startTime-nt),st=!1}return st}finally{g=null,v=tt,w=!1}}var I=!1,M=null,_=-1,F=5,U=-1;function W(){return!(f.unstable_now()-U<F)}function q(){if(M!==null){var V=f.unstable_now();U=V;var nt=!0;try{nt=M(!0,V)}finally{nt?J():(I=!1,M=null)}}else I=!1}var J;if(typeof R=="function")J=function(){R(q)};else if(typeof MessageChannel<"u"){var rt=new MessageChannel,gt=rt.port2;rt.port1.onmessage=q,J=function(){gt.postMessage(null)}}else J=function(){E(q,0)};function X(V){M=V,I||(I=!0,J())}function $(V,nt){_=E(function(){V(f.unstable_now())},nt)}f.unstable_IdlePriority=5,f.unstable_ImmediatePriority=1,f.unstable_LowPriority=4,f.unstable_NormalPriority=3,f.unstable_Profiling=null,f.unstable_UserBlockingPriority=2,f.unstable_cancelCallback=function(V){V.callback=null},f.unstable_continueExecution=function(){S||w||(S=!0,X(T))},f.unstable_forceFrameRate=function(V){0>V||125<V?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):F=0<V?Math.floor(1e3/V):5},f.unstable_getCurrentPriorityLevel=function(){return v},f.unstable_getFirstCallbackNode=function(){return e(c)},f.unstable_next=function(V){switch(v){case 1:case 2:case 3:var nt=3;break;default:nt=v}var tt=v;v=nt;try{return V()}finally{v=tt}},f.unstable_pauseExecution=function(){},f.unstable_requestPaint=function(){},f.unstable_runWithPriority=function(V,nt){switch(V){case 1:case 2:case 3:case 4:case 5:break;default:V=3}var tt=v;v=V;try{return nt()}finally{v=tt}},f.unstable_scheduleCallback=function(V,nt,tt){var L=f.unstable_now();switch(typeof tt=="object"&&tt!==null?(tt=tt.delay,tt=typeof tt=="number"&&0<tt?L+tt:L):tt=L,V){case 1:var j=-1;break;case 2:j=250;break;case 5:j=1073741823;break;case 4:j=1e4;break;default:j=5e3}return j=tt+j,V={id:p++,callback:nt,priorityLevel:V,startTime:tt,expirationTime:j,sortIndex:-1},tt>L?(V.sortIndex=tt,t(d,V),e(c)===null&&V===e(d)&&(A?(x(_),_=-1):A=!0,$(P,tt-L))):(V.sortIndex=j,t(c,V),S||w||(S=!0,X(T))),V},f.unstable_shouldYield=W,f.unstable_wrapCallback=function(V){var nt=v;return function(){var tt=v;v=nt;try{return V.apply(this,arguments)}finally{v=tt}}}})(Ll)),Ll}var fd;function Sg(){return fd||(fd=1,Ol.exports=Ag()),Ol.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pd;function Eg(){if(pd)return Oe;pd=1;var f=ql(),t=Sg();function e(n){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+n,l=1;l<arguments.length;l++)s+="&args[]="+encodeURIComponent(arguments[l]);return"Minified React error #"+n+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,i={};function a(n,s){o(n,s),o(n+"Capture",s)}function o(n,s){for(i[n]=s,n=0;n<s.length;n++)r.add(s[n])}var u=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),c=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},g={};function v(n){return c.call(g,n)?!0:c.call(p,n)?!1:d.test(n)?g[n]=!0:(p[n]=!0,!1)}function w(n,s,l,h){if(l!==null&&l.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return h?!1:l!==null?!l.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function S(n,s,l,h){if(s===null||typeof s>"u"||w(n,s,l,h))return!0;if(h)return!1;if(l!==null)switch(l.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function A(n,s,l,h,m,y,b){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=h,this.attributeNamespace=m,this.mustUseProperty=l,this.propertyName=n,this.type=s,this.sanitizeURL=y,this.removeEmptyString=b}var E={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){E[n]=new A(n,0,!1,n,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var s=n[0];E[s]=new A(s,1,!1,n[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(n){E[n]=new A(n,2,!1,n.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){E[n]=new A(n,2,!1,n,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){E[n]=new A(n,3,!1,n.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(n){E[n]=new A(n,3,!0,n,null,!1,!1)}),["capture","download"].forEach(function(n){E[n]=new A(n,4,!1,n,null,!1,!1)}),["cols","rows","size","span"].forEach(function(n){E[n]=new A(n,6,!1,n,null,!1,!1)}),["rowSpan","start"].forEach(function(n){E[n]=new A(n,5,!1,n.toLowerCase(),null,!1,!1)});var x=/[\-:]([a-z])/g;function R(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var s=n.replace(x,R);E[s]=new A(s,1,!1,n,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var s=n.replace(x,R);E[s]=new A(s,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(n){var s=n.replace(x,R);E[s]=new A(s,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(n){E[n]=new A(n,1,!1,n.toLowerCase(),null,!1,!1)}),E.xlinkHref=new A("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(n){E[n]=new A(n,1,!1,n.toLowerCase(),null,!0,!0)});function C(n,s,l,h){var m=E.hasOwnProperty(s)?E[s]:null;(m!==null?m.type!==0:h||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(S(s,l,m,h)&&(l=null),h||m===null?v(s)&&(l===null?n.removeAttribute(s):n.setAttribute(s,""+l)):m.mustUseProperty?n[m.propertyName]=l===null?m.type===3?!1:"":l:(s=m.attributeName,h=m.attributeNamespace,l===null?n.removeAttribute(s):(m=m.type,l=m===3||m===4&&l===!0?"":""+l,h?n.setAttributeNS(h,s,l):n.setAttribute(s,l))))}var P=f.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,T=Symbol.for("react.element"),I=Symbol.for("react.portal"),M=Symbol.for("react.fragment"),_=Symbol.for("react.strict_mode"),F=Symbol.for("react.profiler"),U=Symbol.for("react.provider"),W=Symbol.for("react.context"),q=Symbol.for("react.forward_ref"),J=Symbol.for("react.suspense"),rt=Symbol.for("react.suspense_list"),gt=Symbol.for("react.memo"),X=Symbol.for("react.lazy"),$=Symbol.for("react.offscreen"),V=Symbol.iterator;function nt(n){return n===null||typeof n!="object"?null:(n=V&&n[V]||n["@@iterator"],typeof n=="function"?n:null)}var tt=Object.assign,L;function j(n){if(L===void 0)try{throw Error()}catch(l){var s=l.stack.trim().match(/\n( *(at )?)/);L=s&&s[1]||""}return`
`+L+n}var st=!1;function ct(n,s){if(!n||st)return"";st=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch(z){var h=z}Reflect.construct(n,[],s)}else{try{s.call()}catch(z){h=z}n.call(s.prototype)}else{try{throw Error()}catch(z){h=z}n()}}catch(z){if(z&&h&&typeof z.stack=="string"){for(var m=z.stack.split(`
`),y=h.stack.split(`
`),b=m.length-1,k=y.length-1;1<=b&&0<=k&&m[b]!==y[k];)k--;for(;1<=b&&0<=k;b--,k--)if(m[b]!==y[k]){if(b!==1||k!==1)do if(b--,k--,0>k||m[b]!==y[k]){var O=`
`+m[b].replace(" at new "," at ");return n.displayName&&O.includes("<anonymous>")&&(O=O.replace("<anonymous>",n.displayName)),O}while(1<=b&&0<=k);break}}}finally{st=!1,Error.prepareStackTrace=l}return(n=n?n.displayName||n.name:"")?j(n):""}function wt(n){switch(n.tag){case 5:return j(n.type);case 16:return j("Lazy");case 13:return j("Suspense");case 19:return j("SuspenseList");case 0:case 2:case 15:return n=ct(n.type,!1),n;case 11:return n=ct(n.type.render,!1),n;case 1:return n=ct(n.type,!0),n;default:return""}}function G(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case M:return"Fragment";case I:return"Portal";case F:return"Profiler";case _:return"StrictMode";case J:return"Suspense";case rt:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case W:return(n.displayName||"Context")+".Consumer";case U:return(n._context.displayName||"Context")+".Provider";case q:var s=n.render;return n=n.displayName,n||(n=s.displayName||s.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case gt:return s=n.displayName||null,s!==null?s:G(n.type)||"Memo";case X:s=n._payload,n=n._init;try{return G(n(s))}catch{}}return null}function H(n){var s=n.type;switch(n.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=s.render,n=n.displayName||n.name||"",s.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return G(s);case 8:return s===_?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function Y(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function at(n){var s=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function bt(n){var s=at(n)?"checked":"value",l=Object.getOwnPropertyDescriptor(n.constructor.prototype,s),h=""+n[s];if(!n.hasOwnProperty(s)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var m=l.get,y=l.set;return Object.defineProperty(n,s,{configurable:!0,get:function(){return m.call(this)},set:function(b){h=""+b,y.call(this,b)}}),Object.defineProperty(n,s,{enumerable:l.enumerable}),{getValue:function(){return h},setValue:function(b){h=""+b},stopTracking:function(){n._valueTracker=null,delete n[s]}}}}function ft(n){n._valueTracker||(n._valueTracker=bt(n))}function Ot(n){if(!n)return!1;var s=n._valueTracker;if(!s)return!0;var l=s.getValue(),h="";return n&&(h=at(n)?n.checked?"true":"false":n.value),n=h,n!==l?(s.setValue(n),!0):!1}function Mt(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function pe(n,s){var l=s.checked;return tt({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:l??n._wrapperState.initialChecked})}function ie(n,s){var l=s.defaultValue==null?"":s.defaultValue,h=s.checked!=null?s.checked:s.defaultChecked;l=Y(s.value!=null?s.value:l),n._wrapperState={initialChecked:h,initialValue:l,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function Gt(n,s){s=s.checked,s!=null&&C(n,"checked",s,!1)}function sn(n,s){Gt(n,s);var l=Y(s.value),h=s.type;if(l!=null)h==="number"?(l===0&&n.value===""||n.value!=l)&&(n.value=""+l):n.value!==""+l&&(n.value=""+l);else if(h==="submit"||h==="reset"){n.removeAttribute("value");return}s.hasOwnProperty("value")?In(n,s.type,l):s.hasOwnProperty("defaultValue")&&In(n,s.type,Y(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(n.defaultChecked=!!s.defaultChecked)}function Ar(n,s,l){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var h=s.type;if(!(h!=="submit"&&h!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+n._wrapperState.initialValue,l||s===n.value||(n.value=s),n.defaultValue=s}l=n.name,l!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,l!==""&&(n.name=l)}function In(n,s,l){(s!=="number"||Mt(n.ownerDocument)!==n)&&(l==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+l&&(n.defaultValue=""+l))}var ns=Array.isArray;function Sr(n,s,l,h){if(n=n.options,s){s={};for(var m=0;m<l.length;m++)s["$"+l[m]]=!0;for(l=0;l<n.length;l++)m=s.hasOwnProperty("$"+n[l].value),n[l].selected!==m&&(n[l].selected=m),m&&h&&(n[l].defaultSelected=!0)}else{for(l=""+Y(l),s=null,m=0;m<n.length;m++){if(n[m].value===l){n[m].selected=!0,h&&(n[m].defaultSelected=!0);return}s!==null||n[m].disabled||(s=n[m])}s!==null&&(s.selected=!0)}}function _a(n,s){if(s.dangerouslySetInnerHTML!=null)throw Error(e(91));return tt({},s,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function mu(n,s){var l=s.value;if(l==null){if(l=s.children,s=s.defaultValue,l!=null){if(s!=null)throw Error(e(92));if(ns(l)){if(1<l.length)throw Error(e(93));l=l[0]}s=l}s==null&&(s=""),l=s}n._wrapperState={initialValue:Y(l)}}function vu(n,s){var l=Y(s.value),h=Y(s.defaultValue);l!=null&&(l=""+l,l!==n.value&&(n.value=l),s.defaultValue==null&&n.defaultValue!==l&&(n.defaultValue=l)),h!=null&&(n.defaultValue=""+h)}function yu(n){var s=n.textContent;s===n._wrapperState.initialValue&&s!==""&&s!==null&&(n.value=s)}function wu(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ba(n,s){return n==null||n==="http://www.w3.org/1999/xhtml"?wu(s):n==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var ii,Au=(function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,l,h,m){MSApp.execUnsafeLocalFunction(function(){return n(s,l,h,m)})}:n})(function(n,s){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=s;else{for(ii=ii||document.createElement("div"),ii.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=ii.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;s.firstChild;)n.appendChild(s.firstChild)}});function rs(n,s){if(s){var l=n.firstChild;if(l&&l===n.lastChild&&l.nodeType===3){l.nodeValue=s;return}}n.textContent=s}var ss={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Sf=["Webkit","ms","Moz","O"];Object.keys(ss).forEach(function(n){Sf.forEach(function(s){s=s+n.charAt(0).toUpperCase()+n.substring(1),ss[s]=ss[n]})});function Su(n,s,l){return s==null||typeof s=="boolean"||s===""?"":l||typeof s!="number"||s===0||ss.hasOwnProperty(n)&&ss[n]?(""+s).trim():s+"px"}function Eu(n,s){n=n.style;for(var l in s)if(s.hasOwnProperty(l)){var h=l.indexOf("--")===0,m=Su(l,s[l],h);l==="float"&&(l="cssFloat"),h?n.setProperty(l,m):n[l]=m}}var Ef=tt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function za(n,s){if(s){if(Ef[n]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(e(137,n));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(e(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(e(61))}if(s.style!=null&&typeof s.style!="object")throw Error(e(62))}}function ja(n,s){if(n.indexOf("-")===-1)return typeof s.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ua=null;function Ha(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var $a=null,Er=null,xr=null;function xu(n){if(n=Ts(n)){if(typeof $a!="function")throw Error(e(280));var s=n.stateNode;s&&(s=Pi(s),$a(n.stateNode,n.type,s))}}function bu(n){Er?xr?xr.push(n):xr=[n]:Er=n}function Cu(){if(Er){var n=Er,s=xr;if(xr=Er=null,xu(n),s)for(n=0;n<s.length;n++)xu(s[n])}}function Tu(n,s){return n(s)}function Ru(){}var Va=!1;function Pu(n,s,l){if(Va)return n(s,l);Va=!0;try{return Tu(n,s,l)}finally{Va=!1,(Er!==null||xr!==null)&&(Ru(),Cu())}}function is(n,s){var l=n.stateNode;if(l===null)return null;var h=Pi(l);if(h===null)return null;l=h[s];t:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(n=n.type,h=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!h;break t;default:n=!1}if(n)return null;if(l&&typeof l!="function")throw Error(e(231,s,typeof l));return l}var Wa=!1;if(u)try{var as={};Object.defineProperty(as,"passive",{get:function(){Wa=!0}}),window.addEventListener("test",as,as),window.removeEventListener("test",as,as)}catch{Wa=!1}function xf(n,s,l,h,m,y,b,k,O){var z=Array.prototype.slice.call(arguments,3);try{s.apply(l,z)}catch(Q){this.onError(Q)}}var os=!1,ai=null,oi=!1,Ga=null,bf={onError:function(n){os=!0,ai=n}};function Cf(n,s,l,h,m,y,b,k,O){os=!1,ai=null,xf.apply(bf,arguments)}function Tf(n,s,l,h,m,y,b,k,O){if(Cf.apply(this,arguments),os){if(os){var z=ai;os=!1,ai=null}else throw Error(e(198));oi||(oi=!0,Ga=z)}}function qn(n){var s=n,l=n;if(n.alternate)for(;s.return;)s=s.return;else{n=s;do s=n,(s.flags&4098)!==0&&(l=s.return),n=s.return;while(n)}return s.tag===3?l:null}function Iu(n){if(n.tag===13){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function ku(n){if(qn(n)!==n)throw Error(e(188))}function Rf(n){var s=n.alternate;if(!s){if(s=qn(n),s===null)throw Error(e(188));return s!==n?null:n}for(var l=n,h=s;;){var m=l.return;if(m===null)break;var y=m.alternate;if(y===null){if(h=m.return,h!==null){l=h;continue}break}if(m.child===y.child){for(y=m.child;y;){if(y===l)return ku(m),n;if(y===h)return ku(m),s;y=y.sibling}throw Error(e(188))}if(l.return!==h.return)l=m,h=y;else{for(var b=!1,k=m.child;k;){if(k===l){b=!0,l=m,h=y;break}if(k===h){b=!0,h=m,l=y;break}k=k.sibling}if(!b){for(k=y.child;k;){if(k===l){b=!0,l=y,h=m;break}if(k===h){b=!0,h=y,l=m;break}k=k.sibling}if(!b)throw Error(e(189))}}if(l.alternate!==h)throw Error(e(190))}if(l.tag!==3)throw Error(e(188));return l.stateNode.current===l?n:s}function Mu(n){return n=Rf(n),n!==null?Ou(n):null}function Ou(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var s=Ou(n);if(s!==null)return s;n=n.sibling}return null}var Lu=t.unstable_scheduleCallback,Nu=t.unstable_cancelCallback,Pf=t.unstable_shouldYield,If=t.unstable_requestPaint,Xt=t.unstable_now,kf=t.unstable_getCurrentPriorityLevel,Xa=t.unstable_ImmediatePriority,Du=t.unstable_UserBlockingPriority,li=t.unstable_NormalPriority,Mf=t.unstable_LowPriority,Fu=t.unstable_IdlePriority,ui=null,an=null;function Of(n){if(an&&typeof an.onCommitFiberRoot=="function")try{an.onCommitFiberRoot(ui,n,void 0,(n.current.flags&128)===128)}catch{}}var Qe=Math.clz32?Math.clz32:Df,Lf=Math.log,Nf=Math.LN2;function Df(n){return n>>>=0,n===0?32:31-(Lf(n)/Nf|0)|0}var ci=64,hi=4194304;function ls(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function di(n,s){var l=n.pendingLanes;if(l===0)return 0;var h=0,m=n.suspendedLanes,y=n.pingedLanes,b=l&268435455;if(b!==0){var k=b&~m;k!==0?h=ls(k):(y&=b,y!==0&&(h=ls(y)))}else b=l&~m,b!==0?h=ls(b):y!==0&&(h=ls(y));if(h===0)return 0;if(s!==0&&s!==h&&(s&m)===0&&(m=h&-h,y=s&-s,m>=y||m===16&&(y&4194240)!==0))return s;if((h&4)!==0&&(h|=l&16),s=n.entangledLanes,s!==0)for(n=n.entanglements,s&=h;0<s;)l=31-Qe(s),m=1<<l,h|=n[l],s&=~m;return h}function Ff(n,s){switch(n){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function _f(n,s){for(var l=n.suspendedLanes,h=n.pingedLanes,m=n.expirationTimes,y=n.pendingLanes;0<y;){var b=31-Qe(y),k=1<<b,O=m[b];O===-1?((k&l)===0||(k&h)!==0)&&(m[b]=Ff(k,s)):O<=s&&(n.expiredLanes|=k),y&=~k}}function Ya(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function _u(){var n=ci;return ci<<=1,(ci&4194240)===0&&(ci=64),n}function Ka(n){for(var s=[],l=0;31>l;l++)s.push(n);return s}function us(n,s,l){n.pendingLanes|=s,s!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,s=31-Qe(s),n[s]=l}function Bf(n,s){var l=n.pendingLanes&~s;n.pendingLanes=s,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=s,n.mutableReadLanes&=s,n.entangledLanes&=s,s=n.entanglements;var h=n.eventTimes;for(n=n.expirationTimes;0<l;){var m=31-Qe(l),y=1<<m;s[m]=0,h[m]=-1,n[m]=-1,l&=~y}}function Qa(n,s){var l=n.entangledLanes|=s;for(n=n.entanglements;l;){var h=31-Qe(l),m=1<<h;m&s|n[h]&s&&(n[h]|=s),l&=~m}}var Lt=0;function Bu(n){return n&=-n,1<n?4<n?(n&268435455)!==0?16:536870912:4:1}var zu,Ja,ju,Uu,Hu,Za=!1,fi=[],kn=null,Mn=null,On=null,cs=new Map,hs=new Map,Ln=[],zf="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function $u(n,s){switch(n){case"focusin":case"focusout":kn=null;break;case"dragenter":case"dragleave":Mn=null;break;case"mouseover":case"mouseout":On=null;break;case"pointerover":case"pointerout":cs.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":hs.delete(s.pointerId)}}function ds(n,s,l,h,m,y){return n===null||n.nativeEvent!==y?(n={blockedOn:s,domEventName:l,eventSystemFlags:h,nativeEvent:y,targetContainers:[m]},s!==null&&(s=Ts(s),s!==null&&Ja(s)),n):(n.eventSystemFlags|=h,s=n.targetContainers,m!==null&&s.indexOf(m)===-1&&s.push(m),n)}function jf(n,s,l,h,m){switch(s){case"focusin":return kn=ds(kn,n,s,l,h,m),!0;case"dragenter":return Mn=ds(Mn,n,s,l,h,m),!0;case"mouseover":return On=ds(On,n,s,l,h,m),!0;case"pointerover":var y=m.pointerId;return cs.set(y,ds(cs.get(y)||null,n,s,l,h,m)),!0;case"gotpointercapture":return y=m.pointerId,hs.set(y,ds(hs.get(y)||null,n,s,l,h,m)),!0}return!1}function Vu(n){var s=tr(n.target);if(s!==null){var l=qn(s);if(l!==null){if(s=l.tag,s===13){if(s=Iu(l),s!==null){n.blockedOn=s,Hu(n.priority,function(){ju(l)});return}}else if(s===3&&l.stateNode.current.memoizedState.isDehydrated){n.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}n.blockedOn=null}function pi(n){if(n.blockedOn!==null)return!1;for(var s=n.targetContainers;0<s.length;){var l=to(n.domEventName,n.eventSystemFlags,s[0],n.nativeEvent);if(l===null){l=n.nativeEvent;var h=new l.constructor(l.type,l);Ua=h,l.target.dispatchEvent(h),Ua=null}else return s=Ts(l),s!==null&&Ja(s),n.blockedOn=l,!1;s.shift()}return!0}function Wu(n,s,l){pi(n)&&l.delete(s)}function Uf(){Za=!1,kn!==null&&pi(kn)&&(kn=null),Mn!==null&&pi(Mn)&&(Mn=null),On!==null&&pi(On)&&(On=null),cs.forEach(Wu),hs.forEach(Wu)}function fs(n,s){n.blockedOn===s&&(n.blockedOn=null,Za||(Za=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,Uf)))}function ps(n){function s(m){return fs(m,n)}if(0<fi.length){fs(fi[0],n);for(var l=1;l<fi.length;l++){var h=fi[l];h.blockedOn===n&&(h.blockedOn=null)}}for(kn!==null&&fs(kn,n),Mn!==null&&fs(Mn,n),On!==null&&fs(On,n),cs.forEach(s),hs.forEach(s),l=0;l<Ln.length;l++)h=Ln[l],h.blockedOn===n&&(h.blockedOn=null);for(;0<Ln.length&&(l=Ln[0],l.blockedOn===null);)Vu(l),l.blockedOn===null&&Ln.shift()}var br=P.ReactCurrentBatchConfig,gi=!0;function Hf(n,s,l,h){var m=Lt,y=br.transition;br.transition=null;try{Lt=1,qa(n,s,l,h)}finally{Lt=m,br.transition=y}}function $f(n,s,l,h){var m=Lt,y=br.transition;br.transition=null;try{Lt=4,qa(n,s,l,h)}finally{Lt=m,br.transition=y}}function qa(n,s,l,h){if(gi){var m=to(n,s,l,h);if(m===null)yo(n,s,h,mi,l),$u(n,h);else if(jf(m,n,s,l,h))h.stopPropagation();else if($u(n,h),s&4&&-1<zf.indexOf(n)){for(;m!==null;){var y=Ts(m);if(y!==null&&zu(y),y=to(n,s,l,h),y===null&&yo(n,s,h,mi,l),y===m)break;m=y}m!==null&&h.stopPropagation()}else yo(n,s,h,null,l)}}var mi=null;function to(n,s,l,h){if(mi=null,n=Ha(h),n=tr(n),n!==null)if(s=qn(n),s===null)n=null;else if(l=s.tag,l===13){if(n=Iu(s),n!==null)return n;n=null}else if(l===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;n=null}else s!==n&&(n=null);return mi=n,null}function Gu(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(kf()){case Xa:return 1;case Du:return 4;case li:case Mf:return 16;case Fu:return 536870912;default:return 16}default:return 16}}var Nn=null,eo=null,vi=null;function Xu(){if(vi)return vi;var n,s=eo,l=s.length,h,m="value"in Nn?Nn.value:Nn.textContent,y=m.length;for(n=0;n<l&&s[n]===m[n];n++);var b=l-n;for(h=1;h<=b&&s[l-h]===m[y-h];h++);return vi=m.slice(n,1<h?1-h:void 0)}function yi(n){var s=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&s===13&&(n=13)):n=s,n===10&&(n=13),32<=n||n===13?n:0}function wi(){return!0}function Yu(){return!1}function De(n){function s(l,h,m,y,b){this._reactName=l,this._targetInst=m,this.type=h,this.nativeEvent=y,this.target=b,this.currentTarget=null;for(var k in n)n.hasOwnProperty(k)&&(l=n[k],this[k]=l?l(y):y[k]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?wi:Yu,this.isPropagationStopped=Yu,this}return tt(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=wi)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=wi)},persist:function(){},isPersistent:wi}),s}var Cr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},no=De(Cr),gs=tt({},Cr,{view:0,detail:0}),Vf=De(gs),ro,so,ms,Ai=tt({},gs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ao,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==ms&&(ms&&n.type==="mousemove"?(ro=n.screenX-ms.screenX,so=n.screenY-ms.screenY):so=ro=0,ms=n),ro)},movementY:function(n){return"movementY"in n?n.movementY:so}}),Ku=De(Ai),Wf=tt({},Ai,{dataTransfer:0}),Gf=De(Wf),Xf=tt({},gs,{relatedTarget:0}),io=De(Xf),Yf=tt({},Cr,{animationName:0,elapsedTime:0,pseudoElement:0}),Kf=De(Yf),Qf=tt({},Cr,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),Jf=De(Qf),Zf=tt({},Cr,{data:0}),Qu=De(Zf),qf={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},tp={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ep={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function np(n){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(n):(n=ep[n])?!!s[n]:!1}function ao(){return np}var rp=tt({},gs,{key:function(n){if(n.key){var s=qf[n.key]||n.key;if(s!=="Unidentified")return s}return n.type==="keypress"?(n=yi(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?tp[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ao,charCode:function(n){return n.type==="keypress"?yi(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?yi(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),sp=De(rp),ip=tt({},Ai,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ju=De(ip),ap=tt({},gs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ao}),op=De(ap),lp=tt({},Cr,{propertyName:0,elapsedTime:0,pseudoElement:0}),up=De(lp),cp=tt({},Ai,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),hp=De(cp),dp=[9,13,27,32],oo=u&&"CompositionEvent"in window,vs=null;u&&"documentMode"in document&&(vs=document.documentMode);var fp=u&&"TextEvent"in window&&!vs,Zu=u&&(!oo||vs&&8<vs&&11>=vs),qu=" ",tc=!1;function ec(n,s){switch(n){case"keyup":return dp.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function nc(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Tr=!1;function pp(n,s){switch(n){case"compositionend":return nc(s);case"keypress":return s.which!==32?null:(tc=!0,qu);case"textInput":return n=s.data,n===qu&&tc?null:n;default:return null}}function gp(n,s){if(Tr)return n==="compositionend"||!oo&&ec(n,s)?(n=Xu(),vi=eo=Nn=null,Tr=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return Zu&&s.locale!=="ko"?null:s.data;default:return null}}var mp={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function rc(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s==="input"?!!mp[n.type]:s==="textarea"}function sc(n,s,l,h){bu(h),s=Ci(s,"onChange"),0<s.length&&(l=new no("onChange","change",null,l,h),n.push({event:l,listeners:s}))}var ys=null,ws=null;function vp(n){Ec(n,0)}function Si(n){var s=Mr(n);if(Ot(s))return n}function yp(n,s){if(n==="change")return s}var ic=!1;if(u){var lo;if(u){var uo="oninput"in document;if(!uo){var ac=document.createElement("div");ac.setAttribute("oninput","return;"),uo=typeof ac.oninput=="function"}lo=uo}else lo=!1;ic=lo&&(!document.documentMode||9<document.documentMode)}function oc(){ys&&(ys.detachEvent("onpropertychange",lc),ws=ys=null)}function lc(n){if(n.propertyName==="value"&&Si(ws)){var s=[];sc(s,ws,n,Ha(n)),Pu(vp,s)}}function wp(n,s,l){n==="focusin"?(oc(),ys=s,ws=l,ys.attachEvent("onpropertychange",lc)):n==="focusout"&&oc()}function Ap(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Si(ws)}function Sp(n,s){if(n==="click")return Si(s)}function Ep(n,s){if(n==="input"||n==="change")return Si(s)}function xp(n,s){return n===s&&(n!==0||1/n===1/s)||n!==n&&s!==s}var Je=typeof Object.is=="function"?Object.is:xp;function As(n,s){if(Je(n,s))return!0;if(typeof n!="object"||n===null||typeof s!="object"||s===null)return!1;var l=Object.keys(n),h=Object.keys(s);if(l.length!==h.length)return!1;for(h=0;h<l.length;h++){var m=l[h];if(!c.call(s,m)||!Je(n[m],s[m]))return!1}return!0}function uc(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function cc(n,s){var l=uc(n);n=0;for(var h;l;){if(l.nodeType===3){if(h=n+l.textContent.length,n<=s&&h>=s)return{node:l,offset:s-n};n=h}t:{for(;l;){if(l.nextSibling){l=l.nextSibling;break t}l=l.parentNode}l=void 0}l=uc(l)}}function hc(n,s){return n&&s?n===s?!0:n&&n.nodeType===3?!1:s&&s.nodeType===3?hc(n,s.parentNode):"contains"in n?n.contains(s):n.compareDocumentPosition?!!(n.compareDocumentPosition(s)&16):!1:!1}function dc(){for(var n=window,s=Mt();s instanceof n.HTMLIFrameElement;){try{var l=typeof s.contentWindow.location.href=="string"}catch{l=!1}if(l)n=s.contentWindow;else break;s=Mt(n.document)}return s}function co(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s&&(s==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||s==="textarea"||n.contentEditable==="true")}function bp(n){var s=dc(),l=n.focusedElem,h=n.selectionRange;if(s!==l&&l&&l.ownerDocument&&hc(l.ownerDocument.documentElement,l)){if(h!==null&&co(l)){if(s=h.start,n=h.end,n===void 0&&(n=s),"selectionStart"in l)l.selectionStart=s,l.selectionEnd=Math.min(n,l.value.length);else if(n=(s=l.ownerDocument||document)&&s.defaultView||window,n.getSelection){n=n.getSelection();var m=l.textContent.length,y=Math.min(h.start,m);h=h.end===void 0?y:Math.min(h.end,m),!n.extend&&y>h&&(m=h,h=y,y=m),m=cc(l,y);var b=cc(l,h);m&&b&&(n.rangeCount!==1||n.anchorNode!==m.node||n.anchorOffset!==m.offset||n.focusNode!==b.node||n.focusOffset!==b.offset)&&(s=s.createRange(),s.setStart(m.node,m.offset),n.removeAllRanges(),y>h?(n.addRange(s),n.extend(b.node,b.offset)):(s.setEnd(b.node,b.offset),n.addRange(s)))}}for(s=[],n=l;n=n.parentNode;)n.nodeType===1&&s.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof l.focus=="function"&&l.focus(),l=0;l<s.length;l++)n=s[l],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var Cp=u&&"documentMode"in document&&11>=document.documentMode,Rr=null,ho=null,Ss=null,fo=!1;function fc(n,s,l){var h=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;fo||Rr==null||Rr!==Mt(h)||(h=Rr,"selectionStart"in h&&co(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),Ss&&As(Ss,h)||(Ss=h,h=Ci(ho,"onSelect"),0<h.length&&(s=new no("onSelect","select",null,s,l),n.push({event:s,listeners:h}),s.target=Rr)))}function Ei(n,s){var l={};return l[n.toLowerCase()]=s.toLowerCase(),l["Webkit"+n]="webkit"+s,l["Moz"+n]="moz"+s,l}var Pr={animationend:Ei("Animation","AnimationEnd"),animationiteration:Ei("Animation","AnimationIteration"),animationstart:Ei("Animation","AnimationStart"),transitionend:Ei("Transition","TransitionEnd")},po={},pc={};u&&(pc=document.createElement("div").style,"AnimationEvent"in window||(delete Pr.animationend.animation,delete Pr.animationiteration.animation,delete Pr.animationstart.animation),"TransitionEvent"in window||delete Pr.transitionend.transition);function xi(n){if(po[n])return po[n];if(!Pr[n])return n;var s=Pr[n],l;for(l in s)if(s.hasOwnProperty(l)&&l in pc)return po[n]=s[l];return n}var gc=xi("animationend"),mc=xi("animationiteration"),vc=xi("animationstart"),yc=xi("transitionend"),wc=new Map,Ac="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Dn(n,s){wc.set(n,s),a(s,[n])}for(var go=0;go<Ac.length;go++){var mo=Ac[go],Tp=mo.toLowerCase(),Rp=mo[0].toUpperCase()+mo.slice(1);Dn(Tp,"on"+Rp)}Dn(gc,"onAnimationEnd"),Dn(mc,"onAnimationIteration"),Dn(vc,"onAnimationStart"),Dn("dblclick","onDoubleClick"),Dn("focusin","onFocus"),Dn("focusout","onBlur"),Dn(yc,"onTransitionEnd"),o("onMouseEnter",["mouseout","mouseover"]),o("onMouseLeave",["mouseout","mouseover"]),o("onPointerEnter",["pointerout","pointerover"]),o("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Es="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Pp=new Set("cancel close invalid load scroll toggle".split(" ").concat(Es));function Sc(n,s,l){var h=n.type||"unknown-event";n.currentTarget=l,Tf(h,s,void 0,n),n.currentTarget=null}function Ec(n,s){s=(s&4)!==0;for(var l=0;l<n.length;l++){var h=n[l],m=h.event;h=h.listeners;t:{var y=void 0;if(s)for(var b=h.length-1;0<=b;b--){var k=h[b],O=k.instance,z=k.currentTarget;if(k=k.listener,O!==y&&m.isPropagationStopped())break t;Sc(m,k,z),y=O}else for(b=0;b<h.length;b++){if(k=h[b],O=k.instance,z=k.currentTarget,k=k.listener,O!==y&&m.isPropagationStopped())break t;Sc(m,k,z),y=O}}}if(oi)throw n=Ga,oi=!1,Ga=null,n}function Ft(n,s){var l=s[bo];l===void 0&&(l=s[bo]=new Set);var h=n+"__bubble";l.has(h)||(xc(s,n,2,!1),l.add(h))}function vo(n,s,l){var h=0;s&&(h|=4),xc(l,n,h,s)}var bi="_reactListening"+Math.random().toString(36).slice(2);function xs(n){if(!n[bi]){n[bi]=!0,r.forEach(function(l){l!=="selectionchange"&&(Pp.has(l)||vo(l,!1,n),vo(l,!0,n))});var s=n.nodeType===9?n:n.ownerDocument;s===null||s[bi]||(s[bi]=!0,vo("selectionchange",!1,s))}}function xc(n,s,l,h){switch(Gu(s)){case 1:var m=Hf;break;case 4:m=$f;break;default:m=qa}l=m.bind(null,s,l,n),m=void 0,!Wa||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(m=!0),h?m!==void 0?n.addEventListener(s,l,{capture:!0,passive:m}):n.addEventListener(s,l,!0):m!==void 0?n.addEventListener(s,l,{passive:m}):n.addEventListener(s,l,!1)}function yo(n,s,l,h,m){var y=h;if((s&1)===0&&(s&2)===0&&h!==null)t:for(;;){if(h===null)return;var b=h.tag;if(b===3||b===4){var k=h.stateNode.containerInfo;if(k===m||k.nodeType===8&&k.parentNode===m)break;if(b===4)for(b=h.return;b!==null;){var O=b.tag;if((O===3||O===4)&&(O=b.stateNode.containerInfo,O===m||O.nodeType===8&&O.parentNode===m))return;b=b.return}for(;k!==null;){if(b=tr(k),b===null)return;if(O=b.tag,O===5||O===6){h=y=b;continue t}k=k.parentNode}}h=h.return}Pu(function(){var z=y,Q=Ha(l),Z=[];t:{var K=wc.get(n);if(K!==void 0){var it=no,ut=n;switch(n){case"keypress":if(yi(l)===0)break t;case"keydown":case"keyup":it=sp;break;case"focusin":ut="focus",it=io;break;case"focusout":ut="blur",it=io;break;case"beforeblur":case"afterblur":it=io;break;case"click":if(l.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":it=Ku;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":it=Gf;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":it=op;break;case gc:case mc:case vc:it=Kf;break;case yc:it=up;break;case"scroll":it=Vf;break;case"wheel":it=hp;break;case"copy":case"cut":case"paste":it=Jf;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":it=Ju}var ht=(s&4)!==0,Yt=!ht&&n==="scroll",D=ht?K!==null?K+"Capture":null:K;ht=[];for(var N=z,B;N!==null;){B=N;var et=B.stateNode;if(B.tag===5&&et!==null&&(B=et,D!==null&&(et=is(N,D),et!=null&&ht.push(bs(N,et,B)))),Yt)break;N=N.return}0<ht.length&&(K=new it(K,ut,null,l,Q),Z.push({event:K,listeners:ht}))}}if((s&7)===0){t:{if(K=n==="mouseover"||n==="pointerover",it=n==="mouseout"||n==="pointerout",K&&l!==Ua&&(ut=l.relatedTarget||l.fromElement)&&(tr(ut)||ut[yn]))break t;if((it||K)&&(K=Q.window===Q?Q:(K=Q.ownerDocument)?K.defaultView||K.parentWindow:window,it?(ut=l.relatedTarget||l.toElement,it=z,ut=ut?tr(ut):null,ut!==null&&(Yt=qn(ut),ut!==Yt||ut.tag!==5&&ut.tag!==6)&&(ut=null)):(it=null,ut=z),it!==ut)){if(ht=Ku,et="onMouseLeave",D="onMouseEnter",N="mouse",(n==="pointerout"||n==="pointerover")&&(ht=Ju,et="onPointerLeave",D="onPointerEnter",N="pointer"),Yt=it==null?K:Mr(it),B=ut==null?K:Mr(ut),K=new ht(et,N+"leave",it,l,Q),K.target=Yt,K.relatedTarget=B,et=null,tr(Q)===z&&(ht=new ht(D,N+"enter",ut,l,Q),ht.target=B,ht.relatedTarget=Yt,et=ht),Yt=et,it&&ut)e:{for(ht=it,D=ut,N=0,B=ht;B;B=Ir(B))N++;for(B=0,et=D;et;et=Ir(et))B++;for(;0<N-B;)ht=Ir(ht),N--;for(;0<B-N;)D=Ir(D),B--;for(;N--;){if(ht===D||D!==null&&ht===D.alternate)break e;ht=Ir(ht),D=Ir(D)}ht=null}else ht=null;it!==null&&bc(Z,K,it,ht,!1),ut!==null&&Yt!==null&&bc(Z,Yt,ut,ht,!0)}}t:{if(K=z?Mr(z):window,it=K.nodeName&&K.nodeName.toLowerCase(),it==="select"||it==="input"&&K.type==="file")var dt=yp;else if(rc(K))if(ic)dt=Ep;else{dt=Ap;var mt=wp}else(it=K.nodeName)&&it.toLowerCase()==="input"&&(K.type==="checkbox"||K.type==="radio")&&(dt=Sp);if(dt&&(dt=dt(n,z))){sc(Z,dt,l,Q);break t}mt&&mt(n,K,z),n==="focusout"&&(mt=K._wrapperState)&&mt.controlled&&K.type==="number"&&In(K,"number",K.value)}switch(mt=z?Mr(z):window,n){case"focusin":(rc(mt)||mt.contentEditable==="true")&&(Rr=mt,ho=z,Ss=null);break;case"focusout":Ss=ho=Rr=null;break;case"mousedown":fo=!0;break;case"contextmenu":case"mouseup":case"dragend":fo=!1,fc(Z,l,Q);break;case"selectionchange":if(Cp)break;case"keydown":case"keyup":fc(Z,l,Q)}var vt;if(oo)t:{switch(n){case"compositionstart":var Et="onCompositionStart";break t;case"compositionend":Et="onCompositionEnd";break t;case"compositionupdate":Et="onCompositionUpdate";break t}Et=void 0}else Tr?ec(n,l)&&(Et="onCompositionEnd"):n==="keydown"&&l.keyCode===229&&(Et="onCompositionStart");Et&&(Zu&&l.locale!=="ko"&&(Tr||Et!=="onCompositionStart"?Et==="onCompositionEnd"&&Tr&&(vt=Xu()):(Nn=Q,eo="value"in Nn?Nn.value:Nn.textContent,Tr=!0)),mt=Ci(z,Et),0<mt.length&&(Et=new Qu(Et,n,null,l,Q),Z.push({event:Et,listeners:mt}),vt?Et.data=vt:(vt=nc(l),vt!==null&&(Et.data=vt)))),(vt=fp?pp(n,l):gp(n,l))&&(z=Ci(z,"onBeforeInput"),0<z.length&&(Q=new Qu("onBeforeInput","beforeinput",null,l,Q),Z.push({event:Q,listeners:z}),Q.data=vt))}Ec(Z,s)})}function bs(n,s,l){return{instance:n,listener:s,currentTarget:l}}function Ci(n,s){for(var l=s+"Capture",h=[];n!==null;){var m=n,y=m.stateNode;m.tag===5&&y!==null&&(m=y,y=is(n,l),y!=null&&h.unshift(bs(n,y,m)),y=is(n,s),y!=null&&h.push(bs(n,y,m))),n=n.return}return h}function Ir(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function bc(n,s,l,h,m){for(var y=s._reactName,b=[];l!==null&&l!==h;){var k=l,O=k.alternate,z=k.stateNode;if(O!==null&&O===h)break;k.tag===5&&z!==null&&(k=z,m?(O=is(l,y),O!=null&&b.unshift(bs(l,O,k))):m||(O=is(l,y),O!=null&&b.push(bs(l,O,k)))),l=l.return}b.length!==0&&n.push({event:s,listeners:b})}var Ip=/\r\n?/g,kp=/\u0000|\uFFFD/g;function Cc(n){return(typeof n=="string"?n:""+n).replace(Ip,`
`).replace(kp,"")}function Ti(n,s,l){if(s=Cc(s),Cc(n)!==s&&l)throw Error(e(425))}function Ri(){}var wo=null,Ao=null;function So(n,s){return n==="textarea"||n==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Eo=typeof setTimeout=="function"?setTimeout:void 0,Mp=typeof clearTimeout=="function"?clearTimeout:void 0,Tc=typeof Promise=="function"?Promise:void 0,Op=typeof queueMicrotask=="function"?queueMicrotask:typeof Tc<"u"?function(n){return Tc.resolve(null).then(n).catch(Lp)}:Eo;function Lp(n){setTimeout(function(){throw n})}function xo(n,s){var l=s,h=0;do{var m=l.nextSibling;if(n.removeChild(l),m&&m.nodeType===8)if(l=m.data,l==="/$"){if(h===0){n.removeChild(m),ps(s);return}h--}else l!=="$"&&l!=="$?"&&l!=="$!"||h++;l=m}while(l);ps(s)}function Fn(n){for(;n!=null;n=n.nextSibling){var s=n.nodeType;if(s===1||s===3)break;if(s===8){if(s=n.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return n}function Rc(n){n=n.previousSibling;for(var s=0;n;){if(n.nodeType===8){var l=n.data;if(l==="$"||l==="$!"||l==="$?"){if(s===0)return n;s--}else l==="/$"&&s++}n=n.previousSibling}return null}var kr=Math.random().toString(36).slice(2),on="__reactFiber$"+kr,Cs="__reactProps$"+kr,yn="__reactContainer$"+kr,bo="__reactEvents$"+kr,Np="__reactListeners$"+kr,Dp="__reactHandles$"+kr;function tr(n){var s=n[on];if(s)return s;for(var l=n.parentNode;l;){if(s=l[yn]||l[on]){if(l=s.alternate,s.child!==null||l!==null&&l.child!==null)for(n=Rc(n);n!==null;){if(l=n[on])return l;n=Rc(n)}return s}n=l,l=n.parentNode}return null}function Ts(n){return n=n[on]||n[yn],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function Mr(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(e(33))}function Pi(n){return n[Cs]||null}var Co=[],Or=-1;function _n(n){return{current:n}}function _t(n){0>Or||(n.current=Co[Or],Co[Or]=null,Or--)}function Dt(n,s){Or++,Co[Or]=n.current,n.current=s}var Bn={},ge=_n(Bn),Te=_n(!1),er=Bn;function Lr(n,s){var l=n.type.contextTypes;if(!l)return Bn;var h=n.stateNode;if(h&&h.__reactInternalMemoizedUnmaskedChildContext===s)return h.__reactInternalMemoizedMaskedChildContext;var m={},y;for(y in l)m[y]=s[y];return h&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=s,n.__reactInternalMemoizedMaskedChildContext=m),m}function Re(n){return n=n.childContextTypes,n!=null}function Ii(){_t(Te),_t(ge)}function Pc(n,s,l){if(ge.current!==Bn)throw Error(e(168));Dt(ge,s),Dt(Te,l)}function Ic(n,s,l){var h=n.stateNode;if(s=s.childContextTypes,typeof h.getChildContext!="function")return l;h=h.getChildContext();for(var m in h)if(!(m in s))throw Error(e(108,H(n)||"Unknown",m));return tt({},l,h)}function ki(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||Bn,er=ge.current,Dt(ge,n),Dt(Te,Te.current),!0}function kc(n,s,l){var h=n.stateNode;if(!h)throw Error(e(169));l?(n=Ic(n,s,er),h.__reactInternalMemoizedMergedChildContext=n,_t(Te),_t(ge),Dt(ge,n)):_t(Te),Dt(Te,l)}var wn=null,Mi=!1,To=!1;function Mc(n){wn===null?wn=[n]:wn.push(n)}function Fp(n){Mi=!0,Mc(n)}function zn(){if(!To&&wn!==null){To=!0;var n=0,s=Lt;try{var l=wn;for(Lt=1;n<l.length;n++){var h=l[n];do h=h(!0);while(h!==null)}wn=null,Mi=!1}catch(m){throw wn!==null&&(wn=wn.slice(n+1)),Lu(Xa,zn),m}finally{Lt=s,To=!1}}return null}var Nr=[],Dr=0,Oi=null,Li=0,Ue=[],He=0,nr=null,An=1,Sn="";function rr(n,s){Nr[Dr++]=Li,Nr[Dr++]=Oi,Oi=n,Li=s}function Oc(n,s,l){Ue[He++]=An,Ue[He++]=Sn,Ue[He++]=nr,nr=n;var h=An;n=Sn;var m=32-Qe(h)-1;h&=~(1<<m),l+=1;var y=32-Qe(s)+m;if(30<y){var b=m-m%5;y=(h&(1<<b)-1).toString(32),h>>=b,m-=b,An=1<<32-Qe(s)+m|l<<m|h,Sn=y+n}else An=1<<y|l<<m|h,Sn=n}function Ro(n){n.return!==null&&(rr(n,1),Oc(n,1,0))}function Po(n){for(;n===Oi;)Oi=Nr[--Dr],Nr[Dr]=null,Li=Nr[--Dr],Nr[Dr]=null;for(;n===nr;)nr=Ue[--He],Ue[He]=null,Sn=Ue[--He],Ue[He]=null,An=Ue[--He],Ue[He]=null}var Fe=null,_e=null,zt=!1,Ze=null;function Lc(n,s){var l=Ge(5,null,null,0);l.elementType="DELETED",l.stateNode=s,l.return=n,s=n.deletions,s===null?(n.deletions=[l],n.flags|=16):s.push(l)}function Nc(n,s){switch(n.tag){case 5:var l=n.type;return s=s.nodeType!==1||l.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(n.stateNode=s,Fe=n,_e=Fn(s.firstChild),!0):!1;case 6:return s=n.pendingProps===""||s.nodeType!==3?null:s,s!==null?(n.stateNode=s,Fe=n,_e=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(l=nr!==null?{id:An,overflow:Sn}:null,n.memoizedState={dehydrated:s,treeContext:l,retryLane:1073741824},l=Ge(18,null,null,0),l.stateNode=s,l.return=n,n.child=l,Fe=n,_e=null,!0):!1;default:return!1}}function Io(n){return(n.mode&1)!==0&&(n.flags&128)===0}function ko(n){if(zt){var s=_e;if(s){var l=s;if(!Nc(n,s)){if(Io(n))throw Error(e(418));s=Fn(l.nextSibling);var h=Fe;s&&Nc(n,s)?Lc(h,l):(n.flags=n.flags&-4097|2,zt=!1,Fe=n)}}else{if(Io(n))throw Error(e(418));n.flags=n.flags&-4097|2,zt=!1,Fe=n}}}function Dc(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;Fe=n}function Ni(n){if(n!==Fe)return!1;if(!zt)return Dc(n),zt=!0,!1;var s;if((s=n.tag!==3)&&!(s=n.tag!==5)&&(s=n.type,s=s!=="head"&&s!=="body"&&!So(n.type,n.memoizedProps)),s&&(s=_e)){if(Io(n))throw Fc(),Error(e(418));for(;s;)Lc(n,s),s=Fn(s.nextSibling)}if(Dc(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(e(317));t:{for(n=n.nextSibling,s=0;n;){if(n.nodeType===8){var l=n.data;if(l==="/$"){if(s===0){_e=Fn(n.nextSibling);break t}s--}else l!=="$"&&l!=="$!"&&l!=="$?"||s++}n=n.nextSibling}_e=null}}else _e=Fe?Fn(n.stateNode.nextSibling):null;return!0}function Fc(){for(var n=_e;n;)n=Fn(n.nextSibling)}function Fr(){_e=Fe=null,zt=!1}function Mo(n){Ze===null?Ze=[n]:Ze.push(n)}var _p=P.ReactCurrentBatchConfig;function Rs(n,s,l){if(n=l.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(l._owner){if(l=l._owner,l){if(l.tag!==1)throw Error(e(309));var h=l.stateNode}if(!h)throw Error(e(147,n));var m=h,y=""+n;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===y?s.ref:(s=function(b){var k=m.refs;b===null?delete k[y]:k[y]=b},s._stringRef=y,s)}if(typeof n!="string")throw Error(e(284));if(!l._owner)throw Error(e(290,n))}return n}function Di(n,s){throw n=Object.prototype.toString.call(s),Error(e(31,n==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":n))}function _c(n){var s=n._init;return s(n._payload)}function Bc(n){function s(D,N){if(n){var B=D.deletions;B===null?(D.deletions=[N],D.flags|=16):B.push(N)}}function l(D,N){if(!n)return null;for(;N!==null;)s(D,N),N=N.sibling;return null}function h(D,N){for(D=new Map;N!==null;)N.key!==null?D.set(N.key,N):D.set(N.index,N),N=N.sibling;return D}function m(D,N){return D=Xn(D,N),D.index=0,D.sibling=null,D}function y(D,N,B){return D.index=B,n?(B=D.alternate,B!==null?(B=B.index,B<N?(D.flags|=2,N):B):(D.flags|=2,N)):(D.flags|=1048576,N)}function b(D){return n&&D.alternate===null&&(D.flags|=2),D}function k(D,N,B,et){return N===null||N.tag!==6?(N=El(B,D.mode,et),N.return=D,N):(N=m(N,B),N.return=D,N)}function O(D,N,B,et){var dt=B.type;return dt===M?Q(D,N,B.props.children,et,B.key):N!==null&&(N.elementType===dt||typeof dt=="object"&&dt!==null&&dt.$$typeof===X&&_c(dt)===N.type)?(et=m(N,B.props),et.ref=Rs(D,N,B),et.return=D,et):(et=ia(B.type,B.key,B.props,null,D.mode,et),et.ref=Rs(D,N,B),et.return=D,et)}function z(D,N,B,et){return N===null||N.tag!==4||N.stateNode.containerInfo!==B.containerInfo||N.stateNode.implementation!==B.implementation?(N=xl(B,D.mode,et),N.return=D,N):(N=m(N,B.children||[]),N.return=D,N)}function Q(D,N,B,et,dt){return N===null||N.tag!==7?(N=hr(B,D.mode,et,dt),N.return=D,N):(N=m(N,B),N.return=D,N)}function Z(D,N,B){if(typeof N=="string"&&N!==""||typeof N=="number")return N=El(""+N,D.mode,B),N.return=D,N;if(typeof N=="object"&&N!==null){switch(N.$$typeof){case T:return B=ia(N.type,N.key,N.props,null,D.mode,B),B.ref=Rs(D,null,N),B.return=D,B;case I:return N=xl(N,D.mode,B),N.return=D,N;case X:var et=N._init;return Z(D,et(N._payload),B)}if(ns(N)||nt(N))return N=hr(N,D.mode,B,null),N.return=D,N;Di(D,N)}return null}function K(D,N,B,et){var dt=N!==null?N.key:null;if(typeof B=="string"&&B!==""||typeof B=="number")return dt!==null?null:k(D,N,""+B,et);if(typeof B=="object"&&B!==null){switch(B.$$typeof){case T:return B.key===dt?O(D,N,B,et):null;case I:return B.key===dt?z(D,N,B,et):null;case X:return dt=B._init,K(D,N,dt(B._payload),et)}if(ns(B)||nt(B))return dt!==null?null:Q(D,N,B,et,null);Di(D,B)}return null}function it(D,N,B,et,dt){if(typeof et=="string"&&et!==""||typeof et=="number")return D=D.get(B)||null,k(N,D,""+et,dt);if(typeof et=="object"&&et!==null){switch(et.$$typeof){case T:return D=D.get(et.key===null?B:et.key)||null,O(N,D,et,dt);case I:return D=D.get(et.key===null?B:et.key)||null,z(N,D,et,dt);case X:var mt=et._init;return it(D,N,B,mt(et._payload),dt)}if(ns(et)||nt(et))return D=D.get(B)||null,Q(N,D,et,dt,null);Di(N,et)}return null}function ut(D,N,B,et){for(var dt=null,mt=null,vt=N,Et=N=0,le=null;vt!==null&&Et<B.length;Et++){vt.index>Et?(le=vt,vt=null):le=vt.sibling;var kt=K(D,vt,B[Et],et);if(kt===null){vt===null&&(vt=le);break}n&&vt&&kt.alternate===null&&s(D,vt),N=y(kt,N,Et),mt===null?dt=kt:mt.sibling=kt,mt=kt,vt=le}if(Et===B.length)return l(D,vt),zt&&rr(D,Et),dt;if(vt===null){for(;Et<B.length;Et++)vt=Z(D,B[Et],et),vt!==null&&(N=y(vt,N,Et),mt===null?dt=vt:mt.sibling=vt,mt=vt);return zt&&rr(D,Et),dt}for(vt=h(D,vt);Et<B.length;Et++)le=it(vt,D,Et,B[Et],et),le!==null&&(n&&le.alternate!==null&&vt.delete(le.key===null?Et:le.key),N=y(le,N,Et),mt===null?dt=le:mt.sibling=le,mt=le);return n&&vt.forEach(function(Yn){return s(D,Yn)}),zt&&rr(D,Et),dt}function ht(D,N,B,et){var dt=nt(B);if(typeof dt!="function")throw Error(e(150));if(B=dt.call(B),B==null)throw Error(e(151));for(var mt=dt=null,vt=N,Et=N=0,le=null,kt=B.next();vt!==null&&!kt.done;Et++,kt=B.next()){vt.index>Et?(le=vt,vt=null):le=vt.sibling;var Yn=K(D,vt,kt.value,et);if(Yn===null){vt===null&&(vt=le);break}n&&vt&&Yn.alternate===null&&s(D,vt),N=y(Yn,N,Et),mt===null?dt=Yn:mt.sibling=Yn,mt=Yn,vt=le}if(kt.done)return l(D,vt),zt&&rr(D,Et),dt;if(vt===null){for(;!kt.done;Et++,kt=B.next())kt=Z(D,kt.value,et),kt!==null&&(N=y(kt,N,Et),mt===null?dt=kt:mt.sibling=kt,mt=kt);return zt&&rr(D,Et),dt}for(vt=h(D,vt);!kt.done;Et++,kt=B.next())kt=it(vt,D,Et,kt.value,et),kt!==null&&(n&&kt.alternate!==null&&vt.delete(kt.key===null?Et:kt.key),N=y(kt,N,Et),mt===null?dt=kt:mt.sibling=kt,mt=kt);return n&&vt.forEach(function(mg){return s(D,mg)}),zt&&rr(D,Et),dt}function Yt(D,N,B,et){if(typeof B=="object"&&B!==null&&B.type===M&&B.key===null&&(B=B.props.children),typeof B=="object"&&B!==null){switch(B.$$typeof){case T:t:{for(var dt=B.key,mt=N;mt!==null;){if(mt.key===dt){if(dt=B.type,dt===M){if(mt.tag===7){l(D,mt.sibling),N=m(mt,B.props.children),N.return=D,D=N;break t}}else if(mt.elementType===dt||typeof dt=="object"&&dt!==null&&dt.$$typeof===X&&_c(dt)===mt.type){l(D,mt.sibling),N=m(mt,B.props),N.ref=Rs(D,mt,B),N.return=D,D=N;break t}l(D,mt);break}else s(D,mt);mt=mt.sibling}B.type===M?(N=hr(B.props.children,D.mode,et,B.key),N.return=D,D=N):(et=ia(B.type,B.key,B.props,null,D.mode,et),et.ref=Rs(D,N,B),et.return=D,D=et)}return b(D);case I:t:{for(mt=B.key;N!==null;){if(N.key===mt)if(N.tag===4&&N.stateNode.containerInfo===B.containerInfo&&N.stateNode.implementation===B.implementation){l(D,N.sibling),N=m(N,B.children||[]),N.return=D,D=N;break t}else{l(D,N);break}else s(D,N);N=N.sibling}N=xl(B,D.mode,et),N.return=D,D=N}return b(D);case X:return mt=B._init,Yt(D,N,mt(B._payload),et)}if(ns(B))return ut(D,N,B,et);if(nt(B))return ht(D,N,B,et);Di(D,B)}return typeof B=="string"&&B!==""||typeof B=="number"?(B=""+B,N!==null&&N.tag===6?(l(D,N.sibling),N=m(N,B),N.return=D,D=N):(l(D,N),N=El(B,D.mode,et),N.return=D,D=N),b(D)):l(D,N)}return Yt}var _r=Bc(!0),zc=Bc(!1),Fi=_n(null),_i=null,Br=null,Oo=null;function Lo(){Oo=Br=_i=null}function No(n){var s=Fi.current;_t(Fi),n._currentValue=s}function Do(n,s,l){for(;n!==null;){var h=n.alternate;if((n.childLanes&s)!==s?(n.childLanes|=s,h!==null&&(h.childLanes|=s)):h!==null&&(h.childLanes&s)!==s&&(h.childLanes|=s),n===l)break;n=n.return}}function zr(n,s){_i=n,Oo=Br=null,n=n.dependencies,n!==null&&n.firstContext!==null&&((n.lanes&s)!==0&&(Pe=!0),n.firstContext=null)}function $e(n){var s=n._currentValue;if(Oo!==n)if(n={context:n,memoizedValue:s,next:null},Br===null){if(_i===null)throw Error(e(308));Br=n,_i.dependencies={lanes:0,firstContext:n}}else Br=Br.next=n;return s}var sr=null;function Fo(n){sr===null?sr=[n]:sr.push(n)}function jc(n,s,l,h){var m=s.interleaved;return m===null?(l.next=l,Fo(s)):(l.next=m.next,m.next=l),s.interleaved=l,En(n,h)}function En(n,s){n.lanes|=s;var l=n.alternate;for(l!==null&&(l.lanes|=s),l=n,n=n.return;n!==null;)n.childLanes|=s,l=n.alternate,l!==null&&(l.childLanes|=s),l=n,n=n.return;return l.tag===3?l.stateNode:null}var jn=!1;function _o(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Uc(n,s){n=n.updateQueue,s.updateQueue===n&&(s.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function xn(n,s){return{eventTime:n,lane:s,tag:0,payload:null,callback:null,next:null}}function Un(n,s,l){var h=n.updateQueue;if(h===null)return null;if(h=h.shared,(It&2)!==0){var m=h.pending;return m===null?s.next=s:(s.next=m.next,m.next=s),h.pending=s,En(n,l)}return m=h.interleaved,m===null?(s.next=s,Fo(h)):(s.next=m.next,m.next=s),h.interleaved=s,En(n,l)}function Bi(n,s,l){if(s=s.updateQueue,s!==null&&(s=s.shared,(l&4194240)!==0)){var h=s.lanes;h&=n.pendingLanes,l|=h,s.lanes=l,Qa(n,l)}}function Hc(n,s){var l=n.updateQueue,h=n.alternate;if(h!==null&&(h=h.updateQueue,l===h)){var m=null,y=null;if(l=l.firstBaseUpdate,l!==null){do{var b={eventTime:l.eventTime,lane:l.lane,tag:l.tag,payload:l.payload,callback:l.callback,next:null};y===null?m=y=b:y=y.next=b,l=l.next}while(l!==null);y===null?m=y=s:y=y.next=s}else m=y=s;l={baseState:h.baseState,firstBaseUpdate:m,lastBaseUpdate:y,shared:h.shared,effects:h.effects},n.updateQueue=l;return}n=l.lastBaseUpdate,n===null?l.firstBaseUpdate=s:n.next=s,l.lastBaseUpdate=s}function zi(n,s,l,h){var m=n.updateQueue;jn=!1;var y=m.firstBaseUpdate,b=m.lastBaseUpdate,k=m.shared.pending;if(k!==null){m.shared.pending=null;var O=k,z=O.next;O.next=null,b===null?y=z:b.next=z,b=O;var Q=n.alternate;Q!==null&&(Q=Q.updateQueue,k=Q.lastBaseUpdate,k!==b&&(k===null?Q.firstBaseUpdate=z:k.next=z,Q.lastBaseUpdate=O))}if(y!==null){var Z=m.baseState;b=0,Q=z=O=null,k=y;do{var K=k.lane,it=k.eventTime;if((h&K)===K){Q!==null&&(Q=Q.next={eventTime:it,lane:0,tag:k.tag,payload:k.payload,callback:k.callback,next:null});t:{var ut=n,ht=k;switch(K=s,it=l,ht.tag){case 1:if(ut=ht.payload,typeof ut=="function"){Z=ut.call(it,Z,K);break t}Z=ut;break t;case 3:ut.flags=ut.flags&-65537|128;case 0:if(ut=ht.payload,K=typeof ut=="function"?ut.call(it,Z,K):ut,K==null)break t;Z=tt({},Z,K);break t;case 2:jn=!0}}k.callback!==null&&k.lane!==0&&(n.flags|=64,K=m.effects,K===null?m.effects=[k]:K.push(k))}else it={eventTime:it,lane:K,tag:k.tag,payload:k.payload,callback:k.callback,next:null},Q===null?(z=Q=it,O=Z):Q=Q.next=it,b|=K;if(k=k.next,k===null){if(k=m.shared.pending,k===null)break;K=k,k=K.next,K.next=null,m.lastBaseUpdate=K,m.shared.pending=null}}while(!0);if(Q===null&&(O=Z),m.baseState=O,m.firstBaseUpdate=z,m.lastBaseUpdate=Q,s=m.shared.interleaved,s!==null){m=s;do b|=m.lane,m=m.next;while(m!==s)}else y===null&&(m.shared.lanes=0);or|=b,n.lanes=b,n.memoizedState=Z}}function $c(n,s,l){if(n=s.effects,s.effects=null,n!==null)for(s=0;s<n.length;s++){var h=n[s],m=h.callback;if(m!==null){if(h.callback=null,h=l,typeof m!="function")throw Error(e(191,m));m.call(h)}}}var Ps={},ln=_n(Ps),Is=_n(Ps),ks=_n(Ps);function ir(n){if(n===Ps)throw Error(e(174));return n}function Bo(n,s){switch(Dt(ks,s),Dt(Is,n),Dt(ln,Ps),n=s.nodeType,n){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:Ba(null,"");break;default:n=n===8?s.parentNode:s,s=n.namespaceURI||null,n=n.tagName,s=Ba(s,n)}_t(ln),Dt(ln,s)}function jr(){_t(ln),_t(Is),_t(ks)}function Vc(n){ir(ks.current);var s=ir(ln.current),l=Ba(s,n.type);s!==l&&(Dt(Is,n),Dt(ln,l))}function zo(n){Is.current===n&&(_t(ln),_t(Is))}var Ht=_n(0);function ji(n){for(var s=n;s!==null;){if(s.tag===13){var l=s.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||l.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var jo=[];function Uo(){for(var n=0;n<jo.length;n++)jo[n]._workInProgressVersionPrimary=null;jo.length=0}var Ui=P.ReactCurrentDispatcher,Ho=P.ReactCurrentBatchConfig,ar=0,$t=null,ne=null,ae=null,Hi=!1,Ms=!1,Os=0,Bp=0;function me(){throw Error(e(321))}function $o(n,s){if(s===null)return!1;for(var l=0;l<s.length&&l<n.length;l++)if(!Je(n[l],s[l]))return!1;return!0}function Vo(n,s,l,h,m,y){if(ar=y,$t=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,Ui.current=n===null||n.memoizedState===null?Hp:$p,n=l(h,m),Ms){y=0;do{if(Ms=!1,Os=0,25<=y)throw Error(e(301));y+=1,ae=ne=null,s.updateQueue=null,Ui.current=Vp,n=l(h,m)}while(Ms)}if(Ui.current=Wi,s=ne!==null&&ne.next!==null,ar=0,ae=ne=$t=null,Hi=!1,s)throw Error(e(300));return n}function Wo(){var n=Os!==0;return Os=0,n}function un(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ae===null?$t.memoizedState=ae=n:ae=ae.next=n,ae}function Ve(){if(ne===null){var n=$t.alternate;n=n!==null?n.memoizedState:null}else n=ne.next;var s=ae===null?$t.memoizedState:ae.next;if(s!==null)ae=s,ne=n;else{if(n===null)throw Error(e(310));ne=n,n={memoizedState:ne.memoizedState,baseState:ne.baseState,baseQueue:ne.baseQueue,queue:ne.queue,next:null},ae===null?$t.memoizedState=ae=n:ae=ae.next=n}return ae}function Ls(n,s){return typeof s=="function"?s(n):s}function Go(n){var s=Ve(),l=s.queue;if(l===null)throw Error(e(311));l.lastRenderedReducer=n;var h=ne,m=h.baseQueue,y=l.pending;if(y!==null){if(m!==null){var b=m.next;m.next=y.next,y.next=b}h.baseQueue=m=y,l.pending=null}if(m!==null){y=m.next,h=h.baseState;var k=b=null,O=null,z=y;do{var Q=z.lane;if((ar&Q)===Q)O!==null&&(O=O.next={lane:0,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null}),h=z.hasEagerState?z.eagerState:n(h,z.action);else{var Z={lane:Q,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null};O===null?(k=O=Z,b=h):O=O.next=Z,$t.lanes|=Q,or|=Q}z=z.next}while(z!==null&&z!==y);O===null?b=h:O.next=k,Je(h,s.memoizedState)||(Pe=!0),s.memoizedState=h,s.baseState=b,s.baseQueue=O,l.lastRenderedState=h}if(n=l.interleaved,n!==null){m=n;do y=m.lane,$t.lanes|=y,or|=y,m=m.next;while(m!==n)}else m===null&&(l.lanes=0);return[s.memoizedState,l.dispatch]}function Xo(n){var s=Ve(),l=s.queue;if(l===null)throw Error(e(311));l.lastRenderedReducer=n;var h=l.dispatch,m=l.pending,y=s.memoizedState;if(m!==null){l.pending=null;var b=m=m.next;do y=n(y,b.action),b=b.next;while(b!==m);Je(y,s.memoizedState)||(Pe=!0),s.memoizedState=y,s.baseQueue===null&&(s.baseState=y),l.lastRenderedState=y}return[y,h]}function Wc(){}function Gc(n,s){var l=$t,h=Ve(),m=s(),y=!Je(h.memoizedState,m);if(y&&(h.memoizedState=m,Pe=!0),h=h.queue,Yo(Kc.bind(null,l,h,n),[n]),h.getSnapshot!==s||y||ae!==null&&ae.memoizedState.tag&1){if(l.flags|=2048,Ns(9,Yc.bind(null,l,h,m,s),void 0,null),oe===null)throw Error(e(349));(ar&30)!==0||Xc(l,s,m)}return m}function Xc(n,s,l){n.flags|=16384,n={getSnapshot:s,value:l},s=$t.updateQueue,s===null?(s={lastEffect:null,stores:null},$t.updateQueue=s,s.stores=[n]):(l=s.stores,l===null?s.stores=[n]:l.push(n))}function Yc(n,s,l,h){s.value=l,s.getSnapshot=h,Qc(s)&&Jc(n)}function Kc(n,s,l){return l(function(){Qc(s)&&Jc(n)})}function Qc(n){var s=n.getSnapshot;n=n.value;try{var l=s();return!Je(n,l)}catch{return!0}}function Jc(n){var s=En(n,1);s!==null&&nn(s,n,1,-1)}function Zc(n){var s=un();return typeof n=="function"&&(n=n()),s.memoizedState=s.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ls,lastRenderedState:n},s.queue=n,n=n.dispatch=Up.bind(null,$t,n),[s.memoizedState,n]}function Ns(n,s,l,h){return n={tag:n,create:s,destroy:l,deps:h,next:null},s=$t.updateQueue,s===null?(s={lastEffect:null,stores:null},$t.updateQueue=s,s.lastEffect=n.next=n):(l=s.lastEffect,l===null?s.lastEffect=n.next=n:(h=l.next,l.next=n,n.next=h,s.lastEffect=n)),n}function qc(){return Ve().memoizedState}function $i(n,s,l,h){var m=un();$t.flags|=n,m.memoizedState=Ns(1|s,l,void 0,h===void 0?null:h)}function Vi(n,s,l,h){var m=Ve();h=h===void 0?null:h;var y=void 0;if(ne!==null){var b=ne.memoizedState;if(y=b.destroy,h!==null&&$o(h,b.deps)){m.memoizedState=Ns(s,l,y,h);return}}$t.flags|=n,m.memoizedState=Ns(1|s,l,y,h)}function th(n,s){return $i(8390656,8,n,s)}function Yo(n,s){return Vi(2048,8,n,s)}function eh(n,s){return Vi(4,2,n,s)}function nh(n,s){return Vi(4,4,n,s)}function rh(n,s){if(typeof s=="function")return n=n(),s(n),function(){s(null)};if(s!=null)return n=n(),s.current=n,function(){s.current=null}}function sh(n,s,l){return l=l!=null?l.concat([n]):null,Vi(4,4,rh.bind(null,s,n),l)}function Ko(){}function ih(n,s){var l=Ve();s=s===void 0?null:s;var h=l.memoizedState;return h!==null&&s!==null&&$o(s,h[1])?h[0]:(l.memoizedState=[n,s],n)}function ah(n,s){var l=Ve();s=s===void 0?null:s;var h=l.memoizedState;return h!==null&&s!==null&&$o(s,h[1])?h[0]:(n=n(),l.memoizedState=[n,s],n)}function oh(n,s,l){return(ar&21)===0?(n.baseState&&(n.baseState=!1,Pe=!0),n.memoizedState=l):(Je(l,s)||(l=_u(),$t.lanes|=l,or|=l,n.baseState=!0),s)}function zp(n,s){var l=Lt;Lt=l!==0&&4>l?l:4,n(!0);var h=Ho.transition;Ho.transition={};try{n(!1),s()}finally{Lt=l,Ho.transition=h}}function lh(){return Ve().memoizedState}function jp(n,s,l){var h=Wn(n);if(l={lane:h,action:l,hasEagerState:!1,eagerState:null,next:null},uh(n))ch(s,l);else if(l=jc(n,s,l,h),l!==null){var m=Se();nn(l,n,h,m),hh(l,s,h)}}function Up(n,s,l){var h=Wn(n),m={lane:h,action:l,hasEagerState:!1,eagerState:null,next:null};if(uh(n))ch(s,m);else{var y=n.alternate;if(n.lanes===0&&(y===null||y.lanes===0)&&(y=s.lastRenderedReducer,y!==null))try{var b=s.lastRenderedState,k=y(b,l);if(m.hasEagerState=!0,m.eagerState=k,Je(k,b)){var O=s.interleaved;O===null?(m.next=m,Fo(s)):(m.next=O.next,O.next=m),s.interleaved=m;return}}catch{}finally{}l=jc(n,s,m,h),l!==null&&(m=Se(),nn(l,n,h,m),hh(l,s,h))}}function uh(n){var s=n.alternate;return n===$t||s!==null&&s===$t}function ch(n,s){Ms=Hi=!0;var l=n.pending;l===null?s.next=s:(s.next=l.next,l.next=s),n.pending=s}function hh(n,s,l){if((l&4194240)!==0){var h=s.lanes;h&=n.pendingLanes,l|=h,s.lanes=l,Qa(n,l)}}var Wi={readContext:$e,useCallback:me,useContext:me,useEffect:me,useImperativeHandle:me,useInsertionEffect:me,useLayoutEffect:me,useMemo:me,useReducer:me,useRef:me,useState:me,useDebugValue:me,useDeferredValue:me,useTransition:me,useMutableSource:me,useSyncExternalStore:me,useId:me,unstable_isNewReconciler:!1},Hp={readContext:$e,useCallback:function(n,s){return un().memoizedState=[n,s===void 0?null:s],n},useContext:$e,useEffect:th,useImperativeHandle:function(n,s,l){return l=l!=null?l.concat([n]):null,$i(4194308,4,rh.bind(null,s,n),l)},useLayoutEffect:function(n,s){return $i(4194308,4,n,s)},useInsertionEffect:function(n,s){return $i(4,2,n,s)},useMemo:function(n,s){var l=un();return s=s===void 0?null:s,n=n(),l.memoizedState=[n,s],n},useReducer:function(n,s,l){var h=un();return s=l!==void 0?l(s):s,h.memoizedState=h.baseState=s,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:s},h.queue=n,n=n.dispatch=jp.bind(null,$t,n),[h.memoizedState,n]},useRef:function(n){var s=un();return n={current:n},s.memoizedState=n},useState:Zc,useDebugValue:Ko,useDeferredValue:function(n){return un().memoizedState=n},useTransition:function(){var n=Zc(!1),s=n[0];return n=zp.bind(null,n[1]),un().memoizedState=n,[s,n]},useMutableSource:function(){},useSyncExternalStore:function(n,s,l){var h=$t,m=un();if(zt){if(l===void 0)throw Error(e(407));l=l()}else{if(l=s(),oe===null)throw Error(e(349));(ar&30)!==0||Xc(h,s,l)}m.memoizedState=l;var y={value:l,getSnapshot:s};return m.queue=y,th(Kc.bind(null,h,y,n),[n]),h.flags|=2048,Ns(9,Yc.bind(null,h,y,l,s),void 0,null),l},useId:function(){var n=un(),s=oe.identifierPrefix;if(zt){var l=Sn,h=An;l=(h&~(1<<32-Qe(h)-1)).toString(32)+l,s=":"+s+"R"+l,l=Os++,0<l&&(s+="H"+l.toString(32)),s+=":"}else l=Bp++,s=":"+s+"r"+l.toString(32)+":";return n.memoizedState=s},unstable_isNewReconciler:!1},$p={readContext:$e,useCallback:ih,useContext:$e,useEffect:Yo,useImperativeHandle:sh,useInsertionEffect:eh,useLayoutEffect:nh,useMemo:ah,useReducer:Go,useRef:qc,useState:function(){return Go(Ls)},useDebugValue:Ko,useDeferredValue:function(n){var s=Ve();return oh(s,ne.memoizedState,n)},useTransition:function(){var n=Go(Ls)[0],s=Ve().memoizedState;return[n,s]},useMutableSource:Wc,useSyncExternalStore:Gc,useId:lh,unstable_isNewReconciler:!1},Vp={readContext:$e,useCallback:ih,useContext:$e,useEffect:Yo,useImperativeHandle:sh,useInsertionEffect:eh,useLayoutEffect:nh,useMemo:ah,useReducer:Xo,useRef:qc,useState:function(){return Xo(Ls)},useDebugValue:Ko,useDeferredValue:function(n){var s=Ve();return ne===null?s.memoizedState=n:oh(s,ne.memoizedState,n)},useTransition:function(){var n=Xo(Ls)[0],s=Ve().memoizedState;return[n,s]},useMutableSource:Wc,useSyncExternalStore:Gc,useId:lh,unstable_isNewReconciler:!1};function qe(n,s){if(n&&n.defaultProps){s=tt({},s),n=n.defaultProps;for(var l in n)s[l]===void 0&&(s[l]=n[l]);return s}return s}function Qo(n,s,l,h){s=n.memoizedState,l=l(h,s),l=l==null?s:tt({},s,l),n.memoizedState=l,n.lanes===0&&(n.updateQueue.baseState=l)}var Gi={isMounted:function(n){return(n=n._reactInternals)?qn(n)===n:!1},enqueueSetState:function(n,s,l){n=n._reactInternals;var h=Se(),m=Wn(n),y=xn(h,m);y.payload=s,l!=null&&(y.callback=l),s=Un(n,y,m),s!==null&&(nn(s,n,m,h),Bi(s,n,m))},enqueueReplaceState:function(n,s,l){n=n._reactInternals;var h=Se(),m=Wn(n),y=xn(h,m);y.tag=1,y.payload=s,l!=null&&(y.callback=l),s=Un(n,y,m),s!==null&&(nn(s,n,m,h),Bi(s,n,m))},enqueueForceUpdate:function(n,s){n=n._reactInternals;var l=Se(),h=Wn(n),m=xn(l,h);m.tag=2,s!=null&&(m.callback=s),s=Un(n,m,h),s!==null&&(nn(s,n,h,l),Bi(s,n,h))}};function dh(n,s,l,h,m,y,b){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(h,y,b):s.prototype&&s.prototype.isPureReactComponent?!As(l,h)||!As(m,y):!0}function fh(n,s,l){var h=!1,m=Bn,y=s.contextType;return typeof y=="object"&&y!==null?y=$e(y):(m=Re(s)?er:ge.current,h=s.contextTypes,y=(h=h!=null)?Lr(n,m):Bn),s=new s(l,y),n.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=Gi,n.stateNode=s,s._reactInternals=n,h&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=m,n.__reactInternalMemoizedMaskedChildContext=y),s}function ph(n,s,l,h){n=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(l,h),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(l,h),s.state!==n&&Gi.enqueueReplaceState(s,s.state,null)}function Jo(n,s,l,h){var m=n.stateNode;m.props=l,m.state=n.memoizedState,m.refs={},_o(n);var y=s.contextType;typeof y=="object"&&y!==null?m.context=$e(y):(y=Re(s)?er:ge.current,m.context=Lr(n,y)),m.state=n.memoizedState,y=s.getDerivedStateFromProps,typeof y=="function"&&(Qo(n,s,y,l),m.state=n.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(s=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),s!==m.state&&Gi.enqueueReplaceState(m,m.state,null),zi(n,l,m,h),m.state=n.memoizedState),typeof m.componentDidMount=="function"&&(n.flags|=4194308)}function Ur(n,s){try{var l="",h=s;do l+=wt(h),h=h.return;while(h);var m=l}catch(y){m=`
Error generating stack: `+y.message+`
`+y.stack}return{value:n,source:s,stack:m,digest:null}}function Zo(n,s,l){return{value:n,source:null,stack:l??null,digest:s??null}}function qo(n,s){try{console.error(s.value)}catch(l){setTimeout(function(){throw l})}}var Wp=typeof WeakMap=="function"?WeakMap:Map;function gh(n,s,l){l=xn(-1,l),l.tag=3,l.payload={element:null};var h=s.value;return l.callback=function(){qi||(qi=!0,pl=h),qo(n,s)},l}function mh(n,s,l){l=xn(-1,l),l.tag=3;var h=n.type.getDerivedStateFromError;if(typeof h=="function"){var m=s.value;l.payload=function(){return h(m)},l.callback=function(){qo(n,s)}}var y=n.stateNode;return y!==null&&typeof y.componentDidCatch=="function"&&(l.callback=function(){qo(n,s),typeof h!="function"&&($n===null?$n=new Set([this]):$n.add(this));var b=s.stack;this.componentDidCatch(s.value,{componentStack:b!==null?b:""})}),l}function vh(n,s,l){var h=n.pingCache;if(h===null){h=n.pingCache=new Wp;var m=new Set;h.set(s,m)}else m=h.get(s),m===void 0&&(m=new Set,h.set(s,m));m.has(l)||(m.add(l),n=ig.bind(null,n,s,l),s.then(n,n))}function yh(n){do{var s;if((s=n.tag===13)&&(s=n.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return n;n=n.return}while(n!==null);return null}function wh(n,s,l,h,m){return(n.mode&1)===0?(n===s?n.flags|=65536:(n.flags|=128,l.flags|=131072,l.flags&=-52805,l.tag===1&&(l.alternate===null?l.tag=17:(s=xn(-1,1),s.tag=2,Un(l,s,1))),l.lanes|=1),n):(n.flags|=65536,n.lanes=m,n)}var Gp=P.ReactCurrentOwner,Pe=!1;function Ae(n,s,l,h){s.child=n===null?zc(s,null,l,h):_r(s,n.child,l,h)}function Ah(n,s,l,h,m){l=l.render;var y=s.ref;return zr(s,m),h=Vo(n,s,l,h,y,m),l=Wo(),n!==null&&!Pe?(s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~m,bn(n,s,m)):(zt&&l&&Ro(s),s.flags|=1,Ae(n,s,h,m),s.child)}function Sh(n,s,l,h,m){if(n===null){var y=l.type;return typeof y=="function"&&!Sl(y)&&y.defaultProps===void 0&&l.compare===null&&l.defaultProps===void 0?(s.tag=15,s.type=y,Eh(n,s,y,h,m)):(n=ia(l.type,null,h,s,s.mode,m),n.ref=s.ref,n.return=s,s.child=n)}if(y=n.child,(n.lanes&m)===0){var b=y.memoizedProps;if(l=l.compare,l=l!==null?l:As,l(b,h)&&n.ref===s.ref)return bn(n,s,m)}return s.flags|=1,n=Xn(y,h),n.ref=s.ref,n.return=s,s.child=n}function Eh(n,s,l,h,m){if(n!==null){var y=n.memoizedProps;if(As(y,h)&&n.ref===s.ref)if(Pe=!1,s.pendingProps=h=y,(n.lanes&m)!==0)(n.flags&131072)!==0&&(Pe=!0);else return s.lanes=n.lanes,bn(n,s,m)}return tl(n,s,l,h,m)}function xh(n,s,l){var h=s.pendingProps,m=h.children,y=n!==null?n.memoizedState:null;if(h.mode==="hidden")if((s.mode&1)===0)s.memoizedState={baseLanes:0,cachePool:null,transitions:null},Dt($r,Be),Be|=l;else{if((l&1073741824)===0)return n=y!==null?y.baseLanes|l:l,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:n,cachePool:null,transitions:null},s.updateQueue=null,Dt($r,Be),Be|=n,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},h=y!==null?y.baseLanes:l,Dt($r,Be),Be|=h}else y!==null?(h=y.baseLanes|l,s.memoizedState=null):h=l,Dt($r,Be),Be|=h;return Ae(n,s,m,l),s.child}function bh(n,s){var l=s.ref;(n===null&&l!==null||n!==null&&n.ref!==l)&&(s.flags|=512,s.flags|=2097152)}function tl(n,s,l,h,m){var y=Re(l)?er:ge.current;return y=Lr(s,y),zr(s,m),l=Vo(n,s,l,h,y,m),h=Wo(),n!==null&&!Pe?(s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~m,bn(n,s,m)):(zt&&h&&Ro(s),s.flags|=1,Ae(n,s,l,m),s.child)}function Ch(n,s,l,h,m){if(Re(l)){var y=!0;ki(s)}else y=!1;if(zr(s,m),s.stateNode===null)Yi(n,s),fh(s,l,h),Jo(s,l,h,m),h=!0;else if(n===null){var b=s.stateNode,k=s.memoizedProps;b.props=k;var O=b.context,z=l.contextType;typeof z=="object"&&z!==null?z=$e(z):(z=Re(l)?er:ge.current,z=Lr(s,z));var Q=l.getDerivedStateFromProps,Z=typeof Q=="function"||typeof b.getSnapshotBeforeUpdate=="function";Z||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(k!==h||O!==z)&&ph(s,b,h,z),jn=!1;var K=s.memoizedState;b.state=K,zi(s,h,b,m),O=s.memoizedState,k!==h||K!==O||Te.current||jn?(typeof Q=="function"&&(Qo(s,l,Q,h),O=s.memoizedState),(k=jn||dh(s,l,k,h,K,O,z))?(Z||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount()),typeof b.componentDidMount=="function"&&(s.flags|=4194308)):(typeof b.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=h,s.memoizedState=O),b.props=h,b.state=O,b.context=z,h=k):(typeof b.componentDidMount=="function"&&(s.flags|=4194308),h=!1)}else{b=s.stateNode,Uc(n,s),k=s.memoizedProps,z=s.type===s.elementType?k:qe(s.type,k),b.props=z,Z=s.pendingProps,K=b.context,O=l.contextType,typeof O=="object"&&O!==null?O=$e(O):(O=Re(l)?er:ge.current,O=Lr(s,O));var it=l.getDerivedStateFromProps;(Q=typeof it=="function"||typeof b.getSnapshotBeforeUpdate=="function")||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(k!==Z||K!==O)&&ph(s,b,h,O),jn=!1,K=s.memoizedState,b.state=K,zi(s,h,b,m);var ut=s.memoizedState;k!==Z||K!==ut||Te.current||jn?(typeof it=="function"&&(Qo(s,l,it,h),ut=s.memoizedState),(z=jn||dh(s,l,z,h,K,ut,O)||!1)?(Q||typeof b.UNSAFE_componentWillUpdate!="function"&&typeof b.componentWillUpdate!="function"||(typeof b.componentWillUpdate=="function"&&b.componentWillUpdate(h,ut,O),typeof b.UNSAFE_componentWillUpdate=="function"&&b.UNSAFE_componentWillUpdate(h,ut,O)),typeof b.componentDidUpdate=="function"&&(s.flags|=4),typeof b.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof b.componentDidUpdate!="function"||k===n.memoizedProps&&K===n.memoizedState||(s.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||k===n.memoizedProps&&K===n.memoizedState||(s.flags|=1024),s.memoizedProps=h,s.memoizedState=ut),b.props=h,b.state=ut,b.context=O,h=z):(typeof b.componentDidUpdate!="function"||k===n.memoizedProps&&K===n.memoizedState||(s.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||k===n.memoizedProps&&K===n.memoizedState||(s.flags|=1024),h=!1)}return el(n,s,l,h,y,m)}function el(n,s,l,h,m,y){bh(n,s);var b=(s.flags&128)!==0;if(!h&&!b)return m&&kc(s,l,!1),bn(n,s,y);h=s.stateNode,Gp.current=s;var k=b&&typeof l.getDerivedStateFromError!="function"?null:h.render();return s.flags|=1,n!==null&&b?(s.child=_r(s,n.child,null,y),s.child=_r(s,null,k,y)):Ae(n,s,k,y),s.memoizedState=h.state,m&&kc(s,l,!0),s.child}function Th(n){var s=n.stateNode;s.pendingContext?Pc(n,s.pendingContext,s.pendingContext!==s.context):s.context&&Pc(n,s.context,!1),Bo(n,s.containerInfo)}function Rh(n,s,l,h,m){return Fr(),Mo(m),s.flags|=256,Ae(n,s,l,h),s.child}var nl={dehydrated:null,treeContext:null,retryLane:0};function rl(n){return{baseLanes:n,cachePool:null,transitions:null}}function Ph(n,s,l){var h=s.pendingProps,m=Ht.current,y=!1,b=(s.flags&128)!==0,k;if((k=b)||(k=n!==null&&n.memoizedState===null?!1:(m&2)!==0),k?(y=!0,s.flags&=-129):(n===null||n.memoizedState!==null)&&(m|=1),Dt(Ht,m&1),n===null)return ko(s),n=s.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?((s.mode&1)===0?s.lanes=1:n.data==="$!"?s.lanes=8:s.lanes=1073741824,null):(b=h.children,n=h.fallback,y?(h=s.mode,y=s.child,b={mode:"hidden",children:b},(h&1)===0&&y!==null?(y.childLanes=0,y.pendingProps=b):y=aa(b,h,0,null),n=hr(n,h,l,null),y.return=s,n.return=s,y.sibling=n,s.child=y,s.child.memoizedState=rl(l),s.memoizedState=nl,n):sl(s,b));if(m=n.memoizedState,m!==null&&(k=m.dehydrated,k!==null))return Xp(n,s,b,h,k,m,l);if(y){y=h.fallback,b=s.mode,m=n.child,k=m.sibling;var O={mode:"hidden",children:h.children};return(b&1)===0&&s.child!==m?(h=s.child,h.childLanes=0,h.pendingProps=O,s.deletions=null):(h=Xn(m,O),h.subtreeFlags=m.subtreeFlags&14680064),k!==null?y=Xn(k,y):(y=hr(y,b,l,null),y.flags|=2),y.return=s,h.return=s,h.sibling=y,s.child=h,h=y,y=s.child,b=n.child.memoizedState,b=b===null?rl(l):{baseLanes:b.baseLanes|l,cachePool:null,transitions:b.transitions},y.memoizedState=b,y.childLanes=n.childLanes&~l,s.memoizedState=nl,h}return y=n.child,n=y.sibling,h=Xn(y,{mode:"visible",children:h.children}),(s.mode&1)===0&&(h.lanes=l),h.return=s,h.sibling=null,n!==null&&(l=s.deletions,l===null?(s.deletions=[n],s.flags|=16):l.push(n)),s.child=h,s.memoizedState=null,h}function sl(n,s){return s=aa({mode:"visible",children:s},n.mode,0,null),s.return=n,n.child=s}function Xi(n,s,l,h){return h!==null&&Mo(h),_r(s,n.child,null,l),n=sl(s,s.pendingProps.children),n.flags|=2,s.memoizedState=null,n}function Xp(n,s,l,h,m,y,b){if(l)return s.flags&256?(s.flags&=-257,h=Zo(Error(e(422))),Xi(n,s,b,h)):s.memoizedState!==null?(s.child=n.child,s.flags|=128,null):(y=h.fallback,m=s.mode,h=aa({mode:"visible",children:h.children},m,0,null),y=hr(y,m,b,null),y.flags|=2,h.return=s,y.return=s,h.sibling=y,s.child=h,(s.mode&1)!==0&&_r(s,n.child,null,b),s.child.memoizedState=rl(b),s.memoizedState=nl,y);if((s.mode&1)===0)return Xi(n,s,b,null);if(m.data==="$!"){if(h=m.nextSibling&&m.nextSibling.dataset,h)var k=h.dgst;return h=k,y=Error(e(419)),h=Zo(y,h,void 0),Xi(n,s,b,h)}if(k=(b&n.childLanes)!==0,Pe||k){if(h=oe,h!==null){switch(b&-b){case 4:m=2;break;case 16:m=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:m=32;break;case 536870912:m=268435456;break;default:m=0}m=(m&(h.suspendedLanes|b))!==0?0:m,m!==0&&m!==y.retryLane&&(y.retryLane=m,En(n,m),nn(h,n,m,-1))}return Al(),h=Zo(Error(e(421))),Xi(n,s,b,h)}return m.data==="$?"?(s.flags|=128,s.child=n.child,s=ag.bind(null,n),m._reactRetry=s,null):(n=y.treeContext,_e=Fn(m.nextSibling),Fe=s,zt=!0,Ze=null,n!==null&&(Ue[He++]=An,Ue[He++]=Sn,Ue[He++]=nr,An=n.id,Sn=n.overflow,nr=s),s=sl(s,h.children),s.flags|=4096,s)}function Ih(n,s,l){n.lanes|=s;var h=n.alternate;h!==null&&(h.lanes|=s),Do(n.return,s,l)}function il(n,s,l,h,m){var y=n.memoizedState;y===null?n.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:h,tail:l,tailMode:m}:(y.isBackwards=s,y.rendering=null,y.renderingStartTime=0,y.last=h,y.tail=l,y.tailMode=m)}function kh(n,s,l){var h=s.pendingProps,m=h.revealOrder,y=h.tail;if(Ae(n,s,h.children,l),h=Ht.current,(h&2)!==0)h=h&1|2,s.flags|=128;else{if(n!==null&&(n.flags&128)!==0)t:for(n=s.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&Ih(n,l,s);else if(n.tag===19)Ih(n,l,s);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===s)break t;for(;n.sibling===null;){if(n.return===null||n.return===s)break t;n=n.return}n.sibling.return=n.return,n=n.sibling}h&=1}if(Dt(Ht,h),(s.mode&1)===0)s.memoizedState=null;else switch(m){case"forwards":for(l=s.child,m=null;l!==null;)n=l.alternate,n!==null&&ji(n)===null&&(m=l),l=l.sibling;l=m,l===null?(m=s.child,s.child=null):(m=l.sibling,l.sibling=null),il(s,!1,m,l,y);break;case"backwards":for(l=null,m=s.child,s.child=null;m!==null;){if(n=m.alternate,n!==null&&ji(n)===null){s.child=m;break}n=m.sibling,m.sibling=l,l=m,m=n}il(s,!0,l,null,y);break;case"together":il(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function Yi(n,s){(s.mode&1)===0&&n!==null&&(n.alternate=null,s.alternate=null,s.flags|=2)}function bn(n,s,l){if(n!==null&&(s.dependencies=n.dependencies),or|=s.lanes,(l&s.childLanes)===0)return null;if(n!==null&&s.child!==n.child)throw Error(e(153));if(s.child!==null){for(n=s.child,l=Xn(n,n.pendingProps),s.child=l,l.return=s;n.sibling!==null;)n=n.sibling,l=l.sibling=Xn(n,n.pendingProps),l.return=s;l.sibling=null}return s.child}function Yp(n,s,l){switch(s.tag){case 3:Th(s),Fr();break;case 5:Vc(s);break;case 1:Re(s.type)&&ki(s);break;case 4:Bo(s,s.stateNode.containerInfo);break;case 10:var h=s.type._context,m=s.memoizedProps.value;Dt(Fi,h._currentValue),h._currentValue=m;break;case 13:if(h=s.memoizedState,h!==null)return h.dehydrated!==null?(Dt(Ht,Ht.current&1),s.flags|=128,null):(l&s.child.childLanes)!==0?Ph(n,s,l):(Dt(Ht,Ht.current&1),n=bn(n,s,l),n!==null?n.sibling:null);Dt(Ht,Ht.current&1);break;case 19:if(h=(l&s.childLanes)!==0,(n.flags&128)!==0){if(h)return kh(n,s,l);s.flags|=128}if(m=s.memoizedState,m!==null&&(m.rendering=null,m.tail=null,m.lastEffect=null),Dt(Ht,Ht.current),h)break;return null;case 22:case 23:return s.lanes=0,xh(n,s,l)}return bn(n,s,l)}var Mh,al,Oh,Lh;Mh=function(n,s){for(var l=s.child;l!==null;){if(l.tag===5||l.tag===6)n.appendChild(l.stateNode);else if(l.tag!==4&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===s)break;for(;l.sibling===null;){if(l.return===null||l.return===s)return;l=l.return}l.sibling.return=l.return,l=l.sibling}},al=function(){},Oh=function(n,s,l,h){var m=n.memoizedProps;if(m!==h){n=s.stateNode,ir(ln.current);var y=null;switch(l){case"input":m=pe(n,m),h=pe(n,h),y=[];break;case"select":m=tt({},m,{value:void 0}),h=tt({},h,{value:void 0}),y=[];break;case"textarea":m=_a(n,m),h=_a(n,h),y=[];break;default:typeof m.onClick!="function"&&typeof h.onClick=="function"&&(n.onclick=Ri)}za(l,h);var b;l=null;for(z in m)if(!h.hasOwnProperty(z)&&m.hasOwnProperty(z)&&m[z]!=null)if(z==="style"){var k=m[z];for(b in k)k.hasOwnProperty(b)&&(l||(l={}),l[b]="")}else z!=="dangerouslySetInnerHTML"&&z!=="children"&&z!=="suppressContentEditableWarning"&&z!=="suppressHydrationWarning"&&z!=="autoFocus"&&(i.hasOwnProperty(z)?y||(y=[]):(y=y||[]).push(z,null));for(z in h){var O=h[z];if(k=m?.[z],h.hasOwnProperty(z)&&O!==k&&(O!=null||k!=null))if(z==="style")if(k){for(b in k)!k.hasOwnProperty(b)||O&&O.hasOwnProperty(b)||(l||(l={}),l[b]="");for(b in O)O.hasOwnProperty(b)&&k[b]!==O[b]&&(l||(l={}),l[b]=O[b])}else l||(y||(y=[]),y.push(z,l)),l=O;else z==="dangerouslySetInnerHTML"?(O=O?O.__html:void 0,k=k?k.__html:void 0,O!=null&&k!==O&&(y=y||[]).push(z,O)):z==="children"?typeof O!="string"&&typeof O!="number"||(y=y||[]).push(z,""+O):z!=="suppressContentEditableWarning"&&z!=="suppressHydrationWarning"&&(i.hasOwnProperty(z)?(O!=null&&z==="onScroll"&&Ft("scroll",n),y||k===O||(y=[])):(y=y||[]).push(z,O))}l&&(y=y||[]).push("style",l);var z=y;(s.updateQueue=z)&&(s.flags|=4)}},Lh=function(n,s,l,h){l!==h&&(s.flags|=4)};function Ds(n,s){if(!zt)switch(n.tailMode){case"hidden":s=n.tail;for(var l=null;s!==null;)s.alternate!==null&&(l=s),s=s.sibling;l===null?n.tail=null:l.sibling=null;break;case"collapsed":l=n.tail;for(var h=null;l!==null;)l.alternate!==null&&(h=l),l=l.sibling;h===null?s||n.tail===null?n.tail=null:n.tail.sibling=null:h.sibling=null}}function ve(n){var s=n.alternate!==null&&n.alternate.child===n.child,l=0,h=0;if(s)for(var m=n.child;m!==null;)l|=m.lanes|m.childLanes,h|=m.subtreeFlags&14680064,h|=m.flags&14680064,m.return=n,m=m.sibling;else for(m=n.child;m!==null;)l|=m.lanes|m.childLanes,h|=m.subtreeFlags,h|=m.flags,m.return=n,m=m.sibling;return n.subtreeFlags|=h,n.childLanes=l,s}function Kp(n,s,l){var h=s.pendingProps;switch(Po(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ve(s),null;case 1:return Re(s.type)&&Ii(),ve(s),null;case 3:return h=s.stateNode,jr(),_t(Te),_t(ge),Uo(),h.pendingContext&&(h.context=h.pendingContext,h.pendingContext=null),(n===null||n.child===null)&&(Ni(s)?s.flags|=4:n===null||n.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Ze!==null&&(vl(Ze),Ze=null))),al(n,s),ve(s),null;case 5:zo(s);var m=ir(ks.current);if(l=s.type,n!==null&&s.stateNode!=null)Oh(n,s,l,h,m),n.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!h){if(s.stateNode===null)throw Error(e(166));return ve(s),null}if(n=ir(ln.current),Ni(s)){h=s.stateNode,l=s.type;var y=s.memoizedProps;switch(h[on]=s,h[Cs]=y,n=(s.mode&1)!==0,l){case"dialog":Ft("cancel",h),Ft("close",h);break;case"iframe":case"object":case"embed":Ft("load",h);break;case"video":case"audio":for(m=0;m<Es.length;m++)Ft(Es[m],h);break;case"source":Ft("error",h);break;case"img":case"image":case"link":Ft("error",h),Ft("load",h);break;case"details":Ft("toggle",h);break;case"input":ie(h,y),Ft("invalid",h);break;case"select":h._wrapperState={wasMultiple:!!y.multiple},Ft("invalid",h);break;case"textarea":mu(h,y),Ft("invalid",h)}za(l,y),m=null;for(var b in y)if(y.hasOwnProperty(b)){var k=y[b];b==="children"?typeof k=="string"?h.textContent!==k&&(y.suppressHydrationWarning!==!0&&Ti(h.textContent,k,n),m=["children",k]):typeof k=="number"&&h.textContent!==""+k&&(y.suppressHydrationWarning!==!0&&Ti(h.textContent,k,n),m=["children",""+k]):i.hasOwnProperty(b)&&k!=null&&b==="onScroll"&&Ft("scroll",h)}switch(l){case"input":ft(h),Ar(h,y,!0);break;case"textarea":ft(h),yu(h);break;case"select":case"option":break;default:typeof y.onClick=="function"&&(h.onclick=Ri)}h=m,s.updateQueue=h,h!==null&&(s.flags|=4)}else{b=m.nodeType===9?m:m.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=wu(l)),n==="http://www.w3.org/1999/xhtml"?l==="script"?(n=b.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof h.is=="string"?n=b.createElement(l,{is:h.is}):(n=b.createElement(l),l==="select"&&(b=n,h.multiple?b.multiple=!0:h.size&&(b.size=h.size))):n=b.createElementNS(n,l),n[on]=s,n[Cs]=h,Mh(n,s,!1,!1),s.stateNode=n;t:{switch(b=ja(l,h),l){case"dialog":Ft("cancel",n),Ft("close",n),m=h;break;case"iframe":case"object":case"embed":Ft("load",n),m=h;break;case"video":case"audio":for(m=0;m<Es.length;m++)Ft(Es[m],n);m=h;break;case"source":Ft("error",n),m=h;break;case"img":case"image":case"link":Ft("error",n),Ft("load",n),m=h;break;case"details":Ft("toggle",n),m=h;break;case"input":ie(n,h),m=pe(n,h),Ft("invalid",n);break;case"option":m=h;break;case"select":n._wrapperState={wasMultiple:!!h.multiple},m=tt({},h,{value:void 0}),Ft("invalid",n);break;case"textarea":mu(n,h),m=_a(n,h),Ft("invalid",n);break;default:m=h}za(l,m),k=m;for(y in k)if(k.hasOwnProperty(y)){var O=k[y];y==="style"?Eu(n,O):y==="dangerouslySetInnerHTML"?(O=O?O.__html:void 0,O!=null&&Au(n,O)):y==="children"?typeof O=="string"?(l!=="textarea"||O!=="")&&rs(n,O):typeof O=="number"&&rs(n,""+O):y!=="suppressContentEditableWarning"&&y!=="suppressHydrationWarning"&&y!=="autoFocus"&&(i.hasOwnProperty(y)?O!=null&&y==="onScroll"&&Ft("scroll",n):O!=null&&C(n,y,O,b))}switch(l){case"input":ft(n),Ar(n,h,!1);break;case"textarea":ft(n),yu(n);break;case"option":h.value!=null&&n.setAttribute("value",""+Y(h.value));break;case"select":n.multiple=!!h.multiple,y=h.value,y!=null?Sr(n,!!h.multiple,y,!1):h.defaultValue!=null&&Sr(n,!!h.multiple,h.defaultValue,!0);break;default:typeof m.onClick=="function"&&(n.onclick=Ri)}switch(l){case"button":case"input":case"select":case"textarea":h=!!h.autoFocus;break t;case"img":h=!0;break t;default:h=!1}}h&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return ve(s),null;case 6:if(n&&s.stateNode!=null)Lh(n,s,n.memoizedProps,h);else{if(typeof h!="string"&&s.stateNode===null)throw Error(e(166));if(l=ir(ks.current),ir(ln.current),Ni(s)){if(h=s.stateNode,l=s.memoizedProps,h[on]=s,(y=h.nodeValue!==l)&&(n=Fe,n!==null))switch(n.tag){case 3:Ti(h.nodeValue,l,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&Ti(h.nodeValue,l,(n.mode&1)!==0)}y&&(s.flags|=4)}else h=(l.nodeType===9?l:l.ownerDocument).createTextNode(h),h[on]=s,s.stateNode=h}return ve(s),null;case 13:if(_t(Ht),h=s.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(zt&&_e!==null&&(s.mode&1)!==0&&(s.flags&128)===0)Fc(),Fr(),s.flags|=98560,y=!1;else if(y=Ni(s),h!==null&&h.dehydrated!==null){if(n===null){if(!y)throw Error(e(318));if(y=s.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(e(317));y[on]=s}else Fr(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;ve(s),y=!1}else Ze!==null&&(vl(Ze),Ze=null),y=!0;if(!y)return s.flags&65536?s:null}return(s.flags&128)!==0?(s.lanes=l,s):(h=h!==null,h!==(n!==null&&n.memoizedState!==null)&&h&&(s.child.flags|=8192,(s.mode&1)!==0&&(n===null||(Ht.current&1)!==0?re===0&&(re=3):Al())),s.updateQueue!==null&&(s.flags|=4),ve(s),null);case 4:return jr(),al(n,s),n===null&&xs(s.stateNode.containerInfo),ve(s),null;case 10:return No(s.type._context),ve(s),null;case 17:return Re(s.type)&&Ii(),ve(s),null;case 19:if(_t(Ht),y=s.memoizedState,y===null)return ve(s),null;if(h=(s.flags&128)!==0,b=y.rendering,b===null)if(h)Ds(y,!1);else{if(re!==0||n!==null&&(n.flags&128)!==0)for(n=s.child;n!==null;){if(b=ji(n),b!==null){for(s.flags|=128,Ds(y,!1),h=b.updateQueue,h!==null&&(s.updateQueue=h,s.flags|=4),s.subtreeFlags=0,h=l,l=s.child;l!==null;)y=l,n=h,y.flags&=14680066,b=y.alternate,b===null?(y.childLanes=0,y.lanes=n,y.child=null,y.subtreeFlags=0,y.memoizedProps=null,y.memoizedState=null,y.updateQueue=null,y.dependencies=null,y.stateNode=null):(y.childLanes=b.childLanes,y.lanes=b.lanes,y.child=b.child,y.subtreeFlags=0,y.deletions=null,y.memoizedProps=b.memoizedProps,y.memoizedState=b.memoizedState,y.updateQueue=b.updateQueue,y.type=b.type,n=b.dependencies,y.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),l=l.sibling;return Dt(Ht,Ht.current&1|2),s.child}n=n.sibling}y.tail!==null&&Xt()>Vr&&(s.flags|=128,h=!0,Ds(y,!1),s.lanes=4194304)}else{if(!h)if(n=ji(b),n!==null){if(s.flags|=128,h=!0,l=n.updateQueue,l!==null&&(s.updateQueue=l,s.flags|=4),Ds(y,!0),y.tail===null&&y.tailMode==="hidden"&&!b.alternate&&!zt)return ve(s),null}else 2*Xt()-y.renderingStartTime>Vr&&l!==1073741824&&(s.flags|=128,h=!0,Ds(y,!1),s.lanes=4194304);y.isBackwards?(b.sibling=s.child,s.child=b):(l=y.last,l!==null?l.sibling=b:s.child=b,y.last=b)}return y.tail!==null?(s=y.tail,y.rendering=s,y.tail=s.sibling,y.renderingStartTime=Xt(),s.sibling=null,l=Ht.current,Dt(Ht,h?l&1|2:l&1),s):(ve(s),null);case 22:case 23:return wl(),h=s.memoizedState!==null,n!==null&&n.memoizedState!==null!==h&&(s.flags|=8192),h&&(s.mode&1)!==0?(Be&1073741824)!==0&&(ve(s),s.subtreeFlags&6&&(s.flags|=8192)):ve(s),null;case 24:return null;case 25:return null}throw Error(e(156,s.tag))}function Qp(n,s){switch(Po(s),s.tag){case 1:return Re(s.type)&&Ii(),n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 3:return jr(),_t(Te),_t(ge),Uo(),n=s.flags,(n&65536)!==0&&(n&128)===0?(s.flags=n&-65537|128,s):null;case 5:return zo(s),null;case 13:if(_t(Ht),n=s.memoizedState,n!==null&&n.dehydrated!==null){if(s.alternate===null)throw Error(e(340));Fr()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 19:return _t(Ht),null;case 4:return jr(),null;case 10:return No(s.type._context),null;case 22:case 23:return wl(),null;case 24:return null;default:return null}}var Ki=!1,ye=!1,Jp=typeof WeakSet=="function"?WeakSet:Set,ot=null;function Hr(n,s){var l=n.ref;if(l!==null)if(typeof l=="function")try{l(null)}catch(h){Wt(n,s,h)}else l.current=null}function ol(n,s,l){try{l()}catch(h){Wt(n,s,h)}}var Nh=!1;function Zp(n,s){if(wo=gi,n=dc(),co(n)){if("selectionStart"in n)var l={start:n.selectionStart,end:n.selectionEnd};else t:{l=(l=n.ownerDocument)&&l.defaultView||window;var h=l.getSelection&&l.getSelection();if(h&&h.rangeCount!==0){l=h.anchorNode;var m=h.anchorOffset,y=h.focusNode;h=h.focusOffset;try{l.nodeType,y.nodeType}catch{l=null;break t}var b=0,k=-1,O=-1,z=0,Q=0,Z=n,K=null;e:for(;;){for(var it;Z!==l||m!==0&&Z.nodeType!==3||(k=b+m),Z!==y||h!==0&&Z.nodeType!==3||(O=b+h),Z.nodeType===3&&(b+=Z.nodeValue.length),(it=Z.firstChild)!==null;)K=Z,Z=it;for(;;){if(Z===n)break e;if(K===l&&++z===m&&(k=b),K===y&&++Q===h&&(O=b),(it=Z.nextSibling)!==null)break;Z=K,K=Z.parentNode}Z=it}l=k===-1||O===-1?null:{start:k,end:O}}else l=null}l=l||{start:0,end:0}}else l=null;for(Ao={focusedElem:n,selectionRange:l},gi=!1,ot=s;ot!==null;)if(s=ot,n=s.child,(s.subtreeFlags&1028)!==0&&n!==null)n.return=s,ot=n;else for(;ot!==null;){s=ot;try{var ut=s.alternate;if((s.flags&1024)!==0)switch(s.tag){case 0:case 11:case 15:break;case 1:if(ut!==null){var ht=ut.memoizedProps,Yt=ut.memoizedState,D=s.stateNode,N=D.getSnapshotBeforeUpdate(s.elementType===s.type?ht:qe(s.type,ht),Yt);D.__reactInternalSnapshotBeforeUpdate=N}break;case 3:var B=s.stateNode.containerInfo;B.nodeType===1?B.textContent="":B.nodeType===9&&B.documentElement&&B.removeChild(B.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(e(163))}}catch(et){Wt(s,s.return,et)}if(n=s.sibling,n!==null){n.return=s.return,ot=n;break}ot=s.return}return ut=Nh,Nh=!1,ut}function Fs(n,s,l){var h=s.updateQueue;if(h=h!==null?h.lastEffect:null,h!==null){var m=h=h.next;do{if((m.tag&n)===n){var y=m.destroy;m.destroy=void 0,y!==void 0&&ol(s,l,y)}m=m.next}while(m!==h)}}function Qi(n,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var l=s=s.next;do{if((l.tag&n)===n){var h=l.create;l.destroy=h()}l=l.next}while(l!==s)}}function ll(n){var s=n.ref;if(s!==null){var l=n.stateNode;switch(n.tag){case 5:n=l;break;default:n=l}typeof s=="function"?s(n):s.current=n}}function Dh(n){var s=n.alternate;s!==null&&(n.alternate=null,Dh(s)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(s=n.stateNode,s!==null&&(delete s[on],delete s[Cs],delete s[bo],delete s[Np],delete s[Dp])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function Fh(n){return n.tag===5||n.tag===3||n.tag===4}function _h(n){t:for(;;){for(;n.sibling===null;){if(n.return===null||Fh(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue t;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function ul(n,s,l){var h=n.tag;if(h===5||h===6)n=n.stateNode,s?l.nodeType===8?l.parentNode.insertBefore(n,s):l.insertBefore(n,s):(l.nodeType===8?(s=l.parentNode,s.insertBefore(n,l)):(s=l,s.appendChild(n)),l=l._reactRootContainer,l!=null||s.onclick!==null||(s.onclick=Ri));else if(h!==4&&(n=n.child,n!==null))for(ul(n,s,l),n=n.sibling;n!==null;)ul(n,s,l),n=n.sibling}function cl(n,s,l){var h=n.tag;if(h===5||h===6)n=n.stateNode,s?l.insertBefore(n,s):l.appendChild(n);else if(h!==4&&(n=n.child,n!==null))for(cl(n,s,l),n=n.sibling;n!==null;)cl(n,s,l),n=n.sibling}var ue=null,tn=!1;function Hn(n,s,l){for(l=l.child;l!==null;)Bh(n,s,l),l=l.sibling}function Bh(n,s,l){if(an&&typeof an.onCommitFiberUnmount=="function")try{an.onCommitFiberUnmount(ui,l)}catch{}switch(l.tag){case 5:ye||Hr(l,s);case 6:var h=ue,m=tn;ue=null,Hn(n,s,l),ue=h,tn=m,ue!==null&&(tn?(n=ue,l=l.stateNode,n.nodeType===8?n.parentNode.removeChild(l):n.removeChild(l)):ue.removeChild(l.stateNode));break;case 18:ue!==null&&(tn?(n=ue,l=l.stateNode,n.nodeType===8?xo(n.parentNode,l):n.nodeType===1&&xo(n,l),ps(n)):xo(ue,l.stateNode));break;case 4:h=ue,m=tn,ue=l.stateNode.containerInfo,tn=!0,Hn(n,s,l),ue=h,tn=m;break;case 0:case 11:case 14:case 15:if(!ye&&(h=l.updateQueue,h!==null&&(h=h.lastEffect,h!==null))){m=h=h.next;do{var y=m,b=y.destroy;y=y.tag,b!==void 0&&((y&2)!==0||(y&4)!==0)&&ol(l,s,b),m=m.next}while(m!==h)}Hn(n,s,l);break;case 1:if(!ye&&(Hr(l,s),h=l.stateNode,typeof h.componentWillUnmount=="function"))try{h.props=l.memoizedProps,h.state=l.memoizedState,h.componentWillUnmount()}catch(k){Wt(l,s,k)}Hn(n,s,l);break;case 21:Hn(n,s,l);break;case 22:l.mode&1?(ye=(h=ye)||l.memoizedState!==null,Hn(n,s,l),ye=h):Hn(n,s,l);break;default:Hn(n,s,l)}}function zh(n){var s=n.updateQueue;if(s!==null){n.updateQueue=null;var l=n.stateNode;l===null&&(l=n.stateNode=new Jp),s.forEach(function(h){var m=og.bind(null,n,h);l.has(h)||(l.add(h),h.then(m,m))})}}function en(n,s){var l=s.deletions;if(l!==null)for(var h=0;h<l.length;h++){var m=l[h];try{var y=n,b=s,k=b;t:for(;k!==null;){switch(k.tag){case 5:ue=k.stateNode,tn=!1;break t;case 3:ue=k.stateNode.containerInfo,tn=!0;break t;case 4:ue=k.stateNode.containerInfo,tn=!0;break t}k=k.return}if(ue===null)throw Error(e(160));Bh(y,b,m),ue=null,tn=!1;var O=m.alternate;O!==null&&(O.return=null),m.return=null}catch(z){Wt(m,s,z)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)jh(s,n),s=s.sibling}function jh(n,s){var l=n.alternate,h=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(en(s,n),cn(n),h&4){try{Fs(3,n,n.return),Qi(3,n)}catch(ht){Wt(n,n.return,ht)}try{Fs(5,n,n.return)}catch(ht){Wt(n,n.return,ht)}}break;case 1:en(s,n),cn(n),h&512&&l!==null&&Hr(l,l.return);break;case 5:if(en(s,n),cn(n),h&512&&l!==null&&Hr(l,l.return),n.flags&32){var m=n.stateNode;try{rs(m,"")}catch(ht){Wt(n,n.return,ht)}}if(h&4&&(m=n.stateNode,m!=null)){var y=n.memoizedProps,b=l!==null?l.memoizedProps:y,k=n.type,O=n.updateQueue;if(n.updateQueue=null,O!==null)try{k==="input"&&y.type==="radio"&&y.name!=null&&Gt(m,y),ja(k,b);var z=ja(k,y);for(b=0;b<O.length;b+=2){var Q=O[b],Z=O[b+1];Q==="style"?Eu(m,Z):Q==="dangerouslySetInnerHTML"?Au(m,Z):Q==="children"?rs(m,Z):C(m,Q,Z,z)}switch(k){case"input":sn(m,y);break;case"textarea":vu(m,y);break;case"select":var K=m._wrapperState.wasMultiple;m._wrapperState.wasMultiple=!!y.multiple;var it=y.value;it!=null?Sr(m,!!y.multiple,it,!1):K!==!!y.multiple&&(y.defaultValue!=null?Sr(m,!!y.multiple,y.defaultValue,!0):Sr(m,!!y.multiple,y.multiple?[]:"",!1))}m[Cs]=y}catch(ht){Wt(n,n.return,ht)}}break;case 6:if(en(s,n),cn(n),h&4){if(n.stateNode===null)throw Error(e(162));m=n.stateNode,y=n.memoizedProps;try{m.nodeValue=y}catch(ht){Wt(n,n.return,ht)}}break;case 3:if(en(s,n),cn(n),h&4&&l!==null&&l.memoizedState.isDehydrated)try{ps(s.containerInfo)}catch(ht){Wt(n,n.return,ht)}break;case 4:en(s,n),cn(n);break;case 13:en(s,n),cn(n),m=n.child,m.flags&8192&&(y=m.memoizedState!==null,m.stateNode.isHidden=y,!y||m.alternate!==null&&m.alternate.memoizedState!==null||(fl=Xt())),h&4&&zh(n);break;case 22:if(Q=l!==null&&l.memoizedState!==null,n.mode&1?(ye=(z=ye)||Q,en(s,n),ye=z):en(s,n),cn(n),h&8192){if(z=n.memoizedState!==null,(n.stateNode.isHidden=z)&&!Q&&(n.mode&1)!==0)for(ot=n,Q=n.child;Q!==null;){for(Z=ot=Q;ot!==null;){switch(K=ot,it=K.child,K.tag){case 0:case 11:case 14:case 15:Fs(4,K,K.return);break;case 1:Hr(K,K.return);var ut=K.stateNode;if(typeof ut.componentWillUnmount=="function"){h=K,l=K.return;try{s=h,ut.props=s.memoizedProps,ut.state=s.memoizedState,ut.componentWillUnmount()}catch(ht){Wt(h,l,ht)}}break;case 5:Hr(K,K.return);break;case 22:if(K.memoizedState!==null){$h(Z);continue}}it!==null?(it.return=K,ot=it):$h(Z)}Q=Q.sibling}t:for(Q=null,Z=n;;){if(Z.tag===5){if(Q===null){Q=Z;try{m=Z.stateNode,z?(y=m.style,typeof y.setProperty=="function"?y.setProperty("display","none","important"):y.display="none"):(k=Z.stateNode,O=Z.memoizedProps.style,b=O!=null&&O.hasOwnProperty("display")?O.display:null,k.style.display=Su("display",b))}catch(ht){Wt(n,n.return,ht)}}}else if(Z.tag===6){if(Q===null)try{Z.stateNode.nodeValue=z?"":Z.memoizedProps}catch(ht){Wt(n,n.return,ht)}}else if((Z.tag!==22&&Z.tag!==23||Z.memoizedState===null||Z===n)&&Z.child!==null){Z.child.return=Z,Z=Z.child;continue}if(Z===n)break t;for(;Z.sibling===null;){if(Z.return===null||Z.return===n)break t;Q===Z&&(Q=null),Z=Z.return}Q===Z&&(Q=null),Z.sibling.return=Z.return,Z=Z.sibling}}break;case 19:en(s,n),cn(n),h&4&&zh(n);break;case 21:break;default:en(s,n),cn(n)}}function cn(n){var s=n.flags;if(s&2){try{t:{for(var l=n.return;l!==null;){if(Fh(l)){var h=l;break t}l=l.return}throw Error(e(160))}switch(h.tag){case 5:var m=h.stateNode;h.flags&32&&(rs(m,""),h.flags&=-33);var y=_h(n);cl(n,y,m);break;case 3:case 4:var b=h.stateNode.containerInfo,k=_h(n);ul(n,k,b);break;default:throw Error(e(161))}}catch(O){Wt(n,n.return,O)}n.flags&=-3}s&4096&&(n.flags&=-4097)}function qp(n,s,l){ot=n,Uh(n)}function Uh(n,s,l){for(var h=(n.mode&1)!==0;ot!==null;){var m=ot,y=m.child;if(m.tag===22&&h){var b=m.memoizedState!==null||Ki;if(!b){var k=m.alternate,O=k!==null&&k.memoizedState!==null||ye;k=Ki;var z=ye;if(Ki=b,(ye=O)&&!z)for(ot=m;ot!==null;)b=ot,O=b.child,b.tag===22&&b.memoizedState!==null?Vh(m):O!==null?(O.return=b,ot=O):Vh(m);for(;y!==null;)ot=y,Uh(y),y=y.sibling;ot=m,Ki=k,ye=z}Hh(n)}else(m.subtreeFlags&8772)!==0&&y!==null?(y.return=m,ot=y):Hh(n)}}function Hh(n){for(;ot!==null;){var s=ot;if((s.flags&8772)!==0){var l=s.alternate;try{if((s.flags&8772)!==0)switch(s.tag){case 0:case 11:case 15:ye||Qi(5,s);break;case 1:var h=s.stateNode;if(s.flags&4&&!ye)if(l===null)h.componentDidMount();else{var m=s.elementType===s.type?l.memoizedProps:qe(s.type,l.memoizedProps);h.componentDidUpdate(m,l.memoizedState,h.__reactInternalSnapshotBeforeUpdate)}var y=s.updateQueue;y!==null&&$c(s,y,h);break;case 3:var b=s.updateQueue;if(b!==null){if(l=null,s.child!==null)switch(s.child.tag){case 5:l=s.child.stateNode;break;case 1:l=s.child.stateNode}$c(s,b,l)}break;case 5:var k=s.stateNode;if(l===null&&s.flags&4){l=k;var O=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":O.autoFocus&&l.focus();break;case"img":O.src&&(l.src=O.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var z=s.alternate;if(z!==null){var Q=z.memoizedState;if(Q!==null){var Z=Q.dehydrated;Z!==null&&ps(Z)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(e(163))}ye||s.flags&512&&ll(s)}catch(K){Wt(s,s.return,K)}}if(s===n){ot=null;break}if(l=s.sibling,l!==null){l.return=s.return,ot=l;break}ot=s.return}}function $h(n){for(;ot!==null;){var s=ot;if(s===n){ot=null;break}var l=s.sibling;if(l!==null){l.return=s.return,ot=l;break}ot=s.return}}function Vh(n){for(;ot!==null;){var s=ot;try{switch(s.tag){case 0:case 11:case 15:var l=s.return;try{Qi(4,s)}catch(O){Wt(s,l,O)}break;case 1:var h=s.stateNode;if(typeof h.componentDidMount=="function"){var m=s.return;try{h.componentDidMount()}catch(O){Wt(s,m,O)}}var y=s.return;try{ll(s)}catch(O){Wt(s,y,O)}break;case 5:var b=s.return;try{ll(s)}catch(O){Wt(s,b,O)}}}catch(O){Wt(s,s.return,O)}if(s===n){ot=null;break}var k=s.sibling;if(k!==null){k.return=s.return,ot=k;break}ot=s.return}}var tg=Math.ceil,Ji=P.ReactCurrentDispatcher,hl=P.ReactCurrentOwner,We=P.ReactCurrentBatchConfig,It=0,oe=null,Jt=null,ce=0,Be=0,$r=_n(0),re=0,_s=null,or=0,Zi=0,dl=0,Bs=null,Ie=null,fl=0,Vr=1/0,Cn=null,qi=!1,pl=null,$n=null,ta=!1,Vn=null,ea=0,zs=0,gl=null,na=-1,ra=0;function Se(){return(It&6)!==0?Xt():na!==-1?na:na=Xt()}function Wn(n){return(n.mode&1)===0?1:(It&2)!==0&&ce!==0?ce&-ce:_p.transition!==null?(ra===0&&(ra=_u()),ra):(n=Lt,n!==0||(n=window.event,n=n===void 0?16:Gu(n.type)),n)}function nn(n,s,l,h){if(50<zs)throw zs=0,gl=null,Error(e(185));us(n,l,h),((It&2)===0||n!==oe)&&(n===oe&&((It&2)===0&&(Zi|=l),re===4&&Gn(n,ce)),ke(n,h),l===1&&It===0&&(s.mode&1)===0&&(Vr=Xt()+500,Mi&&zn()))}function ke(n,s){var l=n.callbackNode;_f(n,s);var h=di(n,n===oe?ce:0);if(h===0)l!==null&&Nu(l),n.callbackNode=null,n.callbackPriority=0;else if(s=h&-h,n.callbackPriority!==s){if(l!=null&&Nu(l),s===1)n.tag===0?Fp(Gh.bind(null,n)):Mc(Gh.bind(null,n)),Op(function(){(It&6)===0&&zn()}),l=null;else{switch(Bu(h)){case 1:l=Xa;break;case 4:l=Du;break;case 16:l=li;break;case 536870912:l=Fu;break;default:l=li}l=td(l,Wh.bind(null,n))}n.callbackPriority=s,n.callbackNode=l}}function Wh(n,s){if(na=-1,ra=0,(It&6)!==0)throw Error(e(327));var l=n.callbackNode;if(Wr()&&n.callbackNode!==l)return null;var h=di(n,n===oe?ce:0);if(h===0)return null;if((h&30)!==0||(h&n.expiredLanes)!==0||s)s=sa(n,h);else{s=h;var m=It;It|=2;var y=Yh();(oe!==n||ce!==s)&&(Cn=null,Vr=Xt()+500,ur(n,s));do try{rg();break}catch(k){Xh(n,k)}while(!0);Lo(),Ji.current=y,It=m,Jt!==null?s=0:(oe=null,ce=0,s=re)}if(s!==0){if(s===2&&(m=Ya(n),m!==0&&(h=m,s=ml(n,m))),s===1)throw l=_s,ur(n,0),Gn(n,h),ke(n,Xt()),l;if(s===6)Gn(n,h);else{if(m=n.current.alternate,(h&30)===0&&!eg(m)&&(s=sa(n,h),s===2&&(y=Ya(n),y!==0&&(h=y,s=ml(n,y))),s===1))throw l=_s,ur(n,0),Gn(n,h),ke(n,Xt()),l;switch(n.finishedWork=m,n.finishedLanes=h,s){case 0:case 1:throw Error(e(345));case 2:cr(n,Ie,Cn);break;case 3:if(Gn(n,h),(h&130023424)===h&&(s=fl+500-Xt(),10<s)){if(di(n,0)!==0)break;if(m=n.suspendedLanes,(m&h)!==h){Se(),n.pingedLanes|=n.suspendedLanes&m;break}n.timeoutHandle=Eo(cr.bind(null,n,Ie,Cn),s);break}cr(n,Ie,Cn);break;case 4:if(Gn(n,h),(h&4194240)===h)break;for(s=n.eventTimes,m=-1;0<h;){var b=31-Qe(h);y=1<<b,b=s[b],b>m&&(m=b),h&=~y}if(h=m,h=Xt()-h,h=(120>h?120:480>h?480:1080>h?1080:1920>h?1920:3e3>h?3e3:4320>h?4320:1960*tg(h/1960))-h,10<h){n.timeoutHandle=Eo(cr.bind(null,n,Ie,Cn),h);break}cr(n,Ie,Cn);break;case 5:cr(n,Ie,Cn);break;default:throw Error(e(329))}}}return ke(n,Xt()),n.callbackNode===l?Wh.bind(null,n):null}function ml(n,s){var l=Bs;return n.current.memoizedState.isDehydrated&&(ur(n,s).flags|=256),n=sa(n,s),n!==2&&(s=Ie,Ie=l,s!==null&&vl(s)),n}function vl(n){Ie===null?Ie=n:Ie.push.apply(Ie,n)}function eg(n){for(var s=n;;){if(s.flags&16384){var l=s.updateQueue;if(l!==null&&(l=l.stores,l!==null))for(var h=0;h<l.length;h++){var m=l[h],y=m.getSnapshot;m=m.value;try{if(!Je(y(),m))return!1}catch{return!1}}}if(l=s.child,s.subtreeFlags&16384&&l!==null)l.return=s,s=l;else{if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Gn(n,s){for(s&=~dl,s&=~Zi,n.suspendedLanes|=s,n.pingedLanes&=~s,n=n.expirationTimes;0<s;){var l=31-Qe(s),h=1<<l;n[l]=-1,s&=~h}}function Gh(n){if((It&6)!==0)throw Error(e(327));Wr();var s=di(n,0);if((s&1)===0)return ke(n,Xt()),null;var l=sa(n,s);if(n.tag!==0&&l===2){var h=Ya(n);h!==0&&(s=h,l=ml(n,h))}if(l===1)throw l=_s,ur(n,0),Gn(n,s),ke(n,Xt()),l;if(l===6)throw Error(e(345));return n.finishedWork=n.current.alternate,n.finishedLanes=s,cr(n,Ie,Cn),ke(n,Xt()),null}function yl(n,s){var l=It;It|=1;try{return n(s)}finally{It=l,It===0&&(Vr=Xt()+500,Mi&&zn())}}function lr(n){Vn!==null&&Vn.tag===0&&(It&6)===0&&Wr();var s=It;It|=1;var l=We.transition,h=Lt;try{if(We.transition=null,Lt=1,n)return n()}finally{Lt=h,We.transition=l,It=s,(It&6)===0&&zn()}}function wl(){Be=$r.current,_t($r)}function ur(n,s){n.finishedWork=null,n.finishedLanes=0;var l=n.timeoutHandle;if(l!==-1&&(n.timeoutHandle=-1,Mp(l)),Jt!==null)for(l=Jt.return;l!==null;){var h=l;switch(Po(h),h.tag){case 1:h=h.type.childContextTypes,h!=null&&Ii();break;case 3:jr(),_t(Te),_t(ge),Uo();break;case 5:zo(h);break;case 4:jr();break;case 13:_t(Ht);break;case 19:_t(Ht);break;case 10:No(h.type._context);break;case 22:case 23:wl()}l=l.return}if(oe=n,Jt=n=Xn(n.current,null),ce=Be=s,re=0,_s=null,dl=Zi=or=0,Ie=Bs=null,sr!==null){for(s=0;s<sr.length;s++)if(l=sr[s],h=l.interleaved,h!==null){l.interleaved=null;var m=h.next,y=l.pending;if(y!==null){var b=y.next;y.next=m,h.next=b}l.pending=h}sr=null}return n}function Xh(n,s){do{var l=Jt;try{if(Lo(),Ui.current=Wi,Hi){for(var h=$t.memoizedState;h!==null;){var m=h.queue;m!==null&&(m.pending=null),h=h.next}Hi=!1}if(ar=0,ae=ne=$t=null,Ms=!1,Os=0,hl.current=null,l===null||l.return===null){re=1,_s=s,Jt=null;break}t:{var y=n,b=l.return,k=l,O=s;if(s=ce,k.flags|=32768,O!==null&&typeof O=="object"&&typeof O.then=="function"){var z=O,Q=k,Z=Q.tag;if((Q.mode&1)===0&&(Z===0||Z===11||Z===15)){var K=Q.alternate;K?(Q.updateQueue=K.updateQueue,Q.memoizedState=K.memoizedState,Q.lanes=K.lanes):(Q.updateQueue=null,Q.memoizedState=null)}var it=yh(b);if(it!==null){it.flags&=-257,wh(it,b,k,y,s),it.mode&1&&vh(y,z,s),s=it,O=z;var ut=s.updateQueue;if(ut===null){var ht=new Set;ht.add(O),s.updateQueue=ht}else ut.add(O);break t}else{if((s&1)===0){vh(y,z,s),Al();break t}O=Error(e(426))}}else if(zt&&k.mode&1){var Yt=yh(b);if(Yt!==null){(Yt.flags&65536)===0&&(Yt.flags|=256),wh(Yt,b,k,y,s),Mo(Ur(O,k));break t}}y=O=Ur(O,k),re!==4&&(re=2),Bs===null?Bs=[y]:Bs.push(y),y=b;do{switch(y.tag){case 3:y.flags|=65536,s&=-s,y.lanes|=s;var D=gh(y,O,s);Hc(y,D);break t;case 1:k=O;var N=y.type,B=y.stateNode;if((y.flags&128)===0&&(typeof N.getDerivedStateFromError=="function"||B!==null&&typeof B.componentDidCatch=="function"&&($n===null||!$n.has(B)))){y.flags|=65536,s&=-s,y.lanes|=s;var et=mh(y,k,s);Hc(y,et);break t}}y=y.return}while(y!==null)}Qh(l)}catch(dt){s=dt,Jt===l&&l!==null&&(Jt=l=l.return);continue}break}while(!0)}function Yh(){var n=Ji.current;return Ji.current=Wi,n===null?Wi:n}function Al(){(re===0||re===3||re===2)&&(re=4),oe===null||(or&268435455)===0&&(Zi&268435455)===0||Gn(oe,ce)}function sa(n,s){var l=It;It|=2;var h=Yh();(oe!==n||ce!==s)&&(Cn=null,ur(n,s));do try{ng();break}catch(m){Xh(n,m)}while(!0);if(Lo(),It=l,Ji.current=h,Jt!==null)throw Error(e(261));return oe=null,ce=0,re}function ng(){for(;Jt!==null;)Kh(Jt)}function rg(){for(;Jt!==null&&!Pf();)Kh(Jt)}function Kh(n){var s=qh(n.alternate,n,Be);n.memoizedProps=n.pendingProps,s===null?Qh(n):Jt=s,hl.current=null}function Qh(n){var s=n;do{var l=s.alternate;if(n=s.return,(s.flags&32768)===0){if(l=Kp(l,s,Be),l!==null){Jt=l;return}}else{if(l=Qp(l,s),l!==null){l.flags&=32767,Jt=l;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{re=6,Jt=null;return}}if(s=s.sibling,s!==null){Jt=s;return}Jt=s=n}while(s!==null);re===0&&(re=5)}function cr(n,s,l){var h=Lt,m=We.transition;try{We.transition=null,Lt=1,sg(n,s,l,h)}finally{We.transition=m,Lt=h}return null}function sg(n,s,l,h){do Wr();while(Vn!==null);if((It&6)!==0)throw Error(e(327));l=n.finishedWork;var m=n.finishedLanes;if(l===null)return null;if(n.finishedWork=null,n.finishedLanes=0,l===n.current)throw Error(e(177));n.callbackNode=null,n.callbackPriority=0;var y=l.lanes|l.childLanes;if(Bf(n,y),n===oe&&(Jt=oe=null,ce=0),(l.subtreeFlags&2064)===0&&(l.flags&2064)===0||ta||(ta=!0,td(li,function(){return Wr(),null})),y=(l.flags&15990)!==0,(l.subtreeFlags&15990)!==0||y){y=We.transition,We.transition=null;var b=Lt;Lt=1;var k=It;It|=4,hl.current=null,Zp(n,l),jh(l,n),bp(Ao),gi=!!wo,Ao=wo=null,n.current=l,qp(l),If(),It=k,Lt=b,We.transition=y}else n.current=l;if(ta&&(ta=!1,Vn=n,ea=m),y=n.pendingLanes,y===0&&($n=null),Of(l.stateNode),ke(n,Xt()),s!==null)for(h=n.onRecoverableError,l=0;l<s.length;l++)m=s[l],h(m.value,{componentStack:m.stack,digest:m.digest});if(qi)throw qi=!1,n=pl,pl=null,n;return(ea&1)!==0&&n.tag!==0&&Wr(),y=n.pendingLanes,(y&1)!==0?n===gl?zs++:(zs=0,gl=n):zs=0,zn(),null}function Wr(){if(Vn!==null){var n=Bu(ea),s=We.transition,l=Lt;try{if(We.transition=null,Lt=16>n?16:n,Vn===null)var h=!1;else{if(n=Vn,Vn=null,ea=0,(It&6)!==0)throw Error(e(331));var m=It;for(It|=4,ot=n.current;ot!==null;){var y=ot,b=y.child;if((ot.flags&16)!==0){var k=y.deletions;if(k!==null){for(var O=0;O<k.length;O++){var z=k[O];for(ot=z;ot!==null;){var Q=ot;switch(Q.tag){case 0:case 11:case 15:Fs(8,Q,y)}var Z=Q.child;if(Z!==null)Z.return=Q,ot=Z;else for(;ot!==null;){Q=ot;var K=Q.sibling,it=Q.return;if(Dh(Q),Q===z){ot=null;break}if(K!==null){K.return=it,ot=K;break}ot=it}}}var ut=y.alternate;if(ut!==null){var ht=ut.child;if(ht!==null){ut.child=null;do{var Yt=ht.sibling;ht.sibling=null,ht=Yt}while(ht!==null)}}ot=y}}if((y.subtreeFlags&2064)!==0&&b!==null)b.return=y,ot=b;else t:for(;ot!==null;){if(y=ot,(y.flags&2048)!==0)switch(y.tag){case 0:case 11:case 15:Fs(9,y,y.return)}var D=y.sibling;if(D!==null){D.return=y.return,ot=D;break t}ot=y.return}}var N=n.current;for(ot=N;ot!==null;){b=ot;var B=b.child;if((b.subtreeFlags&2064)!==0&&B!==null)B.return=b,ot=B;else t:for(b=N;ot!==null;){if(k=ot,(k.flags&2048)!==0)try{switch(k.tag){case 0:case 11:case 15:Qi(9,k)}}catch(dt){Wt(k,k.return,dt)}if(k===b){ot=null;break t}var et=k.sibling;if(et!==null){et.return=k.return,ot=et;break t}ot=k.return}}if(It=m,zn(),an&&typeof an.onPostCommitFiberRoot=="function")try{an.onPostCommitFiberRoot(ui,n)}catch{}h=!0}return h}finally{Lt=l,We.transition=s}}return!1}function Jh(n,s,l){s=Ur(l,s),s=gh(n,s,1),n=Un(n,s,1),s=Se(),n!==null&&(us(n,1,s),ke(n,s))}function Wt(n,s,l){if(n.tag===3)Jh(n,n,l);else for(;s!==null;){if(s.tag===3){Jh(s,n,l);break}else if(s.tag===1){var h=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&($n===null||!$n.has(h))){n=Ur(l,n),n=mh(s,n,1),s=Un(s,n,1),n=Se(),s!==null&&(us(s,1,n),ke(s,n));break}}s=s.return}}function ig(n,s,l){var h=n.pingCache;h!==null&&h.delete(s),s=Se(),n.pingedLanes|=n.suspendedLanes&l,oe===n&&(ce&l)===l&&(re===4||re===3&&(ce&130023424)===ce&&500>Xt()-fl?ur(n,0):dl|=l),ke(n,s)}function Zh(n,s){s===0&&((n.mode&1)===0?s=1:(s=hi,hi<<=1,(hi&130023424)===0&&(hi=4194304)));var l=Se();n=En(n,s),n!==null&&(us(n,s,l),ke(n,l))}function ag(n){var s=n.memoizedState,l=0;s!==null&&(l=s.retryLane),Zh(n,l)}function og(n,s){var l=0;switch(n.tag){case 13:var h=n.stateNode,m=n.memoizedState;m!==null&&(l=m.retryLane);break;case 19:h=n.stateNode;break;default:throw Error(e(314))}h!==null&&h.delete(s),Zh(n,l)}var qh;qh=function(n,s,l){if(n!==null)if(n.memoizedProps!==s.pendingProps||Te.current)Pe=!0;else{if((n.lanes&l)===0&&(s.flags&128)===0)return Pe=!1,Yp(n,s,l);Pe=(n.flags&131072)!==0}else Pe=!1,zt&&(s.flags&1048576)!==0&&Oc(s,Li,s.index);switch(s.lanes=0,s.tag){case 2:var h=s.type;Yi(n,s),n=s.pendingProps;var m=Lr(s,ge.current);zr(s,l),m=Vo(null,s,h,n,m,l);var y=Wo();return s.flags|=1,typeof m=="object"&&m!==null&&typeof m.render=="function"&&m.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,Re(h)?(y=!0,ki(s)):y=!1,s.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,_o(s),m.updater=Gi,s.stateNode=m,m._reactInternals=s,Jo(s,h,n,l),s=el(null,s,h,!0,y,l)):(s.tag=0,zt&&y&&Ro(s),Ae(null,s,m,l),s=s.child),s;case 16:h=s.elementType;t:{switch(Yi(n,s),n=s.pendingProps,m=h._init,h=m(h._payload),s.type=h,m=s.tag=ug(h),n=qe(h,n),m){case 0:s=tl(null,s,h,n,l);break t;case 1:s=Ch(null,s,h,n,l);break t;case 11:s=Ah(null,s,h,n,l);break t;case 14:s=Sh(null,s,h,qe(h.type,n),l);break t}throw Error(e(306,h,""))}return s;case 0:return h=s.type,m=s.pendingProps,m=s.elementType===h?m:qe(h,m),tl(n,s,h,m,l);case 1:return h=s.type,m=s.pendingProps,m=s.elementType===h?m:qe(h,m),Ch(n,s,h,m,l);case 3:t:{if(Th(s),n===null)throw Error(e(387));h=s.pendingProps,y=s.memoizedState,m=y.element,Uc(n,s),zi(s,h,null,l);var b=s.memoizedState;if(h=b.element,y.isDehydrated)if(y={element:h,isDehydrated:!1,cache:b.cache,pendingSuspenseBoundaries:b.pendingSuspenseBoundaries,transitions:b.transitions},s.updateQueue.baseState=y,s.memoizedState=y,s.flags&256){m=Ur(Error(e(423)),s),s=Rh(n,s,h,l,m);break t}else if(h!==m){m=Ur(Error(e(424)),s),s=Rh(n,s,h,l,m);break t}else for(_e=Fn(s.stateNode.containerInfo.firstChild),Fe=s,zt=!0,Ze=null,l=zc(s,null,h,l),s.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling;else{if(Fr(),h===m){s=bn(n,s,l);break t}Ae(n,s,h,l)}s=s.child}return s;case 5:return Vc(s),n===null&&ko(s),h=s.type,m=s.pendingProps,y=n!==null?n.memoizedProps:null,b=m.children,So(h,m)?b=null:y!==null&&So(h,y)&&(s.flags|=32),bh(n,s),Ae(n,s,b,l),s.child;case 6:return n===null&&ko(s),null;case 13:return Ph(n,s,l);case 4:return Bo(s,s.stateNode.containerInfo),h=s.pendingProps,n===null?s.child=_r(s,null,h,l):Ae(n,s,h,l),s.child;case 11:return h=s.type,m=s.pendingProps,m=s.elementType===h?m:qe(h,m),Ah(n,s,h,m,l);case 7:return Ae(n,s,s.pendingProps,l),s.child;case 8:return Ae(n,s,s.pendingProps.children,l),s.child;case 12:return Ae(n,s,s.pendingProps.children,l),s.child;case 10:t:{if(h=s.type._context,m=s.pendingProps,y=s.memoizedProps,b=m.value,Dt(Fi,h._currentValue),h._currentValue=b,y!==null)if(Je(y.value,b)){if(y.children===m.children&&!Te.current){s=bn(n,s,l);break t}}else for(y=s.child,y!==null&&(y.return=s);y!==null;){var k=y.dependencies;if(k!==null){b=y.child;for(var O=k.firstContext;O!==null;){if(O.context===h){if(y.tag===1){O=xn(-1,l&-l),O.tag=2;var z=y.updateQueue;if(z!==null){z=z.shared;var Q=z.pending;Q===null?O.next=O:(O.next=Q.next,Q.next=O),z.pending=O}}y.lanes|=l,O=y.alternate,O!==null&&(O.lanes|=l),Do(y.return,l,s),k.lanes|=l;break}O=O.next}}else if(y.tag===10)b=y.type===s.type?null:y.child;else if(y.tag===18){if(b=y.return,b===null)throw Error(e(341));b.lanes|=l,k=b.alternate,k!==null&&(k.lanes|=l),Do(b,l,s),b=y.sibling}else b=y.child;if(b!==null)b.return=y;else for(b=y;b!==null;){if(b===s){b=null;break}if(y=b.sibling,y!==null){y.return=b.return,b=y;break}b=b.return}y=b}Ae(n,s,m.children,l),s=s.child}return s;case 9:return m=s.type,h=s.pendingProps.children,zr(s,l),m=$e(m),h=h(m),s.flags|=1,Ae(n,s,h,l),s.child;case 14:return h=s.type,m=qe(h,s.pendingProps),m=qe(h.type,m),Sh(n,s,h,m,l);case 15:return Eh(n,s,s.type,s.pendingProps,l);case 17:return h=s.type,m=s.pendingProps,m=s.elementType===h?m:qe(h,m),Yi(n,s),s.tag=1,Re(h)?(n=!0,ki(s)):n=!1,zr(s,l),fh(s,h,m),Jo(s,h,m,l),el(null,s,h,!0,n,l);case 19:return kh(n,s,l);case 22:return xh(n,s,l)}throw Error(e(156,s.tag))};function td(n,s){return Lu(n,s)}function lg(n,s,l,h){this.tag=n,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ge(n,s,l,h){return new lg(n,s,l,h)}function Sl(n){return n=n.prototype,!(!n||!n.isReactComponent)}function ug(n){if(typeof n=="function")return Sl(n)?1:0;if(n!=null){if(n=n.$$typeof,n===q)return 11;if(n===gt)return 14}return 2}function Xn(n,s){var l=n.alternate;return l===null?(l=Ge(n.tag,s,n.key,n.mode),l.elementType=n.elementType,l.type=n.type,l.stateNode=n.stateNode,l.alternate=n,n.alternate=l):(l.pendingProps=s,l.type=n.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=n.flags&14680064,l.childLanes=n.childLanes,l.lanes=n.lanes,l.child=n.child,l.memoizedProps=n.memoizedProps,l.memoizedState=n.memoizedState,l.updateQueue=n.updateQueue,s=n.dependencies,l.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},l.sibling=n.sibling,l.index=n.index,l.ref=n.ref,l}function ia(n,s,l,h,m,y){var b=2;if(h=n,typeof n=="function")Sl(n)&&(b=1);else if(typeof n=="string")b=5;else t:switch(n){case M:return hr(l.children,m,y,s);case _:b=8,m|=8;break;case F:return n=Ge(12,l,s,m|2),n.elementType=F,n.lanes=y,n;case J:return n=Ge(13,l,s,m),n.elementType=J,n.lanes=y,n;case rt:return n=Ge(19,l,s,m),n.elementType=rt,n.lanes=y,n;case $:return aa(l,m,y,s);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case U:b=10;break t;case W:b=9;break t;case q:b=11;break t;case gt:b=14;break t;case X:b=16,h=null;break t}throw Error(e(130,n==null?n:typeof n,""))}return s=Ge(b,l,s,m),s.elementType=n,s.type=h,s.lanes=y,s}function hr(n,s,l,h){return n=Ge(7,n,h,s),n.lanes=l,n}function aa(n,s,l,h){return n=Ge(22,n,h,s),n.elementType=$,n.lanes=l,n.stateNode={isHidden:!1},n}function El(n,s,l){return n=Ge(6,n,null,s),n.lanes=l,n}function xl(n,s,l){return s=Ge(4,n.children!==null?n.children:[],n.key,s),s.lanes=l,s.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},s}function cg(n,s,l,h,m){this.tag=s,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ka(0),this.expirationTimes=Ka(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ka(0),this.identifierPrefix=h,this.onRecoverableError=m,this.mutableSourceEagerHydrationData=null}function bl(n,s,l,h,m,y,b,k,O){return n=new cg(n,s,l,k,O),s===1?(s=1,y===!0&&(s|=8)):s=0,y=Ge(3,null,null,s),n.current=y,y.stateNode=n,y.memoizedState={element:h,isDehydrated:l,cache:null,transitions:null,pendingSuspenseBoundaries:null},_o(y),n}function hg(n,s,l){var h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:I,key:h==null?null:""+h,children:n,containerInfo:s,implementation:l}}function ed(n){if(!n)return Bn;n=n._reactInternals;t:{if(qn(n)!==n||n.tag!==1)throw Error(e(170));var s=n;do{switch(s.tag){case 3:s=s.stateNode.context;break t;case 1:if(Re(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break t}}s=s.return}while(s!==null);throw Error(e(171))}if(n.tag===1){var l=n.type;if(Re(l))return Ic(n,l,s)}return s}function nd(n,s,l,h,m,y,b,k,O){return n=bl(l,h,!0,n,m,y,b,k,O),n.context=ed(null),l=n.current,h=Se(),m=Wn(l),y=xn(h,m),y.callback=s??null,Un(l,y,m),n.current.lanes=m,us(n,m,h),ke(n,h),n}function oa(n,s,l,h){var m=s.current,y=Se(),b=Wn(m);return l=ed(l),s.context===null?s.context=l:s.pendingContext=l,s=xn(y,b),s.payload={element:n},h=h===void 0?null:h,h!==null&&(s.callback=h),n=Un(m,s,b),n!==null&&(nn(n,m,b,y),Bi(n,m,b)),b}function la(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function rd(n,s){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var l=n.retryLane;n.retryLane=l!==0&&l<s?l:s}}function Cl(n,s){rd(n,s),(n=n.alternate)&&rd(n,s)}function dg(){return null}var sd=typeof reportError=="function"?reportError:function(n){console.error(n)};function Tl(n){this._internalRoot=n}ua.prototype.render=Tl.prototype.render=function(n){var s=this._internalRoot;if(s===null)throw Error(e(409));oa(n,s,null,null)},ua.prototype.unmount=Tl.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var s=n.containerInfo;lr(function(){oa(null,n,null,null)}),s[yn]=null}};function ua(n){this._internalRoot=n}ua.prototype.unstable_scheduleHydration=function(n){if(n){var s=Uu();n={blockedOn:null,target:n,priority:s};for(var l=0;l<Ln.length&&s!==0&&s<Ln[l].priority;l++);Ln.splice(l,0,n),l===0&&Vu(n)}};function Rl(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function ca(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function id(){}function fg(n,s,l,h,m){if(m){if(typeof h=="function"){var y=h;h=function(){var z=la(b);y.call(z)}}var b=nd(s,h,n,0,null,!1,!1,"",id);return n._reactRootContainer=b,n[yn]=b.current,xs(n.nodeType===8?n.parentNode:n),lr(),b}for(;m=n.lastChild;)n.removeChild(m);if(typeof h=="function"){var k=h;h=function(){var z=la(O);k.call(z)}}var O=bl(n,0,!1,null,null,!1,!1,"",id);return n._reactRootContainer=O,n[yn]=O.current,xs(n.nodeType===8?n.parentNode:n),lr(function(){oa(s,O,l,h)}),O}function ha(n,s,l,h,m){var y=l._reactRootContainer;if(y){var b=y;if(typeof m=="function"){var k=m;m=function(){var O=la(b);k.call(O)}}oa(s,b,n,m)}else b=fg(l,s,n,m,h);return la(b)}zu=function(n){switch(n.tag){case 3:var s=n.stateNode;if(s.current.memoizedState.isDehydrated){var l=ls(s.pendingLanes);l!==0&&(Qa(s,l|1),ke(s,Xt()),(It&6)===0&&(Vr=Xt()+500,zn()))}break;case 13:lr(function(){var h=En(n,1);if(h!==null){var m=Se();nn(h,n,1,m)}}),Cl(n,1)}},Ja=function(n){if(n.tag===13){var s=En(n,134217728);if(s!==null){var l=Se();nn(s,n,134217728,l)}Cl(n,134217728)}},ju=function(n){if(n.tag===13){var s=Wn(n),l=En(n,s);if(l!==null){var h=Se();nn(l,n,s,h)}Cl(n,s)}},Uu=function(){return Lt},Hu=function(n,s){var l=Lt;try{return Lt=n,s()}finally{Lt=l}},$a=function(n,s,l){switch(s){case"input":if(sn(n,l),s=l.name,l.type==="radio"&&s!=null){for(l=n;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<l.length;s++){var h=l[s];if(h!==n&&h.form===n.form){var m=Pi(h);if(!m)throw Error(e(90));Ot(h),sn(h,m)}}}break;case"textarea":vu(n,l);break;case"select":s=l.value,s!=null&&Sr(n,!!l.multiple,s,!1)}},Tu=yl,Ru=lr;var pg={usingClientEntryPoint:!1,Events:[Ts,Mr,Pi,bu,Cu,yl]},js={findFiberByHostInstance:tr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},gg={bundleType:js.bundleType,version:js.version,rendererPackageName:js.rendererPackageName,rendererConfig:js.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:P.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=Mu(n),n===null?null:n.stateNode},findFiberByHostInstance:js.findFiberByHostInstance||dg,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var da=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!da.isDisabled&&da.supportsFiber)try{ui=da.inject(gg),an=da}catch{}}return Oe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=pg,Oe.createPortal=function(n,s){var l=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Rl(s))throw Error(e(200));return hg(n,s,null,l)},Oe.createRoot=function(n,s){if(!Rl(n))throw Error(e(299));var l=!1,h="",m=sd;return s!=null&&(s.unstable_strictMode===!0&&(l=!0),s.identifierPrefix!==void 0&&(h=s.identifierPrefix),s.onRecoverableError!==void 0&&(m=s.onRecoverableError)),s=bl(n,1,!1,null,null,l,!1,h,m),n[yn]=s.current,xs(n.nodeType===8?n.parentNode:n),new Tl(s)},Oe.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var s=n._reactInternals;if(s===void 0)throw typeof n.render=="function"?Error(e(188)):(n=Object.keys(n).join(","),Error(e(268,n)));return n=Mu(s),n=n===null?null:n.stateNode,n},Oe.flushSync=function(n){return lr(n)},Oe.hydrate=function(n,s,l){if(!ca(s))throw Error(e(200));return ha(null,n,s,!0,l)},Oe.hydrateRoot=function(n,s,l){if(!Rl(n))throw Error(e(405));var h=l!=null&&l.hydratedSources||null,m=!1,y="",b=sd;if(l!=null&&(l.unstable_strictMode===!0&&(m=!0),l.identifierPrefix!==void 0&&(y=l.identifierPrefix),l.onRecoverableError!==void 0&&(b=l.onRecoverableError)),s=nd(s,null,n,1,l??null,m,!1,y,b),n[yn]=s.current,xs(n),h)for(n=0;n<h.length;n++)l=h[n],m=l._getVersion,m=m(l._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[l,m]:s.mutableSourceEagerHydrationData.push(l,m);return new ua(s)},Oe.render=function(n,s,l){if(!ca(s))throw Error(e(200));return ha(null,n,s,!1,l)},Oe.unmountComponentAtNode=function(n){if(!ca(n))throw Error(e(40));return n._reactRootContainer?(lr(function(){ha(null,null,n,!1,function(){n._reactRootContainer=null,n[yn]=null})}),!0):!1},Oe.unstable_batchedUpdates=yl,Oe.unstable_renderSubtreeIntoContainer=function(n,s,l,h){if(!ca(l))throw Error(e(200));if(n==null||n._reactInternals===void 0)throw Error(e(38));return ha(n,s,l,!1,h)},Oe.version="18.3.1-next-f1338f8080-20240426",Oe}var gd;function xg(){if(gd)return Ml.exports;gd=1;function f(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(f)}catch(t){console.error(t)}}return f(),Ml.exports=Eg(),Ml.exports}var md;function bg(){if(md)return fa;md=1;var f=xg();return fa.createRoot=f.createRoot,fa.hydrateRoot=f.hydrateRoot,fa}var Cg=bg(),Tg={34:((f,t,e)=>{var r=e(4901);f.exports=function(i){return typeof i=="object"?i!==null:r(i)}}),81:((f,t,e)=>{var r=e(9565),i=e(9306),a=e(8551),o=e(6823),u=e(851),c=TypeError;f.exports=function(d,p){var g=arguments.length<2?u(d):p;if(i(g))return a(r(g,d));throw new c(o(d)+" is not iterable")}}),283:((f,t,e)=>{var r=e(9504),i=e(9039),a=e(4901),o=e(9297),u=e(3724),c=e(350).CONFIGURABLE,d=e(3706),p=e(1181),g=p.enforce,v=p.get,w=String,S=Object.defineProperty,A=r("".slice),E=r("".replace),x=r([].join),R=u&&!i(function(){return S(function(){},"length",{value:8}).length!==8}),C=String(String).split("String"),P=f.exports=function(T,I,M){A(w(I),0,7)==="Symbol("&&(I="["+E(w(I),/^Symbol\(([^)]*)\).*$/,"$1")+"]"),M&&M.getter&&(I="get "+I),M&&M.setter&&(I="set "+I),(!o(T,"name")||c&&T.name!==I)&&(u?S(T,"name",{value:I,configurable:!0}):T.name=I),R&&M&&o(M,"arity")&&T.length!==M.arity&&S(T,"length",{value:M.arity});try{M&&o(M,"constructor")&&M.constructor?u&&S(T,"prototype",{writable:!1}):T.prototype&&(T.prototype=void 0)}catch{}var _=g(T);return o(_,"source")||(_.source=x(C,typeof I=="string"?I:"")),T};Function.prototype.toString=P(function(){return a(this)&&v(this).source||d(this)},"toString")}),350:((f,t,e)=>{var r=e(3724),i=e(9297),a=Function.prototype,o=r&&Object.getOwnPropertyDescriptor,u=i(a,"name"),c=u&&(function(){}).name==="something",d=u&&(!r||r&&o(a,"name").configurable);f.exports={EXISTS:u,PROPER:c,CONFIGURABLE:d}}),397:((f,t,e)=>{var r=e(7751);f.exports=r("document","documentElement")}),421:(f=>{f.exports={}}),507:((f,t,e)=>{var r=e(9565);f.exports=function(i,a,o){for(var u=o?i:i.iterator,c=i.next,d,p;!(d=r(c,u)).done;)if(p=a(d.value),p!==void 0)return p}}),531:((f,t,e)=>{var r=e(6518),i=e(9565),a=e(9306),o=e(8551),u=e(1767),c=e(8646),d=e(9462),p=e(9539),g=e(6395),v=e(684),w=e(4549),S=!g&&!v("flatMap",function(){}),A=!g&&!S&&w("flatMap",TypeError),E=g||S||A,x=d(function(){for(var R=this.iterator,C=this.mapper,P,T;;){if(T=this.inner)try{if(P=o(i(T.next,T.iterator)),!P.done)return P.value;this.inner=null}catch(I){p(R,"throw",I)}if(P=o(i(this.next,R)),this.done=!!P.done)return;try{this.inner=c(C(P.value,this.counter++),!1)}catch(I){p(R,"throw",I)}}});r({target:"Iterator",proto:!0,real:!0,forced:E},{flatMap:function(C){o(this);try{a(C)}catch(P){p(this,"throw",P)}return A?i(A,this,C):new x(u(this),{mapper:C,inner:null})}})}),616:((f,t,e)=>{var r=e(9039);f.exports=!r(function(){var i=(function(){}).bind();return typeof i!="function"||i.hasOwnProperty("prototype")})}),655:((f,t,e)=>{var r=e(6955),i=String;f.exports=function(a){if(r(a)==="Symbol")throw new TypeError("Cannot convert a Symbol value to a string");return i(a)}}),679:((f,t,e)=>{var r=e(1625),i=TypeError;f.exports=function(a,o){if(r(o,a))return a;throw new i("Incorrect invocation")}}),684:(f=>{f.exports=function(t,e){var r=typeof Iterator=="function"&&Iterator.prototype[t];if(r)try{r.call({next:null},e).next()}catch{return!0}}}),741:(f=>{var t=Math.ceil,e=Math.floor;f.exports=Math.trunc||function(i){var a=+i;return(a>0?e:t)(a)}}),757:((f,t,e)=>{var r=e(7751),i=e(4901),a=e(1625),o=e(7040),u=Object;f.exports=o?function(c){return typeof c=="symbol"}:function(c){var d=r("Symbol");return i(d)&&a(d.prototype,u(c))}}),851:((f,t,e)=>{var r=e(6955),i=e(5966),a=e(4117),o=e(6269),u=e(8227),c=u("iterator");f.exports=function(d){if(!a(d))return i(d,c)||i(d,"@@iterator")||o[r(d)]}}),944:(f=>{var t=TypeError;f.exports=function(e){var r=e&&e.alphabet;if(r===void 0||r==="base64"||r==="base64url")return r||"base64";throw new t("Incorrect `alphabet` option")}}),1072:((f,t,e)=>{var r=e(1828),i=e(8727);f.exports=Object.keys||function(o){return r(o,i)}}),1103:(f=>{f.exports=function(t){try{return{error:!1,value:t()}}catch(e){return{error:!0,value:e}}}}),1108:((f,t,e)=>{var r=e(6955);f.exports=function(i){var a=r(i);return a==="BigInt64Array"||a==="BigUint64Array"}}),1148:((f,t,e)=>{var r=e(6518),i=e(9565),a=e(2652),o=e(9306),u=e(8551),c=e(1767),d=e(9539),p=e(4549),g=p("every",TypeError);r({target:"Iterator",proto:!0,real:!0,forced:g},{every:function(w){u(this);try{o(w)}catch(E){d(this,"throw",E)}if(g)return i(g,this,w);var S=c(this),A=0;return!a(S,function(E,x){if(!w(E,A++))return x()},{IS_RECORD:!0,INTERRUPTED:!0}).stopped}})}),1181:((f,t,e)=>{var r=e(8622),i=e(4576),a=e(34),o=e(6699),u=e(9297),c=e(7629),d=e(6119),p=e(421),g="Object already initialized",v=i.TypeError,w=i.WeakMap,S,A,E,x=function(T){return E(T)?A(T):S(T,{})},R=function(T){return function(I){var M;if(!a(I)||(M=A(I)).type!==T)throw new v("Incompatible receiver, "+T+" required");return M}};if(r||c.state){var C=c.state||(c.state=new w);C.get=C.get,C.has=C.has,C.set=C.set,S=function(T,I){if(C.has(T))throw new v(g);return I.facade=T,C.set(T,I),I},A=function(T){return C.get(T)||{}},E=function(T){return C.has(T)}}else{var P=d("state");p[P]=!0,S=function(T,I){if(u(T,P))throw new v(g);return I.facade=T,o(T,P,I),I},A=function(T){return u(T,P)?T[P]:{}},E=function(T){return u(T,P)}}f.exports={set:S,get:A,has:E,enforce:x,getterFor:R}}),1291:((f,t,e)=>{var r=e(741);f.exports=function(i){var a=+i;return a!==a||a===0?0:r(a)}}),1385:((f,t,e)=>{var r=e(9539);f.exports=function(i,a,o){for(var u=i.length-1;u>=0;u--)if(i[u]!==void 0)try{o=r(i[u].iterator,a,o)}catch(c){a="throw",o=c}if(a==="throw")throw o;return o}}),1548:((f,t,e)=>{var r=e(4576),i=e(9039),a=e(9519),o=e(4215),u=r.structuredClone;f.exports=!!u&&!i(function(){if(o==="DENO"&&a>92||o==="NODE"&&a>94||o==="BROWSER"&&a>97)return!1;var c=new ArrayBuffer(8),d=u(c,{transfer:[c]});return c.byteLength!==0||d.byteLength!==8})}),1549:((f,t,e)=>{var r=e(6518),i=e(4576),a=e(9143),o=e(4154),u=i.Uint8Array,c=!u||!u.prototype.setFromBase64||!(function(){var d=new u([255,255,255,255,255]);try{d.setFromBase64("",null);return}catch{}try{d.setFromBase64("MjYyZg===")}catch{return d[0]===50&&d[1]===54&&d[2]===50&&d[3]===255&&d[4]===255}})();u&&r({target:"Uint8Array",proto:!0,forced:c},{setFromBase64:function(p){o(this);var g=a(p,arguments.length>1?arguments[1]:void 0,this,this.length);return{read:g.read,written:g.written}}})}),1625:((f,t,e)=>{var r=e(9504);f.exports=r({}.isPrototypeOf)}),1689:((f,t,e)=>{var r=e(6518),i=e(4576),a=e(8745),o=e(7680),u=e(6043),c=e(9306),d=e(1103),p=i.Promise,g=!1,v=!p||!p.try||d(function(){p.try(function(w){g=w===8},8)}).error||!g;r({target:"Promise",stat:!0,forced:v},{try:function(w){var S=arguments.length>1?o(arguments,1):[],A=u.f(this),E=d(function(){return a(c(w),void 0,S)});return(E.error?A.reject:A.resolve)(E.value),A.promise}})}),1698:((f,t,e)=>{var r=e(6518),i=e(4204),a=e(9835),o=e(4916),u=!o("union")||!a("union");r({target:"Set",proto:!0,real:!0,forced:u},{union:i})}),1701:((f,t,e)=>{var r=e(6518),i=e(9565),a=e(9306),o=e(8551),u=e(1767),c=e(9462),d=e(6319),p=e(9539),g=e(684),v=e(4549),w=e(6395),S=!w&&!g("map",function(){}),A=!w&&!S&&v("map",TypeError),E=w||S||A,x=c(function(){var R=this.iterator,C=o(i(this.next,R)),P=this.done=!!C.done;if(!P)return d(R,this.mapper,[C.value,this.counter++],!0)});r({target:"Iterator",proto:!0,real:!0,forced:E},{map:function(C){o(this);try{a(C)}catch(P){p(this,"throw",P)}return A?i(A,this,C):new x(u(this),{mapper:C})}})}),1767:(f=>{f.exports=function(t){return{iterator:t,next:t.next,done:!1}}}),1828:((f,t,e)=>{var r=e(9504),i=e(9297),a=e(5397),o=e(9617).indexOf,u=e(421),c=r([].push);f.exports=function(d,p){var g=a(d),v=0,w=[],S;for(S in g)!i(u,S)&&i(g,S)&&c(w,S);for(;p.length>v;)i(g,S=p[v++])&&(~o(w,S)||c(w,S));return w}}),2106:((f,t,e)=>{var r=e(283),i=e(4913);f.exports=function(a,o,u){return u.get&&r(u.get,o,{getter:!0}),u.set&&r(u.set,o,{setter:!0}),i.f(a,o,u)}}),2140:((f,t,e)=>{var r=e(8227),i=r("toStringTag"),a={};a[i]="z",f.exports=String(a)==="[object z]"}),2195:((f,t,e)=>{var r=e(9504),i=r({}.toString),a=r("".slice);f.exports=function(o){return a(i(o),8,-1)}}),2211:((f,t,e)=>{var r=e(9039);f.exports=!r(function(){function i(){}return i.prototype.constructor=null,Object.getPrototypeOf(new i)!==i.prototype})}),2303:((f,t,e)=>{var r=e(4576),i=e(9504),a=r.Uint8Array,o=r.SyntaxError,u=r.parseInt,c=Math.min,d=/[^\da-f]/i,p=i(d.exec),g=i("".slice);f.exports=function(v,w){var S=v.length;if(S%2!==0)throw new o("String should be an even number of characters");for(var A=w?c(w.length,S/2):S/2,E=w||new a(A),x=0,R=0;R<A;){var C=g(v,x,x+=2);if(p(d,C))throw new o("String should only contain hex characters");E[R++]=u(C,16)}return{bytes:E,read:x}}}),2360:((f,t,e)=>{var r=e(8551),i=e(6801),a=e(8727),o=e(421),u=e(397),c=e(4055),d=e(6119),p=">",g="<",v="prototype",w="script",S=d("IE_PROTO"),A=function(){},E=function(T){return g+w+p+T+g+"/"+w+p},x=function(T){T.write(E("")),T.close();var I=T.parentWindow.Object;return T=null,I},R=function(){var T=c("iframe"),I="java"+w+":",M;return T.style.display="none",u.appendChild(T),T.src=String(I),M=T.contentWindow.document,M.open(),M.write(E("document.F=Object")),M.close(),M.F},C,P=function(){try{C=new ActiveXObject("htmlfile")}catch{}P=typeof document<"u"?document.domain&&C?x(C):R():x(C);for(var T=a.length;T--;)delete P[v][a[T]];return P()};o[S]=!0,f.exports=Object.create||function(I,M){var _;return I!==null?(A[v]=r(I),_=new A,A[v]=null,_[S]=I):_=P(),M===void 0?_:i.f(_,M)}}),2475:((f,t,e)=>{var r=e(6518),i=e(8527),a=e(4916),o=!a("isSupersetOf",function(u){return!u});r({target:"Set",proto:!0,real:!0,forced:o},{isSupersetOf:i})}),2489:((f,t,e)=>{var r=e(6518),i=e(9565),a=e(9306),o=e(8551),u=e(1767),c=e(9462),d=e(6319),p=e(6395),g=e(9539),v=e(684),w=e(4549),S=!p&&!v("filter",function(){}),A=!p&&!S&&w("filter",TypeError),E=p||S||A,x=c(function(){for(var R=this.iterator,C=this.predicate,P=this.next,T,I,M;;){if(T=o(i(P,R)),I=this.done=!!T.done,I)return;if(M=T.value,d(R,C,[M,this.counter++],!0))return M}});r({target:"Iterator",proto:!0,real:!0,forced:E},{filter:function(C){o(this);try{a(C)}catch(P){g(this,"throw",P)}return A?i(A,this,C):new x(u(this),{predicate:C})}})}),2529:(f=>{f.exports=function(t,e){return{value:t,done:e}}}),2603:((f,t,e)=>{var r=e(655);f.exports=function(i,a){return i===void 0?arguments.length<2?"":a:r(i)}}),2652:((f,t,e)=>{var r=e(6080),i=e(9565),a=e(8551),o=e(6823),u=e(4209),c=e(6198),d=e(1625),p=e(81),g=e(851),v=e(9539),w=TypeError,S=function(E,x){this.stopped=E,this.result=x},A=S.prototype;f.exports=function(E,x,R){var C=R&&R.that,P=!!(R&&R.AS_ENTRIES),T=!!(R&&R.IS_RECORD),I=!!(R&&R.IS_ITERATOR),M=!!(R&&R.INTERRUPTED),_=r(x,C),F,U,W,q,J,rt,gt,X=function(V){return F&&v(F,"normal"),new S(!0,V)},$=function(V){return P?(a(V),M?_(V[0],V[1],X):_(V[0],V[1])):M?_(V,X):_(V)};if(T)F=E.iterator;else if(I)F=E;else{if(U=g(E),!U)throw new w(o(E)+" is not iterable");if(u(U)){for(W=0,q=c(E);q>W;W++)if(J=$(E[W]),J&&d(A,J))return J;return new S(!1)}F=p(E,U)}for(rt=T?E.next:F.next;!(gt=i(rt,F)).done;){try{J=$(gt.value)}catch(V){v(F,"throw",V)}if(typeof J=="object"&&J&&d(A,J))return J}return new S(!1)}}),2777:((f,t,e)=>{var r=e(9565),i=e(34),a=e(757),o=e(5966),u=e(4270),c=e(8227),d=TypeError,p=c("toPrimitive");f.exports=function(g,v){if(!i(g)||a(g))return g;var w=o(g,p),S;if(w){if(v===void 0&&(v="default"),S=r(w,g,v),!i(S)||a(S))return S;throw new d("Can't convert object to primitive value")}return v===void 0&&(v="number"),u(g,v)}}),2787:((f,t,e)=>{var r=e(9297),i=e(4901),a=e(8981),o=e(6119),u=e(2211),c=o("IE_PROTO"),d=Object,p=d.prototype;f.exports=u?d.getPrototypeOf:function(g){var v=a(g);if(r(v,c))return v[c];var w=v.constructor;return i(w)&&v instanceof w?w.prototype:v instanceof d?p:null}}),2796:((f,t,e)=>{var r=e(9039),i=e(4901),a=/#|\.prototype\./,o=function(g,v){var w=c[u(g)];return w===p?!0:w===d?!1:i(v)?r(v):!!v},u=o.normalize=function(g){return String(g).replace(a,".").toLowerCase()},c=o.data={},d=o.NATIVE="N",p=o.POLYFILL="P";f.exports=o}),2804:(f=>{var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=t+"+/",r=t+"-_",i=function(a){for(var o={},u=0;u<64;u++)o[a.charAt(u)]=u;return o};f.exports={i2c:e,c2i:i(e),i2cUrl:r,c2iUrl:i(r)}}),2812:(f=>{var t=TypeError;f.exports=function(e,r){if(e<r)throw new t("Not enough arguments");return e}}),2839:((f,t,e)=>{var r=e(4576),i=r.navigator,a=i&&i.userAgent;f.exports=a?String(a):""}),2967:((f,t,e)=>{var r=e(6706),i=e(34),a=e(7750),o=e(3506);f.exports=Object.setPrototypeOf||("__proto__"in{}?(function(){var u=!1,c={},d;try{d=r(Object.prototype,"__proto__","set"),d(c,[]),u=c instanceof Array}catch{}return function(g,v){return a(g),o(v),i(g)&&(u?d(g,v):g.__proto__=v),g}})():void 0)}),3167:((f,t,e)=>{var r=e(4901),i=e(34),a=e(2967);f.exports=function(o,u,c){var d,p;return a&&r(d=u.constructor)&&d!==c&&i(p=d.prototype)&&p!==c.prototype&&a(o,p),o}}),3238:((f,t,e)=>{var r=e(4576),i=e(7811),a=e(7394),o=r.DataView;f.exports=function(u){if(!i||a(u)!==0)return!1;try{return new o(u),!1}catch{return!0}}}),3392:((f,t,e)=>{var r=e(9504),i=0,a=Math.random(),o=r(1.1.toString);f.exports=function(u){return"Symbol("+(u===void 0?"":u)+")_"+o(++i+a,36)}}),3440:((f,t,e)=>{var r=e(7080),i=e(4402),a=e(9286),o=e(5170),u=e(3789),c=e(8469),d=e(507),p=i.has,g=i.remove;f.exports=function(w){var S=r(this),A=u(w),E=a(S);return o(S)<=A.size?c(S,function(x){A.includes(x)&&g(E,x)}):d(A.getIterator(),function(x){p(E,x)&&g(E,x)}),E}}),3463:(f=>{var t=TypeError;f.exports=function(e){if(typeof e=="string")return e;throw new t("Argument is not a string")}}),3506:((f,t,e)=>{var r=e(3925),i=String,a=TypeError;f.exports=function(o){if(r(o))return o;throw new a("Can't set "+i(o)+" as a prototype")}}),3579:((f,t,e)=>{var r=e(6518),i=e(9565),a=e(2652),o=e(9306),u=e(8551),c=e(1767),d=e(9539),p=e(4549),g=p("some",TypeError);r({target:"Iterator",proto:!0,real:!0,forced:g},{some:function(w){u(this);try{o(w)}catch(E){d(this,"throw",E)}if(g)return i(g,this,w);var S=c(this),A=0;return a(S,function(E,x){if(w(E,A++))return x()},{IS_RECORD:!0,INTERRUPTED:!0}).stopped}})}),3650:((f,t,e)=>{var r=e(7080),i=e(4402),a=e(9286),o=e(3789),u=e(507),c=i.add,d=i.has,p=i.remove;f.exports=function(v){var w=r(this),S=o(v).getIterator(),A=a(w);return u(S,function(E){d(w,E)?p(A,E):c(A,E)}),A}}),3706:((f,t,e)=>{var r=e(9504),i=e(4901),a=e(7629),o=r(Function.toString);i(a.inspectSource)||(a.inspectSource=function(u){return o(u)}),f.exports=a.inspectSource}),3717:((f,t)=>{t.f=Object.getOwnPropertySymbols}),3724:((f,t,e)=>{var r=e(9039);f.exports=!r(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!==7})}),3789:((f,t,e)=>{var r=e(9306),i=e(8551),a=e(9565),o=e(1291),u=e(1767),c="Invalid size",d=RangeError,p=TypeError,g=Math.max,v=function(w,S){this.set=w,this.size=g(S,0),this.has=r(w.has),this.keys=r(w.keys)};v.prototype={getIterator:function(){return u(i(a(this.keys,this.set)))},includes:function(w){return a(this.has,this.set,w)}},f.exports=function(w){i(w);var S=+w.size;if(S!==S)throw new p(c);var A=o(S);if(A<0)throw new d(c);return new v(w,A)}}),3838:((f,t,e)=>{var r=e(7080),i=e(5170),a=e(8469),o=e(3789);f.exports=function(c){var d=r(this),p=o(c);return i(d)>p.size?!1:a(d,function(g){if(!p.includes(g))return!1},!0)!==!1}}),3853:((f,t,e)=>{var r=e(6518),i=e(4449),a=e(4916),o=!a("isDisjointFrom",function(u){return!u});r({target:"Set",proto:!0,real:!0,forced:o},{isDisjointFrom:i})}),3925:((f,t,e)=>{var r=e(34);f.exports=function(i){return r(i)||i===null}}),3972:((f,t,e)=>{var r=e(34),i=String,a=TypeError;f.exports=function(o){if(o===void 0||r(o))return o;throw new a(i(o)+" is not an object or undefined")}}),4055:((f,t,e)=>{var r=e(4576),i=e(34),a=r.document,o=i(a)&&i(a.createElement);f.exports=function(u){return o?a.createElement(u):{}}}),4114:((f,t,e)=>{var r=e(6518),i=e(8981),a=e(6198),o=e(4527),u=e(6837),c=e(9039),d=c(function(){return[].push.call({length:4294967296},1)!==4294967297}),p=function(){try{Object.defineProperty([],"length",{writable:!1}).push()}catch(v){return v instanceof TypeError}},g=d||!p();r({target:"Array",proto:!0,arity:1,forced:g},{push:function(w){var S=i(this),A=a(S),E=arguments.length;u(A+E);for(var x=0;x<E;x++)S[A]=arguments[x],A++;return o(S,A),A}})}),4117:(f=>{f.exports=function(t){return t==null}}),4149:(f=>{var t=RangeError;f.exports=function(e){if(e===e)return e;throw new t("NaN is not allowed")}}),4154:((f,t,e)=>{var r=e(6955),i=TypeError;f.exports=function(a){if(r(a)==="Uint8Array")return a;throw new i("Argument is not an Uint8Array")}}),4204:((f,t,e)=>{var r=e(7080),i=e(4402).add,a=e(9286),o=e(3789),u=e(507);f.exports=function(d){var p=r(this),g=o(d).getIterator(),v=a(p);return u(g,function(w){i(v,w)}),v}}),4209:((f,t,e)=>{var r=e(8227),i=e(6269),a=r("iterator"),o=Array.prototype;f.exports=function(u){return u!==void 0&&(i.Array===u||o[a]===u)}}),4215:((f,t,e)=>{var r=e(4576),i=e(2839),a=e(2195),o=function(u){return i.slice(0,u.length)===u};f.exports=(function(){return o("Bun/")?"BUN":o("Cloudflare-Workers")?"CLOUDFLARE":o("Deno/")?"DENO":o("Node.js/")?"NODE":r.Bun&&typeof Bun.version=="string"?"BUN":r.Deno&&typeof Deno.version=="object"?"DENO":a(r.process)==="process"?"NODE":r.window&&r.document?"BROWSER":"REST"})()}),4235:((f,t,e)=>{var r=e(6518),i=e(9504),a=e(2652),o=RangeError,u=TypeError,c=1/0,d=NaN,p=Math.abs,g=Math.pow,v=i([].push),w=g(2,1023),S=g(2,53)-1,A=Number.MAX_VALUE,E=g(2,971),x={},R={},C={},P={},T={},I=function(M,_){var F=M+_,U=_-(F-M);return{hi:F,lo:U}};r({target:"Math",stat:!0},{sumPrecise:function(_){var F=[],U=0,W=P;switch(a(_,function(G){if(++U>=S)throw new o("Maximum allowed index exceeded");if(typeof G!="number")throw new u("Value is not a number");W!==x&&(G!==G?W=x:G===c?W=W===R?x:C:G===-c?W=W===C?x:R:(G!==0||1/G===c)&&(W===P||W===T)&&(W=T,v(F,G)))}),W){case x:return d;case R:return-c;case C:return c;case P:return-0}for(var q=[],J=0,rt,gt,X,$,V,nt,tt=0;tt<F.length;tt++){rt=F[tt];for(var L=0,j=0;j<q.length;j++){if(gt=q[j],p(rt)<p(gt)&&(nt=rt,rt=gt,gt=nt),X=I(rt,gt),$=X.hi,V=X.lo,p($)===c){var st=$===c?1:-1;J+=st,rt=rt-st*w-st*w,p(rt)<p(gt)&&(nt=rt,rt=gt,gt=nt),X=I(rt,gt),$=X.hi,V=X.lo}V!==0&&(q[L++]=V),rt=$}q.length=L,rt!==0&&v(q,rt)}var ct=q.length-1;if($=0,V=0,J!==0){var wt=ct>=0?q[ct]:0;if(ct--,p(J)>1||J>0&&wt>0||J<0&&wt<0)return J>0?c:-c;if(X=I(J*w,wt/2),$=X.hi,V=X.lo,V*=2,p(2*$)===c)return $>0?$===w&&V===-(E/2)&&ct>=0&&q[ct]<0?A:c:$===-w&&V===E/2&&ct>=0&&q[ct]>0?-A:-c;V!==0&&(q[++ct]=V,V=0),$*=2}for(;ct>=0&&(X=I($,q[ct--]),$=X.hi,V=X.lo,V===0););return ct>=0&&(V<0&&q[ct]<0||V>0&&q[ct]>0)&&(gt=V*2,rt=$+gt,gt===rt-$&&($=rt)),$}})}),4270:((f,t,e)=>{var r=e(9565),i=e(4901),a=e(34),o=TypeError;f.exports=function(u,c){var d,p;if(c==="string"&&i(d=u.toString)&&!a(p=r(d,u))||i(d=u.valueOf)&&!a(p=r(d,u))||c!=="string"&&i(d=u.toString)&&!a(p=r(d,u)))return p;throw new o("Can't convert object to primitive value")}}),4376:((f,t,e)=>{var r=e(2195);f.exports=Array.isArray||function(a){return r(a)==="Array"}}),4402:((f,t,e)=>{var r=e(9504),i=Set.prototype;f.exports={Set,add:r(i.add),has:r(i.has),remove:r(i.delete),proto:i}}),4449:((f,t,e)=>{var r=e(7080),i=e(4402).has,a=e(5170),o=e(3789),u=e(8469),c=e(507),d=e(9539);f.exports=function(g){var v=r(this),w=o(g);if(a(v)<=w.size)return u(v,function(A){if(w.includes(A))return!1},!0)!==!1;var S=w.getIterator();return c(S,function(A){if(i(v,A))return d(S,"normal",!1)})!==!1}}),4483:((f,t,e)=>{var r=e(4576),i=e(9429),a=e(1548),o=r.structuredClone,u=r.ArrayBuffer,c=r.MessageChannel,d=!1,p,g,v,w;if(a)d=function(S){o(S,{transfer:[S]})};else if(u)try{c||(p=i("worker_threads"),p&&(c=p.MessageChannel)),c&&(g=new c,v=new u(2),w=function(S){g.port1.postMessage(null,[S])},v.byteLength===2&&(w(v),v.byteLength===0&&(d=w)))}catch{}f.exports=d}),4495:((f,t,e)=>{var r=e(9519),i=e(9039),a=e(4576),o=a.String;f.exports=!!Object.getOwnPropertySymbols&&!i(function(){var u=Symbol("symbol detection");return!o(u)||!(Object(u)instanceof Symbol)||!Symbol.sham&&r&&r<41})}),4527:((f,t,e)=>{var r=e(3724),i=e(4376),a=TypeError,o=Object.getOwnPropertyDescriptor,u=r&&!(function(){if(this!==void 0)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(c){return c instanceof TypeError}})();f.exports=u?function(c,d){if(i(c)&&!o(c,"length").writable)throw new a("Cannot set read only .length");return c.length=d}:function(c,d){return c.length=d}}),4549:((f,t,e)=>{var r=e(4576);f.exports=function(i,a){var o=r.Iterator,u=o&&o.prototype,c=u&&u[i],d=!1;if(c)try{c.call({next:function(){return{done:!0}},return:function(){d=!0}},-1)}catch(p){p instanceof a||(d=!1)}if(!d)return c}}),4576:(function(f){var t=function(e){return e&&e.Math===Math&&e};f.exports=t(typeof globalThis=="object"&&globalThis)||t(typeof window=="object"&&window)||t(typeof self=="object"&&self)||t(typeof global=="object"&&global)||t(typeof this=="object"&&this)||(function(){return this})()||Function("return this")()}),4603:((f,t,e)=>{var r=e(6840),i=e(9504),a=e(655),o=e(2812),u=URLSearchParams,c=u.prototype,d=i(c.append),p=i(c.delete),g=i(c.forEach),v=i([].push),w=new u("a=1&a=2&b=3");w.delete("a",1),w.delete("b",void 0),w+""!="a=2"&&r(c,"delete",function(S){var A=arguments.length,E=A<2?void 0:arguments[1];if(A&&E===void 0)return p(this,S);var x=[];g(this,function(F,U){v(x,{key:U,value:F})}),o(A,1);for(var R=a(S),C=a(E),P=0,T=0,I=!1,M=x.length,_;P<M;)_=x[P++],I||_.key===R?(I=!0,p(this,_.key)):T++;for(;T<M;)_=x[T++],_.key===R&&_.value===C||d(this,_.key,_.value)},{enumerable:!0,unsafe:!0})}),4628:((f,t,e)=>{var r=e(6518),i=e(6043);r({target:"Promise",stat:!0},{withResolvers:function(){var o=i.f(this);return{promise:o.promise,resolve:o.resolve,reject:o.reject}}})}),4644:((f,t,e)=>{var r=e(7811),i=e(3724),a=e(4576),o=e(4901),u=e(34),c=e(9297),d=e(6955),p=e(6823),g=e(6699),v=e(6840),w=e(2106),S=e(1625),A=e(2787),E=e(2967),x=e(8227),R=e(3392),C=e(1181),P=C.enforce,T=C.get,I=a.Int8Array,M=I&&I.prototype,_=a.Uint8ClampedArray,F=_&&_.prototype,U=I&&A(I),W=M&&A(M),q=Object.prototype,J=a.TypeError,rt=x("toStringTag"),gt=R("TYPED_ARRAY_TAG"),X="TypedArrayConstructor",$=r&&!!E&&d(a.opera)!=="Opera",V=!1,nt,tt,L,j={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},st={BigInt64Array:8,BigUint64Array:8},ct=function(Ot){if(!u(Ot))return!1;var Mt=d(Ot);return Mt==="DataView"||c(j,Mt)||c(st,Mt)},wt=function(ft){var Ot=A(ft);if(u(Ot)){var Mt=T(Ot);return Mt&&c(Mt,X)?Mt[X]:wt(Ot)}},G=function(ft){if(!u(ft))return!1;var Ot=d(ft);return c(j,Ot)||c(st,Ot)},H=function(ft){if(G(ft))return ft;throw new J("Target is not a typed array")},Y=function(ft){if(o(ft)&&(!E||S(U,ft)))return ft;throw new J(p(ft)+" is not a typed array constructor")},at=function(ft,Ot,Mt,pe){if(i){if(Mt)for(var ie in j){var Gt=a[ie];if(Gt&&c(Gt.prototype,ft))try{delete Gt.prototype[ft]}catch{try{Gt.prototype[ft]=Ot}catch{}}}(!W[ft]||Mt)&&v(W,ft,Mt?Ot:$&&M[ft]||Ot,pe)}},bt=function(ft,Ot,Mt){var pe,ie;if(i){if(E){if(Mt){for(pe in j)if(ie=a[pe],ie&&c(ie,ft))try{delete ie[ft]}catch{}}if(!U[ft]||Mt)try{return v(U,ft,Mt?Ot:$&&U[ft]||Ot)}catch{}else return}for(pe in j)ie=a[pe],ie&&(!ie[ft]||Mt)&&v(ie,ft,Ot)}};for(nt in j)tt=a[nt],L=tt&&tt.prototype,L?P(L)[X]=tt:$=!1;for(nt in st)tt=a[nt],L=tt&&tt.prototype,L&&(P(L)[X]=tt);if((!$||!o(U)||U===Function.prototype)&&(U=function(){throw new J("Incorrect invocation")},$))for(nt in j)a[nt]&&E(a[nt],U);if((!$||!W||W===q)&&(W=U.prototype,$))for(nt in j)a[nt]&&E(a[nt].prototype,W);if($&&A(F)!==W&&E(F,W),i&&!c(W,rt)){V=!0,w(W,rt,{configurable:!0,get:function(){return u(this)?this[gt]:void 0}});for(nt in j)a[nt]&&g(a[nt],gt,nt)}f.exports={NATIVE_ARRAY_BUFFER_VIEWS:$,TYPED_ARRAY_TAG:V&&gt,aTypedArray:H,aTypedArrayConstructor:Y,exportTypedArrayMethod:at,exportTypedArrayStaticMethod:bt,getTypedArrayConstructor:wt,isView:ct,isTypedArray:G,TypedArray:U,TypedArrayPrototype:W}}),4659:((f,t,e)=>{var r=e(3724),i=e(4913),a=e(6980);f.exports=function(o,u,c){r?i.f(o,u,a(0,c)):o[u]=c}}),4901:(f=>{var t=typeof document=="object"&&document.all;f.exports=typeof t>"u"&&t!==void 0?function(e){return typeof e=="function"||e===t}:function(e){return typeof e=="function"}}),4913:((f,t,e)=>{var r=e(3724),i=e(5917),a=e(8686),o=e(8551),u=e(6969),c=TypeError,d=Object.defineProperty,p=Object.getOwnPropertyDescriptor,g="enumerable",v="configurable",w="writable";t.f=r?a?function(A,E,x){if(o(A),E=u(E),o(x),typeof A=="function"&&E==="prototype"&&"value"in x&&w in x&&!x[w]){var R=p(A,E);R&&R[w]&&(A[E]=x.value,x={configurable:v in x?x[v]:R[v],enumerable:g in x?x[g]:R[g],writable:!1})}return d(A,E,x)}:d:function(A,E,x){if(o(A),E=u(E),o(x),i)try{return d(A,E,x)}catch{}if("get"in x||"set"in x)throw new c("Accessors not supported");return"value"in x&&(A[E]=x.value),A}}),4916:((f,t,e)=>{var r=e(7751),i=function(o){return{size:o,has:function(){return!1},keys:function(){return{next:function(){return{done:!0}}}}}},a=function(o){return{size:o,has:function(){return!0},keys:function(){throw new Error("e")}}};f.exports=function(o,u){var c=r("Set");try{new c()[o](i(0));try{return new c()[o](i(-1)),!1}catch{if(!u)return!0;try{return new c()[o](a(-1/0)),!1}catch{var d=new c;return d.add(1),d.add(2),u(d[o](a(1/0)))}}}catch{return!1}}}),4979:((f,t,e)=>{var r=e(6518),i=e(4576),a=e(7751),o=e(6980),u=e(4913).f,c=e(9297),d=e(679),p=e(3167),g=e(2603),v=e(5002),w=e(8574),S=e(3724),A=e(6395),E="DOMException",x=a("Error"),R=a(E),C=function(){d(this,P);var X=arguments.length,$=g(X<1?void 0:arguments[0]),V=g(X<2?void 0:arguments[1],"Error"),nt=new R($,V),tt=new x($);return tt.name=E,u(nt,"stack",o(1,w(tt.stack,1))),p(nt,this,C),nt},P=C.prototype=R.prototype,T="stack"in new x(E),I="stack"in new R(1,2),M=R&&S&&Object.getOwnPropertyDescriptor(i,E),_=!!M&&!(M.writable&&M.configurable),F=T&&!_&&!I;r({global:!0,constructor:!0,forced:A||F},{DOMException:F?C:R});var U=a(E),W=U.prototype;if(W.constructor!==U){A||u(W,"constructor",o(1,U));for(var q in v)if(c(v,q)){var J=v[q],rt=J.s;c(U,rt)||u(U,rt,o(6,J.c))}}}),5002:(f=>{f.exports={IndexSizeError:{s:"INDEX_SIZE_ERR",c:1,m:1},DOMStringSizeError:{s:"DOMSTRING_SIZE_ERR",c:2,m:0},HierarchyRequestError:{s:"HIERARCHY_REQUEST_ERR",c:3,m:1},WrongDocumentError:{s:"WRONG_DOCUMENT_ERR",c:4,m:1},InvalidCharacterError:{s:"INVALID_CHARACTER_ERR",c:5,m:1},NoDataAllowedError:{s:"NO_DATA_ALLOWED_ERR",c:6,m:0},NoModificationAllowedError:{s:"NO_MODIFICATION_ALLOWED_ERR",c:7,m:1},NotFoundError:{s:"NOT_FOUND_ERR",c:8,m:1},NotSupportedError:{s:"NOT_SUPPORTED_ERR",c:9,m:1},InUseAttributeError:{s:"INUSE_ATTRIBUTE_ERR",c:10,m:1},InvalidStateError:{s:"INVALID_STATE_ERR",c:11,m:1},SyntaxError:{s:"SYNTAX_ERR",c:12,m:1},InvalidModificationError:{s:"INVALID_MODIFICATION_ERR",c:13,m:1},NamespaceError:{s:"NAMESPACE_ERR",c:14,m:1},InvalidAccessError:{s:"INVALID_ACCESS_ERR",c:15,m:1},ValidationError:{s:"VALIDATION_ERR",c:16,m:0},TypeMismatchError:{s:"TYPE_MISMATCH_ERR",c:17,m:1},SecurityError:{s:"SECURITY_ERR",c:18,m:1},NetworkError:{s:"NETWORK_ERR",c:19,m:1},AbortError:{s:"ABORT_ERR",c:20,m:1},URLMismatchError:{s:"URL_MISMATCH_ERR",c:21,m:1},QuotaExceededError:{s:"QUOTA_EXCEEDED_ERR",c:22,m:1},TimeoutError:{s:"TIMEOUT_ERR",c:23,m:1},InvalidNodeTypeError:{s:"INVALID_NODE_TYPE_ERR",c:24,m:1},DataCloneError:{s:"DATA_CLONE_ERR",c:25,m:1}}}),5024:((f,t,e)=>{var r=e(6518),i=e(3650),a=e(9835),o=e(4916),u=!o("symmetricDifference")||!a("symmetricDifference");r({target:"Set",proto:!0,real:!0,forced:u},{symmetricDifference:i})}),5031:((f,t,e)=>{var r=e(7751),i=e(9504),a=e(8480),o=e(3717),u=e(8551),c=i([].concat);f.exports=r("Reflect","ownKeys")||function(p){var g=a.f(u(p)),v=o.f;return v?c(g,v(p)):g}}),5169:((f,t,e)=>{var r=e(3238),i=TypeError;f.exports=function(a){if(r(a))throw new i("ArrayBuffer is detached");return a}}),5170:((f,t,e)=>{var r=e(6706),i=e(4402);f.exports=r(i.proto,"size","get")||function(a){return a.size}}),5370:((f,t,e)=>{var r=e(6198);f.exports=function(i,a,o){for(var u=0,c=arguments.length>2?o:r(a),d=new i(c);c>u;)d[u]=a[u++];return d}}),5397:((f,t,e)=>{var r=e(7055),i=e(7750);f.exports=function(a){return r(i(a))}}),5610:((f,t,e)=>{var r=e(1291),i=Math.max,a=Math.min;f.exports=function(o,u){var c=r(o);return c<0?i(c+u,0):a(c,u)}}),5623:((f,t,e)=>{var r=e(6518),i=e(4576),a=e(9504),o=e(4154),u=e(5169),c=a(1.1.toString),d=i.Uint8Array,p=!d||!d.prototype.toHex||!(function(){try{var g=new d([255,255,255,255,255,255,255,255]);return g.toHex()==="ffffffffffffffff"}catch{return!1}})();d&&r({target:"Uint8Array",proto:!0,forced:p},{toHex:function(){o(this),u(this.buffer);for(var v="",w=0,S=this.length;w<S;w++){var A=c(this[w],16);v+=A.length===1?"0"+A:A}return v}})}),5636:((f,t,e)=>{var r=e(4576),i=e(9504),a=e(6706),o=e(7696),u=e(5169),c=e(7394),d=e(4483),p=e(1548),g=r.structuredClone,v=r.ArrayBuffer,w=r.DataView,S=Math.min,A=v.prototype,E=w.prototype,x=i(A.slice),R=a(A,"resizable","get"),C=a(A,"maxByteLength","get"),P=i(E.getInt8),T=i(E.setInt8);f.exports=(p||d)&&function(I,M,_){var F=c(I),U=M===void 0?F:o(M),W=!R||!R(I),q;if(u(I),p&&(I=g(I,{transfer:[I]}),F===U&&(_||W)))return I;if(F>=U&&(!_||W))q=x(I,0,U);else{var J=_&&!W&&C?{maxByteLength:C(I)}:void 0;q=new v(U,J);for(var rt=new w(I),gt=new w(q),X=S(U,F),$=0;$<X;$++)T(gt,$,P(rt,$))}return p||d(I),q}}),5745:((f,t,e)=>{var r=e(7629);f.exports=function(i,a){return r[i]||(r[i]=a||{})}}),5781:((f,t,e)=>{var r=e(6518),i=e(7751),a=e(2812),o=e(655),u=e(7416),c=i("URL");r({target:"URL",stat:!0,forced:!u},{parse:function(p){var g=a(arguments.length,1),v=o(p),w=g<2||arguments[1]===void 0?void 0:o(arguments[1]);try{return new c(v,w)}catch{return null}}})}),5854:((f,t,e)=>{var r=e(2777),i=TypeError;f.exports=function(a){var o=r(a,"number");if(typeof o=="number")throw new i("Can't convert number to bigint");return BigInt(o)}}),5876:((f,t,e)=>{var r=e(6518),i=e(3838),a=e(4916),o=!a("isSubsetOf",function(u){return u});r({target:"Set",proto:!0,real:!0,forced:o},{isSubsetOf:i})}),5917:((f,t,e)=>{var r=e(3724),i=e(9039),a=e(4055);f.exports=!r&&!i(function(){return Object.defineProperty(a("div"),"a",{get:function(){return 7}}).a!==7})}),5966:((f,t,e)=>{var r=e(9306),i=e(4117);f.exports=function(a,o){var u=a[o];return i(u)?void 0:r(u)}}),6043:((f,t,e)=>{var r=e(9306),i=TypeError,a=function(o){var u,c;this.promise=new o(function(d,p){if(u!==void 0||c!==void 0)throw new i("Bad Promise constructor");u=d,c=p}),this.resolve=r(u),this.reject=r(c)};f.exports.f=function(o){return new a(o)}}),6080:((f,t,e)=>{var r=e(7476),i=e(9306),a=e(616),o=r(r.bind);f.exports=function(u,c){return i(u),c===void 0?u:a?o(u,c):function(){return u.apply(c,arguments)}}}),6119:((f,t,e)=>{var r=e(5745),i=e(3392),a=r("keys");f.exports=function(o){return a[o]||(a[o]=i(o))}}),6193:((f,t,e)=>{var r=e(4215);f.exports=r==="NODE"}),6198:((f,t,e)=>{var r=e(8014);f.exports=function(i){return r(i.length)}}),6269:(f=>{f.exports={}}),6279:((f,t,e)=>{var r=e(6840);f.exports=function(i,a,o){for(var u in a)r(i,u,a[u],o);return i}}),6319:((f,t,e)=>{var r=e(8551),i=e(9539);f.exports=function(a,o,u,c){try{return c?o(r(u)[0],u[1]):o(u)}catch(d){i(a,"throw",d)}}}),6395:(f=>{f.exports=!1}),6518:((f,t,e)=>{var r=e(4576),i=e(7347).f,a=e(6699),o=e(6840),u=e(9433),c=e(7740),d=e(2796);f.exports=function(p,g){var v=p.target,w=p.global,S=p.stat,A,E,x,R,C,P;if(w?E=r:S?E=r[v]||u(v,{}):E=r[v]&&r[v].prototype,E)for(x in g){if(C=g[x],p.dontCallGetSet?(P=i(E,x),R=P&&P.value):R=E[x],A=d(w?x:v+(S?".":"#")+x,p.forced),!A&&R!==void 0){if(typeof C==typeof R)continue;c(C,R)}(p.sham||R&&R.sham)&&a(C,"sham",!0),o(E,x,C,p)}}}),6573:((f,t,e)=>{var r=e(3724),i=e(2106),a=e(3238),o=ArrayBuffer.prototype;r&&!("detached"in o)&&i(o,"detached",{configurable:!0,get:function(){return a(this)}})}),6699:((f,t,e)=>{var r=e(3724),i=e(4913),a=e(6980);f.exports=r?function(o,u,c){return i.f(o,u,a(1,c))}:function(o,u,c){return o[u]=c,o}}),6706:((f,t,e)=>{var r=e(9504),i=e(9306);f.exports=function(a,o,u){try{return r(i(Object.getOwnPropertyDescriptor(a,o)[u]))}catch{}}}),6801:((f,t,e)=>{var r=e(3724),i=e(8686),a=e(4913),o=e(8551),u=e(5397),c=e(1072);t.f=r&&!i?Object.defineProperties:function(p,g){o(p);for(var v=u(g),w=c(g),S=w.length,A=0,E;S>A;)a.f(p,E=w[A++],v[E]);return p}}),6823:(f=>{var t=String;f.exports=function(e){try{return t(e)}catch{return"Object"}}}),6837:(f=>{var t=TypeError,e=9007199254740991;f.exports=function(r){if(r>e)throw t("Maximum allowed index exceeded");return r}}),6840:((f,t,e)=>{var r=e(4901),i=e(4913),a=e(283),o=e(9433);f.exports=function(u,c,d,p){p||(p={});var g=p.enumerable,v=p.name!==void 0?p.name:c;if(r(d)&&a(d,v,p),p.global)g?u[c]=d:o(c,d);else{try{p.unsafe?u[c]&&(g=!0):delete u[c]}catch{}g?u[c]=d:i.f(u,c,{value:d,enumerable:!1,configurable:!p.nonConfigurable,writable:!p.nonWritable})}return u}}),6955:((f,t,e)=>{var r=e(2140),i=e(4901),a=e(2195),o=e(8227),u=o("toStringTag"),c=Object,d=a((function(){return arguments})())==="Arguments",p=function(g,v){try{return g[v]}catch{}};f.exports=r?a:function(g){var v,w,S;return g===void 0?"Undefined":g===null?"Null":typeof(w=p(v=c(g),u))=="string"?w:d?a(v):(S=a(v))==="Object"&&i(v.callee)?"Arguments":S}}),6969:((f,t,e)=>{var r=e(2777),i=e(757);f.exports=function(a){var o=r(a,"string");return i(o)?o:o+""}}),6980:(f=>{f.exports=function(t,e){return{enumerable:!(t&1),configurable:!(t&2),writable:!(t&4),value:e}}}),7040:((f,t,e)=>{var r=e(4495);f.exports=r&&!Symbol.sham&&typeof Symbol.iterator=="symbol"}),7055:((f,t,e)=>{var r=e(9504),i=e(9039),a=e(2195),o=Object,u=r("".split);f.exports=i(function(){return!o("z").propertyIsEnumerable(0)})?function(c){return a(c)==="String"?u(c,""):o(c)}:o}),7080:((f,t,e)=>{var r=e(4402).has;f.exports=function(i){return r(i),i}}),7347:((f,t,e)=>{var r=e(3724),i=e(9565),a=e(8773),o=e(6980),u=e(5397),c=e(6969),d=e(9297),p=e(5917),g=Object.getOwnPropertyDescriptor;t.f=r?g:function(w,S){if(w=u(w),S=c(S),p)try{return g(w,S)}catch{}if(d(w,S))return o(!i(a.f,w,S),w[S])}}),7394:((f,t,e)=>{var r=e(4576),i=e(6706),a=e(2195),o=r.ArrayBuffer,u=r.TypeError;f.exports=o&&i(o.prototype,"byteLength","get")||function(c){if(a(c)!=="ArrayBuffer")throw new u("ArrayBuffer expected");return c.byteLength}}),7416:((f,t,e)=>{var r=e(9039),i=e(8227),a=e(3724),o=e(6395),u=i("iterator");f.exports=!r(function(){var c=new URL("b?a=1&b=2&c=3","https://a"),d=c.searchParams,p=new URLSearchParams("a=1&a=2&b=3"),g="";return c.pathname="c%20d",d.forEach(function(v,w){d.delete("b"),g+=w+v}),p.delete("a",2),p.delete("b",void 0),o&&(!c.toJSON||!p.has("a",1)||p.has("a",2)||!p.has("a",void 0)||p.has("b"))||!d.size&&(o||!a)||!d.sort||c.href!=="https://a/c%20d?a=1&c=3"||d.get("c")!=="3"||String(new URLSearchParams("?a=1"))!=="a=1"||!d[u]||new URL("https://a@b").username!=="a"||new URLSearchParams(new URLSearchParams("a=b")).get("a")!=="b"||new URL("https://").host!=="xn--e1aybc"||new URL("https://a#").hash!=="#%D0%B1"||g!=="a1c3"||new URL("https://x",void 0).host!=="x"})}),7476:((f,t,e)=>{var r=e(2195),i=e(9504);f.exports=function(a){if(r(a)==="Function")return i(a)}}),7566:((f,t,e)=>{var r=e(6840),i=e(9504),a=e(655),o=e(2812),u=URLSearchParams,c=u.prototype,d=i(c.getAll),p=i(c.has),g=new u("a=1");(g.has("a",2)||!g.has("a",void 0))&&r(c,"has",function(w){var S=arguments.length,A=S<2?void 0:arguments[1];if(S&&A===void 0)return p(this,w);var E=d(this,w);o(S,1);for(var x=a(A),R=0;R<E.length;)if(E[R++]===x)return!0;return!1},{enumerable:!0,unsafe:!0})}),7629:((f,t,e)=>{var r=e(6395),i=e(4576),a=e(9433),o="__core-js_shared__",u=f.exports=i[o]||a(o,{});(u.versions||(u.versions=[])).push({version:"3.44.0",mode:r?"pure":"global",copyright:" 2014-2025 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.44.0/LICENSE",source:"https://github.com/zloirock/core-js"})}),7642:((f,t,e)=>{var r=e(6518),i=e(3440),a=e(9039),o=e(4916),u=!o("difference",function(d){return d.size===0}),c=u||a(function(){var d={size:1,has:function(){return!0},keys:function(){var g=0;return{next:function(){var v=g++>1;return p.has(1)&&p.clear(),{done:v,value:2}}}}},p=new Set([1,2,3,4]);return p.difference(d).size!==3});r({target:"Set",proto:!0,real:!0,forced:c},{difference:i})}),7657:((f,t,e)=>{var r=e(9039),i=e(4901),a=e(34),o=e(2360),u=e(2787),c=e(6840),d=e(8227),p=e(6395),g=d("iterator"),v=!1,w,S,A;[].keys&&(A=[].keys(),"next"in A?(S=u(u(A)),S!==Object.prototype&&(w=S)):v=!0);var E=!a(w)||r(function(){var x={};return w[g].call(x)!==x});E?w={}:p&&(w=o(w)),i(w[g])||c(w,g,function(){return this}),f.exports={IteratorPrototype:w,BUGGY_SAFARI_ITERATORS:v}}),7680:((f,t,e)=>{var r=e(9504);f.exports=r([].slice)}),7696:((f,t,e)=>{var r=e(1291),i=e(8014),a=RangeError;f.exports=function(o){if(o===void 0)return 0;var u=r(o),c=i(u);if(u!==c)throw new a("Wrong length or index");return c}}),7740:((f,t,e)=>{var r=e(9297),i=e(5031),a=e(7347),o=e(4913);f.exports=function(u,c,d){for(var p=i(c),g=o.f,v=a.f,w=0;w<p.length;w++){var S=p[w];!r(u,S)&&!(d&&r(d,S))&&g(u,S,v(c,S))}}}),7750:((f,t,e)=>{var r=e(4117),i=TypeError;f.exports=function(a){if(r(a))throw new i("Can't call method on "+a);return a}}),7751:((f,t,e)=>{var r=e(4576),i=e(4901),a=function(o){return i(o)?o:void 0};f.exports=function(o,u){return arguments.length<2?a(r[o]):r[o]&&r[o][u]}}),7811:(f=>{f.exports=typeof ArrayBuffer<"u"&&typeof DataView<"u"}),7936:((f,t,e)=>{var r=e(6518),i=e(5636);i&&r({target:"ArrayBuffer",proto:!0},{transferToFixedLength:function(){return i(this,arguments.length?arguments[0]:void 0,!1)}})}),8004:((f,t,e)=>{var r=e(6518),i=e(9039),a=e(8750),o=e(4916),u=!o("intersection",function(c){return c.size===2&&c.has(1)&&c.has(2)})||i(function(){return String(Array.from(new Set([1,2,3]).intersection(new Set([3,2]))))!=="3,2"});r({target:"Set",proto:!0,real:!0,forced:u},{intersection:a})}),8014:((f,t,e)=>{var r=e(1291),i=Math.min;f.exports=function(a){var o=r(a);return o>0?i(o,9007199254740991):0}}),8100:((f,t,e)=>{var r=e(6518),i=e(5636);i&&r({target:"ArrayBuffer",proto:!0},{transfer:function(){return i(this,arguments.length?arguments[0]:void 0,!0)}})}),8111:((f,t,e)=>{var r=e(6518),i=e(4576),a=e(679),o=e(8551),u=e(4901),c=e(2787),d=e(2106),p=e(4659),g=e(9039),v=e(9297),w=e(8227),S=e(7657).IteratorPrototype,A=e(3724),E=e(6395),x="constructor",R="Iterator",C=w("toStringTag"),P=TypeError,T=i[R],I=E||!u(T)||T.prototype!==S||!g(function(){T({})}),M=function(){if(a(this,S),c(this)===S)throw new P("Abstract class Iterator not directly constructable")},_=function(F,U){A?d(S,F,{configurable:!0,get:function(){return U},set:function(W){if(o(this),this===S)throw new P("You can't redefine this property");v(this,F)?this[F]=W:p(this,F,W)}}):S[F]=U};v(S,C)||_(C,R),(I||!v(S,x)||S[x]===Object)&&_(x,M),M.prototype=S,r({global:!0,constructor:!0,forced:I},{Iterator:M})}),8227:((f,t,e)=>{var r=e(4576),i=e(5745),a=e(9297),o=e(3392),u=e(4495),c=e(7040),d=r.Symbol,p=i("wks"),g=c?d.for||d:d&&d.withoutSetter||o;f.exports=function(v){return a(p,v)||(p[v]=u&&a(d,v)?d[v]:g("Symbol."+v)),p[v]}}),8235:((f,t,e)=>{var r=e(9504),i=e(9297),a=SyntaxError,o=parseInt,u=String.fromCharCode,c=r("".charAt),d=r("".slice),p=r(/./.exec),g={'\\"':'"',"\\\\":"\\","\\/":"/","\\b":"\b","\\f":"\f","\\n":`
`,"\\r":"\r","\\t":"	"},v=/^[\da-f]{4}$/i,w=/^[\u0000-\u001F]$/;f.exports=function(S,A){for(var E=!0,x="";A<S.length;){var R=c(S,A);if(R==="\\"){var C=d(S,A,A+2);if(i(g,C))x+=g[C],A+=2;else if(C==="\\u"){A+=2;var P=d(S,A,A+4);if(!p(v,P))throw new a("Bad Unicode escape at: "+A);x+=u(o(P,16)),A+=4}else throw new a('Unknown escape sequence: "'+C+'"')}else if(R==='"'){E=!1,A++;break}else{if(p(w,R))throw new a("Bad control character in string literal at: "+A);x+=R,A++}}if(E)throw new a("Unterminated string at: "+A);return{value:x,end:A}}}),8237:((f,t,e)=>{var r=e(6518),i=e(2652),a=e(9306),o=e(8551),u=e(1767),c=e(9539),d=e(4549),p=e(8745),g=e(9039),v=TypeError,w=g(function(){[].keys().reduce(function(){},void 0)}),S=!w&&d("reduce",v);r({target:"Iterator",proto:!0,real:!0,forced:w||S},{reduce:function(E){o(this);try{a(E)}catch(T){c(this,"throw",T)}var x=arguments.length<2,R=x?void 0:arguments[1];if(S)return p(S,this,x?[E]:[E,R]);var C=u(this),P=0;if(i(C,function(T){x?(x=!1,R=T):R=E(R,T,P),P++},{IS_RECORD:!0}),x)throw new v("Reduce of empty iterator with no initial value");return R}})}),8335:((f,t,e)=>{var r=e(6518),i=e(3724),a=e(4576),o=e(7751),u=e(9504),c=e(9565),d=e(4901),p=e(34),g=e(4376),v=e(9297),w=e(655),S=e(6198),A=e(4659),E=e(9039),x=e(8235),R=e(4495),C=a.JSON,P=a.Number,T=a.SyntaxError,I=C&&C.parse,M=o("Object","keys"),_=Object.getOwnPropertyDescriptor,F=u("".charAt),U=u("".slice),W=u(/./.exec),q=u([].push),J=/^\d$/,rt=/^[1-9]$/,gt=/^[\d-]$/,X=/^[\t\n\r ]$/,$=0,V=1,nt=function(G,H){G=w(G);var Y=new st(G,0),at=Y.parse(),bt=at.value,ft=Y.skip(X,at.end);if(ft<G.length)throw new T('Unexpected extra character: "'+F(G,ft)+'" after the parsed data at: '+ft);return d(H)?tt({"":bt},"",H,at):bt},tt=function(G,H,Y,at){var bt=G[H],ft=at&&bt===at.value,Ot=ft&&typeof at.source=="string"?{source:at.source}:{},Mt,pe,ie,Gt,sn;if(p(bt)){var Ar=g(bt),In=ft?at.nodes:Ar?[]:{};if(Ar)for(Mt=In.length,ie=S(bt),Gt=0;Gt<ie;Gt++)L(bt,Gt,tt(bt,""+Gt,Y,Gt<Mt?In[Gt]:void 0));else for(pe=M(bt),ie=S(pe),Gt=0;Gt<ie;Gt++)sn=pe[Gt],L(bt,sn,tt(bt,sn,Y,v(In,sn)?In[sn]:void 0))}return c(Y,G,H,bt,Ot)},L=function(G,H,Y){if(i){var at=_(G,H);if(at&&!at.configurable)return}Y===void 0?delete G[H]:A(G,H,Y)},j=function(G,H,Y,at){this.value=G,this.end=H,this.source=Y,this.nodes=at},st=function(G,H){this.source=G,this.index=H};st.prototype={fork:function(G){return new st(this.source,G)},parse:function(){var G=this.source,H=this.skip(X,this.index),Y=this.fork(H),at=F(G,H);if(W(gt,at))return Y.number();switch(at){case"{":return Y.object();case"[":return Y.array();case'"':return Y.string();case"t":return Y.keyword(!0);case"f":return Y.keyword(!1);case"n":return Y.keyword(null)}throw new T('Unexpected character: "'+at+'" at: '+H)},node:function(G,H,Y,at,bt){return new j(H,at,G?null:U(this.source,Y,at),bt)},object:function(){for(var G=this.source,H=this.index+1,Y=!1,at={},bt={};H<G.length;){if(H=this.until(['"',"}"],H),F(G,H)==="}"&&!Y){H++;break}var ft=this.fork(H).string(),Ot=ft.value;H=ft.end,H=this.until([":"],H)+1,H=this.skip(X,H),ft=this.fork(H).parse(),A(bt,Ot,ft),A(at,Ot,ft.value),H=this.until([",","}"],ft.end);var Mt=F(G,H);if(Mt===",")Y=!0,H++;else if(Mt==="}"){H++;break}}return this.node(V,at,this.index,H,bt)},array:function(){for(var G=this.source,H=this.index+1,Y=!1,at=[],bt=[];H<G.length;){if(H=this.skip(X,H),F(G,H)==="]"&&!Y){H++;break}var ft=this.fork(H).parse();if(q(bt,ft),q(at,ft.value),H=this.until([",","]"],ft.end),F(G,H)===",")Y=!0,H++;else if(F(G,H)==="]"){H++;break}}return this.node(V,at,this.index,H,bt)},string:function(){var G=this.index,H=x(this.source,this.index+1);return this.node($,H.value,G,H.end)},number:function(){var G=this.source,H=this.index,Y=H;if(F(G,Y)==="-"&&Y++,F(G,Y)==="0")Y++;else if(W(rt,F(G,Y)))Y=this.skip(J,Y+1);else throw new T("Failed to parse number at: "+Y);if(F(G,Y)==="."&&(Y=this.skip(J,Y+1)),F(G,Y)==="e"||F(G,Y)==="E"){Y++,(F(G,Y)==="+"||F(G,Y)==="-")&&Y++;var at=Y;if(Y=this.skip(J,Y),at===Y)throw new T("Failed to parse number's exponent value at: "+Y)}return this.node($,P(U(G,H,Y)),H,Y)},keyword:function(G){var H=""+G,Y=this.index,at=Y+H.length;if(U(this.source,Y,at)!==H)throw new T("Failed to parse value at: "+Y);return this.node($,G,Y,at)},skip:function(G,H){for(var Y=this.source;H<Y.length&&W(G,F(Y,H));H++);return H},until:function(G,H){H=this.skip(X,H);for(var Y=F(this.source,H),at=0;at<G.length;at++)if(G[at]===Y)return H;throw new T('Unexpected character: "'+Y+'" at: '+H)}};var ct=E(function(){var G="9007199254740993",H;return I(G,function(Y,at,bt){H=bt.source}),H!==G}),wt=R&&!E(function(){return 1/I("-0 	")!==-1/0});r({target:"JSON",stat:!0,forced:ct},{parse:function(H,Y){return wt&&!d(Y)?I(H):nt(H,Y)}})}),8469:((f,t,e)=>{var r=e(9504),i=e(507),a=e(4402),o=a.Set,u=a.proto,c=r(u.forEach),d=r(u.keys),p=d(new o).next;f.exports=function(g,v,w){return w?i({iterator:d(g),next:p},v):c(g,v)}}),8480:((f,t,e)=>{var r=e(1828),i=e(8727),a=i.concat("length","prototype");t.f=Object.getOwnPropertyNames||function(u){return r(u,a)}}),8527:((f,t,e)=>{var r=e(7080),i=e(4402).has,a=e(5170),o=e(3789),u=e(507),c=e(9539);f.exports=function(p){var g=r(this),v=o(p);if(a(g)<v.size)return!1;var w=v.getIterator();return u(w,function(S){if(!i(g,S))return c(w,"normal",!1)})!==!1}}),8551:((f,t,e)=>{var r=e(34),i=String,a=TypeError;f.exports=function(o){if(r(o))return o;throw new a(i(o)+" is not an object")}}),8574:((f,t,e)=>{var r=e(9504),i=Error,a=r("".replace),o=(function(d){return String(new i(d).stack)})("zxcasd"),u=/\n\s*at [^:]*:[^\n]*/,c=u.test(o);f.exports=function(d,p){if(c&&typeof d=="string"&&!i.prepareStackTrace)for(;p--;)d=a(d,u,"");return d}}),8622:((f,t,e)=>{var r=e(4576),i=e(4901),a=r.WeakMap;f.exports=i(a)&&/native code/.test(String(a))}),8646:((f,t,e)=>{var r=e(9565),i=e(8551),a=e(1767),o=e(851);f.exports=function(u,c){(!c||typeof u!="string")&&i(u);var d=o(u);return a(i(d!==void 0?r(d,u):u))}}),8686:((f,t,e)=>{var r=e(3724),i=e(9039);f.exports=r&&i(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!==42})}),8721:((f,t,e)=>{var r=e(3724),i=e(9504),a=e(2106),o=URLSearchParams.prototype,u=i(o.forEach);r&&!("size"in o)&&a(o,"size",{get:function(){var d=0;return u(this,function(){d++}),d},configurable:!0,enumerable:!0})}),8727:(f=>{f.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]}),8745:((f,t,e)=>{var r=e(616),i=Function.prototype,a=i.apply,o=i.call;f.exports=typeof Reflect=="object"&&Reflect.apply||(r?o.bind(a):function(){return o.apply(a,arguments)})}),8750:((f,t,e)=>{var r=e(7080),i=e(4402),a=e(5170),o=e(3789),u=e(8469),c=e(507),d=i.Set,p=i.add,g=i.has;f.exports=function(w){var S=r(this),A=o(w),E=new d;return a(S)>A.size?c(A.getIterator(),function(x){g(S,x)&&p(E,x)}):u(S,function(x){A.includes(x)&&p(E,x)}),E}}),8773:((f,t)=>{var e={}.propertyIsEnumerable,r=Object.getOwnPropertyDescriptor,i=r&&!e.call({1:2},1);t.f=i?function(o){var u=r(this,o);return!!u&&u.enumerable}:e}),8981:((f,t,e)=>{var r=e(7750),i=Object;f.exports=function(a){return i(r(a))}}),9039:(f=>{f.exports=function(t){try{return!!t()}catch{return!0}}}),9143:((f,t,e)=>{var r=e(4576),i=e(9504),a=e(3972),o=e(3463),u=e(9297),c=e(2804),d=e(944),p=e(5169),g=c.c2i,v=c.c2iUrl,w=r.SyntaxError,S=r.TypeError,A=i("".charAt),E=function(C,P){for(var T=C.length;P<T;P++){var I=A(C,P);if(I!==" "&&I!=="	"&&I!==`
`&&I!=="\f"&&I!=="\r")break}return P},x=function(C,P,T){var I=C.length;I<4&&(C+=I===2?"AA":"A");var M=(P[A(C,0)]<<18)+(P[A(C,1)]<<12)+(P[A(C,2)]<<6)+P[A(C,3)],_=[M>>16&255,M>>8&255,M&255];if(I===2){if(T&&_[1]!==0)throw new w("Extra bits");return[_[0]]}if(I===3){if(T&&_[2]!==0)throw new w("Extra bits");return[_[0],_[1]]}return _},R=function(C,P,T){for(var I=P.length,M=0;M<I;M++)C[T+M]=P[M];return T+I};f.exports=function(C,P,T,I){o(C),a(P);var M=d(P)==="base64"?g:v,_=P?P.lastChunkHandling:void 0;if(_===void 0&&(_="loose"),_!=="loose"&&_!=="strict"&&_!=="stop-before-partial")throw new S("Incorrect `lastChunkHandling` option");T&&p(T.buffer);var F=T||[],U=0,W=0,q="",J=0;if(I)for(;;){if(J=E(C,J),J===C.length){if(q.length>0){if(_==="stop-before-partial")break;if(_==="loose"){if(q.length===1)throw new w("Malformed padding: exactly one additional character");U=R(F,x(q,M,!1),U)}else throw new w("Missing padding")}W=C.length;break}var rt=A(C,J);if(++J,rt==="="){if(q.length<2)throw new w("Padding is too early");if(J=E(C,J),q.length===2){if(J===C.length){if(_==="stop-before-partial")break;throw new w("Malformed padding: only one =")}A(C,J)==="="&&(++J,J=E(C,J))}if(J<C.length)throw new w("Unexpected character after padding");U=R(F,x(q,M,_==="strict"),U),W=C.length;break}if(!u(M,rt))throw new w("Unexpected character");var gt=I-U;if(gt===1&&q.length===2||gt===2&&q.length===3||(q+=rt,q.length===4&&(U=R(F,x(q,M,!1),U),q="",W=J,U===I)))break}return{bytes:F,read:W,written:U}}}),9286:((f,t,e)=>{var r=e(4402),i=e(8469),a=r.Set,o=r.add;f.exports=function(u){var c=new a;return i(u,function(d){o(c,d)}),c}}),9297:((f,t,e)=>{var r=e(9504),i=e(8981),a=r({}.hasOwnProperty);f.exports=Object.hasOwn||function(u,c){return a(i(u),c)}}),9306:((f,t,e)=>{var r=e(4901),i=e(6823),a=TypeError;f.exports=function(o){if(r(o))return o;throw new a(i(o)+" is not a function")}}),9314:((f,t,e)=>{var r=e(6518),i=e(9565),a=e(8551),o=e(1767),u=e(4149),c=e(9590),d=e(9539),p=e(9462),g=e(684),v=e(4549),w=e(6395),S=!w&&!g("drop",0),A=!w&&!S&&v("drop",RangeError),E=w||S||A,x=p(function(){for(var R=this.iterator,C=this.next,P,T;this.remaining;)if(this.remaining--,P=a(i(C,R)),T=this.done=!!P.done,T)return;if(P=a(i(C,R)),T=this.done=!!P.done,!T)return P.value});r({target:"Iterator",proto:!0,real:!0,forced:E},{drop:function(C){a(this);var P;try{P=c(u(+C))}catch(T){d(this,"throw",T)}return A?i(A,this,P):new x(o(this),{remaining:P})}})}),9429:((f,t,e)=>{var r=e(4576),i=e(6193);f.exports=function(a){if(i){try{return r.process.getBuiltinModule(a)}catch{}try{return Function('return require("'+a+'")')()}catch{}}}}),9432:((f,t,e)=>{var r=e(6518),i=e(4576),a=e(5370),o=e(9143),u=i.Uint8Array,c=!u||!u.fromBase64||!(function(){try{u.fromBase64("",null)}catch{return!0}})();u&&r({target:"Uint8Array",stat:!0,forced:c},{fromBase64:function(p){var g=o(p,arguments.length>1?arguments[1]:void 0,null,9007199254740991);return a(u,g.bytes)}})}),9433:((f,t,e)=>{var r=e(4576),i=Object.defineProperty;f.exports=function(a,o){try{i(r,a,{value:o,configurable:!0,writable:!0})}catch{r[a]=o}return o}}),9462:((f,t,e)=>{var r=e(9565),i=e(2360),a=e(6699),o=e(6279),u=e(8227),c=e(1181),d=e(5966),p=e(7657).IteratorPrototype,g=e(2529),v=e(9539),w=e(1385),S=u("toStringTag"),A="IteratorHelper",E="WrapForValidIterator",x="normal",R="throw",C=c.set,P=function(M){var _=c.getterFor(M?E:A);return o(i(p),{next:function(){var U=_(this);if(M)return U.nextHandler();if(U.done)return g(void 0,!0);try{var W=U.nextHandler();return U.returnHandlerResult?W:g(W,U.done)}catch(q){throw U.done=!0,q}},return:function(){var F=_(this),U=F.iterator;if(F.done=!0,M){var W=d(U,"return");return W?r(W,U):g(void 0,!0)}if(F.inner)try{v(F.inner.iterator,x)}catch(q){return v(U,R,q)}if(F.openIters)try{w(F.openIters,x)}catch(q){return v(U,R,q)}return U&&v(U,x),g(void 0,!0)}})},T=P(!0),I=P(!1);a(I,S,"Iterator Helper"),f.exports=function(M,_,F){var U=function(q,J){J?(J.iterator=q.iterator,J.next=q.next):J=q,J.type=_?E:A,J.returnHandlerResult=!!F,J.nextHandler=M,J.counter=0,J.done=!1,C(this,J)};return U.prototype=_?T:I,U}}),9504:((f,t,e)=>{var r=e(616),i=Function.prototype,a=i.call,o=r&&i.bind.bind(a,a);f.exports=r?o:function(u){return function(){return a.apply(u,arguments)}}}),9519:((f,t,e)=>{var r=e(4576),i=e(2839),a=r.process,o=r.Deno,u=a&&a.versions||o&&o.version,c=u&&u.v8,d,p;c&&(d=c.split("."),p=d[0]>0&&d[0]<4?1:+(d[0]+d[1])),!p&&i&&(d=i.match(/Edge\/(\d+)/),(!d||d[1]>=74)&&(d=i.match(/Chrome\/(\d+)/),d&&(p=+d[1]))),f.exports=p}),9539:((f,t,e)=>{var r=e(9565),i=e(8551),a=e(5966);f.exports=function(o,u,c){var d,p;i(o);try{if(d=a(o,"return"),!d){if(u==="throw")throw c;return c}d=r(d,o)}catch(g){p=!0,d=g}if(u==="throw")throw c;if(p)throw d;return i(d),c}}),9565:((f,t,e)=>{var r=e(616),i=Function.prototype.call;f.exports=r?i.bind(i):function(){return i.apply(i,arguments)}}),9577:((f,t,e)=>{var r=e(9928),i=e(4644),a=e(1108),o=e(1291),u=e(5854),c=i.aTypedArray,d=i.getTypedArrayConstructor,p=i.exportTypedArrayMethod,g=(function(){try{new Int8Array(1).with(2,{valueOf:function(){throw 8}})}catch(w){return w===8}})(),v=g&&(function(){try{new Int8Array(1).with(-.5,1)}catch{return!0}})();p("with",function(w,S){var A=c(this),E=o(w),x=a(A)?u(S):+S;return r(A,d(A),E,x)},!g||v)}),9590:((f,t,e)=>{var r=e(1291),i=RangeError;f.exports=function(a){var o=r(a);if(o<0)throw new i("The argument can't be less than 0");return o}}),9617:((f,t,e)=>{var r=e(5397),i=e(5610),a=e(6198),o=function(u){return function(c,d,p){var g=r(c),v=a(g);if(v===0)return!u&&-1;var w=i(p,v),S;if(u&&d!==d){for(;v>w;)if(S=g[w++],S!==S)return!0}else for(;v>w;w++)if((u||w in g)&&g[w]===d)return u||w||0;return!u&&-1}};f.exports={includes:o(!0),indexOf:o(!1)}}),9631:((f,t,e)=>{var r=e(6518),i=e(4576),a=e(9504),o=e(3972),u=e(4154),c=e(5169),d=e(2804),p=e(944),g=d.i2c,v=d.i2cUrl,w=a("".charAt),S=i.Uint8Array,A=!S||!S.prototype.toBase64||!(function(){try{var E=new S;E.toBase64(null)}catch{return!0}})();S&&r({target:"Uint8Array",proto:!0,forced:A},{toBase64:function(){var x=u(this),R=arguments.length?o(arguments[0]):void 0,C=p(R)==="base64"?g:v,P=!!R&&!!R.omitPadding;c(this.buffer);for(var T="",I=0,M=x.length,_,F=function(U){return w(C,_>>6*U&63)};I+2<M;I+=3)_=(x[I]<<16)+(x[I+1]<<8)+x[I+2],T+=F(3)+F(2)+F(1)+F(0);return I+2===M?(_=(x[I]<<16)+(x[I+1]<<8),T+=F(3)+F(2)+F(1)+(P?"":"=")):I+1===M&&(_=x[I]<<16,T+=F(3)+F(2)+(P?"":"==")),T}})}),9797:((f,t,e)=>{var r=e(6518),i=e(4576),a=e(3463),o=e(4154),u=e(5169),c=e(2303);i.Uint8Array&&r({target:"Uint8Array",proto:!0},{setFromHex:function(p){o(this),a(p),u(this.buffer);var g=c(p,this).read;return{read:g,written:g/2}}})}),9835:(f=>{f.exports=function(t){try{var e=new Set,r={size:0,has:function(){return!0},keys:function(){return Object.defineProperty({},"next",{get:function(){return e.clear(),e.add(4),function(){return{done:!0}}}})}},i=e[t](r);return i.size===1&&i.values().next().value===4}catch{return!1}}}),9928:((f,t,e)=>{var r=e(6198),i=e(1291),a=RangeError;f.exports=function(o,u,c,d){var p=r(o),g=i(c),v=g<0?p+g:g;if(v>=p||v<0)throw new a("Incorrect index");for(var w=new u(p),S=0;S<p;S++)w[S]=S===v?d:o[S];return w}})},vd={};function Pt(f){var t=vd[f];if(t!==void 0)return t.exports;var e=vd[f]={exports:{}};return Tg[f].call(e.exports,e,e.exports,Pt),e.exports}Pt(4114);Pt(6573);Pt(8100);Pt(7936);Pt(8111);Pt(8237);Pt(1689);Pt(9577);Pt(4235);Pt(9432);Pt(1549);Pt(9797);Pt(9631);Pt(5623);Pt(4979);Pt(5781);const xe=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),Hl=[.001,0,0,.001,0,0],Nl=1.35,ze={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},Kn={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},jd="pdfjs_internal_editor_",xt={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,SIGNATURE:101,COMMENT:102},Rt={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_THICKNESS:32,HIGHLIGHT_FREE:33,HIGHLIGHT_SHOW_ALL:34,DRAW_STEP:41},Rg={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},we={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},Ea={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},qt={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},Xr={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},Ia={ERRORS:0,WARNINGS:1,INFOS:5},Ca={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},pa={moveTo:0,lineTo:1,curveTo:2,closePath:3},Pg={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let ka=Ia.WARNINGS;function Ig(f){Number.isInteger(f)&&(ka=f)}function kg(){return ka}function Ma(f){ka>=Ia.INFOS&&console.log(`Info: ${f}`)}function St(f){ka>=Ia.WARNINGS&&console.log(`Warning: ${f}`)}function Nt(f){throw new Error(f)}function ee(f,t){f||Nt(t)}function Mg(f){switch(f?.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function Ud(f,t=null,e=null){if(!f)return null;if(e&&typeof f=="string"&&(e.addDefaultProtocol&&f.startsWith("www.")&&f.match(/\./g)?.length>=2&&(f=`http://${f}`),e.tryConvertEncoding))try{f=Fg(f)}catch{}const r=t?URL.parse(f,t):URL.parse(f);return Mg(r)?r:null}function Hd(f,t,e=!1){const r=URL.parse(f);return r?(r.hash=t,r.href):e&&Ud(f,"http://example.com")?f.split("#",1)[0]+`${t?`#${t}`:""}`:""}function Tt(f,t,e,r=!1){return Object.defineProperty(f,t,{value:e,enumerable:!r,configurable:!0,writable:!1}),e}const yr=(function(){function t(e,r){this.message=e,this.name=r}return t.prototype=new Error,t.constructor=t,t})();class yd extends yr{constructor(t,e){super(t,"PasswordException"),this.code=e}}class Dl extends yr{constructor(t,e){super(t,"UnknownErrorException"),this.details=e}}class $l extends yr{constructor(t){super(t,"InvalidPDFException")}}class Ta extends yr{constructor(t,e,r){super(t,"ResponseException"),this.status=e,this.missing=r}}class Og extends yr{constructor(t){super(t,"FormatError")}}class Jn extends yr{constructor(t){super(t,"AbortException")}}function $d(f){(typeof f!="object"||f?.length===void 0)&&Nt("Invalid argument for bytesToString");const t=f.length,e=8192;if(t<e)return String.fromCharCode.apply(null,f);const r=[];for(let i=0;i<t;i+=e){const a=Math.min(i+e,t),o=f.subarray(i,a);r.push(String.fromCharCode.apply(null,o))}return r.join("")}function qs(f){typeof f!="string"&&Nt("Invalid argument for stringToBytes");const t=f.length,e=new Uint8Array(t);for(let r=0;r<t;++r)e[r]=f.charCodeAt(r)&255;return e}function Lg(f){return String.fromCharCode(f>>24&255,f>>16&255,f>>8&255,f&255)}function Ng(){const f=new Uint8Array(4);return f[0]=1,new Uint32Array(f.buffer,0,1)[0]===1}function Dg(){try{return new Function(""),!0}catch{return!1}}class fe{static get isLittleEndian(){return Tt(this,"isLittleEndian",Ng())}static get isEvalSupported(){return Tt(this,"isEvalSupported",Dg())}static get isOffscreenCanvasSupported(){return Tt(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return Tt(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get platform(){const{platform:t,userAgent:e}=navigator;return Tt(this,"platform",{isAndroid:e.includes("Android"),isLinux:t.includes("Linux"),isMac:t.includes("Mac"),isWindows:t.includes("Win"),isFirefox:e.includes("Firefox")})}static get isCSSRoundSupported(){return Tt(this,"isCSSRoundSupported",globalThis.CSS?.supports?.("width: round(1.5px, 1px)"))}}const Fl=Array.from(Array(256).keys(),f=>f.toString(16).padStart(2,"0"));class pt{static makeHexColor(t,e,r){return`#${Fl[t]}${Fl[e]}${Fl[r]}`}static scaleMinMax(t,e){let r;t[0]?(t[0]<0&&(r=e[0],e[0]=e[2],e[2]=r),e[0]*=t[0],e[2]*=t[0],t[3]<0&&(r=e[1],e[1]=e[3],e[3]=r),e[1]*=t[3],e[3]*=t[3]):(r=e[0],e[0]=e[1],e[1]=r,r=e[2],e[2]=e[3],e[3]=r,t[1]<0&&(r=e[1],e[1]=e[3],e[3]=r),e[1]*=t[1],e[3]*=t[1],t[2]<0&&(r=e[0],e[0]=e[2],e[2]=r),e[0]*=t[2],e[2]*=t[2]),e[0]+=t[4],e[1]+=t[5],e[2]+=t[4],e[3]+=t[5]}static transform(t,e){return[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],t[0]*e[4]+t[2]*e[5]+t[4],t[1]*e[4]+t[3]*e[5]+t[5]]}static applyTransform(t,e,r=0){const i=t[r],a=t[r+1];t[r]=i*e[0]+a*e[2]+e[4],t[r+1]=i*e[1]+a*e[3]+e[5]}static applyTransformToBezier(t,e,r=0){const i=e[0],a=e[1],o=e[2],u=e[3],c=e[4],d=e[5];for(let p=0;p<6;p+=2){const g=t[r+p],v=t[r+p+1];t[r+p]=g*i+v*o+c,t[r+p+1]=g*a+v*u+d}}static applyInverseTransform(t,e){const r=t[0],i=t[1],a=e[0]*e[3]-e[1]*e[2];t[0]=(r*e[3]-i*e[2]+e[2]*e[5]-e[4]*e[3])/a,t[1]=(-r*e[1]+i*e[0]+e[4]*e[1]-e[5]*e[0])/a}static axialAlignedBoundingBox(t,e,r){const i=e[0],a=e[1],o=e[2],u=e[3],c=e[4],d=e[5],p=t[0],g=t[1],v=t[2],w=t[3];let S=i*p+c,A=S,E=i*v+c,x=E,R=u*g+d,C=R,P=u*w+d,T=P;if(a!==0||o!==0){const I=a*p,M=a*v,_=o*g,F=o*w;S+=_,x+=_,E+=F,A+=F,R+=I,T+=I,P+=M,C+=M}r[0]=Math.min(r[0],S,E,A,x),r[1]=Math.min(r[1],R,P,C,T),r[2]=Math.max(r[2],S,E,A,x),r[3]=Math.max(r[3],R,P,C,T)}static inverseTransform(t){const e=t[0]*t[3]-t[1]*t[2];return[t[3]/e,-t[1]/e,-t[2]/e,t[0]/e,(t[2]*t[5]-t[4]*t[3])/e,(t[4]*t[1]-t[5]*t[0])/e]}static singularValueDecompose2dScale(t,e){const r=t[0],i=t[1],a=t[2],o=t[3],u=r**2+i**2,c=r*a+i*o,d=a**2+o**2,p=(u+d)/2,g=Math.sqrt(p**2-(u*d-c**2));e[0]=Math.sqrt(p+g||1),e[1]=Math.sqrt(p-g||1)}static normalizeRect(t){const e=t.slice(0);return t[0]>t[2]&&(e[0]=t[2],e[2]=t[0]),t[1]>t[3]&&(e[1]=t[3],e[3]=t[1]),e}static intersect(t,e){const r=Math.max(Math.min(t[0],t[2]),Math.min(e[0],e[2])),i=Math.min(Math.max(t[0],t[2]),Math.max(e[0],e[2]));if(r>i)return null;const a=Math.max(Math.min(t[1],t[3]),Math.min(e[1],e[3])),o=Math.min(Math.max(t[1],t[3]),Math.max(e[1],e[3]));return a>o?null:[r,a,i,o]}static pointBoundingBox(t,e,r){r[0]=Math.min(r[0],t),r[1]=Math.min(r[1],e),r[2]=Math.max(r[2],t),r[3]=Math.max(r[3],e)}static rectBoundingBox(t,e,r,i,a){a[0]=Math.min(a[0],t,r),a[1]=Math.min(a[1],e,i),a[2]=Math.max(a[2],t,r),a[3]=Math.max(a[3],e,i)}static#t(t,e,r,i,a,o,u,c,d,p){if(d<=0||d>=1)return;const g=1-d,v=d*d,w=v*d,S=g*(g*(g*t+3*d*e)+3*v*r)+w*i,A=g*(g*(g*a+3*d*o)+3*v*u)+w*c;p[0]=Math.min(p[0],S),p[1]=Math.min(p[1],A),p[2]=Math.max(p[2],S),p[3]=Math.max(p[3],A)}static#e(t,e,r,i,a,o,u,c,d,p,g,v){if(Math.abs(d)<1e-12){Math.abs(p)>=1e-12&&this.#t(t,e,r,i,a,o,u,c,-g/p,v);return}const w=p**2-4*g*d;if(w<0)return;const S=Math.sqrt(w),A=2*d;this.#t(t,e,r,i,a,o,u,c,(-p+S)/A,v),this.#t(t,e,r,i,a,o,u,c,(-p-S)/A,v)}static bezierBoundingBox(t,e,r,i,a,o,u,c,d){d[0]=Math.min(d[0],t,u),d[1]=Math.min(d[1],e,c),d[2]=Math.max(d[2],t,u),d[3]=Math.max(d[3],e,c),this.#e(t,r,a,u,e,i,o,c,3*(-t+3*(r-a)+u),6*(t-2*r+a),3*(r-t),d),this.#e(t,r,a,u,e,i,o,c,3*(-e+3*(i-o)+c),6*(e-2*i+o),3*(i-e),d)}}function Fg(f){return decodeURIComponent(escape(f))}let _l=null,wd=null;function _g(f){return _l||(_l=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,wd=new Map([["","t"]])),f.replaceAll(_l,(t,e,r)=>e?e.normalize("NFKC"):wd.get(r))}function Vd(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const f=new Uint8Array(32);return crypto.getRandomValues(f),$d(f)}const tu="pdfjs_internal_id_";function Bg(f,t,e){if(!Array.isArray(e)||e.length<2)return!1;const[r,i,...a]=e;if(!f(r)&&!Number.isInteger(r)||!t(i))return!1;const o=a.length;let u=!0;switch(i.name){case"XYZ":if(o<2||o>3)return!1;break;case"Fit":case"FitB":return o===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(o>1)return!1;break;case"FitR":if(o!==4)return!1;u=!1;break;default:return!1}for(const c of a)if(!(typeof c=="number"||u&&c===null))return!1;return!0}function be(f,t,e){return Math.min(Math.max(f,t),e)}function Wd(f){return Uint8Array.prototype.toBase64?f.toBase64():btoa($d(f))}function zg(f){return Uint8Array.fromBase64?Uint8Array.fromBase64(f):qs(atob(f))}typeof Math.sumPrecise!="function"&&(Math.sumPrecise=function(f){return f.reduce((t,e)=>t+e,0)});typeof AbortSignal.any!="function"&&(AbortSignal.any=function(f){const t=new AbortController,{signal:e}=t;for(const r of f)if(r.aborted)return t.abort(r.reason),e;for(const r of f)r.addEventListener("abort",()=>{t.abort(r.reason)},{signal:e});return e});Pt(1701);Pt(4628);Pt(7642);Pt(8004);Pt(3853);Pt(5876);Pt(2475);Pt(5024);Pt(1698);Pt(4603);Pt(7566);Pt(8721);Pt(9314);Pt(1148);Pt(3579);Pt(8335);const Tn="http://www.w3.org/2000/svg";class es{static CSS=96;static PDF=72;static PDF_TO_CSS_UNITS=this.CSS/this.PDF}async function ti(f,t="text"){if(Gs(f,document.baseURI)){const e=await fetch(f);if(!e.ok)throw new Error(e.statusText);switch(t){case"arraybuffer":return e.arrayBuffer();case"blob":return e.blob();case"json":return e.json()}return e.text()}return new Promise((e,r)=>{const i=new XMLHttpRequest;i.open("GET",f,!0),i.responseType=t,i.onreadystatechange=()=>{if(i.readyState===XMLHttpRequest.DONE){if(i.status===200||i.status===0){switch(t){case"arraybuffer":case"blob":case"json":e(i.response);return}e(i.responseText);return}r(new Error(i.statusText))}},i.send(null)})}class ei{constructor({viewBox:t,userUnit:e,scale:r,rotation:i,offsetX:a=0,offsetY:o=0,dontFlip:u=!1}){this.viewBox=t,this.userUnit=e,this.scale=r,this.rotation=i,this.offsetX=a,this.offsetY=o,r*=e;const c=(t[2]+t[0])/2,d=(t[3]+t[1])/2;let p,g,v,w;switch(i%=360,i<0&&(i+=360),i){case 180:p=-1,g=0,v=0,w=1;break;case 90:p=0,g=1,v=1,w=0;break;case 270:p=0,g=-1,v=-1,w=0;break;case 0:p=1,g=0,v=0,w=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}u&&(v=-v,w=-w);let S,A,E,x;p===0?(S=Math.abs(d-t[1])*r+a,A=Math.abs(c-t[0])*r+o,E=(t[3]-t[1])*r,x=(t[2]-t[0])*r):(S=Math.abs(c-t[0])*r+a,A=Math.abs(d-t[1])*r+o,E=(t[2]-t[0])*r,x=(t[3]-t[1])*r),this.transform=[p*r,g*r,v*r,w*r,S-p*r*c-v*r*d,A-g*r*c-w*r*d],this.width=E,this.height=x}get rawDims(){const t=this.viewBox;return Tt(this,"rawDims",{pageWidth:t[2]-t[0],pageHeight:t[3]-t[1],pageX:t[0],pageY:t[1]})}clone({scale:t=this.scale,rotation:e=this.rotation,offsetX:r=this.offsetX,offsetY:i=this.offsetY,dontFlip:a=!1}={}){return new ei({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:t,rotation:e,offsetX:r,offsetY:i,dontFlip:a})}convertToViewportPoint(t,e){const r=[t,e];return pt.applyTransform(r,this.transform),r}convertToViewportRectangle(t){const e=[t[0],t[1]];pt.applyTransform(e,this.transform);const r=[t[2],t[3]];return pt.applyTransform(r,this.transform),[e[0],e[1],r[0],r[1]]}convertToPdfPoint(t,e){const r=[t,e];return pt.applyInverseTransform(r,this.transform),r}}class eu extends yr{constructor(t,e=0){super(t,"RenderingCancelledException"),this.extraDelay=e}}function Oa(f){const t=f.length;let e=0;for(;e<t&&f[e].trim()==="";)e++;return f.substring(e,e+5).toLowerCase()==="data:"}function nu(f){return typeof f=="string"&&/\.pdf$/i.test(f)}function jg(f){return[f]=f.split(/[#?]/,1),f.substring(f.lastIndexOf("/")+1)}function Ug(f,t="document.pdf"){if(typeof f!="string")return t;if(Oa(f))return St('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),t;const r=(u=>{try{return new URL(u)}catch{try{return new URL(decodeURIComponent(u))}catch{try{return new URL(u,"https://foo.bar")}catch{try{return new URL(decodeURIComponent(u),"https://foo.bar")}catch{return null}}}}})(f);if(!r)return t;const i=u=>{try{let c=decodeURIComponent(u);return c.includes("/")?(c=c.split("/").at(-1),c.test(/^\.pdf$/i)?c:u):c}catch{return u}},a=/\.pdf$/i,o=r.pathname.split("/").at(-1);if(a.test(o))return i(o);if(r.searchParams.size>0){const u=Array.from(r.searchParams.values()).reverse();for(const d of u)if(a.test(d))return i(d);const c=Array.from(r.searchParams.keys()).reverse();for(const d of c)if(a.test(d))return i(d)}if(r.hash){const c=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i.exec(r.hash);if(c)return i(c[0])}return t}class Ad{started=Object.create(null);times=[];time(t){t in this.started&&St(`Timer is already running for ${t}`),this.started[t]=Date.now()}timeEnd(t){t in this.started||St(`Timer has not been started for ${t}`),this.times.push({name:t,start:this.started[t],end:Date.now()}),delete this.started[t]}toString(){const t=[];let e=0;for(const{name:r}of this.times)e=Math.max(r.length,e);for(const{name:r,start:i,end:a}of this.times)t.push(`${r.padEnd(e)} ${a-i}ms
`);return t.join("")}}function Gs(f,t){const e=t?URL.parse(f,t):URL.parse(f);return e?.protocol==="http:"||e?.protocol==="https:"}function Ke(f){f.preventDefault()}function te(f){f.preventDefault(),f.stopPropagation()}function Hg(f){console.log("Deprecated API usage: "+f)}class Vl{static#t;static toDateObject(t){if(t instanceof Date)return t;if(!t||typeof t!="string")return null;this.#t||=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?");const e=this.#t.exec(t);if(!e)return null;const r=parseInt(e[1],10);let i=parseInt(e[2],10);i=i>=1&&i<=12?i-1:0;let a=parseInt(e[3],10);a=a>=1&&a<=31?a:1;let o=parseInt(e[4],10);o=o>=0&&o<=23?o:0;let u=parseInt(e[5],10);u=u>=0&&u<=59?u:0;let c=parseInt(e[6],10);c=c>=0&&c<=59?c:0;const d=e[7]||"Z";let p=parseInt(e[8],10);p=p>=0&&p<=23?p:0;let g=parseInt(e[9],10)||0;return g=g>=0&&g<=59?g:0,d==="-"?(o+=p,u+=g):d==="+"&&(o-=p,u-=g),new Date(Date.UTC(r,i,a,o,u,c))}}function $g(f,{scale:t=1,rotation:e=0}){const{width:r,height:i}=f.attributes.style,a=[0,0,parseInt(r),parseInt(i)];return new ei({viewBox:a,userUnit:1,scale:t,rotation:e})}function La(f){if(f.startsWith("#")){const t=parseInt(f.slice(1),16);return[(t&16711680)>>16,(t&65280)>>8,t&255]}return f.startsWith("rgb(")?f.slice(4,-1).split(",").map(t=>parseInt(t)):f.startsWith("rgba(")?f.slice(5,-1).split(",").map(t=>parseInt(t)).slice(0,3):(St(`Not a valid color format: "${f}"`),[0,0,0])}function Vg(f){const t=document.createElement("span");t.style.visibility="hidden",t.style.colorScheme="only light",document.body.append(t);for(const e of f.keys()){t.style.color=e;const r=window.getComputedStyle(t).color;f.set(e,La(r))}t.remove()}function Vt(f){const{a:t,b:e,c:r,d:i,e:a,f:o}=f.getTransform();return[t,e,r,i,a,o]}function fn(f){const{a:t,b:e,c:r,d:i,e:a,f:o}=f.getTransform().invertSelf();return[t,e,r,i,a,o]}function mr(f,t,e=!1,r=!0){if(t instanceof ei){const{pageWidth:i,pageHeight:a}=t.rawDims,{style:o}=f,u=fe.isCSSRoundSupported,c=`var(--total-scale-factor) * ${i}px`,d=`var(--total-scale-factor) * ${a}px`,p=u?`round(down, ${c}, var(--scale-round-x))`:`calc(${c})`,g=u?`round(down, ${d}, var(--scale-round-y))`:`calc(${d})`;!e||t.rotation%180===0?(o.width=p,o.height=g):(o.width=g,o.height=p)}r&&f.setAttribute("data-main-rotation",t.rotation)}class vn{constructor(){const{pixelRatio:t}=vn;this.sx=t,this.sy=t}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}limitCanvas(t,e,r,i,a=-1){let o=1/0,u=1/0,c=1/0;r=vn.capPixels(r,a),r>0&&(o=Math.sqrt(r/(t*e))),i!==-1&&(u=i/t,c=i/e);const d=Math.min(o,u,c);return this.sx>d||this.sy>d?(this.sx=d,this.sy=d,!0):!1}static get pixelRatio(){return globalThis.devicePixelRatio||1}static capPixels(t,e){if(e>=0){const r=Math.ceil(window.screen.availWidth*window.screen.availHeight*this.pixelRatio**2*(1+e/100));return t>0?Math.min(t,r):r}return t}}const Wl=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];class Ks{#t=null;#e=null;#n;#r=null;#i=null;#s=null;#a=null;static#o=null;constructor(t){this.#n=t,Ks.#o||=Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"})}render(){const t=this.#t=document.createElement("div");t.classList.add("editToolbar","hidden"),t.setAttribute("role","toolbar");const e=this.#n._uiManager._signal;t.addEventListener("contextmenu",Ke,{signal:e}),t.addEventListener("pointerdown",Ks.#c,{signal:e});const r=this.#r=document.createElement("div");r.className="buttons",t.append(r);const i=this.#n.toolbarPosition;if(i){const{style:a}=t,o=this.#n._uiManager.direction==="ltr"?1-i[0]:i[0];a.insetInlineEnd=`${100*o}%`,a.top=`calc(${100*i[1]}% + var(--editor-toolbar-vert-offset))`}return t}get div(){return this.#t}static#c(t){t.stopPropagation()}#u(t){this.#n._focusEventsAllowed=!1,te(t)}#d(t){this.#n._focusEventsAllowed=!0,te(t)}#l(t){const e=this.#n._uiManager._signal;t.addEventListener("focusin",this.#u.bind(this),{capture:!0,signal:e}),t.addEventListener("focusout",this.#d.bind(this),{capture:!0,signal:e}),t.addEventListener("contextmenu",Ke,{signal:e})}hide(){this.#t.classList.add("hidden"),this.#e?.hideDropdown()}show(){this.#t.classList.remove("hidden"),this.#i?.shown(),this.#s?.shown()}addDeleteButton(){const{editorType:t,_uiManager:e}=this.#n,r=document.createElement("button");r.className="delete",r.tabIndex=0,r.setAttribute("data-l10n-id",Ks.#o[t]),this.#l(r),r.addEventListener("click",i=>{e.delete()},{signal:e._signal}),this.#r.append(r)}get#p(){const t=document.createElement("div");return t.className="divider",t}async addAltText(t){const e=await t.render();this.#l(e),this.#r.append(e,this.#p),this.#i=t}addComment(t){if(this.#s)return;const e=t.render();e&&(this.#l(e),this.#r.prepend(e,this.#p),this.#s=t,t.toolbar=this)}addColorPicker(t){if(this.#e)return;this.#e=t;const e=t.renderButton();this.#l(e),this.#r.append(e,this.#p)}async addEditSignatureButton(t){const e=this.#a=await t.renderEditButton(this.#n);this.#l(e),this.#r.append(e,this.#p)}async addButton(t,e){switch(t){case"colorPicker":this.addColorPicker(e);break;case"altText":await this.addAltText(e);break;case"editSignature":await this.addEditSignatureButton(e);break;case"delete":this.addDeleteButton();break;case"comment":this.addComment(e);break}}updateEditSignatureButton(t){this.#a&&(this.#a.title=t)}remove(){this.#t.remove(),this.#e?.destroy(),this.#e=null}}class Wg{#t=null;#e=null;#n;constructor(t){this.#n=t}#r(){const t=this.#e=document.createElement("div");t.className="editToolbar",t.setAttribute("role","toolbar"),t.addEventListener("contextmenu",Ke,{signal:this.#n._signal});const e=this.#t=document.createElement("div");return e.className="buttons",t.append(e),this.#s(),t}#i(t,e){let r=0,i=0;for(const a of t){const o=a.y+a.height;if(o<r)continue;const u=a.x+(e?a.width:0);if(o>r){i=u,r=o;continue}e?u>i&&(i=u):u<i&&(i=u)}return[e?1-i:i,r]}show(t,e,r){const[i,a]=this.#i(e,r),{style:o}=this.#e||=this.#r();t.append(this.#e),o.insetInlineEnd=`${100*i}%`,o.top=`calc(${100*a}% + var(--editor-toolbar-vert-offset))`}hide(){this.#e.remove()}#s(){const t=document.createElement("button");t.className="highlightButton",t.tabIndex=0,t.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");const e=document.createElement("span");t.append(e),e.className="visuallyHidden",e.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label");const r=this.#n._signal;t.addEventListener("contextmenu",Ke,{signal:r}),t.addEventListener("click",()=>{this.#n.highlightSelection("floating_button")},{signal:r}),this.#t.append(t)}}function Gd(f,t,e){for(const r of e)t.addEventListener(r,f[r].bind(f))}class Gg{#t=0;get id(){return`${jd}${this.#t++}`}}class ru{#t=Vd();#e=0;#n=null;static get _isSVGFittingCanvas(){const t='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',r=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),i=new Image;i.src=t;const a=i.decode().then(()=>(r.drawImage(i,0,0,1,1,0,0,1,3),new Uint32Array(r.getImageData(0,0,1,1).data.buffer)[0]===0));return Tt(this,"_isSVGFittingCanvas",a)}async#r(t,e){this.#n||=new Map;let r=this.#n.get(t);if(r===null)return null;if(r?.bitmap)return r.refCounter+=1,r;try{r||={bitmap:null,id:`image_${this.#t}_${this.#e++}`,refCounter:0,isSvg:!1};let i;if(typeof e=="string"?(r.url=e,i=await ti(e,"blob")):e instanceof File?i=r.file=e:e instanceof Blob&&(i=e),i.type==="image/svg+xml"){const a=ru._isSVGFittingCanvas,o=new FileReader,u=new Image,c=new Promise((d,p)=>{u.onload=()=>{r.bitmap=u,r.isSvg=!0,d()},o.onload=async()=>{const g=r.svgUrl=o.result;u.src=await a?`${g}#svgView(preserveAspectRatio(none))`:g},u.onerror=o.onerror=p});o.readAsDataURL(i),await c}else r.bitmap=await createImageBitmap(i);r.refCounter=1}catch(i){St(i),r=null}return this.#n.set(t,r),r&&this.#n.set(r.id,r),r}async getFromFile(t){const{lastModified:e,name:r,size:i,type:a}=t;return this.#r(`${e}_${r}_${i}_${a}`,t)}async getFromUrl(t){return this.#r(t,t)}async getFromBlob(t,e){const r=await e;return this.#r(t,r)}async getFromId(t){this.#n||=new Map;const e=this.#n.get(t);if(!e)return null;if(e.bitmap)return e.refCounter+=1,e;if(e.file)return this.getFromFile(e.file);if(e.blobPromise){const{blobPromise:r}=e;return delete e.blobPromise,this.getFromBlob(e.id,r)}return this.getFromUrl(e.url)}getFromCanvas(t,e){this.#n||=new Map;let r=this.#n.get(t);if(r?.bitmap)return r.refCounter+=1,r;const i=new OffscreenCanvas(e.width,e.height);return i.getContext("2d").drawImage(e,0,0),r={bitmap:i.transferToImageBitmap(),id:`image_${this.#t}_${this.#e++}`,refCounter:1,isSvg:!1},this.#n.set(t,r),this.#n.set(r.id,r),r}getSvgUrl(t){const e=this.#n.get(t);return e?.isSvg?e.svgUrl:null}deleteId(t){this.#n||=new Map;const e=this.#n.get(t);if(!e||(e.refCounter-=1,e.refCounter!==0))return;const{bitmap:r}=e;if(!e.url&&!e.file){const i=new OffscreenCanvas(r.width,r.height);i.getContext("bitmaprenderer").transferFromImageBitmap(r),e.blobPromise=i.convertToBlob()}r.close?.(),e.bitmap=null}isValidId(t){return t.startsWith(`image_${this.#t}_`)}}class Xg{#t=[];#e=!1;#n;#r=-1;constructor(t=128){this.#n=t}add({cmd:t,undo:e,post:r,mustExec:i,type:a=NaN,overwriteIfSameType:o=!1,keepUndo:u=!1}){if(i&&t(),this.#e)return;const c={cmd:t,undo:e,post:r,type:a};if(this.#r===-1){this.#t.length>0&&(this.#t.length=0),this.#r=0,this.#t.push(c);return}if(o&&this.#t[this.#r].type===a){u&&(c.undo=this.#t[this.#r].undo),this.#t[this.#r]=c;return}const d=this.#r+1;d===this.#n?this.#t.splice(0,1):(this.#r=d,d<this.#t.length&&this.#t.splice(d)),this.#t.push(c)}undo(){if(this.#r===-1)return;this.#e=!0;const{undo:t,post:e}=this.#t[this.#r];t(),e?.(),this.#e=!1,this.#r-=1}redo(){if(this.#r<this.#t.length-1){this.#r+=1,this.#e=!0;const{cmd:t,post:e}=this.#t[this.#r];t(),e?.(),this.#e=!1}}hasSomethingToUndo(){return this.#r!==-1}hasSomethingToRedo(){return this.#r<this.#t.length-1}cleanType(t){if(this.#r!==-1){for(let e=this.#r;e>=0;e--)if(this.#t[e].type!==t){this.#t.splice(e+1,this.#r-e),this.#r=e;return}this.#t.length=0,this.#r=-1}}destroy(){this.#t=null}}class ni{constructor(t){this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:e}=fe.platform;for(const[r,i,a={}]of t)for(const o of r){const u=o.startsWith("mac+");e&&u?(this.callbacks.set(o.slice(4),{callback:i,options:a}),this.allKeys.add(o.split("+").at(-1))):!e&&!u&&(this.callbacks.set(o,{callback:i,options:a}),this.allKeys.add(o.split("+").at(-1)))}}#t(t){t.altKey&&this.buffer.push("alt"),t.ctrlKey&&this.buffer.push("ctrl"),t.metaKey&&this.buffer.push("meta"),t.shiftKey&&this.buffer.push("shift"),this.buffer.push(t.key);const e=this.buffer.join("+");return this.buffer.length=0,e}exec(t,e){if(!this.allKeys.has(e.key))return;const r=this.callbacks.get(this.#t(e));if(!r)return;const{callback:i,options:{bubbles:a=!1,args:o=[],checker:u=null}}=r;u&&!u(t,e)||(i.bind(t,...o,e)(),a||te(e))}}class su{static _colorsMapping=new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]);get _colors(){const t=new Map([["CanvasText",null],["Canvas",null]]);return Vg(t),Tt(this,"_colors",t)}convert(t){const e=La(t);if(!window.matchMedia("(forced-colors: active)").matches)return e;for(const[r,i]of this._colors)if(i.every((a,o)=>a===e[o]))return su._colorsMapping.get(r);return e}getHexCode(t){const e=this._colors.get(t);return e?pt.makeHexColor(...e):t}}class Zn{#t=new AbortController;#e=null;#n=new Map;#r=new Map;#i=null;#s=null;#a=null;#o=new Xg;#c=null;#u=null;#d=null;#l=0;#p=new Set;#m=null;#f=null;#h=new Set;_editorUndoBar=null;#g=!1;#w=!1;#v=!1;#S=null;#E=null;#y=null;#b=null;#I=!1;#x=null;#k=new Gg;#P=!1;#R=!1;#T=null;#O=null;#_=null;#L=null;#U=null;#C=xt.NONE;#A=new Set;#B=null;#z=null;#H=null;#W=null;#G={isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1};#$=[0,0];#N=null;#D=null;#V=null;#Q=null;#F=null;static TRANSLATE_SMALL=1;static TRANSLATE_BIG=10;static get _keyboardManager(){const t=Zn.prototype,e=o=>o.#D.contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&o.hasSomethingToControl(),r=(o,{target:u})=>{if(u instanceof HTMLInputElement){const{type:c}=u;return c!=="text"&&c!=="number"}return!0},i=this.TRANSLATE_SMALL,a=this.TRANSLATE_BIG;return Tt(this,"_keyboardManager",new ni([[["ctrl+a","mac+meta+a"],t.selectAll,{checker:r}],[["ctrl+z","mac+meta+z"],t.undo,{checker:r}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],t.redo,{checker:r}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],t.delete,{checker:r}],[["Enter","mac+Enter"],t.addNewEditorFromKeyboard,{checker:(o,{target:u})=>!(u instanceof HTMLButtonElement)&&o.#D.contains(u)&&!o.isEnterHandled}],[[" ","mac+ "],t.addNewEditorFromKeyboard,{checker:(o,{target:u})=>!(u instanceof HTMLButtonElement)&&o.#D.contains(document.activeElement)}],[["Escape","mac+Escape"],t.unselectAll],[["ArrowLeft","mac+ArrowLeft"],t.translateSelectedEditors,{args:[-i,0],checker:e}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t.translateSelectedEditors,{args:[-a,0],checker:e}],[["ArrowRight","mac+ArrowRight"],t.translateSelectedEditors,{args:[i,0],checker:e}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t.translateSelectedEditors,{args:[a,0],checker:e}],[["ArrowUp","mac+ArrowUp"],t.translateSelectedEditors,{args:[0,-i],checker:e}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t.translateSelectedEditors,{args:[0,-a],checker:e}],[["ArrowDown","mac+ArrowDown"],t.translateSelectedEditors,{args:[0,i],checker:e}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t.translateSelectedEditors,{args:[0,a],checker:e}]]))}constructor(t,e,r,i,a,o,u,c,d,p,g,v,w,S,A,E){const x=this._signal=this.#t.signal;this.#D=t,this.#V=e,this.#Q=r,this.#i=i,this.#c=a,this.#z=o,this._eventBus=u,u._on("editingaction",this.onEditingAction.bind(this),{signal:x}),u._on("pagechanging",this.onPageChanging.bind(this),{signal:x}),u._on("scalechanging",this.onScaleChanging.bind(this),{signal:x}),u._on("rotationchanging",this.onRotationChanging.bind(this),{signal:x}),u._on("setpreference",this.onSetPreference.bind(this),{signal:x}),u._on("switchannotationeditorparams",R=>this.updateParams(R.type,R.value),{signal:x}),this.#it(),this.#ut(),this.#Z(),this.#s=c.annotationStorage,this.#S=c.filterFactory,this.#H=d,this.#b=p||null,this.#g=g,this.#w=v,this.#v=w,this.#U=S||null,this.viewParameters={realScale:es.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=A||null,this._supportsPinchToZoom=E!==!1}destroy(){this.#F?.resolve(),this.#F=null,this.#t?.abort(),this.#t=null,this._signal=null;for(const t of this.#r.values())t.destroy();this.#r.clear(),this.#n.clear(),this.#h.clear(),this.#L?.clear(),this.#e=null,this.#A.clear(),this.#o.destroy(),this.#i?.destroy(),this.#c?.destroy(),this.#z?.destroy(),this.#x?.hide(),this.#x=null,this.#_?.destroy(),this.#_=null,this.#E&&(clearTimeout(this.#E),this.#E=null),this.#N&&(clearTimeout(this.#N),this.#N=null),this._editorUndoBar?.destroy()}combinedSignal(t){return AbortSignal.any([this._signal,t.signal])}get mlManager(){return this.#U}get useNewAltTextFlow(){return this.#w}get useNewAltTextWhenAddingImage(){return this.#v}get hcmFilter(){return Tt(this,"hcmFilter",this.#H?this.#S.addHCMFilter(this.#H.foreground,this.#H.background):"none")}get direction(){return Tt(this,"direction",getComputedStyle(this.#D).direction)}get _highlightColors(){return Tt(this,"_highlightColors",this.#b?new Map(this.#b.split(",").map(t=>(t=t.split("=").map(e=>e.trim()),t[1]=t[1].toUpperCase(),t))):null)}get highlightColors(){const{_highlightColors:t}=this;if(!t)return Tt(this,"highlightColors",null);const e=new Map,r=!!this.#H;for(const[i,a]of t){const o=i.endsWith("_HCM");if(r&&o){e.set(i.replace("_HCM",""),a);continue}!r&&!o&&e.set(i,a)}return Tt(this,"highlightColors",e)}get highlightColorNames(){return Tt(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,t=>t.reverse())):null)}getNonHCMColor(t){if(!this._highlightColors)return t;const e=this.highlightColorNames.get(t);return this._highlightColors.get(e)||t}getNonHCMColorName(t){return this.highlightColorNames.get(t)||t}setCurrentDrawingSession(t){t?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),this.#d=t}setMainHighlightColorPicker(t){this.#_=t}editAltText(t,e=!1){this.#i?.editAltText(this,t,e)}hasCommentManager(){return!!this.#c}editComment(t,e){this.#c?.open(this,t,e)}getSignature(t){this.#z?.getSignature({uiManager:this,editor:t})}get signatureManager(){return this.#z}switchToMode(t,e){this._eventBus.on("annotationeditormodechanged",e,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:t})}setPreference(t,e){this._eventBus.dispatch("setpreference",{source:this,name:t,value:e})}onSetPreference({name:t,value:e}){switch(t){case"enableNewAltTextWhenAddingImage":this.#v=e;break}}onPageChanging({pageNumber:t}){this.#l=t-1}focusMainContainer(){this.#D.focus()}findParent(t,e){for(const r of this.#r.values()){const{x:i,y:a,width:o,height:u}=r.div.getBoundingClientRect();if(t>=i&&t<=i+o&&e>=a&&e<=a+u)return r}return null}disableUserSelect(t=!1){this.#V.classList.toggle("noUserSelect",t)}addShouldRescale(t){this.#h.add(t)}removeShouldRescale(t){this.#h.delete(t)}onScaleChanging({scale:t}){this.commitOrRemove(),this.viewParameters.realScale=t*es.PDF_TO_CSS_UNITS;for(const e of this.#h)e.onScaleChanging();this.#d?.onScaleChanging()}onRotationChanging({pagesRotation:t}){this.commitOrRemove(),this.viewParameters.rotation=t}#Y({anchorNode:t}){return t.nodeType===Node.TEXT_NODE?t.parentElement:t}#J(t){const{currentLayer:e}=this;if(e.hasTextLayer(t))return e;for(const r of this.#r.values())if(r.hasTextLayer(t))return r;return null}highlightSelection(t=""){const e=document.getSelection();if(!e||e.isCollapsed)return;const{anchorNode:r,anchorOffset:i,focusNode:a,focusOffset:o}=e,u=e.toString(),d=this.#Y(e).closest(".textLayer"),p=this.getSelectionBoxes(d);if(!p)return;e.empty();const g=this.#J(d),v=this.#C===xt.NONE,w=()=>{g?.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:t,boxes:p,anchorNode:r,anchorOffset:i,focusNode:a,focusOffset:o,text:u}),v&&this.showAllEditors("highlight",!0,!0)};if(v){this.switchToMode(xt.HIGHLIGHT,w);return}w()}#rt(){const t=document.getSelection();if(!t||t.isCollapsed)return;const r=this.#Y(t).closest(".textLayer"),i=this.getSelectionBoxes(r);i&&(this.#x||=new Wg(this),this.#x.show(r,i,this.direction==="ltr"))}addToAnnotationStorage(t){!t.isEmpty()&&this.#s&&!this.#s.has(t.id)&&this.#s.setValue(t.id,t)}a11yAlert(t,e=null){const r=this.#Q;r&&(r.setAttribute("data-l10n-id",t),e?r.setAttribute("data-l10n-args",JSON.stringify(e)):r.removeAttribute("data-l10n-args"))}#st(){const t=document.getSelection();if(!t||t.isCollapsed){this.#B&&(this.#x?.hide(),this.#B=null,this.#M({hasSelectedText:!1}));return}const{anchorNode:e}=t;if(e===this.#B)return;const i=this.#Y(t).closest(".textLayer");if(!i){this.#B&&(this.#x?.hide(),this.#B=null,this.#M({hasSelectedText:!1}));return}if(this.#x?.hide(),this.#B=e,this.#M({hasSelectedText:!0}),!(this.#C!==xt.HIGHLIGHT&&this.#C!==xt.NONE)&&(this.#C===xt.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),this.#I=this.isShiftKeyDown,!this.isShiftKeyDown)){const a=this.#C===xt.HIGHLIGHT?this.#J(i):null;a?.toggleDrawing();const o=new AbortController,u=this.combinedSignal(o),c=d=>{d.type==="pointerup"&&d.button!==0||(o.abort(),a?.toggleDrawing(!0),d.type==="pointerup"&&this.#K("main_toolbar"))};window.addEventListener("pointerup",c,{signal:u}),window.addEventListener("blur",c,{signal:u})}}#K(t=""){this.#C===xt.HIGHLIGHT?this.highlightSelection(t):this.#g&&this.#rt()}#it(){document.addEventListener("selectionchange",this.#st.bind(this),{signal:this._signal})}#at(){if(this.#y)return;this.#y=new AbortController;const t=this.combinedSignal(this.#y);window.addEventListener("focus",this.focus.bind(this),{signal:t}),window.addEventListener("blur",this.blur.bind(this),{signal:t})}#ot(){this.#y?.abort(),this.#y=null}blur(){if(this.isShiftKeyDown=!1,this.#I&&(this.#I=!1,this.#K("main_toolbar")),!this.hasSelection)return;const{activeElement:t}=document;for(const e of this.#A)if(e.div.contains(t)){this.#O=[e,t],e._focusEventsAllowed=!1;break}}focus(){if(!this.#O)return;const[t,e]=this.#O;this.#O=null,e.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this._signal}),e.focus()}#Z(){if(this.#T)return;this.#T=new AbortController;const t=this.combinedSignal(this.#T);window.addEventListener("keydown",this.keydown.bind(this),{signal:t}),window.addEventListener("keyup",this.keyup.bind(this),{signal:t})}#lt(){this.#T?.abort(),this.#T=null}#q(){if(this.#u)return;this.#u=new AbortController;const t=this.combinedSignal(this.#u);document.addEventListener("copy",this.copy.bind(this),{signal:t}),document.addEventListener("cut",this.cut.bind(this),{signal:t}),document.addEventListener("paste",this.paste.bind(this),{signal:t})}#tt(){this.#u?.abort(),this.#u=null}#ut(){const t=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:t}),document.addEventListener("drop",this.drop.bind(this),{signal:t})}addEditListeners(){this.#Z(),this.#q()}removeEditListeners(){this.#lt(),this.#tt()}dragOver(t){for(const{type:e}of t.dataTransfer.items)for(const r of this.#f)if(r.isHandlingMimeForPasting(e)){t.dataTransfer.dropEffect="copy",t.preventDefault();return}}drop(t){for(const e of t.dataTransfer.items)for(const r of this.#f)if(r.isHandlingMimeForPasting(e.type)){r.paste(e,this.currentLayer),t.preventDefault();return}}copy(t){if(t.preventDefault(),this.#e?.commitOrRemove(),!this.hasSelection)return;const e=[];for(const r of this.#A){const i=r.serialize(!0);i&&e.push(i)}e.length!==0&&t.clipboardData.setData("application/pdfjs",JSON.stringify(e))}cut(t){this.copy(t),this.delete()}async paste(t){t.preventDefault();const{clipboardData:e}=t;for(const a of e.items)for(const o of this.#f)if(o.isHandlingMimeForPasting(a.type)){o.paste(a,this.currentLayer);return}let r=e.getData("application/pdfjs");if(!r)return;try{r=JSON.parse(r)}catch(a){St(`paste: "${a.message}".`);return}if(!Array.isArray(r))return;this.unselectAll();const i=this.currentLayer;try{const a=[];for(const c of r){const d=await i.deserialize(c);if(!d)return;a.push(d)}const o=()=>{for(const c of a)this.#et(c);this.#nt(a)},u=()=>{for(const c of a)c.remove()};this.addCommands({cmd:o,undo:u,mustExec:!0})}catch(a){St(`paste: "${a.message}".`)}}keydown(t){!this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!0),this.#C!==xt.NONE&&!this.isEditorHandlingKeyboard&&Zn._keyboardManager.exec(this,t)}keyup(t){this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!1,this.#I&&(this.#I=!1,this.#K("main_toolbar")))}onEditingAction({name:t}){switch(t){case"undo":case"redo":case"delete":case"selectAll":this[t]();break;case"highlightSelection":this.highlightSelection("context_menu");break}}#M(t){Object.entries(t).some(([r,i])=>this.#G[r]!==i)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(this.#G,t)}),this.#C===xt.HIGHLIGHT&&t.hasSelectedEditor===!1&&this.#j([[Rt.HIGHLIGHT_FREE,!0]]))}#j(t){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:t})}setEditingState(t){t?(this.#at(),this.#q(),this.#M({isEditing:this.#C!==xt.NONE,isEmpty:this.#X(),hasSomethingToUndo:this.#o.hasSomethingToUndo(),hasSomethingToRedo:this.#o.hasSomethingToRedo(),hasSelectedEditor:!1})):(this.#ot(),this.#tt(),this.#M({isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(t){if(!this.#f){this.#f=t;for(const e of this.#f)this.#j(e.defaultPropertiesToUpdate)}}getId(){return this.#k.id}get currentLayer(){return this.#r.get(this.#l)}getLayer(t){return this.#r.get(t)}get currentPageIndex(){return this.#l}addLayer(t){this.#r.set(t.pageIndex,t),this.#P?t.enable():t.disable()}removeLayer(t){this.#r.delete(t.pageIndex)}async updateMode(t,e=null,r=!1,i=!1,a=!1){if(this.#C!==t&&!(this.#F&&(await this.#F.promise,!this.#F))){if(this.#F=Promise.withResolvers(),this.#d?.commitOrRemove(),this.#C=t,t===xt.NONE){this.setEditingState(!1),this.#ht(),this._editorUndoBar?.hide(),this.#F.resolve();return}t===xt.SIGNATURE&&await this.#z?.loadSignatures(),this.setEditingState(!0),await this.#ct(),this.unselectAll();for(const o of this.#r.values())o.updateMode(t);if(!e){r&&this.addNewEditorFromKeyboard(),this.#F.resolve();return}for(const o of this.#n.values())o.annotationElementId===e||o.id===e?(this.setSelected(o),a?o.editComment():i&&o.enterInEditMode()):o.unselect();this.#F.resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(t){t.mode!==this.#C&&this._eventBus.dispatch("switchannotationeditormode",{source:this,...t})}updateParams(t,e){if(this.#f){switch(t){case Rt.CREATE:this.currentLayer.addNewEditor(e);return;case Rt.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(this.#W||=new Map).set(t,e),this.showAllEditors("highlight",e);break}if(this.hasSelection)for(const r of this.#A)r.updateParams(t,e);else for(const r of this.#f)r.updateDefaultParams(t,e)}}showAllEditors(t,e,r=!1){for(const a of this.#n.values())a.editorType===t&&a.show(e);(this.#W?.get(Rt.HIGHLIGHT_SHOW_ALL)??!0)!==e&&this.#j([[Rt.HIGHLIGHT_SHOW_ALL,e]])}enableWaiting(t=!1){if(this.#R!==t){this.#R=t;for(const e of this.#r.values())t?e.disableClick():e.enableClick(),e.div.classList.toggle("waiting",t)}}async#ct(){if(!this.#P){this.#P=!0;const t=[];for(const e of this.#r.values())t.push(e.enable());await Promise.all(t);for(const e of this.#n.values())e.enable()}}#ht(){if(this.unselectAll(),this.#P){this.#P=!1;for(const t of this.#r.values())t.disable();for(const t of this.#n.values())t.disable()}}getEditors(t){const e=[];for(const r of this.#n.values())r.pageIndex===t&&e.push(r);return e}getEditor(t){return this.#n.get(t)}addEditor(t){this.#n.set(t.id,t)}removeEditor(t){t.div.contains(document.activeElement)&&(this.#E&&clearTimeout(this.#E),this.#E=setTimeout(()=>{this.focusMainContainer(),this.#E=null},0)),this.#n.delete(t.id),t.annotationElementId&&this.#L?.delete(t.annotationElementId),this.unselect(t),(!t.annotationElementId||!this.#p.has(t.annotationElementId))&&this.#s?.remove(t.id)}addDeletedAnnotationElement(t){this.#p.add(t.annotationElementId),this.addChangedExistingAnnotation(t),t.deleted=!0}isDeletedAnnotationElement(t){return this.#p.has(t)}removeDeletedAnnotationElement(t){this.#p.delete(t.annotationElementId),this.removeChangedExistingAnnotation(t),t.deleted=!1}#et(t){const e=this.#r.get(t.pageIndex);e?e.addOrRebuild(t):(this.addEditor(t),this.addToAnnotationStorage(t))}setActiveEditor(t){this.#e!==t&&(this.#e=t,t&&this.#j(t.propertiesToUpdate))}get#dt(){let t=null;for(t of this.#A);return t}updateUI(t){this.#dt===t&&this.#j(t.propertiesToUpdate)}updateUIForDefaultProperties(t){this.#j(t.defaultPropertiesToUpdate)}toggleSelected(t){if(this.#A.has(t)){this.#A.delete(t),t.unselect(),this.#M({hasSelectedEditor:this.hasSelection});return}this.#A.add(t),t.select(),this.#j(t.propertiesToUpdate),this.#M({hasSelectedEditor:!0})}setSelected(t){this.updateToolbar({mode:t.mode,editId:t.id}),this.#d?.commitOrRemove();for(const e of this.#A)e!==t&&e.unselect();this.#A.clear(),this.#A.add(t),t.select(),this.#j(t.propertiesToUpdate),this.#M({hasSelectedEditor:!0})}isSelected(t){return this.#A.has(t)}get firstSelectedEditor(){return this.#A.values().next().value}unselect(t){t.unselect(),this.#A.delete(t),this.#M({hasSelectedEditor:this.hasSelection})}get hasSelection(){return this.#A.size!==0}get isEnterHandled(){return this.#A.size===1&&this.firstSelectedEditor.isEnterHandled}undo(){this.#o.undo(),this.#M({hasSomethingToUndo:this.#o.hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:this.#X()}),this._editorUndoBar?.hide()}redo(){this.#o.redo(),this.#M({hasSomethingToUndo:!0,hasSomethingToRedo:this.#o.hasSomethingToRedo(),isEmpty:this.#X()})}addCommands(t){this.#o.add(t),this.#M({hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:this.#X()})}cleanUndoStack(t){this.#o.cleanType(t)}#X(){if(this.#n.size===0)return!0;if(this.#n.size===1)for(const t of this.#n.values())return t.isEmpty();return!1}delete(){this.commitOrRemove();const t=this.currentLayer?.endDrawingSession(!0);if(!this.hasSelection&&!t)return;const e=t?[t]:[...this.#A],r=()=>{this._editorUndoBar?.show(i,e.length===1?e[0].editorType:e.length);for(const a of e)a.remove()},i=()=>{for(const a of e)this.#et(a)};this.addCommands({cmd:r,undo:i,mustExec:!0})}commitOrRemove(){this.#e?.commitOrRemove()}hasSomethingToControl(){return this.#e||this.hasSelection}#nt(t){for(const e of this.#A)e.unselect();this.#A.clear();for(const e of t)e.isEmpty()||(this.#A.add(e),e.select());this.#M({hasSelectedEditor:this.hasSelection})}selectAll(){for(const t of this.#A)t.commit();this.#nt(this.#n.values())}unselectAll(){if(!(this.#e&&(this.#e.commitOrRemove(),this.#C!==xt.NONE))&&!this.#d?.commitOrRemove()&&this.hasSelection){for(const t of this.#A)t.unselect();this.#A.clear(),this.#M({hasSelectedEditor:!1})}}translateSelectedEditors(t,e,r=!1){if(r||this.commitOrRemove(),!this.hasSelection)return;this.#$[0]+=t,this.#$[1]+=e;const[i,a]=this.#$,o=[...this.#A],u=1e3;this.#N&&clearTimeout(this.#N),this.#N=setTimeout(()=>{this.#N=null,this.#$[0]=this.#$[1]=0,this.addCommands({cmd:()=>{for(const c of o)this.#n.has(c.id)&&(c.translateInPage(i,a),c.translationDone())},undo:()=>{for(const c of o)this.#n.has(c.id)&&(c.translateInPage(-i,-a),c.translationDone())},mustExec:!1})},u);for(const c of o)c.translateInPage(t,e),c.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),this.#m=new Map;for(const t of this.#A)this.#m.set(t,{savedX:t.x,savedY:t.y,savedPageIndex:t.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!this.#m)return!1;this.disableUserSelect(!1);const t=this.#m;this.#m=null;let e=!1;for(const[{x:i,y:a,pageIndex:o},u]of t)u.newX=i,u.newY=a,u.newPageIndex=o,e||=i!==u.savedX||a!==u.savedY||o!==u.savedPageIndex;if(!e)return!1;const r=(i,a,o,u)=>{if(this.#n.has(i.id)){const c=this.#r.get(u);c?i._setParentAndPosition(c,a,o):(i.pageIndex=u,i.x=a,i.y=o)}};return this.addCommands({cmd:()=>{for(const[i,{newX:a,newY:o,newPageIndex:u}]of t)r(i,a,o,u)},undo:()=>{for(const[i,{savedX:a,savedY:o,savedPageIndex:u}]of t)r(i,a,o,u)},mustExec:!0}),!0}dragSelectedEditors(t,e){if(this.#m)for(const r of this.#m.keys())r.drag(t,e)}rebuild(t){if(t.parent===null){const e=this.getLayer(t.pageIndex);e?(e.changeParent(t),e.addOrRebuild(t)):(this.addEditor(t),this.addToAnnotationStorage(t),t.rebuild())}else t.parent.addOrRebuild(t)}get isEditorHandlingKeyboard(){return this.getActive()?.shouldGetKeyboardEvents()||this.#A.size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(t){return this.#e===t}getActive(){return this.#e}getMode(){return this.#C}get imageManager(){return Tt(this,"imageManager",new ru)}getSelectionBoxes(t){if(!t)return null;const e=document.getSelection();for(let d=0,p=e.rangeCount;d<p;d++)if(!t.contains(e.getRangeAt(d).commonAncestorContainer))return null;const{x:r,y:i,width:a,height:o}=t.getBoundingClientRect();let u;switch(t.getAttribute("data-main-rotation")){case"90":u=(d,p,g,v)=>({x:(p-i)/o,y:1-(d+g-r)/a,width:v/o,height:g/a});break;case"180":u=(d,p,g,v)=>({x:1-(d+g-r)/a,y:1-(p+v-i)/o,width:g/a,height:v/o});break;case"270":u=(d,p,g,v)=>({x:1-(p+v-i)/o,y:(d-r)/a,width:v/o,height:g/a});break;default:u=(d,p,g,v)=>({x:(d-r)/a,y:(p-i)/o,width:g/a,height:v/o});break}const c=[];for(let d=0,p=e.rangeCount;d<p;d++){const g=e.getRangeAt(d);if(!g.collapsed)for(const{x:v,y:w,width:S,height:A}of g.getClientRects())S===0||A===0||c.push(u(v,w,S,A))}return c.length===0?null:c}addChangedExistingAnnotation({annotationElementId:t,id:e}){(this.#a||=new Map).set(t,e)}removeChangedExistingAnnotation({annotationElementId:t}){this.#a?.delete(t)}renderAnnotationElement(t){const e=this.#a?.get(t.data.id);if(!e)return;const r=this.#s.getRawValue(e);r&&(this.#C===xt.NONE&&!r.hasBeenModified||r.renderAnnotationElement(t))}setMissingCanvas(t,e,r){const i=this.#L?.get(t);i&&(i.setCanvas(e,r),this.#L.delete(t))}addMissingCanvas(t,e){(this.#L||=new Map).set(t,e)}}class mn{#t=null;#e=!1;#n=null;#r=null;#i=null;#s=null;#a=!1;#o=null;#c=null;#u=null;#d=null;#l=!1;static#p=null;static _l10n=null;constructor(t){this.#c=t,this.#l=t._uiManager.useNewAltTextFlow,mn.#p||=Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"})}static initialize(t){mn._l10n??=t}async render(){const t=this.#n=document.createElement("button");t.className="altText",t.tabIndex="0";const e=this.#r=document.createElement("span");t.append(e),this.#l?(t.classList.add("new"),t.setAttribute("data-l10n-id",mn.#p.missing),e.setAttribute("data-l10n-id",mn.#p["missing-label"])):(t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const r=this.#c._uiManager._signal;t.addEventListener("contextmenu",Ke,{signal:r}),t.addEventListener("pointerdown",a=>a.stopPropagation(),{signal:r});const i=a=>{a.preventDefault(),this.#c._uiManager.editAltText(this.#c),this.#l&&this.#c._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:this.#m}})};return t.addEventListener("click",i,{capture:!0,signal:r}),t.addEventListener("keydown",a=>{a.target===t&&a.key==="Enter"&&(this.#a=!0,i(a))},{signal:r}),await this.#f(),t}get#m(){return this.#t&&"added"||this.#t===null&&this.guessedText&&"review"||"missing"}finish(){this.#n&&(this.#n.focus({focusVisible:this.#a}),this.#a=!1)}isEmpty(){return this.#l?this.#t===null:!this.#t&&!this.#e}hasData(){return this.#l?this.#t!==null||!!this.#u:this.isEmpty()}get guessedText(){return this.#u}async setGuessedText(t){this.#t===null&&(this.#u=t,this.#d=await mn._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:t}),this.#f())}toggleAltTextBadge(t=!1){if(!this.#l||this.#t){this.#o?.remove(),this.#o=null;return}if(!this.#o){const e=this.#o=document.createElement("div");e.className="noAltTextBadge",this.#c.div.append(e)}this.#o.classList.toggle("hidden",!t)}serialize(t){let e=this.#t;return!t&&this.#u===e&&(e=this.#d),{altText:e,decorative:this.#e,guessedText:this.#u,textWithDisclaimer:this.#d}}get data(){return{altText:this.#t,decorative:this.#e}}set data({altText:t,decorative:e,guessedText:r,textWithDisclaimer:i,cancel:a=!1}){r&&(this.#u=r,this.#d=i),!(this.#t===t&&this.#e===e)&&(a||(this.#t=t,this.#e=e),this.#f())}toggle(t=!1){this.#n&&(!t&&this.#s&&(clearTimeout(this.#s),this.#s=null),this.#n.disabled=!t)}shown(){this.#c._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:this.#m}})}destroy(){this.#n?.remove(),this.#n=null,this.#r=null,this.#i=null,this.#o?.remove(),this.#o=null}async#f(){const t=this.#n;if(!t)return;if(this.#l){if(t.classList.toggle("done",!!this.#t),t.setAttribute("data-l10n-id",mn.#p[this.#m]),this.#r?.setAttribute("data-l10n-id",mn.#p[`${this.#m}-label`]),!this.#t){this.#i?.remove();return}}else{if(!this.#t&&!this.#e){t.classList.remove("done"),this.#i?.remove();return}t.classList.add("done"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let e=this.#i;if(!e){this.#i=e=document.createElement("span"),e.className="tooltip",e.setAttribute("role","tooltip"),e.id=`alt-text-tooltip-${this.#c.id}`;const i=100,a=this.#c._uiManager._signal;a.addEventListener("abort",()=>{clearTimeout(this.#s),this.#s=null},{once:!0}),t.addEventListener("mouseenter",()=>{this.#s=setTimeout(()=>{this.#s=null,this.#i.classList.add("show"),this.#c._reportTelemetry({action:"alt_text_tooltip"})},i)},{signal:a}),t.addEventListener("mouseleave",()=>{this.#s&&(clearTimeout(this.#s),this.#s=null),this.#i?.classList.remove("show")},{signal:a})}this.#e?e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(e.removeAttribute("data-l10n-id"),e.textContent=this.#t),e.parentNode||t.append(e),this.#c.getElementForAltText()?.setAttribute("aria-describedby",e.id)}}class ga{#t=null;#e=!1;#n=null;#r=null;#i=null;#s=null;#a=!1;constructor(t){this.#n=t,this.toolbar=null}render(){if(!this.#n._uiManager.hasCommentManager())return null;const t=this.#t=document.createElement("button");t.className="comment",t.tabIndex="0",t.setAttribute("data-l10n-id","pdfjs-editor-edit-comment-button");const e=this.#n._uiManager._signal;t.addEventListener("contextmenu",Ke,{signal:e}),t.addEventListener("pointerdown",i=>i.stopPropagation(),{signal:e});const r=i=>{i.preventDefault(),this.edit()};return t.addEventListener("click",r,{capture:!0,signal:e}),t.addEventListener("keydown",i=>{i.target===t&&i.key==="Enter"&&(this.#e=!0,r(i))},{signal:e}),t}edit(){const{bottom:t,left:e,right:r}=this.#n.getClientDimensions(),i={top:t};this.#n._uiManager.direction==="ltr"?i.right=r:i.left=e,this.#n._uiManager.editComment(this.#n,i)}finish(){this.#t&&(this.#t.focus({focusVisible:this.#e}),this.#e=!1)}isDeleted(){return this.#a||this.#i===""}hasBeenEdited(){return this.isDeleted()||this.#i!==this.#r}serialize(){return this.data}get data(){return{text:this.#i,date:this.#s,deleted:this.#a}}set data(t){if(t===null){this.#i="",this.#a=!0;return}this.#i=t,this.#s=new Date,this.#a=!1}setInitialText(t){this.#r=t,this.data=t}toggle(t=!1){this.#t&&(this.#t.disabled=!t)}shown(){}destroy(){this.#t?.remove(),this.#t=null,this.#i="",this.#s=null,this.#n=null,this.#e=!1,this.#a=!1}}class Na{#t;#e=!1;#n=null;#r;#i;#s;#a;#o=null;#c;#u=null;#d;#l=null;constructor({container:t,isPinchingDisabled:e=null,isPinchingStopped:r=null,onPinchStart:i=null,onPinching:a=null,onPinchEnd:o=null,signal:u}){this.#t=t,this.#n=r,this.#r=e,this.#i=i,this.#s=a,this.#a=o,this.#d=new AbortController,this.#c=AbortSignal.any([u,this.#d.signal]),t.addEventListener("touchstart",this.#p.bind(this),{passive:!1,signal:this.#c})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/vn.pixelRatio}#p(t){if(this.#r?.())return;if(t.touches.length===1){if(this.#o)return;const i=this.#o=new AbortController,a=AbortSignal.any([this.#c,i.signal]),o=this.#t,u={capture:!0,signal:a,passive:!1},c=d=>{d.pointerType==="touch"&&(this.#o?.abort(),this.#o=null)};o.addEventListener("pointerdown",d=>{d.pointerType==="touch"&&(te(d),c(d))},u),o.addEventListener("pointerup",c,u),o.addEventListener("pointercancel",c,u);return}if(!this.#l){this.#l=new AbortController;const i=AbortSignal.any([this.#c,this.#l.signal]),a=this.#t,o={signal:i,capture:!1,passive:!1};a.addEventListener("touchmove",this.#m.bind(this),o);const u=this.#f.bind(this);a.addEventListener("touchend",u,o),a.addEventListener("touchcancel",u,o),o.capture=!0,a.addEventListener("pointerdown",te,o),a.addEventListener("pointermove",te,o),a.addEventListener("pointercancel",te,o),a.addEventListener("pointerup",te,o),this.#i?.()}if(te(t),t.touches.length!==2||this.#n?.()){this.#u=null;return}let[e,r]=t.touches;e.identifier>r.identifier&&([e,r]=[r,e]),this.#u={touch0X:e.screenX,touch0Y:e.screenY,touch1X:r.screenX,touch1Y:r.screenY}}#m(t){if(!this.#u||t.touches.length!==2)return;te(t);let[e,r]=t.touches;e.identifier>r.identifier&&([e,r]=[r,e]);const{screenX:i,screenY:a}=e,{screenX:o,screenY:u}=r,c=this.#u,{touch0X:d,touch0Y:p,touch1X:g,touch1Y:v}=c,w=g-d,S=v-p,A=o-i,E=u-a,x=Math.hypot(A,E)||1,R=Math.hypot(w,S)||1;if(!this.#e&&Math.abs(R-x)<=Na.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(c.touch0X=i,c.touch0Y=a,c.touch1X=o,c.touch1Y=u,!this.#e){this.#e=!0;return}const C=[(i+o)/2,(a+u)/2];this.#s?.(C,R,x)}#f(t){t.touches.length>=2||(this.#l&&(this.#l.abort(),this.#l=null,this.#a?.()),this.#u&&(te(t),this.#u=null,this.#e=!1))}destroy(){this.#d?.abort(),this.#d=null,this.#o?.abort(),this.#o=null}}class yt{#t=null;#e=null;#n=null;#r=null;#i=!1;#s=null;#a="";#o=!1;#c=null;#u=null;#d=null;#l=null;#p="";#m=!1;#f=null;#h=!1;#g=!1;#w=!1;#v=null;#S=0;#E=0;#y=null;#b=null;isSelected=!1;_isCopy=!1;_editToolbar=null;_initialOptions=Object.create(null);_initialData=null;_isVisible=!0;_uiManager=null;_focusEventsAllowed=!0;static _l10n=null;static _l10nResizer=null;#I=!1;#x=yt._zIndex++;static _borderLineWidth=-1;static _colorManager=new su;static _zIndex=1;static _telemetryTimeout=1e3;static get _resizerKeyboardManager(){const t=yt.prototype._resizeWithKeyboard,e=Zn.TRANSLATE_SMALL,r=Zn.TRANSLATE_BIG;return Tt(this,"_resizerKeyboardManager",new ni([[["ArrowLeft","mac+ArrowLeft"],t,{args:[-e,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t,{args:[-r,0]}],[["ArrowRight","mac+ArrowRight"],t,{args:[e,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t,{args:[r,0]}],[["ArrowUp","mac+ArrowUp"],t,{args:[0,-e]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t,{args:[0,-r]}],[["ArrowDown","mac+ArrowDown"],t,{args:[0,e]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t,{args:[0,r]}],[["Escape","mac+Escape"],yt.prototype._stopResizingWithKeyboard]]))}constructor(t){this.parent=t.parent,this.id=t.id,this.width=this.height=null,this.pageIndex=t.parent.pageIndex,this.name=t.name,this.div=null,this._uiManager=t.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=t.isCentered,this._structTreeParentId=null,this.annotationElementId=t.annotationElementId||null;const{rotation:e,rawDims:{pageWidth:r,pageHeight:i,pageX:a,pageY:o}}=this.parent.viewport;this.rotation=e,this.pageRotation=(360+e-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[r,i],this.pageTranslation=[a,o];const[u,c]=this.parentDimensions;this.x=t.x/u,this.y=t.y/c,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}get mode(){return Object.getPrototypeOf(this).constructor._editorType}static get isDrawer(){return!1}static get _defaultLineColor(){return Tt(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(t){const e=new Yg({id:t.parent.getNextId(),parent:t.parent,uiManager:t._uiManager});e.annotationElementId=t.annotationElementId,e.deleted=!0,e._uiManager.addToAnnotationStorage(e)}static initialize(t,e){if(yt._l10n??=t,yt._l10nResizer||=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"}),yt._borderLineWidth!==-1)return;const r=getComputedStyle(document.documentElement);yt._borderLineWidth=parseFloat(r.getPropertyValue("--outline-width"))||0}static updateDefaultParams(t,e){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(t){return!1}static paste(t,e){Nt("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return this.#I}set _isDraggable(t){this.#I=t,this.div?.classList.toggle("draggable",t)}get isEnterHandled(){return!0}center(){const[t,e]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*e/(t*2),this.y+=this.width*t/(e*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*e/(t*2),this.y-=this.width*t/(e*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(t){this._uiManager.addCommands(t)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=this.#x}setParent(t){t!==null?(this.pageIndex=t.pageIndex,this.pageDimensions=t.pageDimensions):this.#V(),this.parent=t}focusin(t){this._focusEventsAllowed&&(this.#m?this.#m=!1:this.parent.setSelected(this))}focusout(t){!this._focusEventsAllowed||!this.isAttachedToDOM||t.relatedTarget?.closest(`#${this.id}`)||(t.preventDefault(),this.parent?.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.isInEditMode()&&this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(t,e,r,i){const[a,o]=this.parentDimensions;[r,i]=this.screenToPageTranslation(r,i),this.x=(t+r)/a,this.y=(e+i)/o,this.fixAndSetPosition()}_moveAfterPaste(t,e){const[r,i]=this.parentDimensions;this.setAt(t*r,e*i,this.width*r,this.height*i),this._onTranslated()}#k([t,e],r,i){[r,i]=this.screenToPageTranslation(r,i),this.x+=r/t,this.y+=i/e,this._onTranslating(this.x,this.y),this.fixAndSetPosition()}translate(t,e){this.#k(this.parentDimensions,t,e)}translateInPage(t,e){this.#f||=[this.x,this.y,this.width,this.height],this.#k(this.pageDimensions,t,e),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(t,e){this.#f||=[this.x,this.y,this.width,this.height];const{div:r,parentDimensions:[i,a]}=this;if(this.x+=t/i,this.y+=e/a,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:g,y:v}=this.div.getBoundingClientRect();this.parent.findNewParent(this,g,v)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:o,y:u}=this;const[c,d]=this.getBaseTranslation();o+=c,u+=d;const{style:p}=r;p.left=`${(100*o).toFixed(2)}%`,p.top=`${(100*u).toFixed(2)}%`,this._onTranslating(o,u),r.scrollIntoView({block:"nearest"})}_onTranslating(t,e){}_onTranslated(t,e){}get _hasBeenMoved(){return!!this.#f&&(this.#f[0]!==this.x||this.#f[1]!==this.y)}get _hasBeenResized(){return!!this.#f&&(this.#f[2]!==this.width||this.#f[3]!==this.height)}getBaseTranslation(){const[t,e]=this.parentDimensions,{_borderLineWidth:r}=yt,i=r/t,a=r/e;switch(this.rotation){case 90:return[-i,a];case 180:return[i,a];case 270:return[i,-a];default:return[-i,-a]}}get _mustFixPosition(){return!0}fixAndSetPosition(t=this.rotation){const{div:{style:e},pageDimensions:[r,i]}=this;let{x:a,y:o,width:u,height:c}=this;if(u*=r,c*=i,a*=r,o*=i,this._mustFixPosition)switch(t){case 0:a=be(a,0,r-u),o=be(o,0,i-c);break;case 90:a=be(a,0,r-c),o=be(o,u,i);break;case 180:a=be(a,u,r),o=be(o,c,i);break;case 270:a=be(a,c,r),o=be(o,0,i-u);break}this.x=a/=r,this.y=o/=i;const[d,p]=this.getBaseTranslation();a+=d,o+=p,e.left=`${(100*a).toFixed(2)}%`,e.top=`${(100*o).toFixed(2)}%`,this.moveInDOM()}static#P(t,e,r){switch(r){case 90:return[e,-t];case 180:return[-t,-e];case 270:return[-e,t];default:return[t,e]}}screenToPageTranslation(t,e){return yt.#P(t,e,this.parentRotation)}pageTranslationToScreen(t,e){return yt.#P(t,e,360-this.parentRotation)}#R(t){switch(t){case 90:{const[e,r]=this.pageDimensions;return[0,-e/r,r/e,0]}case 180:return[-1,0,0,-1];case 270:{const[e,r]=this.pageDimensions;return[0,e/r,-r/e,0]}default:return[1,0,0,1]}}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:t,pageDimensions:[e,r]}=this;return[e*t,r*t]}setDims(t,e){const[r,i]=this.parentDimensions,{style:a}=this.div;a.width=`${(100*t/r).toFixed(2)}%`,this.#o||(a.height=`${(100*e/i).toFixed(2)}%`)}fixDims(){const{style:t}=this.div,{height:e,width:r}=t,i=r.endsWith("%"),a=!this.#o&&e.endsWith("%");if(i&&a)return;const[o,u]=this.parentDimensions;i||(t.width=`${(100*parseFloat(r)/o).toFixed(2)}%`),!this.#o&&!a&&(t.height=`${(100*parseFloat(e)/u).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}#T(){if(this.#c)return;this.#c=document.createElement("div"),this.#c.classList.add("resizers");const t=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],e=this._uiManager._signal;for(const r of t){const i=document.createElement("div");this.#c.append(i),i.classList.add("resizer",r),i.setAttribute("data-resizer-name",r),i.addEventListener("pointerdown",this.#O.bind(this,r),{signal:e}),i.addEventListener("contextmenu",Ke,{signal:e}),i.tabIndex=-1}this.div.prepend(this.#c)}#O(t,e){e.preventDefault();const{isMac:r}=fe.platform;if(e.button!==0||e.ctrlKey&&r)return;this.#n?.toggle(!1);const i=this._isDraggable;this._isDraggable=!1,this.#u=[e.screenX,e.screenY];const a=new AbortController,o=this._uiManager.combinedSignal(a);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",this.#U.bind(this,t),{passive:!0,capture:!0,signal:o}),window.addEventListener("touchmove",te,{passive:!1,signal:o}),window.addEventListener("contextmenu",Ke,{signal:o}),this.#d={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const u=this.parent.div.style.cursor,c=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(e.target).cursor;const d=()=>{a.abort(),this.parent.togglePointerEvents(!0),this.#n?.toggle(!0),this._isDraggable=i,this.parent.div.style.cursor=u,this.div.style.cursor=c,this.#L()};window.addEventListener("pointerup",d,{signal:o}),window.addEventListener("blur",d,{signal:o})}#_(t,e,r,i){this.width=r,this.height=i,this.x=t,this.y=e;const[a,o]=this.parentDimensions;this.setDims(a*r,o*i),this.fixAndSetPosition(),this._onResized()}_onResized(){}#L(){if(!this.#d)return;const{savedX:t,savedY:e,savedWidth:r,savedHeight:i}=this.#d;this.#d=null;const a=this.x,o=this.y,u=this.width,c=this.height;a===t&&o===e&&u===r&&c===i||this.addCommands({cmd:this.#_.bind(this,a,o,u,c),undo:this.#_.bind(this,t,e,r,i),mustExec:!0})}static _round(t){return Math.round(t*1e4)/1e4}#U(t,e){const[r,i]=this.parentDimensions,a=this.x,o=this.y,u=this.width,c=this.height,d=yt.MIN_SIZE/r,p=yt.MIN_SIZE/i,g=this.#R(this.rotation),v=(X,$)=>[g[0]*X+g[2]*$,g[1]*X+g[3]*$],w=this.#R(360-this.rotation),S=(X,$)=>[w[0]*X+w[2]*$,w[1]*X+w[3]*$];let A,E,x=!1,R=!1;switch(t){case"topLeft":x=!0,A=(X,$)=>[0,0],E=(X,$)=>[X,$];break;case"topMiddle":A=(X,$)=>[X/2,0],E=(X,$)=>[X/2,$];break;case"topRight":x=!0,A=(X,$)=>[X,0],E=(X,$)=>[0,$];break;case"middleRight":R=!0,A=(X,$)=>[X,$/2],E=(X,$)=>[0,$/2];break;case"bottomRight":x=!0,A=(X,$)=>[X,$],E=(X,$)=>[0,0];break;case"bottomMiddle":A=(X,$)=>[X/2,$],E=(X,$)=>[X/2,0];break;case"bottomLeft":x=!0,A=(X,$)=>[0,$],E=(X,$)=>[X,0];break;case"middleLeft":R=!0,A=(X,$)=>[0,$/2],E=(X,$)=>[X,$/2];break}const C=A(u,c),P=E(u,c);let T=v(...P);const I=yt._round(a+T[0]),M=yt._round(o+T[1]);let _=1,F=1,U,W;if(e.fromKeyboard)({deltaX:U,deltaY:W}=e);else{const{screenX:X,screenY:$}=e,[V,nt]=this.#u;[U,W]=this.screenToPageTranslation(X-V,$-nt),this.#u[0]=X,this.#u[1]=$}if([U,W]=S(U/r,W/i),x){const X=Math.hypot(u,c);_=F=Math.max(Math.min(Math.hypot(P[0]-C[0]-U,P[1]-C[1]-W)/X,1/u,1/c),d/u,p/c)}else R?_=be(Math.abs(P[0]-C[0]-U),d,1)/u:F=be(Math.abs(P[1]-C[1]-W),p,1)/c;const q=yt._round(u*_),J=yt._round(c*F);T=v(...E(q,J));const rt=I-T[0],gt=M-T[1];this.#f||=[this.x,this.y,this.width,this.height],this.width=q,this.height=J,this.x=rt,this.y=gt,this.setDims(r*q,i*J),this.fixAndSetPosition(),this._onResizing()}_onResizing(){}altTextFinish(){this.#n?.finish()}get toolbarButtons(){return null}async addEditToolbar(){if(this._editToolbar||this.#g)return this._editToolbar;this._editToolbar=new Ks(this),this.div.append(this._editToolbar.render()),this._editToolbar.addButton("comment",this.addCommentButton());const{toolbarButtons:t}=this;if(t)for(const[e,r]of t)await this._editToolbar.addButton(e,r);return this._editToolbar.addButton("delete"),this._editToolbar}removeEditToolbar(){this._editToolbar&&(this._editToolbar.remove(),this._editToolbar=null,this.#n?.destroy())}addContainer(t){const e=this._editToolbar?.div;e?e.before(t):this.div.append(t)}getClientDimensions(){return this.div.getBoundingClientRect()}createAltText(){return this.#n||(mn.initialize(yt._l10n),this.#n=new mn(this),this.#t&&(this.#n.data=this.#t,this.#t=null)),this.#n}get altTextData(){return this.#n?.data}set altTextData(t){this.#n&&(this.#n.data=t)}get guessedAltText(){return this.#n?.guessedText}async setGuessedAltText(t){await this.#n?.setGuessedText(t)}serializeAltText(t){return this.#n?.serialize(t)}hasAltText(){return!!this.#n&&!this.#n.isEmpty()}hasAltTextData(){return this.#n?.hasData()??!1}addCommentButton(){return this.#r?this.#r:this.#r=new ga(this)}get commentColor(){return null}get comment(){const t=this.#r;return{text:t.data.text,date:t.data.date,deleted:t.isDeleted(),color:this.commentColor}}set comment(t){this.#r||(this.#r=new ga(this)),this.#r.data=t}setCommentData(t){this.#r||(this.#r=new ga(this)),this.#r.setInitialText(t)}get hasEditedComment(){return this.#r?.hasBeenEdited()}async editComment(){this.#r||(this.#r=new ga(this)),this.#r.edit()}addComment(t){this.hasEditedComment&&(t.popup={contents:this.comment.text,deleted:this.comment.deleted})}render(){const t=this.div=document.createElement("div");t.setAttribute("data-editor-rotation",(360-this.rotation)%360),t.className=this.name,t.setAttribute("id",this.id),t.tabIndex=this.#i?-1:0,t.setAttribute("role","application"),this.defaultL10nId&&t.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||t.classList.add("hidden"),this.setInForeground(),this.#W();const[e,r]=this.parentDimensions;this.parentRotation%180!==0&&(t.style.maxWidth=`${(100*r/e).toFixed(2)}%`,t.style.maxHeight=`${(100*e/r).toFixed(2)}%`);const[i,a]=this.getInitialTranslation();return this.translate(i,a),Gd(this,t,["keydown","pointerdown","dblclick"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(this.#b||=new Na({container:t,isPinchingDisabled:()=>!this.isSelected,onPinchStart:this.#C.bind(this),onPinching:this.#A.bind(this),onPinchEnd:this.#B.bind(this),signal:this._uiManager._signal})),this._uiManager._editorUndoBar?.hide(),t}#C(){this.#d={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height},this.#n?.toggle(!1),this.parent.togglePointerEvents(!1)}#A(t,e,r){let a=.7*(r/e)+1-.7;if(a===1)return;const o=this.#R(this.rotation),u=(I,M)=>[o[0]*I+o[2]*M,o[1]*I+o[3]*M],[c,d]=this.parentDimensions,p=this.x,g=this.y,v=this.width,w=this.height,S=yt.MIN_SIZE/c,A=yt.MIN_SIZE/d;a=Math.max(Math.min(a,1/v,1/w),S/v,A/w);const E=yt._round(v*a),x=yt._round(w*a);if(E===v&&x===w)return;this.#f||=[p,g,v,w];const R=u(v/2,w/2),C=yt._round(p+R[0]),P=yt._round(g+R[1]),T=u(E/2,x/2);this.x=C-T[0],this.y=P-T[1],this.width=E,this.height=x,this.setDims(c*E,d*x),this.fixAndSetPosition(),this._onResizing()}#B(){this.#n?.toggle(!0),this.parent.togglePointerEvents(!0),this.#L()}pointerdown(t){const{isMac:e}=fe.platform;if(t.button!==0||t.ctrlKey&&e){t.preventDefault();return}if(this.#m=!0,this._isDraggable){this.#H(t);return}this.#z(t)}#z(t){const{isMac:e}=fe.platform;t.ctrlKey&&!e||t.shiftKey||t.metaKey&&e?this.parent.toggleSelected(this):this.parent.setSelected(this)}#H(t){const{isSelected:e}=this;this._uiManager.setUpDragSession();let r=!1;const i=new AbortController,a=this._uiManager.combinedSignal(i),o={capture:!0,passive:!1,signal:a},u=d=>{i.abort(),this.#s=null,this.#m=!1,this._uiManager.endDragSession()||this.#z(d),r&&this._onStopDragging()};e&&(this.#S=t.clientX,this.#E=t.clientY,this.#s=t.pointerId,this.#a=t.pointerType,window.addEventListener("pointermove",d=>{r||(r=!0,this._onStartDragging());const{clientX:p,clientY:g,pointerId:v}=d;if(v!==this.#s){te(d);return}const[w,S]=this.screenToPageTranslation(p-this.#S,g-this.#E);this.#S=p,this.#E=g,this._uiManager.dragSelectedEditors(w,S)},o),window.addEventListener("touchmove",te,o),window.addEventListener("pointerdown",d=>{d.pointerType===this.#a&&(this.#b||d.isPrimary)&&u(d),te(d)},o));const c=d=>{if(!this.#s||this.#s===d.pointerId){u(d);return}te(d)};window.addEventListener("pointerup",c,{signal:a}),window.addEventListener("blur",c,{signal:a})}_onStartDragging(){}_onStopDragging(){}moveInDOM(){this.#v&&clearTimeout(this.#v),this.#v=setTimeout(()=>{this.#v=null,this.parent?.moveEditorInDOM(this)},0)}_setParentAndPosition(t,e,r){t.changeParent(this),this.x=e,this.y=r,this.fixAndSetPosition(),this._onTranslated()}getRect(t,e,r=this.rotation){const i=this.parentScale,[a,o]=this.pageDimensions,[u,c]=this.pageTranslation,d=t/i,p=e/i,g=this.x*a,v=this.y*o,w=this.width*a,S=this.height*o;switch(r){case 0:return[g+d+u,o-v-p-S+c,g+d+w+u,o-v-p+c];case 90:return[g+p+u,o-v+d+c,g+p+S+u,o-v+d+w+c];case 180:return[g-d-w+u,o-v+p+c,g-d+u,o-v+p+S+c];case 270:return[g-p-S+u,o-v-d-w+c,g-p+u,o-v-d+c];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(t,e){const[r,i,a,o]=t,u=a-r,c=o-i;switch(this.rotation){case 0:return[r,e-o,u,c];case 90:return[r,e-i,c,u];case 180:return[a,e-i,u,c];case 270:return[a,e-o,c,u];default:throw new Error("Invalid rotation")}}onceAdded(t){}isEmpty(){return!1}enableEditMode(){return this.isInEditMode()?!1:(this.parent.setEditingState(!1),this.#g=!0,!0)}disableEditMode(){return this.isInEditMode()?(this.parent.setEditingState(!0),this.#g=!1,!0):!1}isInEditMode(){return this.#g}shouldGetKeyboardEvents(){return this.#w}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:t,left:e,bottom:r,right:i}=this.getClientDimensions(),{innerHeight:a,innerWidth:o}=window;return e<o&&i>0&&t<a&&r>0}#W(){if(this.#l||!this.div)return;this.#l=new AbortController;const t=this._uiManager.combinedSignal(this.#l);this.div.addEventListener("focusin",this.focusin.bind(this),{signal:t}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:t})}rebuild(){this.#W()}rotate(t){}resize(){}serializeDeleted(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:this._initialData?.popupRef||""}}serialize(t=!1,e=null){Nt("An editor must be serializable")}static async deserialize(t,e,r){const i=new this.prototype.constructor({parent:e,id:e.getNextId(),uiManager:r,annotationElementId:t.annotationElementId});i.rotation=t.rotation,i.#t=t.accessibilityData,i._isCopy=t.isCopy||!1;const[a,o]=i.pageDimensions,[u,c,d,p]=i.getRectInCurrentCoords(t.rect,o);return i.x=u/a,i.y=c/o,i.width=d/a,i.height=p/o,i}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){if(this.#l?.abort(),this.#l=null,this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),this.#v&&(clearTimeout(this.#v),this.#v=null),this.#V(),this.removeEditToolbar(),this.#y){for(const t of this.#y.values())clearTimeout(t);this.#y=null}this.parent=null,this.#b?.destroy(),this.#b=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(this.#T(),this.#c.classList.remove("hidden"))}get toolbarPosition(){return null}keydown(t){if(!this.isResizable||t.target!==this.div||t.key!=="Enter")return;this._uiManager.setSelected(this),this.#d={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const e=this.#c.children;if(!this.#e){this.#e=Array.from(e);const o=this.#G.bind(this),u=this.#$.bind(this),c=this._uiManager._signal;for(const d of this.#e){const p=d.getAttribute("data-resizer-name");d.setAttribute("role","spinbutton"),d.addEventListener("keydown",o,{signal:c}),d.addEventListener("blur",u,{signal:c}),d.addEventListener("focus",this.#N.bind(this,p),{signal:c}),d.setAttribute("data-l10n-id",yt._l10nResizer[p])}}const r=this.#e[0];let i=0;for(const o of e){if(o===r)break;i++}const a=(360-this.rotation+this.parentRotation)%360/90*(this.#e.length/4);if(a!==i){if(a<i)for(let u=0;u<i-a;u++)this.#c.append(this.#c.firstChild);else if(a>i)for(let u=0;u<a-i;u++)this.#c.firstChild.before(this.#c.lastChild);let o=0;for(const u of e){const d=this.#e[o++].getAttribute("data-resizer-name");u.setAttribute("data-l10n-id",yt._l10nResizer[d])}}this.#D(0),this.#w=!0,this.#c.firstChild.focus({focusVisible:!0}),t.preventDefault(),t.stopImmediatePropagation()}#G(t){yt._resizerKeyboardManager.exec(this,t)}#$(t){this.#w&&t.relatedTarget?.parentNode!==this.#c&&this.#V()}#N(t){this.#p=this.#w?t:""}#D(t){if(this.#e)for(const e of this.#e)e.tabIndex=t}_resizeWithKeyboard(t,e){this.#w&&this.#U(this.#p,{deltaX:t,deltaY:e,fromKeyboard:!0})}#V(){this.#w=!1,this.#D(-1),this.#L()}_stopResizingWithKeyboard(){this.#V(),this.div.focus()}select(){if(!(this.isSelected&&this._editToolbar)){if(this.isSelected=!0,this.makeResizable(),this.div?.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{this.div?.classList.contains("selectedEditor")&&this._editToolbar?.show()});return}this._editToolbar?.show(),this.#n?.toggleAltTextBadge(!1)}}unselect(){this.isSelected&&(this.isSelected=!1,this.#c?.classList.add("hidden"),this.div?.classList.remove("selectedEditor"),this.div?.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),this._editToolbar?.hide(),this.#n?.toggleAltTextBadge(!0))}updateParams(t,e){}disableEditing(){}enableEditing(){}get canChangeContent(){return!1}enterInEditMode(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}dblclick(t){this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.id})}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return this.#h}set isEditing(t){this.#h=t,this.parent&&(t?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(t,e){this.#o=!0;const r=t/e,{style:i}=this.div;i.aspectRatio=r,i.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(t,e=!1){if(e){this.#y||=new Map;const{action:r}=t;let i=this.#y.get(r);i&&clearTimeout(i),i=setTimeout(()=>{this._reportTelemetry(t),this.#y.delete(r),this.#y.size===0&&(this.#y=null)},yt._telemetryTimeout),this.#y.set(r,i);return}t.type||=this.editorType,this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:t}})}show(t=this._isVisible){this.div.classList.toggle("hidden",!t),this._isVisible=t}enable(){this.div&&(this.div.tabIndex=0),this.#i=!1}disable(){this.div&&(this.div.tabIndex=-1),this.#i=!0}renderAnnotationElement(t){let e=t.container.querySelector(".annotationContent");if(!e)e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),t.container.prepend(e);else if(e.nodeName==="CANVAS"){const r=e;e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),r.before(e)}return e}resetAnnotationElement(t){const{firstChild:e}=t.container;e?.nodeName==="DIV"&&e.classList.contains("annotationContent")&&e.remove()}}class Yg extends yt{constructor(t){super(t),this.annotationElementId=t.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const Sd=3285377520,Xe=4294901760,pn=65535;class Xd{constructor(t){this.h1=t?t&4294967295:Sd,this.h2=t?t&4294967295:Sd}update(t){let e,r;if(typeof t=="string"){e=new Uint8Array(t.length*2),r=0;for(let A=0,E=t.length;A<E;A++){const x=t.charCodeAt(A);x<=255?e[r++]=x:(e[r++]=x>>>8,e[r++]=x&255)}}else if(ArrayBuffer.isView(t))e=t.slice(),r=e.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const i=r>>2,a=r-i*4,o=new Uint32Array(e.buffer,0,i);let u=0,c=0,d=this.h1,p=this.h2;const g=3432918353,v=461845907,w=g&pn,S=v&pn;for(let A=0;A<i;A++)A&1?(u=o[A],u=u*g&Xe|u*w&pn,u=u<<15|u>>>17,u=u*v&Xe|u*S&pn,d^=u,d=d<<13|d>>>19,d=d*5+3864292196):(c=o[A],c=c*g&Xe|c*w&pn,c=c<<15|c>>>17,c=c*v&Xe|c*S&pn,p^=c,p=p<<13|p>>>19,p=p*5+3864292196);switch(u=0,a){case 3:u^=e[i*4+2]<<16;case 2:u^=e[i*4+1]<<8;case 1:u^=e[i*4],u=u*g&Xe|u*w&pn,u=u<<15|u>>>17,u=u*v&Xe|u*S&pn,i&1?d^=u:p^=u}this.h1=d,this.h2=p}hexdigest(){let t=this.h1,e=this.h2;return t^=e>>>1,t=t*3981806797&Xe|t*36045&pn,e=e*4283543511&Xe|((e<<16|t>>>16)*2950163797&Xe)>>>16,t^=e>>>1,t=t*444984403&Xe|t*60499&pn,e=e*3301882366&Xe|((e<<16|t>>>16)*3120437893&Xe)>>>16,t^=e>>>1,(t>>>0).toString(16).padStart(8,"0")+(e>>>0).toString(16).padStart(8,"0")}}const Gl=Object.freeze({map:null,hash:"",transfer:void 0});class iu{#t=!1;#e=null;#n=new Map;constructor(){this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(t,e){const r=this.#n.get(t);return r===void 0?e:Object.assign(e,r)}getRawValue(t){return this.#n.get(t)}remove(t){if(this.#n.delete(t),this.#n.size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const e of this.#n.values())if(e instanceof yt)return;this.onAnnotationEditor(null)}}setValue(t,e){const r=this.#n.get(t);let i=!1;if(r!==void 0)for(const[a,o]of Object.entries(e))r[a]!==o&&(i=!0,r[a]=o);else i=!0,this.#n.set(t,e);i&&this.#r(),e instanceof yt&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(e.constructor._type)}has(t){return this.#n.has(t)}get size(){return this.#n.size}#r(){this.#t||(this.#t=!0,typeof this.onSetModified=="function"&&this.onSetModified())}resetModified(){this.#t&&(this.#t=!1,typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new Yd(this)}get serializable(){if(this.#n.size===0)return Gl;const t=new Map,e=new Xd,r=[],i=Object.create(null);let a=!1;for(const[o,u]of this.#n){const c=u instanceof yt?u.serialize(!1,i):u;c&&(t.set(o,c),e.update(`${o}:${JSON.stringify(c)}`),a||=!!c.bitmap)}if(a)for(const o of t.values())o.bitmap&&r.push(o.bitmap);return t.size>0?{map:t,hash:e.hexdigest(),transfer:r}:Gl}get editorStats(){let t=null;const e=new Map;for(const r of this.#n.values()){if(!(r instanceof yt))continue;const i=r.telemetryFinalData;if(!i)continue;const{type:a}=i;e.has(a)||e.set(a,Object.getPrototypeOf(r).constructor),t||=Object.create(null);const o=t[a]||=new Map;for(const[u,c]of Object.entries(i)){if(u==="type")continue;let d=o.get(u);d||(d=new Map,o.set(u,d));const p=d.get(c)??0;d.set(c,p+1)}}for(const[r,i]of e)t[r]=i.computeTelemetryFinalData(t[r]);return t}resetModifiedIds(){this.#e=null}get modifiedIds(){if(this.#e)return this.#e;const t=[];for(const e of this.#n.values())!(e instanceof yt)||!e.annotationElementId||!e.serialize()||t.push(e.annotationElementId);return this.#e={ids:new Set(t),hash:t.join(",")}}[Symbol.iterator](){return this.#n.entries()}}class Yd extends iu{#t;constructor(t){super();const{map:e,hash:r,transfer:i}=t.serializable,a=structuredClone(e,i?{transfer:i}:null);this.#t={map:a,hash:r,transfer:i}}get print(){Nt("Should not call PrintAnnotationStorage.print")}get serializable(){return this.#t}get modifiedIds(){return Tt(this,"modifiedIds",{ids:new Set,hash:""})}}class Kg{#t=new Set;constructor({ownerDocument:t=globalThis.document,styleElement:e=null}){this._document=t,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(t){this.nativeFontFaces.add(t),this._document.fonts.add(t)}removeNativeFontFace(t){this.nativeFontFaces.delete(t),this._document.fonts.delete(t)}insertRule(t){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const e=this.styleElement.sheet;e.insertRule(t,e.cssRules.length)}clear(){for(const t of this.nativeFontFaces)this._document.fonts.delete(t);this.nativeFontFaces.clear(),this.#t.clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:t,disableFontFace:e,_inspectFont:r}){if(!(!t||this.#t.has(t.loadedName))){if(ee(!e,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:i,src:a,style:o}=t,u=new FontFace(i,a,o);this.addNativeFontFace(u);try{await u.load(),this.#t.add(i),r?.(t)}catch{St(`Cannot load system font: ${t.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(u)}return}Nt("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(t){if(t.attached||t.missingFile&&!t.systemFontInfo)return;if(t.attached=!0,t.systemFontInfo){await this.loadSystemFont(t);return}if(this.isFontLoadingAPISupported){const r=t.createNativeFontFace();if(r){this.addNativeFontFace(r);try{await r.loaded}catch(i){throw St(`Failed to load font '${r.family}': '${i}'.`),t.disableFontFace=!0,i}}return}const e=t.createFontFaceRule();if(e){if(this.insertRule(e),this.isSyncFontLoadingSupported)return;await new Promise(r=>{const i=this._queueLoadingCallback(r);this._prepareFontLoadEvent(t,i)})}}get isFontLoadingAPISupported(){const t=!!this._document?.fonts;return Tt(this,"isFontLoadingAPISupported",t)}get isSyncFontLoadingSupported(){return Tt(this,"isSyncFontLoadingSupported",xe||fe.platform.isFirefox)}_queueLoadingCallback(t){function e(){for(ee(!i.done,"completeRequest() cannot be called twice."),i.done=!0;r.length>0&&r[0].done;){const a=r.shift();setTimeout(a.callback,0)}}const{loadingRequests:r}=this,i={done:!1,complete:e,callback:t};return r.push(i),i}get _loadTestFont(){const t=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return Tt(this,"_loadTestFont",t)}_prepareFontLoadEvent(t,e){function r(P,T){return P.charCodeAt(T)<<24|P.charCodeAt(T+1)<<16|P.charCodeAt(T+2)<<8|P.charCodeAt(T+3)&255}function i(P,T,I,M){const _=P.substring(0,T),F=P.substring(T+I);return _+M+F}let a,o;const u=this._document.createElement("canvas");u.width=1,u.height=1;const c=u.getContext("2d");let d=0;function p(P,T){if(++d>30){St("Load test font never loaded."),T();return}if(c.font="30px "+P,c.fillText(".",0,20),c.getImageData(0,0,1,1).data[3]>0){T();return}setTimeout(p.bind(null,P,T))}const g=`lt${Date.now()}${this.loadTestFontId++}`;let v=this._loadTestFont;v=i(v,976,g.length,g);const S=16,A=1482184792;let E=r(v,S);for(a=0,o=g.length-3;a<o;a+=4)E=E-A+r(g,a)|0;a<g.length&&(E=E-A+r(g+"XXX",a)|0),v=i(v,S,4,Lg(E));const x=`url(data:font/opentype;base64,${btoa(v)});`,R=`@font-face {font-family:"${g}";src:${x}}`;this.insertRule(R);const C=this._document.createElement("div");C.style.visibility="hidden",C.style.width=C.style.height="10px",C.style.position="absolute",C.style.top=C.style.left="0px";for(const P of[t.loadedName,g]){const T=this._document.createElement("span");T.textContent="Hi",T.style.fontFamily=P,C.append(T)}this._document.body.append(C),p(g,()=>{C.remove(),e.complete()})}}class Qg{constructor(t,e=null){this.compiledGlyphs=Object.create(null);for(const r in t)this[r]=t[r];this._inspectFont=e}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let t;if(!this.cssFontInfo)t=new FontFace(this.loadedName,this.data,{});else{const e={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(e.style=`oblique ${this.cssFontInfo.italicAngle}deg`),t=new FontFace(this.cssFontInfo.fontFamily,this.data,e)}return this._inspectFont?.(this),t}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const t=`url(data:${this.mimetype};base64,${Wd(this.data)});`;let e;if(!this.cssFontInfo)e=`@font-face {font-family:"${this.loadedName}";src:${t}}`;else{let r=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(r+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),e=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${r}src:${t}}`}return this._inspectFont?.(this,t),e}getPathGenerator(t,e){if(this.compiledGlyphs[e]!==void 0)return this.compiledGlyphs[e];const r=this.loadedName+"_path_"+e;let i;try{i=t.get(r)}catch(o){St(`getPathGenerator - ignoring character: "${o}".`)}const a=new Path2D(i||"");return this.fontExtraProperties||t.delete(r),this.compiledGlyphs[e]=a}}function Jg(f){if(f instanceof URL)return f.href;if(typeof f=="string"){if(xe)return f;const t=URL.parse(f,window.location);if(t)return t.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function Zg(f){if(xe&&typeof Buffer<"u"&&f instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(f instanceof Uint8Array&&f.byteLength===f.buffer.byteLength)return f;if(typeof f=="string")return qs(f);if(f instanceof ArrayBuffer||ArrayBuffer.isView(f)||typeof f=="object"&&!isNaN(f?.length))return new Uint8Array(f);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function ma(f){if(typeof f!="string")return null;if(f.endsWith("/"))return f;throw new Error(`Invalid factory url: "${f}" must include trailing slash.`)}const Xl=f=>typeof f=="object"&&Number.isInteger(f?.num)&&f.num>=0&&Number.isInteger(f?.gen)&&f.gen>=0,qg=f=>typeof f=="object"&&typeof f?.name=="string",tm=Bg.bind(null,Xl,qg);class em{#t=new Map;#e=Promise.resolve();postMessage(t,e){const r={data:structuredClone(t,e?{transfer:e}:null)};this.#e.then(()=>{for(const[i]of this.#t)i.call(this,r)})}addEventListener(t,e,r=null){let i=null;if(r?.signal instanceof AbortSignal){const{signal:a}=r;if(a.aborted){St("LoopbackPort - cannot use an `aborted` signal.");return}const o=()=>this.removeEventListener(t,e);i=()=>a.removeEventListener("abort",o),a.addEventListener("abort",o)}this.#t.set(e,i)}removeEventListener(t,e){this.#t.get(e)?.(),this.#t.delete(e)}terminate(){for(const[,t]of this.#t)t?.();this.#t.clear()}}const va={DATA:1,ERROR:2},Zt={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function Ed(){}function Le(f){if(f instanceof Jn||f instanceof $l||f instanceof yd||f instanceof Ta||f instanceof Dl)return f;switch(f instanceof Error||typeof f=="object"&&f!==null||Nt('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),f.name){case"AbortException":return new Jn(f.message);case"InvalidPDFException":return new $l(f.message);case"PasswordException":return new yd(f.message,f.code);case"ResponseException":return new Ta(f.message,f.status,f.missing);case"UnknownErrorException":return new Dl(f.message,f.details)}return new Dl(f.message,f.toString())}class Xs{#t=new AbortController;constructor(t,e,r){this.sourceName=t,this.targetName=e,this.comObj=r,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),r.addEventListener("message",this.#e.bind(this),{signal:this.#t.signal})}#e({data:t}){if(t.targetName!==this.sourceName)return;if(t.stream){this.#r(t);return}if(t.callback){const r=t.callbackId,i=this.callbackCapabilities[r];if(!i)throw new Error(`Cannot resolve callback ${r}`);if(delete this.callbackCapabilities[r],t.callback===va.DATA)i.resolve(t.data);else if(t.callback===va.ERROR)i.reject(Le(t.reason));else throw new Error("Unexpected callback case");return}const e=this.actionHandler[t.action];if(!e)throw new Error(`Unknown action from worker: ${t.action}`);if(t.callbackId){const r=this.sourceName,i=t.sourceName,a=this.comObj;Promise.try(e,t.data).then(function(o){a.postMessage({sourceName:r,targetName:i,callback:va.DATA,callbackId:t.callbackId,data:o})},function(o){a.postMessage({sourceName:r,targetName:i,callback:va.ERROR,callbackId:t.callbackId,reason:Le(o)})});return}if(t.streamId){this.#n(t);return}e(t.data)}on(t,e){const r=this.actionHandler;if(r[t])throw new Error(`There is already an actionName called "${t}"`);r[t]=e}send(t,e,r){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,data:e},r)}sendWithPromise(t,e,r){const i=this.callbackId++,a=Promise.withResolvers();this.callbackCapabilities[i]=a;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,callbackId:i,data:e},r)}catch(o){a.reject(o)}return a.promise}sendWithStream(t,e,r,i){const a=this.streamId++,o=this.sourceName,u=this.targetName,c=this.comObj;return new ReadableStream({start:d=>{const p=Promise.withResolvers();return this.streamControllers[a]={controller:d,startCall:p,pullCall:null,cancelCall:null,isClosed:!1},c.postMessage({sourceName:o,targetName:u,action:t,streamId:a,data:e,desiredSize:d.desiredSize},i),p.promise},pull:d=>{const p=Promise.withResolvers();return this.streamControllers[a].pullCall=p,c.postMessage({sourceName:o,targetName:u,stream:Zt.PULL,streamId:a,desiredSize:d.desiredSize}),p.promise},cancel:d=>{ee(d instanceof Error,"cancel must have a valid reason");const p=Promise.withResolvers();return this.streamControllers[a].cancelCall=p,this.streamControllers[a].isClosed=!0,c.postMessage({sourceName:o,targetName:u,stream:Zt.CANCEL,streamId:a,reason:Le(d)}),p.promise}},r)}#n(t){const e=t.streamId,r=this.sourceName,i=t.sourceName,a=this.comObj,o=this,u=this.actionHandler[t.action],c={enqueue(d,p=1,g){if(this.isCancelled)return;const v=this.desiredSize;this.desiredSize-=p,v>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),a.postMessage({sourceName:r,targetName:i,stream:Zt.ENQUEUE,streamId:e,chunk:d},g)},close(){this.isCancelled||(this.isCancelled=!0,a.postMessage({sourceName:r,targetName:i,stream:Zt.CLOSE,streamId:e}),delete o.streamSinks[e])},error(d){ee(d instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,a.postMessage({sourceName:r,targetName:i,stream:Zt.ERROR,streamId:e,reason:Le(d)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:t.desiredSize,ready:null};c.sinkCapability.resolve(),c.ready=c.sinkCapability.promise,this.streamSinks[e]=c,Promise.try(u,t.data,c).then(function(){a.postMessage({sourceName:r,targetName:i,stream:Zt.START_COMPLETE,streamId:e,success:!0})},function(d){a.postMessage({sourceName:r,targetName:i,stream:Zt.START_COMPLETE,streamId:e,reason:Le(d)})})}#r(t){const e=t.streamId,r=this.sourceName,i=t.sourceName,a=this.comObj,o=this.streamControllers[e],u=this.streamSinks[e];switch(t.stream){case Zt.START_COMPLETE:t.success?o.startCall.resolve():o.startCall.reject(Le(t.reason));break;case Zt.PULL_COMPLETE:t.success?o.pullCall.resolve():o.pullCall.reject(Le(t.reason));break;case Zt.PULL:if(!u){a.postMessage({sourceName:r,targetName:i,stream:Zt.PULL_COMPLETE,streamId:e,success:!0});break}u.desiredSize<=0&&t.desiredSize>0&&u.sinkCapability.resolve(),u.desiredSize=t.desiredSize,Promise.try(u.onPull||Ed).then(function(){a.postMessage({sourceName:r,targetName:i,stream:Zt.PULL_COMPLETE,streamId:e,success:!0})},function(d){a.postMessage({sourceName:r,targetName:i,stream:Zt.PULL_COMPLETE,streamId:e,reason:Le(d)})});break;case Zt.ENQUEUE:if(ee(o,"enqueue should have stream controller"),o.isClosed)break;o.controller.enqueue(t.chunk);break;case Zt.CLOSE:if(ee(o,"close should have stream controller"),o.isClosed)break;o.isClosed=!0,o.controller.close(),this.#i(o,e);break;case Zt.ERROR:ee(o,"error should have stream controller"),o.controller.error(Le(t.reason)),this.#i(o,e);break;case Zt.CANCEL_COMPLETE:t.success?o.cancelCall.resolve():o.cancelCall.reject(Le(t.reason)),this.#i(o,e);break;case Zt.CANCEL:if(!u)break;const c=Le(t.reason);Promise.try(u.onCancel||Ed,c).then(function(){a.postMessage({sourceName:r,targetName:i,stream:Zt.CANCEL_COMPLETE,streamId:e,success:!0})},function(d){a.postMessage({sourceName:r,targetName:i,stream:Zt.CANCEL_COMPLETE,streamId:e,reason:Le(d)})}),u.sinkCapability.reject(c),u.isCancelled=!0,delete this.streamSinks[e];break;default:throw new Error("Unexpected stream case")}}async#i(t,e){await Promise.allSettled([t.startCall?.promise,t.pullCall?.promise,t.cancelCall?.promise]),delete this.streamControllers[e]}destroy(){this.#t?.abort(),this.#t=null}}class Kd{#t=!1;constructor({enableHWA:t=!1}){this.#t=t}create(t,e){if(t<=0||e<=0)throw new Error("Invalid canvas size");const r=this._createCanvas(t,e);return{canvas:r,context:r.getContext("2d",{willReadFrequently:!this.#t})}}reset(t,e,r){if(!t.canvas)throw new Error("Canvas is not specified");if(e<=0||r<=0)throw new Error("Invalid canvas size");t.canvas.width=e,t.canvas.height=r}destroy(t){if(!t.canvas)throw new Error("Canvas is not specified");t.canvas.width=0,t.canvas.height=0,t.canvas=null,t.context=null}_createCanvas(t,e){Nt("Abstract method `_createCanvas` called.")}}class nm extends Kd{constructor({ownerDocument:t=globalThis.document,enableHWA:e=!1}){super({enableHWA:e}),this._document=t}_createCanvas(t,e){const r=this._document.createElement("canvas");return r.width=t,r.height=e,r}}class Qd{constructor({baseUrl:t=null,isCompressed:e=!0}){this.baseUrl=t,this.isCompressed=e}async fetch({name:t}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!t)throw new Error("CMap name must be specified.");const e=this.baseUrl+t+(this.isCompressed?".bcmap":"");return this._fetch(e).then(r=>({cMapData:r,isCompressed:this.isCompressed})).catch(r=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${e}`)})}async _fetch(t){Nt("Abstract method `_fetch` called.")}}class xd extends Qd{async _fetch(t){const e=await ti(t,this.isCompressed?"arraybuffer":"text");return e instanceof ArrayBuffer?new Uint8Array(e):qs(e)}}Pt(2489);class Jd{addFilter(t){return"none"}addHCMFilter(t,e){return"none"}addAlphaFilter(t){return"none"}addLuminosityFilter(t){return"none"}addHighlightHCMFilter(t,e,r,i,a){return"none"}destroy(t=!1){}}class rm extends Jd{#t;#e;#n;#r;#i;#s;#a=0;constructor({docId:t,ownerDocument:e=globalThis.document}){super(),this.#r=t,this.#i=e}get#o(){return this.#e||=new Map}get#c(){return this.#s||=new Map}get#u(){if(!this.#n){const t=this.#i.createElement("div"),{style:e}=t;e.visibility="hidden",e.contain="strict",e.width=e.height=0,e.position="absolute",e.top=e.left=0,e.zIndex=-1;const r=this.#i.createElementNS(Tn,"svg");r.setAttribute("width",0),r.setAttribute("height",0),this.#n=this.#i.createElementNS(Tn,"defs"),t.append(r),r.append(this.#n),this.#i.body.append(t)}return this.#n}#d(t){if(t.length===1){const c=t[0],d=new Array(256);for(let g=0;g<256;g++)d[g]=c[g]/255;const p=d.join(",");return[p,p,p]}const[e,r,i]=t,a=new Array(256),o=new Array(256),u=new Array(256);for(let c=0;c<256;c++)a[c]=e[c]/255,o[c]=r[c]/255,u[c]=i[c]/255;return[a.join(","),o.join(","),u.join(",")]}#l(t){if(this.#t===void 0){this.#t="";const e=this.#i.URL;e!==this.#i.baseURI&&(Oa(e)?St('#createUrl: ignore "data:"-URL for performance reasons.'):this.#t=Hd(e,""))}return`url(${this.#t}#${t})`}addFilter(t){if(!t)return"none";let e=this.#o.get(t);if(e)return e;const[r,i,a]=this.#d(t),o=t.length===1?r:`${r}${i}${a}`;if(e=this.#o.get(o),e)return this.#o.set(t,e),e;const u=`g_${this.#r}_transfer_map_${this.#a++}`,c=this.#l(u);this.#o.set(t,c),this.#o.set(o,c);const d=this.#f(u);return this.#g(r,i,a,d),c}addHCMFilter(t,e){const r=`${t}-${e}`,i="base";let a=this.#c.get(i);if(a?.key===r||(a?(a.filter?.remove(),a.key=r,a.url="none",a.filter=null):(a={key:r,url:"none",filter:null},this.#c.set(i,a)),!t||!e))return a.url;const o=this.#v(t);t=pt.makeHexColor(...o);const u=this.#v(e);if(e=pt.makeHexColor(...u),this.#u.style.color="",t==="#000000"&&e==="#ffffff"||t===e)return a.url;const c=new Array(256);for(let w=0;w<=255;w++){const S=w/255;c[w]=S<=.03928?S/12.92:((S+.055)/1.055)**2.4}const d=c.join(","),p=`g_${this.#r}_hcm_filter`,g=a.filter=this.#f(p);this.#g(d,d,d,g),this.#m(g);const v=(w,S)=>{const A=o[w]/255,E=u[w]/255,x=new Array(S+1);for(let R=0;R<=S;R++)x[R]=A+R/S*(E-A);return x.join(",")};return this.#g(v(0,5),v(1,5),v(2,5),g),a.url=this.#l(p),a.url}addAlphaFilter(t){let e=this.#o.get(t);if(e)return e;const[r]=this.#d([t]),i=`alpha_${r}`;if(e=this.#o.get(i),e)return this.#o.set(t,e),e;const a=`g_${this.#r}_alpha_map_${this.#a++}`,o=this.#l(a);this.#o.set(t,o),this.#o.set(i,o);const u=this.#f(a);return this.#w(r,u),o}addLuminosityFilter(t){let e=this.#o.get(t||"luminosity");if(e)return e;let r,i;if(t?([r]=this.#d([t]),i=`luminosity_${r}`):i="luminosity",e=this.#o.get(i),e)return this.#o.set(t,e),e;const a=`g_${this.#r}_luminosity_map_${this.#a++}`,o=this.#l(a);this.#o.set(t,o),this.#o.set(i,o);const u=this.#f(a);return this.#p(u),t&&this.#w(r,u),o}addHighlightHCMFilter(t,e,r,i,a){const o=`${e}-${r}-${i}-${a}`;let u=this.#c.get(t);if(u?.key===o||(u?(u.filter?.remove(),u.key=o,u.url="none",u.filter=null):(u={key:o,url:"none",filter:null},this.#c.set(t,u)),!e||!r))return u.url;const[c,d]=[e,r].map(this.#v.bind(this));let p=Math.round(.2126*c[0]+.7152*c[1]+.0722*c[2]),g=Math.round(.2126*d[0]+.7152*d[1]+.0722*d[2]),[v,w]=[i,a].map(this.#v.bind(this));g<p&&([p,g,v,w]=[g,p,w,v]),this.#u.style.color="";const S=(x,R,C)=>{const P=new Array(256),T=(g-p)/C,I=x/255,M=(R-x)/(255*C);let _=0;for(let F=0;F<=C;F++){const U=Math.round(p+F*T),W=I+F*M;for(let q=_;q<=U;q++)P[q]=W;_=U+1}for(let F=_;F<256;F++)P[F]=P[_-1];return P.join(",")},A=`g_${this.#r}_hcm_${t}_filter`,E=u.filter=this.#f(A);return this.#m(E),this.#g(S(v[0],w[0],5),S(v[1],w[1],5),S(v[2],w[2],5),E),u.url=this.#l(A),u.url}destroy(t=!1){t&&this.#s?.size||(this.#n?.parentNode.parentNode.remove(),this.#n=null,this.#e?.clear(),this.#e=null,this.#s?.clear(),this.#s=null,this.#a=0)}#p(t){const e=this.#i.createElementNS(Tn,"feColorMatrix");e.setAttribute("type","matrix"),e.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),t.append(e)}#m(t){const e=this.#i.createElementNS(Tn,"feColorMatrix");e.setAttribute("type","matrix"),e.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),t.append(e)}#f(t){const e=this.#i.createElementNS(Tn,"filter");return e.setAttribute("color-interpolation-filters","sRGB"),e.setAttribute("id",t),this.#u.append(e),e}#h(t,e,r){const i=this.#i.createElementNS(Tn,e);i.setAttribute("type","discrete"),i.setAttribute("tableValues",r),t.append(i)}#g(t,e,r,i){const a=this.#i.createElementNS(Tn,"feComponentTransfer");i.append(a),this.#h(a,"feFuncR",t),this.#h(a,"feFuncG",e),this.#h(a,"feFuncB",r)}#w(t,e){const r=this.#i.createElementNS(Tn,"feComponentTransfer");e.append(r),this.#h(r,"feFuncA",t)}#v(t){return this.#u.style.color=t,La(getComputedStyle(this.#u).getPropertyValue("color"))}}class Zd{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!t)throw new Error("Font filename must be specified.");const e=`${this.baseUrl}${t}`;return this._fetch(e).catch(r=>{throw new Error(`Unable to load font data at: ${e}`)})}async _fetch(t){Nt("Abstract method `_fetch` called.")}}class bd extends Zd{async _fetch(t){const e=await ti(t,"arraybuffer");return new Uint8Array(e)}}class qd{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!t)throw new Error("Wasm filename must be specified.");const e=`${this.baseUrl}${t}`;return this._fetch(e).catch(r=>{throw new Error(`Unable to load wasm data at: ${e}`)})}async _fetch(t){Nt("Abstract method `_fetch` called.")}}class Cd extends qd{async _fetch(t){const e=await ti(t,"arraybuffer");return new Uint8Array(e)}}if(xe){let f;try{const t=process.getBuiltinModule("module").createRequire(import.meta.url);try{f=t("@napi-rs/canvas")}catch(e){St(`Cannot load "@napi-rs/canvas" package: "${e}".`)}}catch(t){St(`Cannot access the \`require\` function: "${t}".`)}globalThis.DOMMatrix||(f?.DOMMatrix?globalThis.DOMMatrix=f.DOMMatrix:St("Cannot polyfill `DOMMatrix`, rendering may be broken.")),globalThis.ImageData||(f?.ImageData?globalThis.ImageData=f.ImageData:St("Cannot polyfill `ImageData`, rendering may be broken.")),globalThis.Path2D||(f?.Path2D?globalThis.Path2D=f.Path2D:St("Cannot polyfill `Path2D`, rendering may be broken.")),globalThis.navigator?.language||(globalThis.navigator={language:"en-US",platform:"",userAgent:""})}async function au(f){const e=await process.getBuiltinModule("fs").promises.readFile(f);return new Uint8Array(e)}class sm extends Jd{}class im extends Kd{_createCanvas(t,e){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(t,e)}}class am extends Qd{async _fetch(t){return au(t)}}class om extends Zd{async _fetch(t){return au(t)}}class lm extends qd{async _fetch(t){return au(t)}}const de={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function Yl(f,t){if(!t)return;const e=t[2]-t[0],r=t[3]-t[1],i=new Path2D;i.rect(t[0],t[1],e,r),f.clip(i)}class ou{isModifyingCurrentTransform(){return!1}getPattern(){Nt("Abstract method `getPattern` called.")}}class um extends ou{constructor(t){super(),this._type=t[1],this._bbox=t[2],this._colorStops=t[3],this._p0=t[4],this._p1=t[5],this._r0=t[6],this._r1=t[7],this.matrix=null}_createGradient(t){let e;this._type==="axial"?e=t.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(e=t.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const r of this._colorStops)e.addColorStop(r[0],r[1]);return e}getPattern(t,e,r,i){let a;if(i===de.STROKE||i===de.FILL){const o=e.current.getClippedPathBoundingBox(i,Vt(t))||[0,0,0,0],u=Math.ceil(o[2]-o[0])||1,c=Math.ceil(o[3]-o[1])||1,d=e.cachedCanvases.getCanvas("pattern",u,c),p=d.context;p.clearRect(0,0,p.canvas.width,p.canvas.height),p.beginPath(),p.rect(0,0,p.canvas.width,p.canvas.height),p.translate(-o[0],-o[1]),r=pt.transform(r,[1,0,0,1,o[0],o[1]]),p.transform(...e.baseTransform),this.matrix&&p.transform(...this.matrix),Yl(p,this._bbox),p.fillStyle=this._createGradient(p),p.fill(),a=t.createPattern(d.canvas,"no-repeat");const g=new DOMMatrix(r);a.setTransform(g)}else Yl(t,this._bbox),a=this._createGradient(t);return a}}function Bl(f,t,e,r,i,a,o,u){const c=t.coords,d=t.colors,p=f.data,g=f.width*4;let v;c[e+1]>c[r+1]&&(v=e,e=r,r=v,v=a,a=o,o=v),c[r+1]>c[i+1]&&(v=r,r=i,i=v,v=o,o=u,u=v),c[e+1]>c[r+1]&&(v=e,e=r,r=v,v=a,a=o,o=v);const w=(c[e]+t.offsetX)*t.scaleX,S=(c[e+1]+t.offsetY)*t.scaleY,A=(c[r]+t.offsetX)*t.scaleX,E=(c[r+1]+t.offsetY)*t.scaleY,x=(c[i]+t.offsetX)*t.scaleX,R=(c[i+1]+t.offsetY)*t.scaleY;if(S>=R)return;const C=d[a],P=d[a+1],T=d[a+2],I=d[o],M=d[o+1],_=d[o+2],F=d[u],U=d[u+1],W=d[u+2],q=Math.round(S),J=Math.round(R);let rt,gt,X,$,V,nt,tt,L;for(let j=q;j<=J;j++){if(j<E){const H=j<S?0:(S-j)/(S-E);rt=w-(w-A)*H,gt=C-(C-I)*H,X=P-(P-M)*H,$=T-(T-_)*H}else{let H;j>R?H=1:E===R?H=0:H=(E-j)/(E-R),rt=A-(A-x)*H,gt=I-(I-F)*H,X=M-(M-U)*H,$=_-(_-W)*H}let st;j<S?st=0:j>R?st=1:st=(S-j)/(S-R),V=w-(w-x)*st,nt=C-(C-F)*st,tt=P-(P-U)*st,L=T-(T-W)*st;const ct=Math.round(Math.min(rt,V)),wt=Math.round(Math.max(rt,V));let G=g*j+ct*4;for(let H=ct;H<=wt;H++)st=(rt-H)/(rt-V),st<0?st=0:st>1&&(st=1),p[G++]=gt-(gt-nt)*st|0,p[G++]=X-(X-tt)*st|0,p[G++]=$-($-L)*st|0,p[G++]=255}}function cm(f,t,e){const r=t.coords,i=t.colors;let a,o;switch(t.type){case"lattice":const u=t.verticesPerRow,c=Math.floor(r.length/u)-1,d=u-1;for(a=0;a<c;a++){let p=a*u;for(let g=0;g<d;g++,p++)Bl(f,e,r[p],r[p+1],r[p+u],i[p],i[p+1],i[p+u]),Bl(f,e,r[p+u+1],r[p+1],r[p+u],i[p+u+1],i[p+1],i[p+u])}break;case"triangles":for(a=0,o=r.length;a<o;a+=3)Bl(f,e,r[a],r[a+1],r[a+2],i[a],i[a+1],i[a+2]);break;default:throw new Error("illegal figure")}}class hm extends ou{constructor(t){super(),this._coords=t[2],this._colors=t[3],this._figures=t[4],this._bounds=t[5],this._bbox=t[6],this._background=t[7],this.matrix=null}_createMeshCanvas(t,e,r){const u=Math.floor(this._bounds[0]),c=Math.floor(this._bounds[1]),d=Math.ceil(this._bounds[2])-u,p=Math.ceil(this._bounds[3])-c,g=Math.min(Math.ceil(Math.abs(d*t[0]*1.1)),3e3),v=Math.min(Math.ceil(Math.abs(p*t[1]*1.1)),3e3),w=d/g,S=p/v,A={coords:this._coords,colors:this._colors,offsetX:-u,offsetY:-c,scaleX:1/w,scaleY:1/S},E=g+4,x=v+4,R=r.getCanvas("mesh",E,x),C=R.context,P=C.createImageData(g,v);if(e){const I=P.data;for(let M=0,_=I.length;M<_;M+=4)I[M]=e[0],I[M+1]=e[1],I[M+2]=e[2],I[M+3]=255}for(const I of this._figures)cm(P,I,A);return C.putImageData(P,2,2),{canvas:R.canvas,offsetX:u-2*w,offsetY:c-2*S,scaleX:w,scaleY:S}}isModifyingCurrentTransform(){return!0}getPattern(t,e,r,i){Yl(t,this._bbox);const a=new Float32Array(2);if(i===de.SHADING)pt.singularValueDecompose2dScale(Vt(t),a);else if(this.matrix){pt.singularValueDecompose2dScale(this.matrix,a);const[u,c]=a;pt.singularValueDecompose2dScale(e.baseTransform,a),a[0]*=u,a[1]*=c}else pt.singularValueDecompose2dScale(e.baseTransform,a);const o=this._createMeshCanvas(a,i===de.SHADING?null:this._background,e.cachedCanvases);return i!==de.SHADING&&(t.setTransform(...e.baseTransform),this.matrix&&t.transform(...this.matrix)),t.translate(o.offsetX,o.offsetY),t.scale(o.scaleX,o.scaleY),t.createPattern(o.canvas,"no-repeat")}}class dm extends ou{getPattern(){return"hotpink"}}function fm(f){switch(f[0]){case"RadialAxial":return new um(f);case"Mesh":return new hm(f);case"Dummy":return new dm}throw new Error(`Unknown IR type: ${f[0]}`)}const Td={COLORED:1,UNCOLORED:2};class lu{static MAX_PATTERN_SIZE=3e3;constructor(t,e,r,i){this.color=t[1],this.operatorList=t[2],this.matrix=t[3],this.bbox=t[4],this.xstep=t[5],this.ystep=t[6],this.paintType=t[7],this.tilingType=t[8],this.ctx=e,this.canvasGraphicsFactory=r,this.baseTransform=i}createPatternCanvas(t){const{bbox:e,operatorList:r,paintType:i,tilingType:a,color:o,canvasGraphicsFactory:u}=this;let{xstep:c,ystep:d}=this;c=Math.abs(c),d=Math.abs(d),Ma("TilingType: "+a);const p=e[0],g=e[1],v=e[2],w=e[3],S=v-p,A=w-g,E=new Float32Array(2);pt.singularValueDecompose2dScale(this.matrix,E);const[x,R]=E;pt.singularValueDecompose2dScale(this.baseTransform,E);const C=x*E[0],P=R*E[1];let T=S,I=A,M=!1,_=!1;const F=Math.ceil(c*C),U=Math.ceil(d*P),W=Math.ceil(S*C),q=Math.ceil(A*P);F>=W?T=c:M=!0,U>=q?I=d:_=!0;const J=this.getSizeAndScale(T,this.ctx.canvas.width,C),rt=this.getSizeAndScale(I,this.ctx.canvas.height,P),gt=t.cachedCanvases.getCanvas("pattern",J.size,rt.size),X=gt.context,$=u.createCanvasGraphics(X);if($.groupLevel=t.groupLevel,this.setFillAndStrokeStyleToContext($,i,o),X.translate(-J.scale*p,-rt.scale*g),$.transform(J.scale,0,0,rt.scale,0,0),X.save(),this.clipBbox($,p,g,v,w),$.baseTransform=Vt($.ctx),$.executeOperatorList(r),$.endDrawing(),X.restore(),M||_){const V=gt.canvas;M&&(T=c),_&&(I=d);const nt=this.getSizeAndScale(T,this.ctx.canvas.width,C),tt=this.getSizeAndScale(I,this.ctx.canvas.height,P),L=nt.size,j=tt.size,st=t.cachedCanvases.getCanvas("pattern-workaround",L,j),ct=st.context,wt=M?Math.floor(S/c):0,G=_?Math.floor(A/d):0;for(let H=0;H<=wt;H++)for(let Y=0;Y<=G;Y++)ct.drawImage(V,L*H,j*Y,L,j,0,0,L,j);return{canvas:st.canvas,scaleX:nt.scale,scaleY:tt.scale,offsetX:p,offsetY:g}}return{canvas:gt.canvas,scaleX:J.scale,scaleY:rt.scale,offsetX:p,offsetY:g}}getSizeAndScale(t,e,r){const i=Math.max(lu.MAX_PATTERN_SIZE,e);let a=Math.ceil(t*r);return a>=i?a=i:r=a/t,{scale:r,size:a}}clipBbox(t,e,r,i,a){const o=i-e,u=a-r;t.ctx.rect(e,r,o,u),pt.axialAlignedBoundingBox([e,r,i,a],Vt(t.ctx),t.current.minMax),t.clip(),t.endPath()}setFillAndStrokeStyleToContext(t,e,r){const i=t.ctx,a=t.current;switch(e){case Td.COLORED:const{fillStyle:o,strokeStyle:u}=this.ctx;i.fillStyle=a.fillColor=o,i.strokeStyle=a.strokeColor=u;break;case Td.UNCOLORED:i.fillStyle=i.strokeStyle=r,a.fillColor=a.strokeColor=r;break;default:throw new Og(`Unsupported paint type: ${e}`)}}isModifyingCurrentTransform(){return!1}getPattern(t,e,r,i){let a=r;i!==de.SHADING&&(a=pt.transform(a,e.baseTransform),this.matrix&&(a=pt.transform(a,this.matrix)));const o=this.createPatternCanvas(e);let u=new DOMMatrix(a);u=u.translate(o.offsetX,o.offsetY),u=u.scale(1/o.scaleX,1/o.scaleY);const c=t.createPattern(o.canvas,"repeat");return c.setTransform(u),c}}function pm({src:f,srcPos:t=0,dest:e,width:r,height:i,nonBlackColor:a=4294967295,inverseDecode:o=!1}){const u=fe.isLittleEndian?4278190080:255,[c,d]=o?[a,u]:[u,a],p=r>>3,g=r&7,v=f.length;e=new Uint32Array(e.buffer);let w=0;for(let S=0;S<i;S++){for(const E=t+p;t<E;t++){const x=t<v?f[t]:255;e[w++]=x&128?d:c,e[w++]=x&64?d:c,e[w++]=x&32?d:c,e[w++]=x&16?d:c,e[w++]=x&8?d:c,e[w++]=x&4?d:c,e[w++]=x&2?d:c,e[w++]=x&1?d:c}if(g===0)continue;const A=t<v?f[t++]:255;for(let E=0;E<g;E++)e[w++]=A&1<<7-E?d:c}return{srcPos:t,destPos:w}}const Rd=16,Pd=100,gm=15,Id=10,Ne=16,zl=new DOMMatrix,je=new Float32Array(2),Qr=new Float32Array([1/0,1/0,-1/0,-1/0]);function mm(f,t){if(f._removeMirroring)throw new Error("Context is already forwarding operations.");f.__originalSave=f.save,f.__originalRestore=f.restore,f.__originalRotate=f.rotate,f.__originalScale=f.scale,f.__originalTranslate=f.translate,f.__originalTransform=f.transform,f.__originalSetTransform=f.setTransform,f.__originalResetTransform=f.resetTransform,f.__originalClip=f.clip,f.__originalMoveTo=f.moveTo,f.__originalLineTo=f.lineTo,f.__originalBezierCurveTo=f.bezierCurveTo,f.__originalRect=f.rect,f.__originalClosePath=f.closePath,f.__originalBeginPath=f.beginPath,f._removeMirroring=()=>{f.save=f.__originalSave,f.restore=f.__originalRestore,f.rotate=f.__originalRotate,f.scale=f.__originalScale,f.translate=f.__originalTranslate,f.transform=f.__originalTransform,f.setTransform=f.__originalSetTransform,f.resetTransform=f.__originalResetTransform,f.clip=f.__originalClip,f.moveTo=f.__originalMoveTo,f.lineTo=f.__originalLineTo,f.bezierCurveTo=f.__originalBezierCurveTo,f.rect=f.__originalRect,f.closePath=f.__originalClosePath,f.beginPath=f.__originalBeginPath,delete f._removeMirroring},f.save=function(){t.save(),this.__originalSave()},f.restore=function(){t.restore(),this.__originalRestore()},f.translate=function(e,r){t.translate(e,r),this.__originalTranslate(e,r)},f.scale=function(e,r){t.scale(e,r),this.__originalScale(e,r)},f.transform=function(e,r,i,a,o,u){t.transform(e,r,i,a,o,u),this.__originalTransform(e,r,i,a,o,u)},f.setTransform=function(e,r,i,a,o,u){t.setTransform(e,r,i,a,o,u),this.__originalSetTransform(e,r,i,a,o,u)},f.resetTransform=function(){t.resetTransform(),this.__originalResetTransform()},f.rotate=function(e){t.rotate(e),this.__originalRotate(e)},f.clip=function(e){t.clip(e),this.__originalClip(e)},f.moveTo=function(e,r){t.moveTo(e,r),this.__originalMoveTo(e,r)},f.lineTo=function(e,r){t.lineTo(e,r),this.__originalLineTo(e,r)},f.bezierCurveTo=function(e,r,i,a,o,u){t.bezierCurveTo(e,r,i,a,o,u),this.__originalBezierCurveTo(e,r,i,a,o,u)},f.rect=function(e,r,i,a){t.rect(e,r,i,a),this.__originalRect(e,r,i,a)},f.closePath=function(){t.closePath(),this.__originalClosePath()},f.beginPath=function(){t.beginPath(),this.__originalBeginPath()}}class vm{constructor(t){this.canvasFactory=t,this.cache=Object.create(null)}getCanvas(t,e,r){let i;return this.cache[t]!==void 0?(i=this.cache[t],this.canvasFactory.reset(i,e,r)):(i=this.canvasFactory.create(e,r),this.cache[t]=i),i}delete(t){delete this.cache[t]}clear(){for(const t in this.cache){const e=this.cache[t];this.canvasFactory.destroy(e),delete this.cache[t]}}}function ya(f,t,e,r,i,a,o,u,c,d){const[p,g,v,w,S,A]=Vt(f);if(g===0&&v===0){const R=o*p+S,C=Math.round(R),P=u*w+A,T=Math.round(P),I=(o+c)*p+S,M=Math.abs(Math.round(I)-C)||1,_=(u+d)*w+A,F=Math.abs(Math.round(_)-T)||1;return f.setTransform(Math.sign(p),0,0,Math.sign(w),C,T),f.drawImage(t,e,r,i,a,0,0,M,F),f.setTransform(p,g,v,w,S,A),[M,F]}if(p===0&&w===0){const R=u*v+S,C=Math.round(R),P=o*g+A,T=Math.round(P),I=(u+d)*v+S,M=Math.abs(Math.round(I)-C)||1,_=(o+c)*g+A,F=Math.abs(Math.round(_)-T)||1;return f.setTransform(0,Math.sign(g),Math.sign(v),0,C,T),f.drawImage(t,e,r,i,a,0,0,F,M),f.setTransform(p,g,v,w,S,A),[F,M]}f.drawImage(t,e,r,i,a,o,u,c,d);const E=Math.hypot(p,g),x=Math.hypot(v,w);return[E*c,x*d]}class kd{alphaIsShape=!1;fontSize=0;fontSizeScale=1;textMatrix=null;textMatrixScale=1;fontMatrix=Hl;leading=0;x=0;y=0;lineX=0;lineY=0;charSpacing=0;wordSpacing=0;textHScale=1;textRenderingMode=we.FILL;textRise=0;fillColor="#000000";strokeColor="#000000";patternFill=!1;patternStroke=!1;fillAlpha=1;strokeAlpha=1;lineWidth=1;activeSMask=null;transferMaps="none";constructor(t,e){this.clipBox=new Float32Array([0,0,t,e]),this.minMax=Qr.slice()}clone(){const t=Object.create(this);return t.clipBox=this.clipBox.slice(),t.minMax=this.minMax.slice(),t}getPathBoundingBox(t=de.FILL,e=null){const r=this.minMax.slice();if(t===de.STROKE){e||Nt("Stroke bounding box must include transform."),pt.singularValueDecompose2dScale(e,je);const i=je[0]*this.lineWidth/2,a=je[1]*this.lineWidth/2;r[0]-=i,r[1]-=a,r[2]+=i,r[3]+=a}return r}updateClipFromPath(){const t=pt.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(t||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(t){this.clipBox.set(t,0),this.minMax.set(Qr,0)}getClippedPathBoundingBox(t=de.FILL,e=null){return pt.intersect(this.clipBox,this.getPathBoundingBox(t,e))}}function Md(f,t){if(t instanceof ImageData){f.putImageData(t,0,0);return}const e=t.height,r=t.width,i=e%Ne,a=(e-i)/Ne,o=i===0?a:a+1,u=f.createImageData(r,Ne);let c=0,d;const p=t.data,g=u.data;let v,w,S,A;if(t.kind===Ea.GRAYSCALE_1BPP){const E=p.byteLength,x=new Uint32Array(g.buffer,0,g.byteLength>>2),R=x.length,C=r+7>>3,P=4294967295,T=fe.isLittleEndian?4278190080:255;for(v=0;v<o;v++){for(S=v<a?Ne:i,d=0,w=0;w<S;w++){const I=E-c;let M=0;const _=I>C?r:I*8-7,F=_&-8;let U=0,W=0;for(;M<F;M+=8)W=p[c++],x[d++]=W&128?P:T,x[d++]=W&64?P:T,x[d++]=W&32?P:T,x[d++]=W&16?P:T,x[d++]=W&8?P:T,x[d++]=W&4?P:T,x[d++]=W&2?P:T,x[d++]=W&1?P:T;for(;M<_;M++)U===0&&(W=p[c++],U=128),x[d++]=W&U?P:T,U>>=1}for(;d<R;)x[d++]=0;f.putImageData(u,0,v*Ne)}}else if(t.kind===Ea.RGBA_32BPP){for(w=0,A=r*Ne*4,v=0;v<a;v++)g.set(p.subarray(c,c+A)),c+=A,f.putImageData(u,0,w),w+=Ne;v<o&&(A=r*i*4,g.set(p.subarray(c,c+A)),f.putImageData(u,0,w))}else if(t.kind===Ea.RGB_24BPP)for(S=Ne,A=r*S,v=0;v<o;v++){for(v>=a&&(S=i,A=r*S),d=0,w=A;w--;)g[d++]=p[c++],g[d++]=p[c++],g[d++]=p[c++],g[d++]=255;f.putImageData(u,0,v*Ne)}else throw new Error(`bad image kind: ${t.kind}`)}function Od(f,t){if(t.bitmap){f.drawImage(t.bitmap,0,0);return}const e=t.height,r=t.width,i=e%Ne,a=(e-i)/Ne,o=i===0?a:a+1,u=f.createImageData(r,Ne);let c=0;const d=t.data,p=u.data;for(let g=0;g<o;g++){const v=g<a?Ne:i;({srcPos:c}=pm({src:d,srcPos:c,dest:p,width:r,height:v,nonBlackColor:0})),f.putImageData(u,0,g*Ne)}}function Hs(f,t){const e=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const r of e)f[r]!==void 0&&(t[r]=f[r]);f.setLineDash!==void 0&&(t.setLineDash(f.getLineDash()),t.lineDashOffset=f.lineDashOffset)}function wa(f){f.strokeStyle=f.fillStyle="#000000",f.fillRule="nonzero",f.globalAlpha=1,f.lineWidth=1,f.lineCap="butt",f.lineJoin="miter",f.miterLimit=10,f.globalCompositeOperation="source-over",f.font="10px sans-serif",f.setLineDash!==void 0&&(f.setLineDash([]),f.lineDashOffset=0);const{filter:t}=f;t!=="none"&&t!==""&&(f.filter="none")}function Ld(f,t){if(t)return!0;pt.singularValueDecompose2dScale(f,je);const e=Math.fround(vn.pixelRatio*es.PDF_TO_CSS_UNITS);return je[0]<=e&&je[1]<=e}const ym=["butt","round","square"],wm=["miter","round","bevel"],Am={},Nd={};class Zr{constructor(t,e,r,i,a,{optionalContentConfig:o,markedContentStack:u=null},c,d){this.ctx=t,this.current=new kd(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=e,this.objs=r,this.canvasFactory=i,this.filterFactory=a,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=u||[],this.optionalContentConfig=o,this.cachedCanvases=new vm(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=c,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=d,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(t,e=null){return typeof t=="string"?t.startsWith("g_")?this.commonObjs.get(t):this.objs.get(t):e}beginDrawing({transform:t,viewport:e,transparency:r=!1,background:i=null}){const a=this.ctx.canvas.width,o=this.ctx.canvas.height,u=this.ctx.fillStyle;if(this.ctx.fillStyle=i||"#ffffff",this.ctx.fillRect(0,0,a,o),this.ctx.fillStyle=u,r){const c=this.cachedCanvases.getCanvas("transparent",a,o);this.compositeCtx=this.ctx,this.transparentCanvas=c.canvas,this.ctx=c.context,this.ctx.save(),this.ctx.transform(...Vt(this.compositeCtx))}this.ctx.save(),wa(this.ctx),t&&(this.ctx.transform(...t),this.outputScaleX=t[0],this.outputScaleY=t[0]),this.ctx.transform(...e.transform),this.viewportScale=e.scale,this.baseTransform=Vt(this.ctx)}executeOperatorList(t,e,r,i){const a=t.argsArray,o=t.fnArray;let u=e||0;const c=a.length;if(c===u)return u;const d=c-u>Id&&typeof r=="function",p=d?Date.now()+gm:0;let g=0;const v=this.commonObjs,w=this.objs;let S;for(;;){if(i!==void 0&&u===i.nextBreakPoint)return i.breakIt(u,r),u;if(S=o[u],S!==Ca.dependency)this[S].apply(this,a[u]);else for(const A of a[u]){const E=A.startsWith("g_")?v:w;if(!E.has(A))return E.get(A,r),u}if(u++,u===c)return u;if(d&&++g>Id){if(Date.now()>p)return r(),u;g=0}}}#t(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}endDrawing(){this.#t(),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const t of this._cachedBitmapsMap.values()){for(const e of t.values())typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement&&(e.width=e.height=0);t.clear()}this._cachedBitmapsMap.clear(),this.#e()}#e(){if(this.pageColors){const t=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(t!=="none"){const e=this.ctx.filter;this.ctx.filter=t,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=e}}}_scaleImage(t,e){const r=t.width??t.displayWidth,i=t.height??t.displayHeight;let a=Math.max(Math.hypot(e[0],e[1]),1),o=Math.max(Math.hypot(e[2],e[3]),1),u=r,c=i,d="prescale1",p,g;for(;a>2&&u>1||o>2&&c>1;){let v=u,w=c;a>2&&u>1&&(v=u>=16384?Math.floor(u/2)-1||1:Math.ceil(u/2),a/=u/v),o>2&&c>1&&(w=c>=16384?Math.floor(c/2)-1||1:Math.ceil(c)/2,o/=c/w),p=this.cachedCanvases.getCanvas(d,v,w),g=p.context,g.clearRect(0,0,v,w),g.drawImage(t,0,0,u,c,0,0,v,w),t=p.canvas,u=v,c=w,d=d==="prescale1"?"prescale2":"prescale1"}return{img:t,paintWidth:u,paintHeight:c}}_createMaskCanvas(t){const e=this.ctx,{width:r,height:i}=t,a=this.current.fillColor,o=this.current.patternFill,u=Vt(e);let c,d,p,g;if((t.bitmap||t.data)&&t.count>1){const F=t.bitmap||t.data.buffer;d=JSON.stringify(o?u:[u.slice(0,4),a]),c=this._cachedBitmapsMap.get(F),c||(c=new Map,this._cachedBitmapsMap.set(F,c));const U=c.get(d);if(U&&!o){const W=Math.round(Math.min(u[0],u[2])+u[4]),q=Math.round(Math.min(u[1],u[3])+u[5]);return{canvas:U,offsetX:W,offsetY:q}}p=U}p||(g=this.cachedCanvases.getCanvas("maskCanvas",r,i),Od(g.context,t));let v=pt.transform(u,[1/r,0,0,-1/i,0,0]);v=pt.transform(v,[1,0,0,1,0,-i]);const w=Qr.slice();pt.axialAlignedBoundingBox([0,0,r,i],v,w);const[S,A,E,x]=w,R=Math.round(E-S)||1,C=Math.round(x-A)||1,P=this.cachedCanvases.getCanvas("fillCanvas",R,C),T=P.context,I=S,M=A;T.translate(-I,-M),T.transform(...v),p||(p=this._scaleImage(g.canvas,fn(T)),p=p.img,c&&o&&c.set(d,p)),T.imageSmoothingEnabled=Ld(Vt(T),t.interpolate),ya(T,p,0,0,p.width,p.height,0,0,r,i),T.globalCompositeOperation="source-in";const _=pt.transform(fn(T),[1,0,0,1,-I,-M]);return T.fillStyle=o?a.getPattern(e,this,_,de.FILL):a,T.fillRect(0,0,r,i),c&&!o&&(this.cachedCanvases.delete("fillCanvas"),c.set(d,P.canvas)),{canvas:P.canvas,offsetX:Math.round(I),offsetY:Math.round(M)}}setLineWidth(t){t!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=t,this.ctx.lineWidth=t}setLineCap(t){this.ctx.lineCap=ym[t]}setLineJoin(t){this.ctx.lineJoin=wm[t]}setMiterLimit(t){this.ctx.miterLimit=t}setDash(t,e){const r=this.ctx;r.setLineDash!==void 0&&(r.setLineDash(t),r.lineDashOffset=e)}setRenderingIntent(t){}setFlatness(t){}setGState(t){for(const[e,r]of t)switch(e){case"LW":this.setLineWidth(r);break;case"LC":this.setLineCap(r);break;case"LJ":this.setLineJoin(r);break;case"ML":this.setMiterLimit(r);break;case"D":this.setDash(r[0],r[1]);break;case"RI":this.setRenderingIntent(r);break;case"FL":this.setFlatness(r);break;case"Font":this.setFont(r[0],r[1]);break;case"CA":this.current.strokeAlpha=r;break;case"ca":this.ctx.globalAlpha=this.current.fillAlpha=r;break;case"BM":this.ctx.globalCompositeOperation=r;break;case"SMask":this.current.activeSMask=r?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(r);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const t=this.inSMaskMode;this.current.activeSMask&&!t?this.beginSMaskMode():!this.current.activeSMask&&t&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const t=this.ctx.canvas.width,e=this.ctx.canvas.height,r="smaskGroupAt"+this.groupLevel,i=this.cachedCanvases.getCanvas(r,t,e);this.suspendedCtx=this.ctx;const a=this.ctx=i.context;a.setTransform(this.suspendedCtx.getTransform()),Hs(this.suspendedCtx,a),mm(a,this.suspendedCtx),this.setGState([["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),Hs(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(t){if(!this.current.activeSMask)return;t?(t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.ceil(t[2]),t[3]=Math.ceil(t[3])):t=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const e=this.current.activeSMask,r=this.suspendedCtx;this.composeSMask(r,e,this.ctx,t),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(t,e,r,i){const a=i[0],o=i[1],u=i[2]-a,c=i[3]-o;u===0||c===0||(this.genericComposeSMask(e.context,r,u,c,e.subtype,e.backdrop,e.transferMap,a,o,e.offsetX,e.offsetY),t.save(),t.globalAlpha=1,t.globalCompositeOperation="source-over",t.setTransform(1,0,0,1,0,0),t.drawImage(r.canvas,0,0),t.restore())}genericComposeSMask(t,e,r,i,a,o,u,c,d,p,g){let v=t.canvas,w=c-p,S=d-g;if(o)if(w<0||S<0||w+r>v.width||S+i>v.height){const E=this.cachedCanvases.getCanvas("maskExtension",r,i),x=E.context;x.drawImage(v,-w,-S),x.globalCompositeOperation="destination-atop",x.fillStyle=o,x.fillRect(0,0,r,i),x.globalCompositeOperation="source-over",v=E.canvas,w=S=0}else{t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0);const E=new Path2D;E.rect(w,S,r,i),t.clip(E),t.globalCompositeOperation="destination-atop",t.fillStyle=o,t.fillRect(w,S,r,i),t.restore()}e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0),a==="Alpha"&&u?e.filter=this.filterFactory.addAlphaFilter(u):a==="Luminosity"&&(e.filter=this.filterFactory.addLuminosityFilter(u));const A=new Path2D;A.rect(c,d,r,i),e.clip(A),e.globalCompositeOperation="destination-in",e.drawImage(v,w,S,r,i,c,d,r,i),e.restore()}save(){this.inSMaskMode&&Hs(this.ctx,this.suspendedCtx),this.ctx.save();const t=this.current;this.stateStack.push(t),this.current=t.clone()}restore(){if(this.stateStack.length===0){this.inSMaskMode&&this.endSMaskMode();return}this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&Hs(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}transform(t,e,r,i,a,o){this.ctx.transform(t,e,r,i,a,o),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(t,e,r){let[i]=e;if(!r){i||=e[0]=new Path2D,this[t](i);return}if(!(i instanceof Path2D)){const a=e[0]=new Path2D;for(let o=0,u=i.length;o<u;)switch(i[o++]){case pa.moveTo:a.moveTo(i[o++],i[o++]);break;case pa.lineTo:a.lineTo(i[o++],i[o++]);break;case pa.curveTo:a.bezierCurveTo(i[o++],i[o++],i[o++],i[o++],i[o++],i[o++]);break;case pa.closePath:a.closePath();break;default:St(`Unrecognized drawing path operator: ${i[o-1]}`);break}i=a}pt.axialAlignedBoundingBox(r,Vt(this.ctx),this.current.minMax),this[t](i)}closePath(){this.ctx.closePath()}stroke(t,e=!0){const r=this.ctx,i=this.current.strokeColor;if(r.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof i=="object"&&i?.getPattern){const a=i.isModifyingCurrentTransform()?r.getTransform():null;if(r.save(),r.strokeStyle=i.getPattern(r,this,fn(r),de.STROKE),a){const o=new Path2D;o.addPath(t,r.getTransform().invertSelf().multiplySelf(a)),t=o}this.rescaleAndStroke(t,!1),r.restore()}else this.rescaleAndStroke(t,!0);e&&this.consumePath(t,this.current.getClippedPathBoundingBox(de.STROKE,Vt(this.ctx))),r.globalAlpha=this.current.fillAlpha}closeStroke(t){this.stroke(t)}fill(t,e=!0){const r=this.ctx,i=this.current.fillColor,a=this.current.patternFill;let o=!1;if(a){const c=i.isModifyingCurrentTransform()?r.getTransform():null;if(r.save(),r.fillStyle=i.getPattern(r,this,fn(r),de.FILL),c){const d=new Path2D;d.addPath(t,r.getTransform().invertSelf().multiplySelf(c)),t=d}o=!0}const u=this.current.getClippedPathBoundingBox();this.contentVisible&&u!==null&&(this.pendingEOFill?(r.fill(t,"evenodd"),this.pendingEOFill=!1):r.fill(t)),o&&r.restore(),e&&this.consumePath(t,u)}eoFill(t){this.pendingEOFill=!0,this.fill(t)}fillStroke(t){this.fill(t,!1),this.stroke(t,!1),this.consumePath(t)}eoFillStroke(t){this.pendingEOFill=!0,this.fillStroke(t)}closeFillStroke(t){this.fillStroke(t)}closeEOFillStroke(t){this.pendingEOFill=!0,this.fillStroke(t)}endPath(t){this.consumePath(t)}rawFillPath(t){this.ctx.fill(t)}clip(){this.pendingClip=Am}eoClip(){this.pendingClip=Nd}beginText(){this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const t=this.pendingTextPaths,e=this.ctx;if(t===void 0)return;const r=new Path2D,i=e.getTransform().invertSelf();for(const{transform:a,x:o,y:u,fontSize:c,path:d}of t)d&&r.addPath(d,new DOMMatrix(a).preMultiplySelf(i).translate(o,u).scale(c,-c));e.clip(r),delete this.pendingTextPaths}setCharSpacing(t){this.current.charSpacing=t}setWordSpacing(t){this.current.wordSpacing=t}setHScale(t){this.current.textHScale=t/100}setLeading(t){this.current.leading=-t}setFont(t,e){const r=this.commonObjs.get(t),i=this.current;if(!r)throw new Error(`Can't find font for ${t}`);if(i.fontMatrix=r.fontMatrix||Hl,(i.fontMatrix[0]===0||i.fontMatrix[3]===0)&&St("Invalid font matrix for font "+t),e<0?(e=-e,i.fontDirection=-1):i.fontDirection=1,this.current.font=r,this.current.fontSize=e,r.isType3Font)return;const a=r.loadedName||"sans-serif",o=r.systemFontInfo?.css||`"${a}", ${r.fallbackName}`;let u="normal";r.black?u="900":r.bold&&(u="bold");const c=r.italic?"italic":"normal";let d=e;e<Rd?d=Rd:e>Pd&&(d=Pd),this.current.fontSizeScale=e/d,this.ctx.font=`${c} ${u} ${d}px ${o}`}setTextRenderingMode(t){this.current.textRenderingMode=t}setTextRise(t){this.current.textRise=t}moveText(t,e){this.current.x=this.current.lineX+=t,this.current.y=this.current.lineY+=e}setLeadingMoveText(t,e){this.setLeading(-e),this.moveText(t,e)}setTextMatrix(t){const{current:e}=this;e.textMatrix=t,e.textMatrixScale=Math.hypot(t[0],t[1]),e.x=e.lineX=0,e.y=e.lineY=0}nextLine(){this.moveText(0,this.current.leading)}#n(t,e,r){const i=new Path2D;return i.addPath(t,new DOMMatrix(r).invertSelf().multiplySelf(e)),i}paintChar(t,e,r,i,a){const o=this.ctx,u=this.current,c=u.font,d=u.textRenderingMode,p=u.fontSize/u.fontSizeScale,g=d&we.FILL_STROKE_MASK,v=!!(d&we.ADD_TO_PATH_FLAG),w=u.patternFill&&!c.missingFile,S=u.patternStroke&&!c.missingFile;let A;if((c.disableFontFace||v||w||S)&&!c.missingFile&&(A=c.getPathGenerator(this.commonObjs,t)),A&&(c.disableFontFace||w||S)){o.save(),o.translate(e,r),o.scale(p,-p);let E;if((g===we.FILL||g===we.FILL_STROKE)&&(i?(E=o.getTransform(),o.setTransform(...i),o.fill(this.#n(A,E,i))):o.fill(A)),g===we.STROKE||g===we.FILL_STROKE)if(a){E||=o.getTransform(),o.setTransform(...a);const{a:x,b:R,c:C,d:P}=E,T=pt.inverseTransform(a),I=pt.transform([x,R,C,P,0,0],T);pt.singularValueDecompose2dScale(I,je),o.lineWidth*=Math.max(je[0],je[1])/p,o.stroke(this.#n(A,E,a))}else o.lineWidth/=p,o.stroke(A);o.restore()}else(g===we.FILL||g===we.FILL_STROKE)&&o.fillText(t,e,r),(g===we.STROKE||g===we.FILL_STROKE)&&o.strokeText(t,e,r);v&&(this.pendingTextPaths||=[]).push({transform:Vt(o),x:e,y:r,fontSize:p,path:A})}get isFontSubpixelAAEnabled(){const{context:t}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);t.scale(1.5,1),t.fillText("I",0,10);const e=t.getImageData(0,0,10,10).data;let r=!1;for(let i=3;i<e.length;i+=4)if(e[i]>0&&e[i]<255){r=!0;break}return Tt(this,"isFontSubpixelAAEnabled",r)}showText(t){const e=this.current,r=e.font;if(r.isType3Font)return this.showType3Text(t);const i=e.fontSize;if(i===0)return;const a=this.ctx,o=e.fontSizeScale,u=e.charSpacing,c=e.wordSpacing,d=e.fontDirection,p=e.textHScale*d,g=t.length,v=r.vertical,w=v?1:-1,S=r.defaultVMetrics,A=i*e.fontMatrix[0],E=e.textRenderingMode===we.FILL&&!r.disableFontFace&&!e.patternFill;a.save(),e.textMatrix&&a.transform(...e.textMatrix),a.translate(e.x,e.y+e.textRise),d>0?a.scale(p,-1):a.scale(p,1);let x,R;if(e.patternFill){a.save();const M=e.fillColor.getPattern(a,this,fn(a),de.FILL);x=Vt(a),a.restore(),a.fillStyle=M}if(e.patternStroke){a.save();const M=e.strokeColor.getPattern(a,this,fn(a),de.STROKE);R=Vt(a),a.restore(),a.strokeStyle=M}let C=e.lineWidth;const P=e.textMatrixScale;if(P===0||C===0){const M=e.textRenderingMode&we.FILL_STROKE_MASK;(M===we.STROKE||M===we.FILL_STROKE)&&(C=this.getSinglePixelWidth())}else C/=P;if(o!==1&&(a.scale(o,o),C/=o),a.lineWidth=C,r.isInvalidPDFjsFont){const M=[];let _=0;for(const F of t)M.push(F.unicode),_+=F.width;a.fillText(M.join(""),0,0),e.x+=_*A*p,a.restore(),this.compose();return}let T=0,I;for(I=0;I<g;++I){const M=t[I];if(typeof M=="number"){T+=w*M*i/1e3;continue}let _=!1;const F=(M.isSpace?c:0)+u,U=M.fontChar,W=M.accent;let q,J,rt=M.width;if(v){const X=M.vmetric||S,$=-(M.vmetric?X[1]:rt*.5)*A,V=X[2]*A;rt=X?-X[0]:rt,q=$/o,J=(T+V)/o}else q=T/o,J=0;if(r.remeasure&&rt>0){const X=a.measureText(U).width*1e3/i*o;if(rt<X&&this.isFontSubpixelAAEnabled){const $=rt/X;_=!0,a.save(),a.scale($,1),q/=$}else rt!==X&&(q+=(rt-X)/2e3*i/o)}if(this.contentVisible&&(M.isInFont||r.missingFile)){if(E&&!W)a.fillText(U,q,J);else if(this.paintChar(U,q,J,x,R),W){const X=q+i*W.offset.x/o,$=J-i*W.offset.y/o;this.paintChar(W.fontChar,X,$,x,R)}}const gt=v?rt*A-F*d:rt*A+F*d;T+=gt,_&&a.restore()}v?e.y-=T:e.x+=T*p,a.restore(),this.compose()}showType3Text(t){const e=this.ctx,r=this.current,i=r.font,a=r.fontSize,o=r.fontDirection,u=i.vertical?1:-1,c=r.charSpacing,d=r.wordSpacing,p=r.textHScale*o,g=r.fontMatrix||Hl,v=t.length,w=r.textRenderingMode===we.INVISIBLE;let S,A,E,x;if(!(w||a===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,e.save(),r.textMatrix&&e.transform(...r.textMatrix),e.translate(r.x,r.y+r.textRise),e.scale(p,o),S=0;S<v;++S){if(A=t[S],typeof A=="number"){x=u*A*a/1e3,this.ctx.translate(x,0),r.x+=x*p;continue}const R=(A.isSpace?d:0)+c,C=i.charProcOperatorList[A.operatorListId];C?this.contentVisible&&(this.save(),e.scale(a,a),e.transform(...g),this.executeOperatorList(C),this.restore()):St(`Type3 character "${A.operatorListId}" is not available.`);const P=[A.width,0];pt.applyTransform(P,g),E=P[0]*a+R,e.translate(E,0),r.x+=E*p}e.restore()}}setCharWidth(t,e){}setCharWidthAndBounds(t,e,r,i,a,o){const u=new Path2D;u.rect(r,i,a-r,o-i),this.ctx.clip(u),this.endPath()}getColorN_Pattern(t){let e;if(t[0]==="TilingPattern"){const r=this.baseTransform||Vt(this.ctx),i={createCanvasGraphics:a=>new Zr(a,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};e=new lu(t,this.ctx,i,r)}else e=this._getPattern(t[1],t[2]);return e}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments),this.current.patternStroke=!0}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(t){this.ctx.strokeStyle=this.current.strokeColor=t,this.current.patternStroke=!1}setStrokeTransparent(){this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(t){this.ctx.fillStyle=this.current.fillColor=t,this.current.patternFill=!1}setFillTransparent(){this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(t,e=null){let r;return this.cachedPatterns.has(t)?r=this.cachedPatterns.get(t):(r=fm(this.getObject(t)),this.cachedPatterns.set(t,r)),e&&(r.matrix=e),r}shadingFill(t){if(!this.contentVisible)return;const e=this.ctx;this.save();const r=this._getPattern(t);e.fillStyle=r.getPattern(e,this,fn(e),de.SHADING);const i=fn(e);if(i){const{width:a,height:o}=e.canvas,u=Qr.slice();pt.axialAlignedBoundingBox([0,0,a,o],i,u);const[c,d,p,g]=u;this.ctx.fillRect(c,d,p-c,g-d)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){Nt("Should not call beginInlineImage")}beginImageData(){Nt("Should not call beginImageData")}paintFormXObjectBegin(t,e){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),t&&this.transform(...t),this.baseTransform=Vt(this.ctx),e)){pt.axialAlignedBoundingBox(e,this.baseTransform,this.current.minMax);const[r,i,a,o]=e,u=new Path2D;u.rect(r,i,a-r,o-i),this.ctx.clip(u),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(t){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const e=this.ctx;t.isolated||Ma("TODO: Support non-isolated groups."),t.knockout&&St("Knockout groups not supported.");const r=Vt(e);if(t.matrix&&e.transform(...t.matrix),!t.bbox)throw new Error("Bounding box is required.");let i=Qr.slice();pt.axialAlignedBoundingBox(t.bbox,Vt(e),i);const a=[0,0,e.canvas.width,e.canvas.height];i=pt.intersect(i,a)||[0,0,0,0];const o=Math.floor(i[0]),u=Math.floor(i[1]),c=Math.max(Math.ceil(i[2])-o,1),d=Math.max(Math.ceil(i[3])-u,1);this.current.startNewPathAndClipBox([0,0,c,d]);let p="groupAt"+this.groupLevel;t.smask&&(p+="_smask_"+this.smaskCounter++%2);const g=this.cachedCanvases.getCanvas(p,c,d),v=g.context;v.translate(-o,-u),v.transform(...r);let w=new Path2D;const[S,A,E,x]=t.bbox;if(w.rect(S,A,E-S,x-A),t.matrix){const R=new Path2D;R.addPath(w,new DOMMatrix(t.matrix)),w=R}v.clip(w),t.smask?this.smaskStack.push({canvas:g.canvas,context:v,offsetX:o,offsetY:u,subtype:t.smask.subtype,backdrop:t.smask.backdrop,transferMap:t.smask.transferMap||null,startTransformInverse:null}):(e.setTransform(1,0,0,1,0,0),e.translate(o,u),e.save()),Hs(e,v),this.ctx=v,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(e),this.groupLevel++}endGroup(t){if(!this.contentVisible)return;this.groupLevel--;const e=this.ctx,r=this.groupStack.pop();if(this.ctx=r,this.ctx.imageSmoothingEnabled=!1,t.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const i=Vt(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...i);const a=Qr.slice();pt.axialAlignedBoundingBox([0,0,e.canvas.width,e.canvas.height],i,a),this.ctx.drawImage(e.canvas,0,0),this.ctx.restore(),this.compose(a)}}beginAnnotation(t,e,r,i,a){if(this.#t(),wa(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),e){const o=e[2]-e[0],u=e[3]-e[1];if(a&&this.annotationCanvasMap){r=r.slice(),r[4]-=e[0],r[5]-=e[1],e=e.slice(),e[0]=e[1]=0,e[2]=o,e[3]=u,pt.singularValueDecompose2dScale(Vt(this.ctx),je);const{viewportScale:c}=this,d=Math.ceil(o*this.outputScaleX*c),p=Math.ceil(u*this.outputScaleY*c);this.annotationCanvas=this.canvasFactory.create(d,p);const{canvas:g,context:v}=this.annotationCanvas;this.annotationCanvasMap.set(t,g),this.annotationCanvas.savedCtx=this.ctx,this.ctx=v,this.ctx.save(),this.ctx.setTransform(je[0],0,0,-je[1],0,u*je[1]),wa(this.ctx)}else{wa(this.ctx),this.endPath();const c=new Path2D;c.rect(e[0],e[1],o,u),this.ctx.clip(c)}}this.current=new kd(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...r),this.transform(...i)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),this.#e(),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(t){if(!this.contentVisible)return;const e=t.count;t=this.getObject(t.data,t),t.count=e;const r=this.ctx,i=this._createMaskCanvas(t),a=i.canvas;r.save(),r.setTransform(1,0,0,1,0,0),r.drawImage(a,i.offsetX,i.offsetY),r.restore(),this.compose()}paintImageMaskXObjectRepeat(t,e,r=0,i=0,a,o){if(!this.contentVisible)return;t=this.getObject(t.data,t);const u=this.ctx;u.save();const c=Vt(u);u.transform(e,r,i,a,0,0);const d=this._createMaskCanvas(t);u.setTransform(1,0,0,1,d.offsetX-c[4],d.offsetY-c[5]);for(let p=0,g=o.length;p<g;p+=2){const v=pt.transform(c,[e,r,i,a,o[p],o[p+1]]);u.drawImage(d.canvas,v[4],v[5])}u.restore(),this.compose()}paintImageMaskXObjectGroup(t){if(!this.contentVisible)return;const e=this.ctx,r=this.current.fillColor,i=this.current.patternFill;for(const a of t){const{data:o,width:u,height:c,transform:d}=a,p=this.cachedCanvases.getCanvas("maskCanvas",u,c),g=p.context;g.save();const v=this.getObject(o,a);Od(g,v),g.globalCompositeOperation="source-in",g.fillStyle=i?r.getPattern(g,this,fn(e),de.FILL):r,g.fillRect(0,0,u,c),g.restore(),e.save(),e.transform(...d),e.scale(1,-1),ya(e,p.canvas,0,0,u,c,0,-1,1,1),e.restore()}this.compose()}paintImageXObject(t){if(!this.contentVisible)return;const e=this.getObject(t);if(!e){St("Dependent image isn't ready yet");return}this.paintInlineImageXObject(e)}paintImageXObjectRepeat(t,e,r,i){if(!this.contentVisible)return;const a=this.getObject(t);if(!a){St("Dependent image isn't ready yet");return}const o=a.width,u=a.height,c=[];for(let d=0,p=i.length;d<p;d+=2)c.push({transform:[e,0,0,r,i[d],i[d+1]],x:0,y:0,w:o,h:u});this.paintInlineImageXObjectGroup(a,c)}applyTransferMapsToCanvas(t){return this.current.transferMaps!=="none"&&(t.filter=this.current.transferMaps,t.drawImage(t.canvas,0,0),t.filter="none"),t.canvas}applyTransferMapsToBitmap(t){if(this.current.transferMaps==="none")return t.bitmap;const{bitmap:e,width:r,height:i}=t,a=this.cachedCanvases.getCanvas("inlineImage",r,i),o=a.context;return o.filter=this.current.transferMaps,o.drawImage(e,0,0),o.filter="none",a.canvas}paintInlineImageXObject(t){if(!this.contentVisible)return;const e=t.width,r=t.height,i=this.ctx;this.save();const{filter:a}=i;a!=="none"&&a!==""&&(i.filter="none"),i.scale(1/e,-1/r);let o;if(t.bitmap)o=this.applyTransferMapsToBitmap(t);else if(typeof HTMLElement=="function"&&t instanceof HTMLElement||!t.data)o=t;else{const d=this.cachedCanvases.getCanvas("inlineImage",e,r).context;Md(d,t),o=this.applyTransferMapsToCanvas(d)}const u=this._scaleImage(o,fn(i));i.imageSmoothingEnabled=Ld(Vt(i),t.interpolate),ya(i,u.img,0,0,u.paintWidth,u.paintHeight,0,-r,e,r),this.compose(),this.restore()}paintInlineImageXObjectGroup(t,e){if(!this.contentVisible)return;const r=this.ctx;let i;if(t.bitmap)i=t.bitmap;else{const a=t.width,o=t.height,c=this.cachedCanvases.getCanvas("inlineImage",a,o).context;Md(c,t),i=this.applyTransferMapsToCanvas(c)}for(const a of e)r.save(),r.transform(...a.transform),r.scale(1,-1),ya(r,i,a.x,a.y,a.w,a.h,0,-1,1,1),r.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(t){}markPointProps(t,e){}beginMarkedContent(t){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(t,e){t==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(e)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(t,e){const r=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(e);const i=this.ctx;this.pendingClip&&(r||(this.pendingClip===Nd?i.clip(t,"evenodd"):i.clip(t)),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const t=Vt(this.ctx);if(t[1]===0&&t[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(t[0]),Math.abs(t[3]));else{const e=Math.abs(t[0]*t[3]-t[2]*t[1]),r=Math.hypot(t[0],t[2]),i=Math.hypot(t[1],t[3]);this._cachedGetSinglePixelWidth=Math.max(r,i)/e}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:t}=this.current,{a:e,b:r,c:i,d:a}=this.ctx.getTransform();let o,u;if(r===0&&i===0){const c=Math.abs(e),d=Math.abs(a);if(c===d)if(t===0)o=u=1/c;else{const p=c*t;o=u=p<1?1/p:1}else if(t===0)o=1/c,u=1/d;else{const p=c*t,g=d*t;o=p<1?1/p:1,u=g<1?1/g:1}}else{const c=Math.abs(e*a-r*i),d=Math.hypot(e,r),p=Math.hypot(i,a);if(t===0)o=p/c,u=d/c;else{const g=t*c;o=p>g?p/g:1,u=d>g?d/g:1}}this._cachedScaleForStroking[0]=o,this._cachedScaleForStroking[1]=u}return this._cachedScaleForStroking}rescaleAndStroke(t,e){const{ctx:r,current:{lineWidth:i}}=this,[a,o]=this.getScaleForStroking();if(a===o){r.lineWidth=(i||1)*a,r.stroke(t);return}const u=r.getLineDash();e&&r.save(),r.scale(a,o),zl.a=1/a,zl.d=1/o;const c=new Path2D;if(c.addPath(t,zl),u.length>0){const d=Math.max(a,o);r.setLineDash(u.map(p=>p/d)),r.lineDashOffset/=d}r.lineWidth=i||1,r.stroke(c),e&&r.restore()}isContentVisible(){for(let t=this.markedContentStack.length-1;t>=0;t--)if(!this.markedContentStack[t].visible)return!1;return!0}}for(const f in Ca)Zr.prototype[f]!==void 0&&(Zr.prototype[Ca[f]]=Zr.prototype[f]);class qr{static#t=null;static#e="";static get workerPort(){return this.#t}static set workerPort(t){if(!(typeof Worker<"u"&&t instanceof Worker)&&t!==null)throw new Error("Invalid `workerPort` type.");this.#t=t}static get workerSrc(){return this.#e}static set workerSrc(t){if(typeof t!="string")throw new Error("Invalid `workerSrc` type.");this.#e=t}}class Sm{#t;#e;constructor({parsedData:t,rawData:e}){this.#t=t,this.#e=e}getRaw(){return this.#e}get(t){return this.#t.get(t)??null}[Symbol.iterator](){return this.#t.entries()}}const Yr=Symbol("INTERNAL");class Em{#t=!1;#e=!1;#n=!1;#r=!0;constructor(t,{name:e,intent:r,usage:i,rbGroups:a}){this.#t=!!(t&ze.DISPLAY),this.#e=!!(t&ze.PRINT),this.name=e,this.intent=r,this.usage=i,this.rbGroups=a}get visible(){if(this.#n)return this.#r;if(!this.#r)return!1;const{print:t,view:e}=this.usage;return this.#t?e?.viewState!=="OFF":this.#e?t?.printState!=="OFF":!0}_setVisible(t,e,r=!1){t!==Yr&&Nt("Internal method `_setVisible` called."),this.#n=r,this.#r=e}}class xm{#t=null;#e=new Map;#n=null;#r=null;constructor(t,e=ze.DISPLAY){if(this.renderingIntent=e,this.name=null,this.creator=null,t!==null){this.name=t.name,this.creator=t.creator,this.#r=t.order;for(const r of t.groups)this.#e.set(r.id,new Em(e,r));if(t.baseState==="OFF")for(const r of this.#e.values())r._setVisible(Yr,!1);for(const r of t.on)this.#e.get(r)._setVisible(Yr,!0);for(const r of t.off)this.#e.get(r)._setVisible(Yr,!1);this.#n=this.getHash()}}#i(t){const e=t.length;if(e<2)return!0;const r=t[0];for(let i=1;i<e;i++){const a=t[i];let o;if(Array.isArray(a))o=this.#i(a);else if(this.#e.has(a))o=this.#e.get(a).visible;else return St(`Optional content group not found: ${a}`),!0;switch(r){case"And":if(!o)return!1;break;case"Or":if(o)return!0;break;case"Not":return!o;default:return!0}}return r==="And"}isVisible(t){if(this.#e.size===0)return!0;if(!t)return Ma("Optional content group not defined."),!0;if(t.type==="OCG")return this.#e.has(t.id)?this.#e.get(t.id).visible:(St(`Optional content group not found: ${t.id}`),!0);if(t.type==="OCMD"){if(t.expression)return this.#i(t.expression);if(!t.policy||t.policy==="AnyOn"){for(const e of t.ids){if(!this.#e.has(e))return St(`Optional content group not found: ${e}`),!0;if(this.#e.get(e).visible)return!0}return!1}else if(t.policy==="AllOn"){for(const e of t.ids){if(!this.#e.has(e))return St(`Optional content group not found: ${e}`),!0;if(!this.#e.get(e).visible)return!1}return!0}else if(t.policy==="AnyOff"){for(const e of t.ids){if(!this.#e.has(e))return St(`Optional content group not found: ${e}`),!0;if(!this.#e.get(e).visible)return!0}return!1}else if(t.policy==="AllOff"){for(const e of t.ids){if(!this.#e.has(e))return St(`Optional content group not found: ${e}`),!0;if(this.#e.get(e).visible)return!1}return!0}return St(`Unknown optional content policy ${t.policy}.`),!0}return St(`Unknown group type ${t.type}.`),!0}setVisibility(t,e=!0,r=!0){const i=this.#e.get(t);if(!i){St(`Optional content group not found: ${t}`);return}if(r&&e&&i.rbGroups.length)for(const a of i.rbGroups)for(const o of a)o!==t&&this.#e.get(o)?._setVisible(Yr,!1,!0);i._setVisible(Yr,!!e,!0),this.#t=null}setOCGState({state:t,preserveRB:e}){let r;for(const i of t){switch(i){case"ON":case"OFF":case"Toggle":r=i;continue}const a=this.#e.get(i);if(a)switch(r){case"ON":this.setVisibility(i,!0,e);break;case"OFF":this.setVisibility(i,!1,e);break;case"Toggle":this.setVisibility(i,!a.visible,e);break}}this.#t=null}get hasInitialVisibility(){return this.#n===null||this.getHash()===this.#n}getOrder(){return this.#e.size?this.#r?this.#r.slice():[...this.#e.keys()]:null}getGroup(t){return this.#e.get(t)||null}getHash(){if(this.#t!==null)return this.#t;const t=new Xd;for(const[e,r]of this.#e)t.update(`${e}:${r.visible}`);return this.#t=t.hexdigest()}[Symbol.iterator](){return this.#e.entries()}}class bm{constructor(t,{disableRange:e=!1,disableStream:r=!1}){ee(t,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:i,initialData:a,progressiveDone:o,contentDispositionFilename:u}=t;if(this._queuedChunks=[],this._progressiveDone=o,this._contentDispositionFilename=u,a?.length>0){const c=a instanceof Uint8Array&&a.byteLength===a.buffer.byteLength?a.buffer:new Uint8Array(a).buffer;this._queuedChunks.push(c)}this._pdfDataRangeTransport=t,this._isStreamingSupported=!r,this._isRangeSupported=!e,this._contentLength=i,this._fullRequestReader=null,this._rangeReaders=[],t.addRangeListener((c,d)=>{this._onReceiveData({begin:c,chunk:d})}),t.addProgressListener((c,d)=>{this._onProgress({loaded:c,total:d})}),t.addProgressiveReadListener(c=>{this._onReceiveData({chunk:c})}),t.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),t.transportReady()}_onReceiveData({begin:t,chunk:e}){const r=e instanceof Uint8Array&&e.byteLength===e.buffer.byteLength?e.buffer:new Uint8Array(e).buffer;if(t===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(r):this._queuedChunks.push(r);else{const i=this._rangeReaders.some(function(a){return a._begin!==t?!1:(a._enqueue(r),!0)});ee(i,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}_onProgress(t){t.total===void 0?this._rangeReaders[0]?.onProgress?.({loaded:t.loaded}):this._fullRequestReader?.onProgress?.({loaded:t.loaded,total:t.total})}_onProgressiveDone(){this._fullRequestReader?.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(t){const e=this._rangeReaders.indexOf(t);e>=0&&this._rangeReaders.splice(e,1)}getFullReader(){ee(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const t=this._queuedChunks;return this._queuedChunks=null,new Cm(this,t,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const r=new Tm(this,t,e);return this._pdfDataRangeTransport.requestDataRange(t,e),this._rangeReaders.push(r),r}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const e of this._rangeReaders.slice(0))e.cancel(t);this._pdfDataRangeTransport.abort()}}class Cm{constructor(t,e,r=!1,i=null){this._stream=t,this._done=r||!1,this._filename=nu(i)?i:null,this._queuedChunks=e||[],this._loaded=0;for(const a of this._queuedChunks)this._loaded+=a.byteLength;this._requests=[],this._headersReady=Promise.resolve(),t._fullRequestReader=this,this.onProgress=null}_enqueue(t){this._done||(this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunks.push(t),this._loaded+=t.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class Tm{constructor(t,e,r){this._stream=t,this._begin=e,this._end=r,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(t){if(!this._done){if(this._requests.length===0)this._queuedChunk=t;else{this._requests.shift().resolve({value:t,done:!1});for(const r of this._requests)r.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function Rm(f){let t=!0,e=r("filename\\*","i").exec(f);if(e){e=e[1];let p=u(e);return p=unescape(p),p=c(p),p=d(p),a(p)}if(e=o(f),e){const p=d(e);return a(p)}if(e=r("filename","i").exec(f),e){e=e[1];let p=u(e);return p=d(p),a(p)}function r(p,g){return new RegExp("(?:^|;)\\s*"+p+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',g)}function i(p,g){if(p){if(!/^[\x00-\xFF]+$/.test(g))return g;try{const v=new TextDecoder(p,{fatal:!0}),w=qs(g);g=v.decode(w),t=!1}catch{}}return g}function a(p){return t&&/[\x80-\xff]/.test(p)&&(p=i("utf-8",p),t&&(p=i("iso-8859-1",p))),p}function o(p){const g=[];let v;const w=r("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(v=w.exec(p))!==null;){let[,A,E,x]=v;if(A=parseInt(A,10),A in g){if(A===0)break;continue}g[A]=[E,x]}const S=[];for(let A=0;A<g.length&&A in g;++A){let[E,x]=g[A];x=u(x),E&&(x=unescape(x),A===0&&(x=c(x))),S.push(x)}return S.join("")}function u(p){if(p.startsWith('"')){const g=p.slice(1).split('\\"');for(let v=0;v<g.length;++v){const w=g[v].indexOf('"');w!==-1&&(g[v]=g[v].slice(0,w),g.length=v+1),g[v]=g[v].replaceAll(/\\(.)/g,"$1")}p=g.join('"')}return p}function c(p){const g=p.indexOf("'");if(g===-1)return p;const v=p.slice(0,g),S=p.slice(g+1).replace(/^[^']*'/,"");return i(v,S)}function d(p){return!p.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(p)?p:p.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(g,v,w,S){if(w==="q"||w==="Q")return S=S.replaceAll("_"," "),S=S.replaceAll(/=([0-9a-fA-F]{2})/g,function(A,E){return String.fromCharCode(parseInt(E,16))}),i(v,S);try{S=atob(S)}catch{}return i(v,S)})}return""}function tf(f,t){const e=new Headers;if(!f||!t||typeof t!="object")return e;for(const r in t){const i=t[r];i!==void 0&&e.append(r,i)}return e}function Da(f){return URL.parse(f)?.origin??null}function ef({responseHeaders:f,isHttp:t,rangeChunkSize:e,disableRange:r}){const i={allowRangeRequests:!1,suggestedLength:void 0},a=parseInt(f.get("Content-Length"),10);return!Number.isInteger(a)||(i.suggestedLength=a,a<=2*e)||r||!t||f.get("Accept-Ranges")!=="bytes"||(f.get("Content-Encoding")||"identity")!=="identity"||(i.allowRangeRequests=!0),i}function nf(f){const t=f.get("Content-Disposition");if(t){let e=Rm(t);if(e.includes("%"))try{e=decodeURIComponent(e)}catch{}if(nu(e))return e}return null}function ri(f,t){return new Ta(`Unexpected server response (${f}) while retrieving PDF "${t}".`,f,f===404||f===0&&t.startsWith("file:"))}function rf(f){return f===200||f===206}function sf(f,t,e){return{method:"GET",headers:f,signal:e.signal,mode:"cors",credentials:t?"include":"same-origin",redirect:"follow"}}function af(f){return f instanceof Uint8Array?f.buffer:f instanceof ArrayBuffer?f:(St(`getArrayBuffer - unexpected data format: ${f}`),new Uint8Array(f).buffer)}class Pm{_responseOrigin=null;constructor(t){this.source=t,this.isHttp=/^https?:/i.test(t.url),this.headers=tf(this.isHttp,t.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return ee(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new Im(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const r=new km(this,t,e);return this._rangeRequestReaders.push(r),r}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const e of this._rangeRequestReaders.slice(0))e.cancel(t)}}class Im{constructor(t){this._stream=t,this._reader=null,this._loaded=0,this._filename=null;const e=t.source;this._withCredentials=e.withCredentials||!1,this._contentLength=e.length,this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange;const r=new Headers(t.headers),i=e.url;fetch(i,sf(r,this._withCredentials,this._abortController)).then(a=>{if(t._responseOrigin=Da(a.url),!rf(a.status))throw ri(a.status,i);this._reader=a.body.getReader(),this._headersCapability.resolve();const o=a.headers,{allowRangeRequests:u,suggestedLength:c}=ef({responseHeaders:o,isHttp:t.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=u,this._contentLength=c||this._contentLength,this._filename=nf(o),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new Jn("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._headersCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:af(t),done:!1})}cancel(t){this._reader?.cancel(t),this._abortController.abort()}}class km{constructor(t,e,r){this._stream=t,this._reader=null,this._loaded=0;const i=t.source;this._withCredentials=i.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!i.disableStream,this._abortController=new AbortController;const a=new Headers(t.headers);a.append("Range",`bytes=${e}-${r-1}`);const o=i.url;fetch(o,sf(a,this._withCredentials,this._abortController)).then(u=>{const c=Da(u.url);if(c!==t._responseOrigin)throw new Error(`Expected range response-origin "${c}" to match "${t._responseOrigin}".`);if(!rf(u.status))throw ri(u.status,o);this._readCapability.resolve(),this._reader=u.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._readCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,this.onProgress?.({loaded:this._loaded}),{value:af(t),done:!1})}cancel(t){this._reader?.cancel(t),this._abortController.abort()}}const jl=200,Ul=206;function Mm(f){const t=f.response;return typeof t!="string"?t:qs(t).buffer}class Om{_responseOrigin=null;constructor({url:t,httpHeaders:e,withCredentials:r}){this.url=t,this.isHttp=/^https?:/i.test(t),this.headers=tf(this.isHttp,e),this.withCredentials=r||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(t){const e=new XMLHttpRequest,r=this.currXhrId++,i=this.pendingRequests[r]={xhr:e};e.open("GET",this.url),e.withCredentials=this.withCredentials;for(const[a,o]of this.headers)e.setRequestHeader(a,o);return this.isHttp&&"begin"in t&&"end"in t?(e.setRequestHeader("Range",`bytes=${t.begin}-${t.end-1}`),i.expectedStatus=Ul):i.expectedStatus=jl,e.responseType="arraybuffer",ee(t.onError,"Expected `onError` callback to be provided."),e.onerror=()=>{t.onError(e.status)},e.onreadystatechange=this.onStateChange.bind(this,r),e.onprogress=this.onProgress.bind(this,r),i.onHeadersReceived=t.onHeadersReceived,i.onDone=t.onDone,i.onError=t.onError,i.onProgress=t.onProgress,e.send(null),r}onProgress(t,e){const r=this.pendingRequests[t];r&&r.onProgress?.(e)}onStateChange(t,e){const r=this.pendingRequests[t];if(!r)return;const i=r.xhr;if(i.readyState>=2&&r.onHeadersReceived&&(r.onHeadersReceived(),delete r.onHeadersReceived),i.readyState!==4||!(t in this.pendingRequests))return;if(delete this.pendingRequests[t],i.status===0&&this.isHttp){r.onError(i.status);return}const a=i.status||jl;if(!(a===jl&&r.expectedStatus===Ul)&&a!==r.expectedStatus){r.onError(i.status);return}const u=Mm(i);if(a===Ul){const c=i.getResponseHeader("Content-Range"),d=/bytes (\d+)-(\d+)\/(\d+)/.exec(c);d?r.onDone({begin:parseInt(d[1],10),chunk:u}):(St('Missing or invalid "Content-Range" header.'),r.onError(0))}else u?r.onDone({begin:0,chunk:u}):r.onError(i.status)}getRequestXhr(t){return this.pendingRequests[t].xhr}isPendingRequest(t){return t in this.pendingRequests}abortRequest(t){const e=this.pendingRequests[t].xhr;delete this.pendingRequests[t],e.abort()}}class Lm{constructor(t){this._source=t,this._manager=new Om(t),this._rangeChunkSize=t.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(t){const e=this._rangeRequestReaders.indexOf(t);e>=0&&this._rangeRequestReaders.splice(e,1)}getFullReader(){return ee(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new Nm(this._manager,this._source),this._fullRequestReader}getRangeReader(t,e){const r=new Dm(this._manager,t,e);return r.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(r),r}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const e of this._rangeRequestReaders.slice(0))e.cancel(t)}}class Nm{constructor(t,e){this._manager=t,this._url=e.url,this._fullRequestId=t.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._contentLength=e.length,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const t=this._fullRequestId,e=this._manager.getRequestXhr(t);this._manager._responseOrigin=Da(e.responseURL);const r=e.getAllResponseHeaders(),i=new Headers(r?r.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(u=>{const[c,...d]=u.split(": ");return[c,d.join(": ")]}):[]),{allowRangeRequests:a,suggestedLength:o}=ef({responseHeaders:i,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});a&&(this._isRangeSupported=!0),this._contentLength=o||this._contentLength,this._filename=nf(i),this._isRangeSupported&&this._manager.abortRequest(t),this._headersCapability.resolve()}_onDone(t){if(t&&(this._requests.length>0?this._requests.shift().resolve({value:t.chunk,done:!1}):this._cachedChunks.push(t.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(t){this._storedError=ri(t,this._url),this._headersCapability.reject(this._storedError);for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(t){this.onProgress?.({loaded:t.loaded,total:t.lengthComputable?t.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0,this._headersCapability.reject(t);for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class Dm{constructor(t,e,r){this._manager=t,this._url=t.url,this._requestId=t.request({begin:e,end:r,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){const t=Da(this._manager.getRequestXhr(this._requestId)?.responseURL);t!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${t}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){this.onClosed?.(this)}_onDone(t){const e=t.chunk;this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunk=e,this._done=!0;for(const r of this._requests)r.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(t){this._storedError??=ri(t,this._url);for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(t){this.isStreamingSupported||this.onProgress?.({loaded:t.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const Fm=/^[a-z][a-z0-9\-+.]+:/i;function _m(f){if(Fm.test(f))return new URL(f);const t=process.getBuiltinModule("url");return new URL(t.pathToFileURL(f))}class Bm{constructor(t){this.source=t,this.url=_m(t.url),ee(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return ee(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new zm(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const r=new jm(this,t,e);return this._rangeRequestReaders.push(r),r}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const e of this._rangeRequestReaders.slice(0))e.cancel(t)}}class zm{constructor(t){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null;const e=t.source;this._contentLength=e.length,this._loaded=0,this._filename=null,this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const r=process.getBuiltinModule("fs");r.promises.lstat(this._url).then(i=>{this._contentLength=i.size,this._setReadableStream(r.createReadStream(this._url)),this._headersCapability.resolve()},i=>{i.code==="ENOENT"&&(i=ri(0,this._url.href)),this._storedError=i,this._headersCapability.reject(i)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new Jn("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class jm{constructor(t,e,r){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const i=t.source;this._isStreamingSupported=!i.disableStream;const a=process.getBuiltinModule("fs");this._setReadableStream(a.createReadStream(this._url,{start:e,end:r-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,this.onProgress?.({loaded:this._loaded}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const $s=Symbol("INITIAL_DATA");class of{#t=Object.create(null);#e(t){return this.#t[t]||={...Promise.withResolvers(),data:$s}}get(t,e=null){if(e){const i=this.#e(t);return i.promise.then(()=>e(i.data)),null}const r=this.#t[t];if(!r||r.data===$s)throw new Error(`Requesting object that isn't resolved yet ${t}.`);return r.data}has(t){const e=this.#t[t];return!!e&&e.data!==$s}delete(t){const e=this.#t[t];return!e||e.data===$s?!1:(delete this.#t[t],!0)}resolve(t,e=null){const r=this.#e(t);r.data=e,r.resolve()}clear(){for(const t in this.#t){const{data:e}=this.#t[t];e?.bitmap?.close()}this.#t=Object.create(null)}*[Symbol.iterator](){for(const t in this.#t){const{data:e}=this.#t[t];e!==$s&&(yield[t,e])}}}const Um=1e5,Dd=30;class Ee{#t=Promise.withResolvers();#e=null;#n=!1;#r=!!globalThis.FontInspector?.enabled;#i=null;#s=null;#a=0;#o=0;#c=null;#u=null;#d=0;#l=0;#p=Object.create(null);#m=[];#f=null;#h=[];#g=new WeakMap;#w=null;static#v=new Map;static#S=new Map;static#E=new WeakMap;static#y=null;static#b=new Set;constructor({textContentSource:t,container:e,viewport:r}){if(t instanceof ReadableStream)this.#f=t;else if(typeof t=="object")this.#f=new ReadableStream({start(c){c.enqueue(t),c.close()}});else throw new Error('No "textContentSource" parameter specified.');this.#e=this.#u=e,this.#l=r.scale*vn.pixelRatio,this.#d=r.rotation,this.#s={div:null,properties:null,ctx:null};const{pageWidth:i,pageHeight:a,pageX:o,pageY:u}=r.rawDims;this.#w=[1,0,0,-1,-o,u+a],this.#o=i,this.#a=a,Ee.#T(),mr(e,r),this.#t.promise.finally(()=>{Ee.#b.delete(this),this.#s=null,this.#p=null}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:t,isFirefox:e}=fe.platform;return Tt(this,"fontFamilyMap",new Map([["sans-serif",`${t&&e?"Calibri, ":""}sans-serif`],["monospace",`${t&&e?"Lucida Console, ":""}monospace`]]))}render(){const t=()=>{this.#c.read().then(({value:e,done:r})=>{if(r){this.#t.resolve();return}this.#i??=e.lang,Object.assign(this.#p,e.styles),this.#I(e.items),t()},this.#t.reject)};return this.#c=this.#f.getReader(),Ee.#b.add(this),t(),this.#t.promise}update({viewport:t,onBefore:e=null}){const r=t.scale*vn.pixelRatio,i=t.rotation;if(i!==this.#d&&(e?.(),this.#d=i,mr(this.#u,{rotation:i})),r!==this.#l){e?.(),this.#l=r;const a={div:null,properties:null,ctx:Ee.#P(this.#i)};for(const o of this.#h)a.properties=this.#g.get(o),a.div=o,this.#k(a)}}cancel(){const t=new Jn("TextLayer task cancelled.");this.#c?.cancel(t).catch(()=>{}),this.#c=null,this.#t.reject(t)}get textDivs(){return this.#h}get textContentItemsStr(){return this.#m}#I(t){if(this.#n)return;this.#s.ctx??=Ee.#P(this.#i);const e=this.#h,r=this.#m;for(const i of t){if(e.length>Um){St("Ignoring additional textDivs for performance reasons."),this.#n=!0;return}if(i.str===void 0){if(i.type==="beginMarkedContentProps"||i.type==="beginMarkedContent"){const a=this.#e;this.#e=document.createElement("span"),this.#e.classList.add("markedContent"),i.id&&this.#e.setAttribute("id",`${i.id}`),a.append(this.#e)}else i.type==="endMarkedContent"&&(this.#e=this.#e.parentNode);continue}r.push(i.str),this.#x(i)}}#x(t){const e=document.createElement("span"),r={angle:0,canvasWidth:0,hasText:t.str!=="",hasEOL:t.hasEOL,fontSize:0};this.#h.push(e);const i=pt.transform(this.#w,t.transform);let a=Math.atan2(i[1],i[0]);const o=this.#p[t.fontName];o.vertical&&(a+=Math.PI/2);let u=this.#r&&o.fontSubstitution||o.fontFamily;u=Ee.fontFamilyMap.get(u)||u;const c=Math.hypot(i[2],i[3]),d=c*Ee.#O(u,o,this.#i);let p,g;a===0?(p=i[4],g=i[5]-d):(p=i[4]+d*Math.sin(a),g=i[5]-d*Math.cos(a));const v="calc(var(--total-scale-factor) *",w=e.style;this.#e===this.#u?(w.left=`${(100*p/this.#o).toFixed(2)}%`,w.top=`${(100*g/this.#a).toFixed(2)}%`):(w.left=`${v}${p.toFixed(2)}px)`,w.top=`${v}${g.toFixed(2)}px)`),w.fontSize=`${v}${(Ee.#y*c).toFixed(2)}px)`,w.fontFamily=u,r.fontSize=c,e.setAttribute("role","presentation"),e.textContent=t.str,e.dir=t.dir,this.#r&&(e.dataset.fontName=o.fontSubstitutionLoadedName||t.fontName),a!==0&&(r.angle=a*(180/Math.PI));let S=!1;if(t.str.length>1)S=!0;else if(t.str!==" "&&t.transform[0]!==t.transform[3]){const A=Math.abs(t.transform[0]),E=Math.abs(t.transform[3]);A!==E&&Math.max(A,E)/Math.min(A,E)>1.5&&(S=!0)}if(S&&(r.canvasWidth=o.vertical?t.height:t.width),this.#g.set(e,r),this.#s.div=e,this.#s.properties=r,this.#k(this.#s),r.hasText&&this.#e.append(e),r.hasEOL){const A=document.createElement("br");A.setAttribute("role","presentation"),this.#e.append(A)}}#k(t){const{div:e,properties:r,ctx:i}=t,{style:a}=e;let o="";if(Ee.#y>1&&(o=`scale(${1/Ee.#y})`),r.canvasWidth!==0&&r.hasText){const{fontFamily:u}=a,{canvasWidth:c,fontSize:d}=r;Ee.#R(i,d*this.#l,u);const{width:p}=i.measureText(e.textContent);p>0&&(o=`scaleX(${c*this.#l/p}) ${o}`)}r.angle!==0&&(o=`rotate(${r.angle}deg) ${o}`),o.length>0&&(a.transform=o)}static cleanup(){if(!(this.#b.size>0)){this.#v.clear();for(const{canvas:t}of this.#S.values())t.remove();this.#S.clear()}}static#P(t=null){let e=this.#S.get(t||="");if(!e){const r=document.createElement("canvas");r.className="hiddenCanvasElement",r.lang=t,document.body.append(r),e=r.getContext("2d",{alpha:!1,willReadFrequently:!0}),this.#S.set(t,e),this.#E.set(e,{size:0,family:""})}return e}static#R(t,e,r){const i=this.#E.get(t);e===i.size&&r===i.family||(t.font=`${e}px ${r}`,i.size=e,i.family=r)}static#T(){if(this.#y!==null)return;const t=document.createElement("div");t.style.opacity=0,t.style.lineHeight=1,t.style.fontSize="1px",t.style.position="absolute",t.textContent="X",document.body.append(t),this.#y=t.getBoundingClientRect().height,t.remove()}static#O(t,e,r){const i=this.#v.get(t);if(i)return i;const a=this.#P(r);a.canvas.width=a.canvas.height=Dd,this.#R(a,Dd,t);const o=a.measureText(""),u=o.fontBoundingBoxAscent,c=Math.abs(o.fontBoundingBoxDescent);a.canvas.width=a.canvas.height=0;let d=.8;return u?d=u/(u+c):(fe.platform.isFirefox&&St("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),e.ascent?d=e.ascent:e.descent&&(d=1+e.descent)),this.#v.set(t,d),d}}class Qs{static textContent(t){const e=[],r={items:e,styles:Object.create(null)};function i(a){if(!a)return;let o=null;const u=a.name;if(u==="#text")o=a.value;else if(Qs.shouldBuildText(u))a?.attributes?.textContent?o=a.attributes.textContent:a.value&&(o=a.value);else return;if(o!==null&&e.push({str:o}),!!a.children)for(const c of a.children)i(c)}return i(t),r}static shouldBuildText(t){return!(t==="textarea"||t==="input"||t==="option"||t==="select")}}const Hm=100;function lf(f={}){typeof f=="string"||f instanceof URL?f={url:f}:(f instanceof ArrayBuffer||ArrayBuffer.isView(f))&&(f={data:f});const t=new uu,{docId:e}=t,r=f.url?Jg(f.url):null,i=f.data?Zg(f.data):null,a=f.httpHeaders||null,o=f.withCredentials===!0,u=f.password??null,c=f.range instanceof uf?f.range:null,d=Number.isInteger(f.rangeChunkSize)&&f.rangeChunkSize>0?f.rangeChunkSize:2**16;let p=f.worker instanceof Js?f.worker:null;const g=f.verbosity,v=typeof f.docBaseUrl=="string"&&!Oa(f.docBaseUrl)?f.docBaseUrl:null,w=ma(f.cMapUrl),S=f.cMapPacked!==!1,A=f.CMapReaderFactory||(xe?am:xd),E=ma(f.iccUrl),x=ma(f.standardFontDataUrl),R=f.StandardFontDataFactory||(xe?om:bd),C=ma(f.wasmUrl),P=f.WasmFactory||(xe?lm:Cd),T=f.stopAtErrors!==!0,I=Number.isInteger(f.maxImageSize)&&f.maxImageSize>-1?f.maxImageSize:-1,M=f.isEvalSupported!==!1,_=typeof f.isOffscreenCanvasSupported=="boolean"?f.isOffscreenCanvasSupported:!xe,F=typeof f.isImageDecoderSupported=="boolean"?f.isImageDecoderSupported:!xe&&(fe.platform.isFirefox||!globalThis.chrome),U=Number.isInteger(f.canvasMaxAreaInBytes)?f.canvasMaxAreaInBytes:-1,W=typeof f.disableFontFace=="boolean"?f.disableFontFace:xe,q=f.fontExtraProperties===!0,J=f.enableXfa===!0,rt=f.ownerDocument||globalThis.document,gt=f.disableRange===!0,X=f.disableStream===!0,$=f.disableAutoFetch===!0,V=f.pdfBug===!0,nt=f.CanvasFactory||(xe?im:nm),tt=f.FilterFactory||(xe?sm:rm),L=f.enableHWA===!0,j=f.useWasm!==!1,st=c?c.length:f.length??NaN,ct=typeof f.useSystemFonts=="boolean"?f.useSystemFonts:!xe&&!W,wt=typeof f.useWorkerFetch=="boolean"?f.useWorkerFetch:!!(A===xd&&R===bd&&P===Cd&&w&&x&&C&&Gs(w,document.baseURI)&&Gs(x,document.baseURI)&&Gs(C,document.baseURI)),G=null;Ig(g);const H={canvasFactory:new nt({ownerDocument:rt,enableHWA:L}),filterFactory:new tt({docId:e,ownerDocument:rt}),cMapReaderFactory:wt?null:new A({baseUrl:w,isCompressed:S}),standardFontDataFactory:wt?null:new R({baseUrl:x}),wasmFactory:wt?null:new P({baseUrl:C})};p||(p=Js.create({verbosity:g,port:qr.workerPort}),t._worker=p);const Y={docId:e,apiVersion:"5.4.54",data:i,password:u,disableAutoFetch:$,rangeChunkSize:d,length:st,docBaseUrl:v,enableXfa:J,evaluatorOptions:{maxImageSize:I,disableFontFace:W,ignoreErrors:T,isEvalSupported:M,isOffscreenCanvasSupported:_,isImageDecoderSupported:F,canvasMaxAreaInBytes:U,fontExtraProperties:q,useSystemFonts:ct,useWasm:j,useWorkerFetch:wt,cMapUrl:w,iccUrl:E,standardFontDataUrl:x,wasmUrl:C}},at={ownerDocument:rt,pdfBug:V,styleElement:G,loadingParams:{disableAutoFetch:$,enableXfa:J}};return p.promise.then(function(){if(t.destroyed)throw new Error("Loading aborted");if(p.destroyed)throw new Error("Worker was destroyed");const bt=p.messageHandler.sendWithPromise("GetDocRequest",Y,i?[i.buffer]:null);let ft;if(c)ft=new bm(c,{disableRange:gt,disableStream:X});else if(!i){if(!r)throw new Error("getDocument - no `url` parameter provided.");const Ot=Gs(r)?Pm:xe?Bm:Lm;ft=new Ot({url:r,length:st,httpHeaders:a,withCredentials:o,rangeChunkSize:d,disableRange:gt,disableStream:X})}return bt.then(Ot=>{if(t.destroyed)throw new Error("Loading aborted");if(p.destroyed)throw new Error("Worker was destroyed");const Mt=new Xs(e,Ot,p.port),pe=new Wm(Mt,t,ft,at,H,L);t._transport=pe,Mt.send("Ready",null)})}).catch(t._capability.reject),t}class uu{static#t=0;_capability=Promise.withResolvers();_transport=null;_worker=null;docId=`d${uu.#t++}`;destroyed=!1;onPassword=null;onProgress=null;get promise(){return this._capability.promise}async destroy(){this.destroyed=!0;try{this._worker?.port&&(this._worker._pendingDestroy=!0),await this._transport?.destroy()}catch(t){throw this._worker?.port&&delete this._worker._pendingDestroy,t}this._transport=null,this._worker?.destroy(),this._worker=null}async getData(){return this._transport.getData()}}class uf{#t=Promise.withResolvers();#e=[];#n=[];#r=[];#i=[];constructor(t,e,r=!1,i=null){this.length=t,this.initialData=e,this.progressiveDone=r,this.contentDispositionFilename=i}addRangeListener(t){this.#i.push(t)}addProgressListener(t){this.#r.push(t)}addProgressiveReadListener(t){this.#n.push(t)}addProgressiveDoneListener(t){this.#e.push(t)}onDataRange(t,e){for(const r of this.#i)r(t,e)}onDataProgress(t,e){this.#t.promise.then(()=>{for(const r of this.#r)r(t,e)})}onDataProgressiveRead(t){this.#t.promise.then(()=>{for(const e of this.#n)e(t)})}onDataProgressiveDone(){this.#t.promise.then(()=>{for(const t of this.#e)t()})}transportReady(){this.#t.resolve()}requestDataRange(t,e){Nt("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}class $m{constructor(t,e){this._pdfInfo=t,this._transport=e}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return Tt(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(t){return this._transport.getPage(t)}getPageIndex(t){return this._transport.getPageIndex(t)}getDestinations(){return this._transport.getDestinations()}getDestination(t){return this._transport.getDestination(t)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getOptionalContentConfig(e)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(t=!1){return this._transport.startCleanup(t||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(t){return this._transport.cachedPageNumber(t)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}class Vm{#t=!1;constructor(t,e,r,i=!1){this._pageIndex=t,this._pageInfo=e,this._transport=r,this._stats=i?new Ad:null,this._pdfBug=i,this.commonObjs=r.commonObjs,this.objs=new of,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:t,rotation:e=this.rotate,offsetX:r=0,offsetY:i=0,dontFlip:a=!1}={}){return new ei({viewBox:this.view,userUnit:this.userUnit,scale:t,rotation:e,offsetX:r,offsetY:i,dontFlip:a})}getAnnotations({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getAnnotations(this._pageIndex,e)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return Tt(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){return this._transport._htmlForXfa?.children[this._pageIndex]||null}render({canvasContext:t,canvas:e=t.canvas,viewport:r,intent:i="display",annotationMode:a=Kn.ENABLE,transform:o=null,background:u=null,optionalContentConfigPromise:c=null,annotationCanvasMap:d=null,pageColors:p=null,printAnnotationStorage:g=null,isEditing:v=!1}){this._stats?.time("Overall");const w=this._transport.getRenderingIntent(i,a,g,v),{renderingIntent:S,cacheKey:A}=w;this.#t=!1,c||=this._transport.getOptionalContentConfig(S);let E=this._intentStates.get(A);E||(E=Object.create(null),this._intentStates.set(A,E)),E.streamReaderCancelTimeout&&(clearTimeout(E.streamReaderCancelTimeout),E.streamReaderCancelTimeout=null);const x=!!(S&ze.PRINT);E.displayReadyCapability||(E.displayReadyCapability=Promise.withResolvers(),E.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(w));const R=T=>{E.renderTasks.delete(C),x&&(this.#t=!0),this.#e(),T?(C.capability.reject(T),this._abortOperatorList({intentState:E,reason:T instanceof Error?T:new Error(T)})):C.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),globalThis.Stats?.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},C=new Jr({callback:R,params:{canvas:e,canvasContext:t,viewport:r,transform:o,background:u},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:d,operatorList:E.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!x,pdfBug:this._pdfBug,pageColors:p,enableHWA:this._transport.enableHWA});(E.renderTasks||=new Set).add(C);const P=C.task;return Promise.all([E.displayReadyCapability.promise,c]).then(([T,I])=>{if(this.destroyed){R();return}if(this._stats?.time("Rendering"),!(I.renderingIntent&S))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");C.initializeGraphics({transparency:T,optionalContentConfig:I}),C.operatorListChanged()}).catch(R),P}getOperatorList({intent:t="display",annotationMode:e=Kn.ENABLE,printAnnotationStorage:r=null,isEditing:i=!1}={}){function a(){u.operatorList.lastChunk&&(u.opListReadCapability.resolve(u.operatorList),u.renderTasks.delete(c))}const o=this._transport.getRenderingIntent(t,e,r,i,!0);let u=this._intentStates.get(o.cacheKey);u||(u=Object.create(null),this._intentStates.set(o.cacheKey,u));let c;return u.opListReadCapability||(c=Object.create(null),c.operatorListChanged=a,u.opListReadCapability=Promise.withResolvers(),(u.renderTasks||=new Set).add(c),u.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(o)),u.opListReadCapability.promise}streamTextContent({includeMarkedContent:t=!1,disableNormalization:e=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:t===!0,disableNormalization:e===!0},{highWaterMark:100,size(i){return i.items.length}})}getTextContent(t={}){if(this._transport._htmlForXfa)return this.getXfa().then(r=>Qs.textContent(r));const e=this.streamTextContent(t);return new Promise(function(r,i){function a(){o.read().then(function({value:c,done:d}){if(d){r(u);return}u.lang??=c.lang,Object.assign(u.styles,c.styles),u.items.push(...c.items),a()},i)}const o=e.getReader(),u={items:[],styles:Object.create(null),lang:null};a()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const t=[];for(const e of this._intentStates.values())if(this._abortOperatorList({intentState:e,reason:new Error("Page was destroyed."),force:!0}),!e.opListReadCapability)for(const r of e.renderTasks)t.push(r.completed),r.cancel();return this.objs.clear(),this.#t=!1,Promise.all(t)}cleanup(t=!1){this.#t=!0;const e=this.#e();return t&&e&&(this._stats&&=new Ad),e}#e(){if(!this.#t||this.destroyed)return!1;for(const{renderTasks:t,operatorList:e}of this._intentStates.values())if(t.size>0||!e.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),this.#t=!1,!0}_startRenderPage(t,e){const r=this._intentStates.get(e);r&&(this._stats?.timeEnd("Page Request"),r.displayReadyCapability?.resolve(t))}_renderPageChunk(t,e){for(let r=0,i=t.length;r<i;r++)e.operatorList.fnArray.push(t.fnArray[r]),e.operatorList.argsArray.push(t.argsArray[r]);e.operatorList.lastChunk=t.lastChunk,e.operatorList.separateAnnots=t.separateAnnots;for(const r of e.renderTasks)r.operatorListChanged();t.lastChunk&&this.#e()}_pumpOperatorList({renderingIntent:t,cacheKey:e,annotationStorageSerializable:r,modifiedIds:i}){const{map:a,transfer:o}=r,c=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:t,cacheKey:e,annotationStorage:a,modifiedIds:i},o).getReader(),d=this._intentStates.get(e);d.streamReader=c;const p=()=>{c.read().then(({value:g,done:v})=>{if(v){d.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(g,d),p())},g=>{if(d.streamReader=null,!this._transport.destroyed){if(d.operatorList){d.operatorList.lastChunk=!0;for(const v of d.renderTasks)v.operatorListChanged();this.#e()}if(d.displayReadyCapability)d.displayReadyCapability.reject(g);else if(d.opListReadCapability)d.opListReadCapability.reject(g);else throw g}})};p()}_abortOperatorList({intentState:t,reason:e,force:r=!1}){if(t.streamReader){if(t.streamReaderCancelTimeout&&(clearTimeout(t.streamReaderCancelTimeout),t.streamReaderCancelTimeout=null),!r){if(t.renderTasks.size>0)return;if(e instanceof eu){let i=Hm;e.extraDelay>0&&e.extraDelay<1e3&&(i+=e.extraDelay),t.streamReaderCancelTimeout=setTimeout(()=>{t.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:t,reason:e,force:!0})},i);return}}if(t.streamReader.cancel(new Jn(e.message)).catch(()=>{}),t.streamReader=null,!this._transport.destroyed){for(const[i,a]of this._intentStates)if(a===t){this._intentStates.delete(i);break}this.cleanup()}}}get stats(){return this._stats}}var Qn,rn,Pn,fr,Pa,pr,gr,Ce,xa,cf,hf,Ys,ts,ba;const Ut=class Ut{constructor({name:t=null,port:e=null,verbosity:r=kg()}={}){hn(this,Ce);hn(this,Qn,Promise.withResolvers());hn(this,rn,null);hn(this,Pn,null);hn(this,fr,null);if(this.name=t,this.destroyed=!1,this.verbosity=r,e){if(jt(Ut,gr).has(e))throw new Error("Cannot use more than one PDFWorker per port.");jt(Ut,gr).set(e,this),dn(this,Ce,cf).call(this,e)}else dn(this,Ce,hf).call(this)}get promise(){return jt(this,Qn).promise}get port(){return jt(this,Pn)}get messageHandler(){return jt(this,rn)}destroy(){this.destroyed=!0,jt(this,fr)?.terminate(),Me(this,fr,null),jt(Ut,gr).delete(jt(this,Pn)),Me(this,Pn,null),jt(this,rn)?.destroy(),Me(this,rn,null)}static create(t){const e=jt(this,gr).get(t?.port);if(e){if(e._pendingDestroy)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return e}return new Ut(t)}static get workerSrc(){if(qr.workerSrc)return qr.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return Tt(this,"_setupFakeWorkerGlobal",(async()=>jt(this,ts,ba)?jt(this,ts,ba):(await import(this.workerSrc)).WorkerMessageHandler)())}};Qn=new WeakMap,rn=new WeakMap,Pn=new WeakMap,fr=new WeakMap,Pa=new WeakMap,pr=new WeakMap,gr=new WeakMap,Ce=new WeakSet,xa=function(){jt(this,Qn).resolve(),jt(this,rn).send("configure",{verbosity:this.verbosity})},cf=function(t){Me(this,Pn,t),Me(this,rn,new Xs("main","worker",t)),jt(this,rn).on("ready",()=>{}),dn(this,Ce,xa).call(this)},hf=function(){if(jt(Ut,pr)||jt(Ut,ts,ba)){dn(this,Ce,Ys).call(this);return}let{workerSrc:t}=Ut;try{Ut._isSameOrigin(window.location,t)||(t=Ut._createCDNWrapper(new URL(t,window.location).href));const e=new Worker(t,{type:"module"}),r=new Xs("main","worker",e),i=()=>{a.abort(),r.destroy(),e.terminate(),this.destroyed?jt(this,Qn).reject(new Error("Worker was destroyed")):dn(this,Ce,Ys).call(this)},a=new AbortController;e.addEventListener("error",()=>{jt(this,fr)||i()},{signal:a.signal}),r.on("test",u=>{if(a.abort(),this.destroyed||!u){i();return}Me(this,rn,r),Me(this,Pn,e),Me(this,fr,e),dn(this,Ce,xa).call(this)}),r.on("ready",u=>{if(a.abort(),this.destroyed){i();return}try{o()}catch{dn(this,Ce,Ys).call(this)}});const o=()=>{const u=new Uint8Array;r.send("test",u,[u.buffer])};o();return}catch{Ma("The worker has been disabled.")}dn(this,Ce,Ys).call(this)},Ys=function(){jt(Ut,pr)||(St("Setting up fake worker."),Me(Ut,pr,!0)),Ut._setupFakeWorkerGlobal.then(t=>{if(this.destroyed){jt(this,Qn).reject(new Error("Worker was destroyed"));return}const e=new em;Me(this,Pn,e);const r=`fake${od(Ut,Pa)._++}`,i=new Xs(r+"_worker",r,e);t.setup(i,e),Me(this,rn,new Xs(r,r+"_worker",e)),dn(this,Ce,xa).call(this)}).catch(t=>{jt(this,Qn).reject(new Error(`Setting up fake worker failed: "${t.message}".`))})},ts=new WeakSet,ba=function(){try{return globalThis.pdfjsWorker?.WorkerMessageHandler||null}catch{return null}},hn(Ut,ts),hn(Ut,Pa,0),hn(Ut,pr,!1),hn(Ut,gr,new WeakMap),xe&&(Me(Ut,pr,!0),qr.workerSrc||="./pdf.worker.mjs"),Ut._isSameOrigin=(t,e)=>{const r=URL.parse(t);if(!r?.origin||r.origin==="null")return!1;const i=new URL(e,r);return r.origin===i.origin},Ut._createCDNWrapper=t=>{const e=`await import("${t}");`;return URL.createObjectURL(new Blob([e],{type:"text/javascript"}))},Ut.fromPort=t=>{if(Hg("`PDFWorker.fromPort` - please use `PDFWorker.create` instead."),!t?.port)throw new Error("PDFWorker.fromPort - invalid method signature.");return Ut.create(t)};let Js=Ut;class Wm{#t=new Map;#e=new Map;#n=new Map;#r=new Map;#i=null;constructor(t,e,r,i,a,o){this.messageHandler=t,this.loadingTask=e,this.commonObjs=new of,this.fontLoader=new Kg({ownerDocument:i.ownerDocument,styleElement:i.styleElement}),this.loadingParams=i.loadingParams,this._params=i,this.canvasFactory=a.canvasFactory,this.filterFactory=a.filterFactory,this.cMapReaderFactory=a.cMapReaderFactory,this.standardFontDataFactory=a.standardFontDataFactory,this.wasmFactory=a.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=r,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.enableHWA=o,this.setupMessageHandler()}#s(t,e=null){const r=this.#t.get(t);if(r)return r;const i=this.messageHandler.sendWithPromise(t,e);return this.#t.set(t,i),i}get annotationStorage(){return Tt(this,"annotationStorage",new iu)}getRenderingIntent(t,e=Kn.ENABLE,r=null,i=!1,a=!1){let o=ze.DISPLAY,u=Gl;switch(t){case"any":o=ze.ANY;break;case"display":break;case"print":o=ze.PRINT;break;default:St(`getRenderingIntent - invalid intent: ${t}`)}const c=o&ze.PRINT&&r instanceof Yd?r:this.annotationStorage;switch(e){case Kn.DISABLE:o+=ze.ANNOTATIONS_DISABLE;break;case Kn.ENABLE:break;case Kn.ENABLE_FORMS:o+=ze.ANNOTATIONS_FORMS;break;case Kn.ENABLE_STORAGE:o+=ze.ANNOTATIONS_STORAGE,u=c.serializable;break;default:St(`getRenderingIntent - invalid annotationMode: ${e}`)}i&&(o+=ze.IS_EDITING),a&&(o+=ze.OPLIST);const{ids:d,hash:p}=c.modifiedIds,g=[o,u.hash,p];return{renderingIntent:o,cacheKey:g.join("_"),annotationStorageSerializable:u,modifiedIds:d}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),this.#i?.reject(new Error("Worker was destroyed during onPassword callback"));const t=[];for(const r of this.#e.values())t.push(r._destroy());this.#e.clear(),this.#n.clear(),this.#r.clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const e=this.messageHandler.sendWithPromise("Terminate",null);return t.push(e),Promise.all(t).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),this.#t.clear(),this.filterFactory.destroy(),Ee.cleanup(),this._networkStream?.cancelAllRequests(new Jn("Worker was terminated.")),this.messageHandler?.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:t,loadingTask:e}=this;t.on("GetReader",(r,i)=>{ee(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=a=>{this._lastProgress={loaded:a.loaded,total:a.total}},i.onPull=()=>{this._fullReader.read().then(function({value:a,done:o}){if(o){i.close();return}ee(a instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),i.enqueue(new Uint8Array(a),1,[a])}).catch(a=>{i.error(a)})},i.onCancel=a=>{this._fullReader.cancel(a),i.ready.catch(o=>{if(!this.destroyed)throw o})}}),t.on("ReaderHeadersReady",async r=>{await this._fullReader.headersReady;const{isStreamingSupported:i,isRangeSupported:a,contentLength:o}=this._fullReader;return(!i||!a)&&(this._lastProgress&&e.onProgress?.(this._lastProgress),this._fullReader.onProgress=u=>{e.onProgress?.({loaded:u.loaded,total:u.total})}),{isStreamingSupported:i,isRangeSupported:a,contentLength:o}}),t.on("GetRangeReader",(r,i)=>{ee(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const a=this._networkStream.getRangeReader(r.begin,r.end);if(!a){i.close();return}i.onPull=()=>{a.read().then(function({value:o,done:u}){if(u){i.close();return}ee(o instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),i.enqueue(new Uint8Array(o),1,[o])}).catch(o=>{i.error(o)})},i.onCancel=o=>{a.cancel(o),i.ready.catch(u=>{if(!this.destroyed)throw u})}}),t.on("GetDoc",({pdfInfo:r})=>{this._numPages=r.numPages,this._htmlForXfa=r.htmlForXfa,delete r.htmlForXfa,e._capability.resolve(new $m(r,this))}),t.on("DocException",r=>{e._capability.reject(Le(r))}),t.on("PasswordRequest",r=>{this.#i=Promise.withResolvers();try{if(!e.onPassword)throw Le(r);const i=a=>{a instanceof Error?this.#i.reject(a):this.#i.resolve({password:a})};e.onPassword(i,r.code)}catch(i){this.#i.reject(i)}return this.#i.promise}),t.on("DataLoaded",r=>{e.onProgress?.({loaded:r.length,total:r.length}),this.downloadInfoCapability.resolve(r)}),t.on("StartRenderPage",r=>{if(this.destroyed)return;this.#e.get(r.pageIndex)._startRenderPage(r.transparency,r.cacheKey)}),t.on("commonobj",([r,i,a])=>{if(this.destroyed||this.commonObjs.has(r))return null;switch(i){case"Font":if("error"in a){const d=a.error;St(`Error during font loading: ${d}`),this.commonObjs.resolve(r,d);break}const o=this._params.pdfBug&&globalThis.FontInspector?.enabled?(d,p)=>globalThis.FontInspector.fontAdded(d,p):null,u=new Qg(a,o);this.fontLoader.bind(u).catch(()=>t.sendWithPromise("FontFallback",{id:r})).finally(()=>{!u.fontExtraProperties&&u.data&&(u.data=null),this.commonObjs.resolve(r,u)});break;case"CopyLocalImage":const{imageRef:c}=a;ee(c,"The imageRef must be defined.");for(const d of this.#e.values())for(const[,p]of d.objs)if(p?.ref===c)return p.dataLen?(this.commonObjs.resolve(r,structuredClone(p)),p.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(r,a);break;default:throw new Error(`Got unknown common object type ${i}`)}return null}),t.on("obj",([r,i,a,o])=>{if(this.destroyed)return;const u=this.#e.get(i);if(!u.objs.has(r)){if(u._intentStates.size===0){o?.bitmap?.close();return}switch(a){case"Image":case"Pattern":u.objs.resolve(r,o);break;default:throw new Error(`Got unknown object type ${a}`)}}}),t.on("DocProgress",r=>{this.destroyed||e.onProgress?.({loaded:r.loaded,total:r.total})}),t.on("FetchBinaryData",async r=>{if(this.destroyed)throw new Error("Worker was destroyed.");const i=this[r.type];if(!i)throw new Error(`${r.type} not initialized, see the \`useWorkerFetch\` parameter.`);return i.fetch(r)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){this.annotationStorage.size<=0&&St("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:t,transfer:e}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:t,filename:this._fullReader?.filename??null},e).finally(()=>{this.annotationStorage.resetModified()})}getPage(t){if(!Number.isInteger(t)||t<=0||t>this._numPages)return Promise.reject(new Error("Invalid page request."));const e=t-1,r=this.#n.get(e);if(r)return r;const i=this.messageHandler.sendWithPromise("GetPage",{pageIndex:e}).then(a=>{if(this.destroyed)throw new Error("Transport destroyed");a.refStr&&this.#r.set(a.refStr,t);const o=new Vm(e,a,this,this._params.pdfBug);return this.#e.set(e,o),o});return this.#n.set(e,i),i}getPageIndex(t){return Xl(t)?this.messageHandler.sendWithPromise("GetPageIndex",{num:t.num,gen:t.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(t,e){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:t,intent:e})}getFieldObjects(){return this.#s("GetFieldObjects")}hasJSActions(){return this.#s("HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(t){return typeof t!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:t})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return this.#s("GetDocJSActions")}getPageJSActions(t){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:t})}getStructTree(t){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:t})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(t){return this.#s("GetOptionalContentConfig").then(e=>new xm(e,t))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const t="GetMetadata",e=this.#t.get(t);if(e)return e;const r=this.messageHandler.sendWithPromise(t,null).then(i=>({info:i[0],metadata:i[1]?new Sm(i[1]):null,contentDispositionFilename:this._fullReader?.filename??null,contentLength:this._fullReader?.contentLength??null}));return this.#t.set(t,r),r}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(t=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const e of this.#e.values())if(!e.cleanup())throw new Error(`startCleanup: Page ${e.pageNumber} is currently rendering.`);this.commonObjs.clear(),t||this.fontLoader.clear(),this.#t.clear(),this.filterFactory.destroy(!0),Ee.cleanup()}}cachedPageNumber(t){if(!Xl(t))return null;const e=t.gen===0?`${t.num}R`:`${t.num}R${t.gen}`;return this.#r.get(e)??null}}class Gm{#t=null;onContinue=null;onError=null;constructor(t){this.#t=t}get promise(){return this.#t.capability.promise}cancel(t=0){this.#t.cancel(null,t)}get separateAnnots(){const{separateAnnots:t}=this.#t.operatorList;if(!t)return!1;const{annotationCanvasMap:e}=this.#t;return t.form||t.canvas&&e?.size>0}}class Jr{#t=null;static#e=new WeakSet;constructor({callback:t,params:e,objs:r,commonObjs:i,annotationCanvasMap:a,operatorList:o,pageIndex:u,canvasFactory:c,filterFactory:d,useRequestAnimationFrame:p=!1,pdfBug:g=!1,pageColors:v=null,enableHWA:w=!1}){this.callback=t,this.params=e,this.objs=r,this.commonObjs=i,this.annotationCanvasMap=a,this.operatorListIdx=null,this.operatorList=o,this._pageIndex=u,this.canvasFactory=c,this.filterFactory=d,this._pdfBug=g,this.pageColors=v,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=p===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new Gm(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=e.canvas,this._canvasContext=e.canvas?null:e.canvasContext,this._enableHWA=w}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:t=!1,optionalContentConfig:e}){if(this.cancelled)return;if(this._canvas){if(Jr.#e.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");Jr.#e.add(this._canvas)}this._pdfBug&&globalThis.StepperManager?.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{viewport:r,transform:i,background:a}=this.params,o=this._canvasContext||this._canvas.getContext("2d",{alpha:!1,willReadFrequently:!this._enableHWA});this.gfx=new Zr(o,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:e},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:i,viewport:r,transparency:t,background:a}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback?.()}cancel(t=null,e=0){this.running=!1,this.cancelled=!0,this.gfx?.endDrawing(),this.#t&&(window.cancelAnimationFrame(this.#t),this.#t=null),Jr.#e.delete(this._canvas),t||=new eu(`Rendering cancelled, page ${this._pageIndex+1}`,e),this.callback(t),this.task.onError?.(t)}operatorListChanged(){if(!this.graphicsReady){this.graphicsReadyCallback||=this._continueBound;return}this.stepper?.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?this.#t=window.requestAnimationFrame(()=>{this.#t=null,this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),Jr.#e.delete(this._canvas),this.callback())))}}const df="5.4.54",Xm="295fb3ec4";class Ye{#t=null;#e=null;#n;#r=null;#i=!1;#s=!1;#a=null;#o;#c=null;#u=null;static#d=null;static get _keyboardManager(){return Tt(this,"_keyboardManager",new ni([[["Escape","mac+Escape"],Ye.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],Ye.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],Ye.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],Ye.prototype._moveToPrevious],[["Home","mac+Home"],Ye.prototype._moveToBeginning],[["End","mac+End"],Ye.prototype._moveToEnd]]))}constructor({editor:t=null,uiManager:e=null}){t?(this.#s=!1,this.#a=t):this.#s=!0,this.#u=t?._uiManager||e,this.#o=this.#u._eventBus,this.#n=t?.color?.toUpperCase()||this.#u?.highlightColors.values().next().value||"#FFFF98",Ye.#d||=Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"})}renderButton(){const t=this.#t=document.createElement("button");t.className="colorPicker",t.tabIndex="0",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),t.ariaHasPopup="true",this.#a&&(t.ariaControls=`${this.#a.id}_colorpicker_dropdown`);const e=this.#u._signal;t.addEventListener("click",this.#f.bind(this),{signal:e}),t.addEventListener("keydown",this.#m.bind(this),{signal:e});const r=this.#e=document.createElement("span");return r.className="swatch",r.ariaHidden="true",r.style.backgroundColor=this.#n,t.append(r),t}renderMainDropdown(){const t=this.#r=this.#l();return t.ariaOrientation="horizontal",t.ariaLabelledBy="highlightColorPickerLabel",t}#l(){const t=document.createElement("div"),e=this.#u._signal;t.addEventListener("contextmenu",Ke,{signal:e}),t.className="dropdown",t.role="listbox",t.ariaMultiSelectable="false",t.ariaOrientation="vertical",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown"),this.#a&&(t.id=`${this.#a.id}_colorpicker_dropdown`);for(const[r,i]of this.#u.highlightColors){const a=document.createElement("button");a.tabIndex="0",a.role="option",a.setAttribute("data-color",i),a.title=r,a.setAttribute("data-l10n-id",Ye.#d[r]);const o=document.createElement("span");a.append(o),o.className="swatch",o.style.backgroundColor=i,a.ariaSelected=i===this.#n,a.addEventListener("click",this.#p.bind(this,i),{signal:e}),t.append(a)}return t.addEventListener("keydown",this.#m.bind(this),{signal:e}),t}#p(t,e){e.stopPropagation(),this.#o.dispatch("switchannotationeditorparams",{source:this,type:Rt.HIGHLIGHT_COLOR,value:t}),this.updateColor(t)}_colorSelectFromKeyboard(t){if(t.target===this.#t){this.#f(t);return}const e=t.target.getAttribute("data-color");e&&this.#p(e,t)}_moveToNext(t){if(!this.#g){this.#f(t);return}if(t.target===this.#t){this.#r.firstChild?.focus();return}t.target.nextSibling?.focus()}_moveToPrevious(t){if(t.target===this.#r?.firstChild||t.target===this.#t){this.#g&&this._hideDropdownFromKeyboard();return}this.#g||this.#f(t),t.target.previousSibling?.focus()}_moveToBeginning(t){if(!this.#g){this.#f(t);return}this.#r.firstChild?.focus()}_moveToEnd(t){if(!this.#g){this.#f(t);return}this.#r.lastChild?.focus()}#m(t){Ye._keyboardManager.exec(this,t)}#f(t){if(this.#g){this.hideDropdown();return}if(this.#i=t.detail===0,this.#c||(this.#c=new AbortController,window.addEventListener("pointerdown",this.#h.bind(this),{signal:this.#u.combinedSignal(this.#c)})),this.#t.ariaExpanded="true",this.#r){this.#r.classList.remove("hidden");return}const e=this.#r=this.#l();this.#t.append(e)}#h(t){this.#r?.contains(t.target)||this.hideDropdown()}hideDropdown(){this.#r?.classList.add("hidden"),this.#t.ariaExpanded="false",this.#c?.abort(),this.#c=null}get#g(){return this.#r&&!this.#r.classList.contains("hidden")}_hideDropdownFromKeyboard(){if(!this.#s){if(!this.#g){this.#a?.unselect();return}this.hideDropdown(),this.#t.focus({preventScroll:!0,focusVisible:this.#i})}}updateColor(t){if(this.#e&&(this.#e.style.backgroundColor=t),!this.#r)return;const e=this.#u.highlightColors.values();for(const r of this.#r.children)r.ariaSelected=e.next().value===t.toUpperCase()}destroy(){this.#t?.remove(),this.#t=null,this.#e=null,this.#r?.remove(),this.#r=null}}class Zs{#t=null;#e=null;#n=null;static#r=null;constructor(t){this.#e=t,this.#n=t._uiManager,Zs.#r||=Object.freeze({freetext:"pdfjs-editor-color-picker-free-text-input",ink:"pdfjs-editor-color-picker-ink-input"})}renderButton(){if(this.#t)return this.#t;const{editorType:t,colorType:e,colorValue:r}=this.#e,i=this.#t=document.createElement("input");return i.type="color",i.value=r||"#000000",i.className="basicColorPicker",i.tabIndex=0,i.setAttribute("data-l10n-id",Zs.#r[t]),i.addEventListener("input",()=>{this.#n.updateParams(e,i.value)},{signal:this.#n._signal}),i}update(t){this.#t&&(this.#t.value=t)}destroy(){this.#t?.remove(),this.#t=null}hideDropdown(){}}Pt(531);function Fd(f){return Math.floor(Math.max(0,Math.min(1,f))*255).toString(16).padStart(2,"0")}function Vs(f){return Math.max(0,Math.min(255,255*f))}class _d{static CMYK_G([t,e,r,i]){return["G",1-Math.min(1,.3*t+.59*r+.11*e+i)]}static G_CMYK([t]){return["CMYK",0,0,0,1-t]}static G_RGB([t]){return["RGB",t,t,t]}static G_rgb([t]){return t=Vs(t),[t,t,t]}static G_HTML([t]){const e=Fd(t);return`#${e}${e}${e}`}static RGB_G([t,e,r]){return["G",.3*t+.59*e+.11*r]}static RGB_rgb(t){return t.map(Vs)}static RGB_HTML(t){return`#${t.map(Fd).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([t,e,r,i]){return["RGB",1-Math.min(1,t+i),1-Math.min(1,r+i),1-Math.min(1,e+i)]}static CMYK_rgb([t,e,r,i]){return[Vs(1-Math.min(1,t+i)),Vs(1-Math.min(1,r+i)),Vs(1-Math.min(1,e+i))]}static CMYK_HTML(t){const e=this.CMYK_RGB(t).slice(1);return this.RGB_HTML(e)}static RGB_CMYK([t,e,r]){const i=1-t,a=1-e,o=1-r,u=Math.min(i,a,o);return["CMYK",i,a,o,u]}}class Ym{create(t,e,r=!1){if(t<=0||e<=0)throw new Error("Invalid SVG dimensions");const i=this._createSVG("svg:svg");return i.setAttribute("version","1.1"),r||(i.setAttribute("width",`${t}px`),i.setAttribute("height",`${e}px`)),i.setAttribute("preserveAspectRatio","none"),i.setAttribute("viewBox",`0 0 ${t} ${e}`),i}createElement(t){if(typeof t!="string")throw new Error("Invalid SVG element type");return this._createSVG(t)}_createSVG(t){Nt("Abstract method `_createSVG` called.")}}class Ra extends Ym{_createSVG(t){return document.createElementNS(Tn,t)}}class ff{static setupStorage(t,e,r,i,a){const o=i.getValue(e,{value:null});switch(r.name){case"textarea":if(o.value!==null&&(t.textContent=o.value),a==="print")break;t.addEventListener("input",u=>{i.setValue(e,{value:u.target.value})});break;case"input":if(r.attributes.type==="radio"||r.attributes.type==="checkbox"){if(o.value===r.attributes.xfaOn?t.setAttribute("checked",!0):o.value===r.attributes.xfaOff&&t.removeAttribute("checked"),a==="print")break;t.addEventListener("change",u=>{i.setValue(e,{value:u.target.checked?u.target.getAttribute("xfaOn"):u.target.getAttribute("xfaOff")})})}else{if(o.value!==null&&t.setAttribute("value",o.value),a==="print")break;t.addEventListener("input",u=>{i.setValue(e,{value:u.target.value})})}break;case"select":if(o.value!==null){t.setAttribute("value",o.value);for(const u of r.children)u.attributes.value===o.value?u.attributes.selected=!0:u.attributes.hasOwnProperty("selected")&&delete u.attributes.selected}t.addEventListener("input",u=>{const c=u.target.options,d=c.selectedIndex===-1?"":c[c.selectedIndex].value;i.setValue(e,{value:d})});break}}static setAttributes({html:t,element:e,storage:r=null,intent:i,linkService:a}){const{attributes:o}=e,u=t instanceof HTMLAnchorElement;o.type==="radio"&&(o.name=`${o.name}-${i}`);for(const[c,d]of Object.entries(o))if(d!=null)switch(c){case"class":d.length&&t.setAttribute(c,d.join(" "));break;case"dataId":break;case"id":t.setAttribute("data-element-id",d);break;case"style":Object.assign(t.style,d);break;case"textContent":t.textContent=d;break;default:(!u||c!=="href"&&c!=="newWindow")&&t.setAttribute(c,d)}u&&a.addLinkAttributes(t,o.href,o.newWindow),r&&o.dataId&&this.setupStorage(t,o.dataId,e,r)}static render(t){const e=t.annotationStorage,r=t.linkService,i=t.xfaHtml,a=t.intent||"display",o=document.createElement(i.name);i.attributes&&this.setAttributes({html:o,element:i,intent:a,linkService:r});const u=a!=="richText",c=t.div;if(c.append(o),t.viewport){const g=`matrix(${t.viewport.transform.join(",")})`;c.style.transform=g}u&&c.setAttribute("class","xfaLayer xfaFont");const d=[];if(i.children.length===0){if(i.value){const g=document.createTextNode(i.value);o.append(g),u&&Qs.shouldBuildText(i.name)&&d.push(g)}return{textDivs:d}}const p=[[i,-1,o]];for(;p.length>0;){const[g,v,w]=p.at(-1);if(v+1===g.children.length){p.pop();continue}const S=g.children[++p.at(-1)[1]];if(S===null)continue;const{name:A}=S;if(A==="#text"){const x=document.createTextNode(S.value);d.push(x),w.append(x);continue}const E=S?.attributes?.xmlns?document.createElementNS(S.attributes.xmlns,A):document.createElement(A);if(w.append(E),S.attributes&&this.setAttributes({html:E,element:S,storage:e,intent:a,linkService:r}),S.children?.length>0)p.push([S,-1,E]);else if(S.value){const x=document.createTextNode(S.value);u&&Qs.shouldBuildText(A)&&d.push(x),E.append(x)}}for(const g of c.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))g.setAttribute("readOnly",!0);return{textDivs:d}}static update(t){const e=`matrix(${t.viewport.transform.join(",")})`;t.div.style.transform=e,t.div.hidden=!1}}const Km=9,vr=new WeakSet,Qm=new Date().getTimezoneOffset()*60*1e3;class Bd{static create(t){switch(t.data.annotationType){case qt.LINK:return new cu(t);case qt.TEXT:return new Jm(t);case qt.WIDGET:switch(t.data.fieldType){case"Tx":return new Zm(t);case"Btn":return t.data.radioButton?new pf(t):t.data.checkBox?new tv(t):new ev(t);case"Ch":return new nv(t);case"Sig":return new qm(t)}return new wr(t);case qt.POPUP:return new Kl(t);case qt.FREETEXT:return new gf(t);case qt.LINE:return new sv(t);case qt.SQUARE:return new iv(t);case qt.CIRCLE:return new av(t);case qt.POLYLINE:return new mf(t);case qt.CARET:return new lv(t);case qt.INK:return new hu(t);case qt.POLYGON:return new ov(t);case qt.HIGHLIGHT:return new vf(t);case qt.UNDERLINE:return new uv(t);case qt.SQUIGGLY:return new cv(t);case qt.STRIKEOUT:return new hv(t);case qt.STAMP:return new yf(t);case qt.FILEATTACHMENT:return new dv(t);default:return new Qt(t)}}}class Qt{#t=null;#e=!1;#n=null;constructor(t,{isRenderable:e=!1,ignoreBorder:r=!1,createQuadrilaterals:i=!1}={}){this.isRenderable=e,this.data=t.data,this.layer=t.layer,this.linkService=t.linkService,this.downloadManager=t.downloadManager,this.imageResourcesPath=t.imageResourcesPath,this.renderForms=t.renderForms,this.svgFactory=t.svgFactory,this.annotationStorage=t.annotationStorage,this.enableScripting=t.enableScripting,this.hasJSActions=t.hasJSActions,this._fieldObjects=t.fieldObjects,this.parent=t.parent,e&&(this.container=this._createContainer(r)),i&&this._createQuadrilaterals()}static _hasPopupData({contentsObj:t,richText:e}){return!!(t?.str||e?.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return Qt._hasPopupData(this.data)}updateEdited(t){if(!this.container)return;t.rect&&(this.#t||={rect:this.data.rect.slice(0)});const{rect:e,popup:r}=t;e&&this.#r(e);let i=this.#n?.popup||this.popup;!i&&r?.text&&(this._createPopup(r),i=this.#n.popup),i&&(i.updateEdited(t),r?.deleted&&(i.remove(),this.#n=null,this.popup=null))}resetEdited(){this.#t&&(this.#r(this.#t.rect),this.#n?.popup.resetEdited(),this.#t=null)}#r(t){const{container:{style:e},data:{rect:r,rotation:i},parent:{viewport:{rawDims:{pageWidth:a,pageHeight:o,pageX:u,pageY:c}}}}=this;r?.splice(0,4,...t),e.left=`${100*(t[0]-u)/a}%`,e.top=`${100*(o-t[3]+c)/o}%`,i===0?(e.width=`${100*(t[2]-t[0])/a}%`,e.height=`${100*(t[3]-t[1])/o}%`):this.setRotation(i)}_createContainer(t){const{data:e,parent:{page:r,viewport:i}}=this,a=document.createElement("section");a.setAttribute("data-annotation-id",e.id),!(this instanceof wr)&&!(this instanceof cu)&&(a.tabIndex=0);const{style:o}=a;if(o.zIndex=this.parent.zIndex++,e.alternativeText&&(a.title=e.alternativeText),e.noRotate&&a.classList.add("norotate"),!e.rect||this instanceof Kl){const{rotation:A}=e;return!e.hasOwnCanvas&&A!==0&&this.setRotation(A,a),a}const{width:u,height:c}=this;if(!t&&e.borderStyle.width>0){o.borderWidth=`${e.borderStyle.width}px`;const A=e.borderStyle.horizontalCornerRadius,E=e.borderStyle.verticalCornerRadius;if(A>0||E>0){const R=`calc(${A}px * var(--total-scale-factor)) / calc(${E}px * var(--total-scale-factor))`;o.borderRadius=R}else if(this instanceof pf){const R=`calc(${u}px * var(--total-scale-factor)) / calc(${c}px * var(--total-scale-factor))`;o.borderRadius=R}switch(e.borderStyle.style){case Xr.SOLID:o.borderStyle="solid";break;case Xr.DASHED:o.borderStyle="dashed";break;case Xr.BEVELED:St("Unimplemented border style: beveled");break;case Xr.INSET:St("Unimplemented border style: inset");break;case Xr.UNDERLINE:o.borderBottomStyle="solid";break}const x=e.borderColor||null;x?(this.#e=!0,o.borderColor=pt.makeHexColor(x[0]|0,x[1]|0,x[2]|0)):o.borderWidth=0}const d=pt.normalizeRect([e.rect[0],r.view[3]-e.rect[1]+r.view[1],e.rect[2],r.view[3]-e.rect[3]+r.view[1]]),{pageWidth:p,pageHeight:g,pageX:v,pageY:w}=i.rawDims;o.left=`${100*(d[0]-v)/p}%`,o.top=`${100*(d[1]-w)/g}%`;const{rotation:S}=e;return e.hasOwnCanvas||S===0?(o.width=`${100*u/p}%`,o.height=`${100*c/g}%`):this.setRotation(S,a),a}setRotation(t,e=this.container){if(!this.data.rect)return;const{pageWidth:r,pageHeight:i}=this.parent.viewport.rawDims;let{width:a,height:o}=this;t%180!==0&&([a,o]=[o,a]),e.style.width=`${100*a/r}%`,e.style.height=`${100*o/i}%`,e.setAttribute("data-main-rotation",(360-t)%360)}get _commonActions(){const t=(e,r,i)=>{const a=i.detail[e],o=a[0],u=a.slice(1);i.target.style[r]=_d[`${o}_HTML`](u),this.annotationStorage.setValue(this.data.id,{[r]:_d[`${o}_rgb`](u)})};return Tt(this,"_commonActions",{display:e=>{const{display:r}=e.detail,i=r%2===1;this.container.style.visibility=i?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:i,noPrint:r===1||r===2})},print:e=>{this.annotationStorage.setValue(this.data.id,{noPrint:!e.detail.print})},hidden:e=>{const{hidden:r}=e.detail;this.container.style.visibility=r?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:r,noView:r})},focus:e=>{setTimeout(()=>e.target.focus({preventScroll:!1}),0)},userName:e=>{e.target.title=e.detail.userName},readonly:e=>{e.target.disabled=e.detail.readonly},required:e=>{this._setRequired(e.target,e.detail.required)},bgColor:e=>{t("bgColor","backgroundColor",e)},fillColor:e=>{t("fillColor","backgroundColor",e)},fgColor:e=>{t("fgColor","color",e)},textColor:e=>{t("textColor","color",e)},borderColor:e=>{t("borderColor","borderColor",e)},strokeColor:e=>{t("strokeColor","borderColor",e)},rotation:e=>{const r=e.detail.rotation;this.setRotation(r),this.annotationStorage.setValue(this.data.id,{rotation:r})}})}_dispatchEventFromSandbox(t,e){const r=this._commonActions;for(const i of Object.keys(e.detail))(t[i]||r[i])?.(e)}_setDefaultPropertiesFromJS(t){if(!this.enableScripting)return;const e=this.annotationStorage.getRawValue(this.data.id);if(!e)return;const r=this._commonActions;for(const[i,a]of Object.entries(e)){const o=r[i];if(o){const u={detail:{[i]:a},target:t};o(u),delete e[i]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:t}=this.data;if(!t)return;const[e,r,i,a]=this.data.rect.map(A=>Math.fround(A));if(t.length===8){const[A,E,x,R]=t.subarray(2,6);if(i===A&&a===E&&e===x&&r===R)return}const{style:o}=this.container;let u;if(this.#e){const{borderColor:A,borderWidth:E}=o;o.borderWidth=0,u=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${A}" stroke-width="${E}">`],this.container.classList.add("hasBorder")}const c=i-e,d=a-r,{svgFactory:p}=this,g=p.createElement("svg");g.classList.add("quadrilateralsContainer"),g.setAttribute("width",0),g.setAttribute("height",0),g.role="none";const v=p.createElement("defs");g.append(v);const w=p.createElement("clipPath"),S=`clippath_${this.data.id}`;w.setAttribute("id",S),w.setAttribute("clipPathUnits","objectBoundingBox"),v.append(w);for(let A=2,E=t.length;A<E;A+=8){const x=t[A],R=t[A+1],C=t[A+2],P=t[A+3],T=p.createElement("rect"),I=(C-e)/c,M=(a-R)/d,_=(x-C)/c,F=(R-P)/d;T.setAttribute("x",I),T.setAttribute("y",M),T.setAttribute("width",_),T.setAttribute("height",F),w.append(T),u?.push(`<rect vector-effect="non-scaling-stroke" x="${I}" y="${M}" width="${_}" height="${F}"/>`)}this.#e&&(u.push("</g></svg>')"),o.backgroundImage=u.join("")),this.container.append(g),this.container.style.clipPath=`url(#${S})`}_createPopup(t=null){const{data:e}=this;let r,i;t?(r={str:t.text},i=t.date):(r=e.contentsObj,i=e.modificationDate);const a=this.#n=new Kl({data:{color:e.color,titleObj:e.titleObj,modificationDate:i,contentsObj:r,richText:e.richText,parentRect:e.rect,borderStyle:0,id:`popup_${e.id}`,rotation:e.rotation,noRotate:!0},linkService:this.linkService,parent:this.parent,elements:[this]});this.parent.div.append(a.render())}get hasPopupElement(){return!!(this.#n||this.popup||this.data.popupRef)}render(){Nt("Abstract method `AnnotationElement.render` called")}_getElementsByName(t,e=null){const r=[];if(this._fieldObjects){const i=this._fieldObjects[t];if(i)for(const{page:a,id:o,exportValues:u}of i){if(a===-1||o===e)continue;const c=typeof u=="string"?u:null,d=document.querySelector(`[data-element-id="${o}"]`);if(d&&!vr.has(d)){St(`_getElementsByName - element not allowed: ${o}`);continue}r.push({id:o,exportValue:c,domElement:d})}return r}for(const i of document.getElementsByName(t)){const{exportValue:a}=i,o=i.getAttribute("data-element-id");o!==e&&vr.has(i)&&r.push({id:o,exportValue:a,domElement:i})}return r}show(){this.container&&(this.container.hidden=!1),this.popup?.maybeShow()}hide(){this.container&&(this.container.hidden=!0),this.popup?.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const t=this.getElementsToTriggerPopup();if(Array.isArray(t))for(const e of t)e.classList.add("highlightArea");else t.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:t,data:{id:e}}=this;this.container.addEventListener("dblclick",()=>{this.linkService.eventBus?.dispatch("switchannotationeditormode",{source:this,mode:t,editId:e,mustEnterInEditMode:!0})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}}class cu extends Qt{constructor(t,e=null){super(t,{isRenderable:!0,ignoreBorder:!!e?.ignoreBorder,createQuadrilaterals:!0}),this.isTooltipOnly=t.data.isTooltipOnly}render(){const{data:t,linkService:e}=this,r=document.createElement("a");r.setAttribute("data-element-id",t.id);let i=!1;return t.url?(e.addLinkAttributes(r,t.url,t.newWindow),i=!0):t.action?(this._bindNamedAction(r,t.action,t.overlaidText),i=!0):t.attachment?(this.#e(r,t.attachment,t.overlaidText,t.attachmentDest),i=!0):t.setOCGState?(this.#n(r,t.setOCGState,t.overlaidText),i=!0):t.dest?(this._bindLink(r,t.dest,t.overlaidText),i=!0):(t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(r,t),i=!0),t.resetForm?(this._bindResetFormAction(r,t.resetForm),i=!0):this.isTooltipOnly&&!i&&(this._bindLink(r,""),i=!0)),this.container.classList.add("linkAnnotation"),i&&this.container.append(r),this.container}#t(){this.container.setAttribute("data-internal-link","")}_bindLink(t,e,r=""){t.href=this.linkService.getDestinationHash(e),t.onclick=()=>(e&&this.linkService.goToDestination(e),!1),(e||e==="")&&this.#t(),r&&(t.title=r)}_bindNamedAction(t,e,r=""){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeNamedAction(e),!1),r&&(t.title=r),this.#t()}#e(t,e,r="",i=null){t.href=this.linkService.getAnchorUrl(""),e.description?t.title=e.description:r&&(t.title=r),t.onclick=()=>(this.downloadManager?.openOrDownloadData(e.content,e.filename,i),!1),this.#t()}#n(t,e,r=""){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeSetOCGState(e),!1),r&&(t.title=r),this.#t()}_bindJSAction(t,e){t.href=this.linkService.getAnchorUrl("");const r=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const i of Object.keys(e.actions)){const a=r.get(i);a&&(t[a]=()=>(this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e.id,name:i}}),!1))}e.overlaidText&&(t.title=e.overlaidText),t.onclick||(t.onclick=()=>!1),this.#t()}_bindResetFormAction(t,e){const r=t.onclick;if(r||(t.href=this.linkService.getAnchorUrl("")),this.#t(),!this._fieldObjects){St('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),r||(t.onclick=()=>!1);return}t.onclick=()=>{r?.();const{fields:i,refs:a,include:o}=e,u=[];if(i.length!==0||a.length!==0){const p=new Set(a);for(const g of i){const v=this._fieldObjects[g]||[];for(const{id:w}of v)p.add(w)}for(const g of Object.values(this._fieldObjects))for(const v of g)p.has(v.id)===o&&u.push(v)}else for(const p of Object.values(this._fieldObjects))u.push(...p);const c=this.annotationStorage,d=[];for(const p of u){const{id:g}=p;switch(d.push(g),p.type){case"text":{const w=p.defaultValue||"";c.setValue(g,{value:w});break}case"checkbox":case"radiobutton":{const w=p.defaultValue===p.exportValues;c.setValue(g,{value:w});break}case"combobox":case"listbox":{const w=p.defaultValue||"";c.setValue(g,{value:w});break}default:continue}const v=document.querySelector(`[data-element-id="${g}"]`);if(v){if(!vr.has(v)){St(`_bindResetFormAction - element not allowed: ${g}`);continue}}else continue;v.dispatchEvent(new Event("resetform"))}return this.enableScripting&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:d,name:"ResetForm"}}),!1}}}class Jm extends Qt{constructor(t){super(t,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const t=document.createElement("img");return t.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",t.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),t.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(t),this.container}}class wr extends Qt{render(){return this.container}showElementAndHideCanvas(t){this.data.hasOwnCanvas&&(t.previousSibling?.nodeName==="CANVAS"&&(t.previousSibling.hidden=!0),t.hidden=!1)}_getKeyModifier(t){return fe.platform.isMac?t.metaKey:t.ctrlKey}_setEventListener(t,e,r,i,a){r.includes("mouse")?t.addEventListener(r,o=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:a(o),shift:o.shiftKey,modifier:this._getKeyModifier(o)}})}):t.addEventListener(r,o=>{if(r==="blur"){if(!e.focused||!o.relatedTarget)return;e.focused=!1}else if(r==="focus"){if(e.focused)return;e.focused=!0}a&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:a(o)}})})}_setEventListeners(t,e,r,i){for(const[a,o]of r)(o==="Action"||this.data.actions?.[o])&&((o==="Focus"||o==="Blur")&&(e||={focused:!1}),this._setEventListener(t,e,a,o,i),o==="Focus"&&!this.data.actions?.Blur?this._setEventListener(t,e,"blur","Blur",null):o==="Blur"&&!this.data.actions?.Focus&&this._setEventListener(t,e,"focus","Focus",null))}_setBackgroundColor(t){const e=this.data.backgroundColor||null;t.style.backgroundColor=e===null?"transparent":pt.makeHexColor(e[0],e[1],e[2])}_setTextStyle(t){const e=["left","center","right"],{fontColor:r}=this.data.defaultAppearanceData,i=this.data.defaultAppearanceData.fontSize||Km,a=t.style;let o;const u=2,c=d=>Math.round(10*d)/10;if(this.data.multiLine){const d=Math.abs(this.data.rect[3]-this.data.rect[1]-u),p=Math.round(d/(Nl*i))||1,g=d/p;o=Math.min(i,c(g/Nl))}else{const d=Math.abs(this.data.rect[3]-this.data.rect[1]-u);o=Math.min(i,c(d/Nl))}a.fontSize=`calc(${o}px * var(--total-scale-factor))`,a.color=pt.makeHexColor(r[0],r[1],r[2]),this.data.textAlignment!==null&&(a.textAlign=e[this.data.textAlignment])}_setRequired(t,e){e?t.setAttribute("required",!0):t.removeAttribute("required"),t.setAttribute("aria-required",e)}}class Zm extends wr{constructor(t){const e=t.renderForms||t.data.hasOwnCanvas||!t.data.hasAppearance&&!!t.data.fieldValue;super(t,{isRenderable:e})}setPropertyOnSiblings(t,e,r,i){const a=this.annotationStorage;for(const o of this._getElementsByName(t.name,t.id))o.domElement&&(o.domElement[e]=r),a.setValue(o.id,{[i]:r})}render(){const t=this.annotationStorage,e=this.data.id;this.container.classList.add("textWidgetAnnotation");let r=null;if(this.renderForms){const i=t.getValue(e,{value:this.data.fieldValue});let a=i.value||"";const o=t.getValue(e,{charLimit:this.data.maxLen}).charLimit;o&&a.length>o&&(a=a.slice(0,o));let u=i.formattedValue||this.data.textContent?.join(`
`)||null;u&&this.data.comb&&(u=u.replaceAll(/\s+/g,""));const c={userValue:a,formattedValue:u,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(r=document.createElement("textarea"),r.textContent=u??a,this.data.doNotScroll&&(r.style.overflowY="hidden")):(r=document.createElement("input"),r.type=this.data.password?"password":"text",r.setAttribute("value",u??a),this.data.doNotScroll&&(r.style.overflowX="hidden")),this.data.hasOwnCanvas&&(r.hidden=!0),vr.add(r),r.setAttribute("data-element-id",e),r.disabled=this.data.readOnly,r.name=this.data.fieldName,r.tabIndex=0;const{datetimeFormat:d,datetimeType:p,timeStep:g}=this.data,v=!!p&&this.enableScripting;d&&(r.title=d),this._setRequired(r,this.data.required),o&&(r.maxLength=o),r.addEventListener("input",S=>{t.setValue(e,{value:S.target.value}),this.setPropertyOnSiblings(r,"value",S.target.value,"value"),c.formattedValue=null}),r.addEventListener("resetform",S=>{const A=this.data.defaultFieldValue??"";r.value=c.userValue=A,c.formattedValue=null});let w=S=>{const{formattedValue:A}=c;A!=null&&(S.target.value=A),S.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){r.addEventListener("focus",A=>{if(c.focused)return;const{target:E}=A;if(v&&(E.type=p,g&&(E.step=g)),c.userValue){const x=c.userValue;if(v)if(p==="time"){const R=new Date(x),C=[R.getHours(),R.getMinutes(),R.getSeconds()];E.value=C.map(P=>P.toString().padStart(2,"0")).join(":")}else E.value=new Date(x-Qm).toISOString().split(p==="date"?"T":".",1)[0];else E.value=x}c.lastCommittedValue=E.value,c.commitKey=1,this.data.actions?.Focus||(c.focused=!0)}),r.addEventListener("updatefromsandbox",A=>{this.showElementAndHideCanvas(A.target);const E={value(x){c.userValue=x.detail.value??"",v||t.setValue(e,{value:c.userValue.toString()}),x.target.value=c.userValue},formattedValue(x){const{formattedValue:R}=x.detail;c.formattedValue=R,R!=null&&x.target!==document.activeElement&&(x.target.value=R);const C={formattedValue:R};v&&(C.value=R),t.setValue(e,C)},selRange(x){x.target.setSelectionRange(...x.detail.selRange)},charLimit:x=>{const{charLimit:R}=x.detail,{target:C}=x;if(R===0){C.removeAttribute("maxLength");return}C.setAttribute("maxLength",R);let P=c.userValue;!P||P.length<=R||(P=P.slice(0,R),C.value=c.userValue=P,t.setValue(e,{value:P}),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:P,willCommit:!0,commitKey:1,selStart:C.selectionStart,selEnd:C.selectionEnd}}))}};this._dispatchEventFromSandbox(E,A)}),r.addEventListener("keydown",A=>{c.commitKey=1;let E=-1;if(A.key==="Escape"?E=0:A.key==="Enter"&&!this.data.multiLine?E=2:A.key==="Tab"&&(c.commitKey=3),E===-1)return;const{value:x}=A.target;c.lastCommittedValue!==x&&(c.lastCommittedValue=x,c.userValue=x,this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:x,willCommit:!0,commitKey:E,selStart:A.target.selectionStart,selEnd:A.target.selectionEnd}}))});const S=w;w=null,r.addEventListener("blur",A=>{if(!c.focused||!A.relatedTarget)return;this.data.actions?.Blur||(c.focused=!1);const{target:E}=A;let{value:x}=E;if(v){if(x&&p==="time"){const R=x.split(":").map(C=>parseInt(C,10));x=new Date(2e3,0,1,R[0],R[1],R[2]||0).valueOf(),E.step=""}else x=new Date(x).valueOf();E.type="text"}c.userValue=x,c.lastCommittedValue!==x&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:x,willCommit:!0,commitKey:c.commitKey,selStart:A.target.selectionStart,selEnd:A.target.selectionEnd}}),S(A)}),this.data.actions?.Keystroke&&r.addEventListener("beforeinput",A=>{c.lastCommittedValue=null;const{data:E,target:x}=A,{value:R,selectionStart:C,selectionEnd:P}=x;let T=C,I=P;switch(A.inputType){case"deleteWordBackward":{const M=R.substring(0,C).match(/\w*[^\w]*$/);M&&(T-=M[0].length);break}case"deleteWordForward":{const M=R.substring(C).match(/^[^\w]*\w*/);M&&(I+=M[0].length);break}case"deleteContentBackward":C===P&&(T-=1);break;case"deleteContentForward":C===P&&(I+=1);break}A.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:R,change:E||"",willCommit:!1,selStart:T,selEnd:I}})}),this._setEventListeners(r,c,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],A=>A.target.value)}if(w&&r.addEventListener("blur",w),this.data.comb){const A=(this.data.rect[2]-this.data.rect[0])/o;r.classList.add("comb"),r.style.letterSpacing=`calc(${A}px * var(--total-scale-factor) - 1ch)`}}else r=document.createElement("div"),r.textContent=this.data.fieldValue,r.style.verticalAlign="middle",r.style.display="table-cell",this.data.hasOwnCanvas&&(r.hidden=!0);return this._setTextStyle(r),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class qm extends wr{constructor(t){super(t,{isRenderable:!!t.data.hasOwnCanvas})}}class tv extends wr{constructor(t){super(t,{isRenderable:t.renderForms})}render(){const t=this.annotationStorage,e=this.data,r=e.id;let i=t.getValue(r,{value:e.exportValue===e.fieldValue}).value;typeof i=="string"&&(i=i!=="Off",t.setValue(r,{value:i})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const a=document.createElement("input");return vr.add(a),a.setAttribute("data-element-id",r),a.disabled=e.readOnly,this._setRequired(a,this.data.required),a.type="checkbox",a.name=e.fieldName,i&&a.setAttribute("checked",!0),a.setAttribute("exportValue",e.exportValue),a.tabIndex=0,a.addEventListener("change",o=>{const{name:u,checked:c}=o.target;for(const d of this._getElementsByName(u,r)){const p=c&&d.exportValue===e.exportValue;d.domElement&&(d.domElement.checked=p),t.setValue(d.id,{value:p})}t.setValue(r,{value:c})}),a.addEventListener("resetform",o=>{const u=e.defaultFieldValue||"Off";o.target.checked=u===e.exportValue}),this.enableScripting&&this.hasJSActions&&(a.addEventListener("updatefromsandbox",o=>{const u={value(c){c.target.checked=c.detail.value!=="Off",t.setValue(r,{value:c.target.checked})}};this._dispatchEventFromSandbox(u,o)}),this._setEventListeners(a,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],o=>o.target.checked)),this._setBackgroundColor(a),this._setDefaultPropertiesFromJS(a),this.container.append(a),this.container}}class pf extends wr{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const t=this.annotationStorage,e=this.data,r=e.id;let i=t.getValue(r,{value:e.fieldValue===e.buttonValue}).value;if(typeof i=="string"&&(i=i!==e.buttonValue,t.setValue(r,{value:i})),i)for(const o of this._getElementsByName(e.fieldName,r))t.setValue(o.id,{value:!1});const a=document.createElement("input");if(vr.add(a),a.setAttribute("data-element-id",r),a.disabled=e.readOnly,this._setRequired(a,this.data.required),a.type="radio",a.name=e.fieldName,i&&a.setAttribute("checked",!0),a.tabIndex=0,a.addEventListener("change",o=>{const{name:u,checked:c}=o.target;for(const d of this._getElementsByName(u,r))t.setValue(d.id,{value:!1});t.setValue(r,{value:c})}),a.addEventListener("resetform",o=>{const u=e.defaultFieldValue;o.target.checked=u!=null&&u===e.buttonValue}),this.enableScripting&&this.hasJSActions){const o=e.buttonValue;a.addEventListener("updatefromsandbox",u=>{const c={value:d=>{const p=o===d.detail.value;for(const g of this._getElementsByName(d.target.name)){const v=p&&g.id===r;g.domElement&&(g.domElement.checked=v),t.setValue(g.id,{value:v})}}};this._dispatchEventFromSandbox(c,u)}),this._setEventListeners(a,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],u=>u.target.checked)}return this._setBackgroundColor(a),this._setDefaultPropertiesFromJS(a),this.container.append(a),this.container}}class ev extends cu{constructor(t){super(t,{ignoreBorder:t.data.hasAppearance})}render(){const t=super.render();t.classList.add("buttonWidgetAnnotation","pushButton");const e=t.lastChild;return this.enableScripting&&this.hasJSActions&&e&&(this._setDefaultPropertiesFromJS(e),e.addEventListener("updatefromsandbox",r=>{this._dispatchEventFromSandbox({},r)})),t}}class nv extends wr{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const t=this.annotationStorage,e=this.data.id,r=t.getValue(e,{value:this.data.fieldValue}),i=document.createElement("select");vr.add(i),i.setAttribute("data-element-id",e),i.disabled=this.data.readOnly,this._setRequired(i,this.data.required),i.name=this.data.fieldName,i.tabIndex=0;let a=this.data.combo&&this.data.options.length>0;this.data.combo||(i.size=this.data.options.length,this.data.multiSelect&&(i.multiple=!0)),i.addEventListener("resetform",p=>{const g=this.data.defaultFieldValue;for(const v of i.options)v.selected=v.value===g});for(const p of this.data.options){const g=document.createElement("option");g.textContent=p.displayValue,g.value=p.exportValue,r.value.includes(p.exportValue)&&(g.setAttribute("selected",!0),a=!1),i.append(g)}let o=null;if(a){const p=document.createElement("option");p.value=" ",p.setAttribute("hidden",!0),p.setAttribute("selected",!0),i.prepend(p),o=()=>{p.remove(),i.removeEventListener("input",o),o=null},i.addEventListener("input",o)}const u=p=>{const g=p?"value":"textContent",{options:v,multiple:w}=i;return w?Array.prototype.filter.call(v,S=>S.selected).map(S=>S[g]):v.selectedIndex===-1?null:v[v.selectedIndex][g]};let c=u(!1);const d=p=>{const g=p.target.options;return Array.prototype.map.call(g,v=>({displayValue:v.textContent,exportValue:v.value}))};return this.enableScripting&&this.hasJSActions?(i.addEventListener("updatefromsandbox",p=>{const g={value(v){o?.();const w=v.detail.value,S=new Set(Array.isArray(w)?w:[w]);for(const A of i.options)A.selected=S.has(A.value);t.setValue(e,{value:u(!0)}),c=u(!1)},multipleSelection(v){i.multiple=!0},remove(v){const w=i.options,S=v.detail.remove;w[S].selected=!1,i.remove(S),w.length>0&&Array.prototype.findIndex.call(w,E=>E.selected)===-1&&(w[0].selected=!0),t.setValue(e,{value:u(!0),items:d(v)}),c=u(!1)},clear(v){for(;i.length!==0;)i.remove(0);t.setValue(e,{value:null,items:[]}),c=u(!1)},insert(v){const{index:w,displayValue:S,exportValue:A}=v.detail.insert,E=i.children[w],x=document.createElement("option");x.textContent=S,x.value=A,E?E.before(x):i.append(x),t.setValue(e,{value:u(!0),items:d(v)}),c=u(!1)},items(v){const{items:w}=v.detail;for(;i.length!==0;)i.remove(0);for(const S of w){const{displayValue:A,exportValue:E}=S,x=document.createElement("option");x.textContent=A,x.value=E,i.append(x)}i.options.length>0&&(i.options[0].selected=!0),t.setValue(e,{value:u(!0),items:d(v)}),c=u(!1)},indices(v){const w=new Set(v.detail.indices);for(const S of v.target.options)S.selected=w.has(S.index);t.setValue(e,{value:u(!0)}),c=u(!1)},editable(v){v.target.disabled=!v.detail.editable}};this._dispatchEventFromSandbox(g,p)}),i.addEventListener("input",p=>{const g=u(!0),v=u(!1);t.setValue(e,{value:g}),p.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:c,change:v,changeEx:g,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(i,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],p=>p.target.value)):i.addEventListener("input",function(p){t.setValue(e,{value:u(!0)})}),this.data.combo&&this._setTextStyle(i),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class Kl extends Qt{constructor(t){const{data:e,elements:r}=t;super(t,{isRenderable:Qt._hasPopupData(e)}),this.elements=r,this.popup=null}render(){const{container:t}=this;t.classList.add("popupAnnotation"),t.role="comment";const e=this.popup=new rv({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate||this.data.creationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),r=[];for(const i of this.elements)i.popup=e,i.container.ariaHasPopup="dialog",r.push(i.data.id),i.addHighlightArea();return this.container.setAttribute("aria-controls",r.map(i=>`${tu}${i}`).join(",")),this.container}}class rv{#t=this.#k.bind(this);#e=this.#O.bind(this);#n=this.#T.bind(this);#r=this.#R.bind(this);#i=null;#s=null;#a=null;#o=null;#c=null;#u=null;#d=null;#l=!1;#p=null;#m=null;#f=null;#h=null;#g=null;#w=null;#v=null;#S=!1;constructor({container:t,color:e,elements:r,titleObj:i,modificationDate:a,contentsObj:o,richText:u,parent:c,rect:d,parentRect:p,open:g}){this.#s=t,this.#w=i,this.#a=o,this.#g=u,this.#u=c,this.#i=e,this.#h=d,this.#d=p,this.#c=r,this.#o=Vl.toDateObject(a),this.trigger=r.flatMap(v=>v.getElementsToTriggerPopup()),this.#E(),this.#s.hidden=!0,g&&this.#R()}#E(){if(this.#m)return;this.#m=new AbortController;const{signal:t}=this.#m;for(const e of this.trigger)e.addEventListener("click",this.#r,{signal:t}),e.addEventListener("mouseenter",this.#n,{signal:t}),e.addEventListener("mouseleave",this.#e,{signal:t}),e.classList.add("popupTriggerArea");for(const e of this.#c)e.container?.addEventListener("keydown",this.#t,{signal:t})}render(){if(this.#p)return;const t=this.#p=document.createElement("div");if(t.className="popup",this.#i){const i=t.style.outlineColor=pt.makeHexColor(...this.#i);t.style.backgroundColor=`color-mix(in srgb, ${i} 30%, white)`}const e=document.createElement("span");if(e.className="header",this.#w?.str){const i=document.createElement("span");i.className="title",e.append(i),{dir:i.dir,str:i.textContent}=this.#w}if(t.append(e),this.#o){const i=document.createElement("time");i.className="popupDate",i.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),i.setAttribute("data-l10n-args",JSON.stringify({dateObj:this.#o.valueOf()})),i.dateTime=this.#o.toISOString(),e.append(i)}const r=this.#y;if(r)ff.render({xfaHtml:r,intent:"richText",div:t}),t.lastChild.classList.add("richText","popupContent");else{const i=this._formatContents(this.#a);t.append(i)}this.#s.append(t)}get#y(){const t=this.#g,e=this.#a;return t?.str&&(!e?.str||e.str===t.str)&&this.#g.html||null}get#b(){return this.#y?.attributes?.style?.fontSize||0}get#I(){return this.#y?.attributes?.style?.color||null}#x(t){const e=[],r={str:t,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:e}]}},i={style:{color:this.#I,fontSize:this.#b?`calc(${this.#b}px * var(--total-scale-factor))`:""}};for(const a of t.split(`
`))e.push({name:"span",value:a,attributes:i});return r}_formatContents({str:t,dir:e}){const r=document.createElement("p");r.classList.add("popupContent"),r.dir=e;const i=t.split(/(?:\r\n?|\n)/);for(let a=0,o=i.length;a<o;++a){const u=i[a];r.append(document.createTextNode(u)),a<o-1&&r.append(document.createElement("br"))}return r}#k(t){t.altKey||t.shiftKey||t.ctrlKey||t.metaKey||(t.key==="Enter"||t.key==="Escape"&&this.#l)&&this.#R()}updateEdited({rect:t,popup:e,deleted:r}){if(r||e?.deleted){this.remove();return}this.#E(),this.#v||={contentsObj:this.#a,richText:this.#g},t&&(this.#f=null),e&&(this.#g=this.#x(e.text),this.#o=Vl.toDateObject(e.date),this.#a=null),this.#p?.remove(),this.#p=null}resetEdited(){this.#v&&({contentsObj:this.#a,richText:this.#g}=this.#v,this.#v=null,this.#p?.remove(),this.#p=null,this.#f=null)}remove(){this.#m?.abort(),this.#m=null,this.#p?.remove(),this.#p=null,this.#S=!1,this.#l=!1;for(const t of this.trigger)t.classList.remove("popupTriggerArea")}#P(){if(this.#f!==null)return;const{page:{view:t},viewport:{rawDims:{pageWidth:e,pageHeight:r,pageX:i,pageY:a}}}=this.#u;let o=!!this.#d,u=o?this.#d:this.#h;for(const S of this.#c)if(!u||pt.intersect(S.data.rect,u)!==null){u=S.data.rect,o=!0;break}const c=pt.normalizeRect([u[0],t[3]-u[1]+t[1],u[2],t[3]-u[3]+t[1]]),p=o?u[2]-u[0]+5:0,g=c[0]+p,v=c[1];this.#f=[100*(g-i)/e,100*(v-a)/r];const{style:w}=this.#s;w.left=`${this.#f[0]}%`,w.top=`${this.#f[1]}%`}#R(){this.#l=!this.#l,this.#l?(this.#T(),this.#s.addEventListener("click",this.#r),this.#s.addEventListener("keydown",this.#t)):(this.#O(),this.#s.removeEventListener("click",this.#r),this.#s.removeEventListener("keydown",this.#t))}#T(){this.#p||this.render(),this.isVisible?this.#l&&this.#s.classList.add("focused"):(this.#P(),this.#s.hidden=!1,this.#s.style.zIndex=parseInt(this.#s.style.zIndex)+1e3)}#O(){this.#s.classList.remove("focused"),!(this.#l||!this.isVisible)&&(this.#s.hidden=!0,this.#s.style.zIndex=parseInt(this.#s.style.zIndex)-1e3)}forceHide(){this.#S=this.isVisible,this.#S&&(this.#s.hidden=!0)}maybeShow(){this.#E(),this.#S&&(this.#p||this.#T(),this.#S=!1,this.#s.hidden=!1)}get isVisible(){return this.#s.hidden===!1}}class gf extends Qt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.textContent=t.data.textContent,this.textPosition=t.data.textPosition,this.annotationEditorType=xt.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const t=document.createElement("div");t.classList.add("annotationTextContent"),t.setAttribute("role","comment");for(const e of this.textContent){const r=document.createElement("span");r.textContent=e,t.append(r)}this.container.append(t)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}class sv extends Qt{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("lineAnnotation");const{data:t,width:e,height:r}=this,i=this.svgFactory.create(e,r,!0),a=this.#t=this.svgFactory.createElement("svg:line");return a.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),a.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),a.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),a.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),a.setAttribute("stroke-width",t.borderStyle.width||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),i.append(a),this.container.append(i),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class iv extends Qt{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("squareAnnotation");const{data:t,width:e,height:r}=this,i=this.svgFactory.create(e,r,!0),a=t.borderStyle.width,o=this.#t=this.svgFactory.createElement("svg:rect");return o.setAttribute("x",a/2),o.setAttribute("y",a/2),o.setAttribute("width",e-a),o.setAttribute("height",r-a),o.setAttribute("stroke-width",a||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),i.append(o),this.container.append(i),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class av extends Qt{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("circleAnnotation");const{data:t,width:e,height:r}=this,i=this.svgFactory.create(e,r,!0),a=t.borderStyle.width,o=this.#t=this.svgFactory.createElement("svg:ellipse");return o.setAttribute("cx",e/2),o.setAttribute("cy",r/2),o.setAttribute("rx",e/2-a/2),o.setAttribute("ry",r/2-a/2),o.setAttribute("stroke-width",a||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),i.append(o),this.container.append(i),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class mf extends Qt{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,vertices:e,borderStyle:r,popupRef:i},width:a,height:o}=this;if(!e)return this.container;const u=this.svgFactory.create(a,o,!0);let c=[];for(let p=0,g=e.length;p<g;p+=2){const v=e[p]-t[0],w=t[3]-e[p+1];c.push(`${v},${w}`)}c=c.join(" ");const d=this.#t=this.svgFactory.createElement(this.svgElementName);return d.setAttribute("points",c),d.setAttribute("stroke-width",r.width||1),d.setAttribute("stroke","transparent"),d.setAttribute("fill","transparent"),u.append(d),this.container.append(u),!i&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class ov extends mf{constructor(t){super(t),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class lv extends Qt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class hu extends Qt{#t=null;#e=[];constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?xt.HIGHLIGHT:xt.INK}#n(t,e){switch(t){case 90:return{transform:`rotate(90) translate(${-e[0]},${e[1]}) scale(1,-1)`,width:e[3]-e[1],height:e[2]-e[0]};case 180:return{transform:`rotate(180) translate(${-e[2]},${e[1]}) scale(1,-1)`,width:e[2]-e[0],height:e[3]-e[1]};case 270:return{transform:`rotate(270) translate(${-e[2]},${e[3]}) scale(1,-1)`,width:e[3]-e[1],height:e[2]-e[0]};default:return{transform:`translate(${-e[0]},${e[3]}) scale(1,-1)`,width:e[2]-e[0],height:e[3]-e[1]}}}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,rotation:e,inkLists:r,borderStyle:i,popupRef:a}}=this,{transform:o,width:u,height:c}=this.#n(e,t),d=this.svgFactory.create(u,c,!0),p=this.#t=this.svgFactory.createElement("svg:g");d.append(p),p.setAttribute("stroke-width",i.width||1),p.setAttribute("stroke-linecap","round"),p.setAttribute("stroke-linejoin","round"),p.setAttribute("stroke-miterlimit",10),p.setAttribute("stroke","transparent"),p.setAttribute("fill","transparent"),p.setAttribute("transform",o);for(let g=0,v=r.length;g<v;g++){const w=this.svgFactory.createElement(this.svgElementName);this.#e.push(w),w.setAttribute("points",r[g].join(",")),p.append(w)}return!a&&this.hasPopupData&&this._createPopup(),this.container.append(d),this._editOnDoubleClick(),this.container}updateEdited(t){super.updateEdited(t);const{thickness:e,points:r,rect:i}=t,a=this.#t;if(e>=0&&a.setAttribute("stroke-width",e||1),r)for(let o=0,u=this.#e.length;o<u;o++)this.#e[o].setAttribute("points",r[o].join(","));if(i){const{transform:o,width:u,height:c}=this.#n(this.data.rotation,i);a.parentElement.setAttribute("viewBox",`0 0 ${u} ${c}`),a.setAttribute("transform",o)}}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class vf extends Qt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=xt.HIGHLIGHT}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),t){const r=document.createElement("mark");r.classList.add("overlaidText"),r.textContent=t,this.container.append(r)}return this.container}}class uv extends Qt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),t){const r=document.createElement("u");r.classList.add("overlaidText"),r.textContent=t,this.container.append(r)}return this.container}}class cv extends Qt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),t){const r=document.createElement("u");r.classList.add("overlaidText"),r.textContent=t,this.container.append(r)}return this.container}}class hv extends Qt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),t){const r=document.createElement("s");r.classList.add("overlaidText"),r.textContent=t,this.container.append(r)}return this.container}}class yf extends Qt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=xt.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}class dv extends Qt{#t=null;constructor(t){super(t,{isRenderable:!0});const{file:e}=this.data;this.filename=e.filename,this.content=e.content,this.linkService.eventBus?.dispatch("fileattachmentannotation",{source:this,...e})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:t,data:e}=this;let r;e.hasAppearance||e.fillAlpha===0?r=document.createElement("div"):(r=document.createElement("img"),r.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(e.name)?"paperclip":"pushpin"}.svg`,e.fillAlpha&&e.fillAlpha<1&&(r.style=`filter: opacity(${Math.round(e.fillAlpha*100)}%);`)),r.addEventListener("dblclick",this.#e.bind(this)),this.#t=r;const{isMac:i}=fe.platform;return t.addEventListener("keydown",a=>{a.key==="Enter"&&(i?a.metaKey:a.ctrlKey)&&this.#e()}),!e.popupRef&&this.hasPopupData?this._createPopup():r.classList.add("popupTriggerArea"),t.append(r),t}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}#e(){this.downloadManager?.openOrDownloadData(this.content,this.filename)}}class du{#t=null;#e=null;#n=new Map;#r=null;constructor({div:t,accessibilityManager:e,annotationCanvasMap:r,annotationEditorUIManager:i,page:a,viewport:o,structTreeLayer:u}){this.div=t,this.#t=e,this.#e=r,this.#r=u||null,this.page=a,this.viewport=o,this.zIndex=0,this._annotationEditorUIManager=i}hasEditableAnnotations(){return this.#n.size>0}async#i(t,e,r){const i=t.firstChild||t,a=i.id=`${tu}${e}`,o=await this.#r?.getAriaAttributes(a);if(o)for(const[u,c]of o)i.setAttribute(u,c);r?r.at(-1).container.after(t):(this.div.append(t),this.#t?.moveElementInDOM(this.div,t,i,!1))}async render(t){const{annotations:e}=t,r=this.div;mr(r,this.viewport);const i=new Map,a={data:null,layer:r,linkService:t.linkService,downloadManager:t.downloadManager,imageResourcesPath:t.imageResourcesPath||"",renderForms:t.renderForms!==!1,svgFactory:new Ra,annotationStorage:t.annotationStorage||new iu,enableScripting:t.enableScripting===!0,hasJSActions:t.hasJSActions,fieldObjects:t.fieldObjects,parent:this,elements:null};for(const o of e){if(o.noHTML)continue;const u=o.annotationType===qt.POPUP;if(u){const p=i.get(o.id);if(!p)continue;a.elements=p}else if(o.rect[2]===o.rect[0]||o.rect[3]===o.rect[1])continue;a.data=o;const c=Bd.create(a);if(!c.isRenderable)continue;if(!u&&o.popupRef){const p=i.get(o.popupRef);p?p.push(c):i.set(o.popupRef,[c])}const d=c.render();o.hidden&&(d.style.visibility="hidden"),await this.#i(d,o.id,a.elements),c._isEditable&&(this.#n.set(c.data.id,c),this._annotationEditorUIManager?.renderAnnotationElement(c))}this.#s()}async addLinkAnnotations(t,e){const r={data:null,layer:this.div,linkService:e,svgFactory:new Ra,parent:this};for(const i of t){i.borderStyle||=du._defaultBorderStyle,r.data=i;const a=Bd.create(r);if(!a.isRenderable)continue;const o=a.render();await this.#i(o,i.id,null)}}update({viewport:t}){const e=this.div;this.viewport=t,mr(e,{rotation:t.rotation}),this.#s(),e.hidden=!1}#s(){if(!this.#e)return;const t=this.div;for(const[e,r]of this.#e){const i=t.querySelector(`[data-annotation-id="${e}"]`);if(!i)continue;r.className="annotationContent";const{firstChild:a}=i;a?a.nodeName==="CANVAS"?a.replaceWith(r):a.classList.contains("annotationContent")?a.after(r):a.before(r):i.append(r);const o=this.#n.get(e);o&&(o._hasNoCanvas?(this._annotationEditorUIManager?.setMissingCanvas(e,i.id,r),o._hasNoCanvas=!1):o.canvas=r)}this.#e.clear()}getEditableAnnotations(){return Array.from(this.#n.values())}getEditableAnnotation(t){return this.#n.get(t)}static get _defaultBorderStyle(){return Tt(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:Xr.SOLID,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}}const Aa=/\r\n?|\n/g;class se extends yt{#t;#e="";#n=`${this.id}-editor`;#r=null;#i;_colorPicker=null;static _freeTextDefaultContent="";static _internalPadding=0;static _defaultColor=null;static _defaultFontSize=10;static get _keyboardManager(){const t=se.prototype,e=a=>a.isEmpty(),r=Zn.TRANSLATE_SMALL,i=Zn.TRANSLATE_BIG;return Tt(this,"_keyboardManager",new ni([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],t.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],t.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],t._translateEmpty,{args:[-r,0],checker:e}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t._translateEmpty,{args:[-i,0],checker:e}],[["ArrowRight","mac+ArrowRight"],t._translateEmpty,{args:[r,0],checker:e}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t._translateEmpty,{args:[i,0],checker:e}],[["ArrowUp","mac+ArrowUp"],t._translateEmpty,{args:[0,-r],checker:e}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t._translateEmpty,{args:[0,-i],checker:e}],[["ArrowDown","mac+ArrowDown"],t._translateEmpty,{args:[0,r],checker:e}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t._translateEmpty,{args:[0,i],checker:e}]]))}static _type="freetext";static _editorType=xt.FREETEXT;constructor(t){super({...t,name:"freeTextEditor"}),this.#t=t.color||se._defaultColor||yt._defaultLineColor,this.#i=t.fontSize||se._defaultFontSize,this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-freetext-added-alert")}static initialize(t,e){yt.initialize(t,e);const r=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(r.getPropertyValue("--freetext-padding"))}static updateDefaultParams(t,e){switch(t){case Rt.FREETEXT_SIZE:se._defaultFontSize=e;break;case Rt.FREETEXT_COLOR:se._defaultColor=e;break}}updateParams(t,e){switch(t){case Rt.FREETEXT_SIZE:this.#s(e);break;case Rt.FREETEXT_COLOR:this.#a(e);break}}static get defaultPropertiesToUpdate(){return[[Rt.FREETEXT_SIZE,se._defaultFontSize],[Rt.FREETEXT_COLOR,se._defaultColor||yt._defaultLineColor]]}get propertiesToUpdate(){return[[Rt.FREETEXT_SIZE,this.#i],[Rt.FREETEXT_COLOR,this.#t]]}get toolbarButtons(){return this._colorPicker||=new Zs(this),[["colorPicker",this._colorPicker]]}get colorType(){return Rt.FREETEXT_COLOR}get colorValue(){return this.#t}#s(t){const e=i=>{this.editorDiv.style.fontSize=`calc(${i}px * var(--total-scale-factor))`,this.translate(0,-(i-this.#i)*this.parentScale),this.#i=i,this.#c()},r=this.#i;this.addCommands({cmd:e.bind(this,t),undo:e.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Rt.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}#a(t){const e=i=>{this.#t=this.editorDiv.style.color=i,this._colorPicker?.update(i)},r=this.#t;this.addCommands({cmd:e.bind(this,t),undo:e.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Rt.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}_translateEmpty(t,e){this._uiManager.translateSelectedEditors(t,e,!0)}getInitialTranslation(){const t=this.parentScale;return[-se._internalPadding*t,-(se._internalPadding+this.#i)*t]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(!super.enableEditMode())return!1;this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.#r=new AbortController;const t=this._uiManager.combinedSignal(this.#r);return this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:t}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:t}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:t}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:t}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:t}),!0}disableEditMode(){return super.disableEditMode()?(this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",this.#n),this._isDraggable=!0,this.#r?.abort(),this.#r=null,this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"),!0):!1}focusin(t){this._focusEventsAllowed&&(super.focusin(t),t.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(t){this.width||(this.enableEditMode(),t&&this.editorDiv.focus(),this._initialOptions?.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}#o(){const t=[];this.editorDiv.normalize();let e=null;for(const r of this.editorDiv.childNodes)e?.nodeType===Node.TEXT_NODE&&r.nodeName==="BR"||(t.push(se.#u(r)),e=r);return t.join(`
`)}#c(){const[t,e]=this.parentDimensions;let r;if(this.isAttachedToDOM)r=this.div.getBoundingClientRect();else{const{currentLayer:i,div:a}=this,o=a.style.display,u=a.classList.contains("hidden");a.classList.remove("hidden"),a.style.display="hidden",i.div.append(this.div),r=a.getBoundingClientRect(),a.remove(),a.style.display=o,a.classList.toggle("hidden",u)}this.rotation%180===this.parentRotation%180?(this.width=r.width/t,this.height=r.height/e):(this.width=r.height/t,this.height=r.width/e),this.fixAndSetPosition()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const t=this.#e,e=this.#e=this.#o().trimEnd();if(t===e)return;const r=i=>{if(this.#e=i,!i){this.remove();return}this.#d(),this._uiManager.rebuild(this),this.#c()};this.addCommands({cmd:()=>{r(e)},undo:()=>{r(t)},mustExec:!1}),this.#c()}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}keydown(t){t.target===this.div&&t.key==="Enter"&&(this.enterInEditMode(),t.preventDefault())}editorDivKeydown(t){se._keyboardManager.exec(this,t)}editorDivFocus(t){this.isEditing=!0}editorDivBlur(t){this.isEditing=!1}editorDivInput(t){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}get canChangeContent(){return!0}render(){if(this.div)return this.div;let t,e;(this._isCopy||this.annotationElementId)&&(t=this.x,e=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",this.#n),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:r}=this.editorDiv;if(r.fontSize=`calc(${this.#i}px * var(--total-scale-factor))`,r.color=this.#t,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){const[i,a]=this.parentDimensions;if(this.annotationElementId){const{position:o}=this._initialData;let[u,c]=this.getInitialTranslation();[u,c]=this.pageTranslationToScreen(u,c);const[d,p]=this.pageDimensions,[g,v]=this.pageTranslation;let w,S;switch(this.rotation){case 0:w=t+(o[0]-g)/d,S=e+this.height-(o[1]-v)/p;break;case 90:w=t+(o[0]-g)/d,S=e-(o[1]-v)/p,[u,c]=[c,-u];break;case 180:w=t-this.width+(o[0]-g)/d,S=e-(o[1]-v)/p,[u,c]=[-u,-c];break;case 270:w=t+(o[0]-g-this.height*p)/d,S=e+(o[1]-v-this.width*d)/p,[u,c]=[-c,u];break}this.setAt(w*i,S*a,u,c)}else this._moveAfterPaste(t,e);this.#d(),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}static#u(t){return(t.nodeType===Node.TEXT_NODE?t.nodeValue:t.innerText).replaceAll(Aa,"")}editorDivPaste(t){const e=t.clipboardData||window.clipboardData,{types:r}=e;if(r.length===1&&r[0]==="text/plain")return;t.preventDefault();const i=se.#p(e.getData("text")||"").replaceAll(Aa,`
`);if(!i)return;const a=window.getSelection();if(!a.rangeCount)return;this.editorDiv.normalize(),a.deleteFromDocument();const o=a.getRangeAt(0);if(!i.includes(`
`)){o.insertNode(document.createTextNode(i)),this.editorDiv.normalize(),a.collapseToStart();return}const{startContainer:u,startOffset:c}=o,d=[],p=[];if(u.nodeType===Node.TEXT_NODE){const w=u.parentElement;if(p.push(u.nodeValue.slice(c).replaceAll(Aa,"")),w!==this.editorDiv){let S=d;for(const A of this.editorDiv.childNodes){if(A===w){S=p;continue}S.push(se.#u(A))}}d.push(u.nodeValue.slice(0,c).replaceAll(Aa,""))}else if(u===this.editorDiv){let w=d,S=0;for(const A of this.editorDiv.childNodes)S++===c&&(w=p),w.push(se.#u(A))}this.#e=`${d.join(`
`)}${i}${p.join(`
`)}`,this.#d();const g=new Range;let v=Math.sumPrecise(d.map(w=>w.length));for(const{firstChild:w}of this.editorDiv.childNodes)if(w.nodeType===Node.TEXT_NODE){const S=w.nodeValue.length;if(v<=S){g.setStart(w,v),g.setEnd(w,v);break}v-=S}a.removeAllRanges(),a.addRange(g)}#d(){if(this.editorDiv.replaceChildren(),!!this.#e)for(const t of this.#e.split(`
`)){const e=document.createElement("div");e.append(t?document.createTextNode(t):document.createElement("br")),this.editorDiv.append(e)}}#l(){return this.#e.replaceAll(""," ")}static#p(t){return t.replaceAll(" ","")}get contentDiv(){return this.editorDiv}static async deserialize(t,e,r){let i=null;if(t instanceof gf){const{data:{defaultAppearanceData:{fontSize:o,fontColor:u},rect:c,rotation:d,id:p,popupRef:g,contentsObj:v},textContent:w,textPosition:S,parent:{page:{pageNumber:A}}}=t;if(!w||w.length===0)return null;i=t={annotationType:xt.FREETEXT,color:Array.from(u),fontSize:o,value:w.join(`
`),position:S,pageIndex:A-1,rect:c.slice(0),rotation:d,annotationElementId:p,id:p,deleted:!1,popupRef:g,comment:v?.str||null}}const a=await super.deserialize(t,e,r);return a.#i=t.fontSize,a.#t=pt.makeHexColor(...t.color),a.#e=se.#p(t.value),a._initialData=i,t.comment&&a.setCommentData(t.comment),a}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const e=se._internalPadding*this.parentScale,r=this.getRect(e,e),i=yt._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.#t),a={annotationType:xt.FREETEXT,color:i,fontSize:this.#i,value:this.#l(),pageIndex:this.pageIndex,rect:r,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return this.addComment(a),t?(a.isCopy=!0,a):this.annotationElementId&&!this.#m(a)?null:(a.id=this.annotationElementId,a)}#m(t){const{value:e,fontSize:r,color:i,pageIndex:a}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||t.value!==e||t.fontSize!==r||t.color.some((o,u)=>o!==i[u])||t.pageIndex!==a}renderAnnotationElement(t){const e=super.renderAnnotationElement(t),{style:r}=e;r.fontSize=`calc(${this.#i}px * var(--total-scale-factor))`,r.color=this.#t,e.replaceChildren();for(const o of this.#e.split(`
`)){const u=document.createElement("div");u.append(o?document.createTextNode(o):document.createElement("br")),e.append(u)}const i=se._internalPadding*this.parentScale,a={rect:this.getRect(i,i)};return a.popup=this.hasEditedComment?this.comment:{text:this.#e},t.updateEdited(a),e}resetAnnotationElement(t){super.resetAnnotationElement(t),t.resetEdited()}}class lt{static PRECISION=1e-4;toSVGPath(){Nt("Abstract method `toSVGPath` must be implemented.")}get box(){Nt("Abstract getter `box` must be implemented.")}serialize(t,e){Nt("Abstract method `serialize` must be implemented.")}static _rescale(t,e,r,i,a,o){o||=new Float32Array(t.length);for(let u=0,c=t.length;u<c;u+=2)o[u]=e+t[u]*i,o[u+1]=r+t[u+1]*a;return o}static _rescaleAndSwap(t,e,r,i,a,o){o||=new Float32Array(t.length);for(let u=0,c=t.length;u<c;u+=2)o[u]=e+t[u+1]*i,o[u+1]=r+t[u]*a;return o}static _translate(t,e,r,i){i||=new Float32Array(t.length);for(let a=0,o=t.length;a<o;a+=2)i[a]=e+t[a],i[a+1]=r+t[a+1];return i}static svgRound(t){return Math.round(t*1e4)}static _normalizePoint(t,e,r,i,a){switch(a){case 90:return[1-e/r,t/i];case 180:return[1-t/r,1-e/i];case 270:return[e/r,1-t/i];default:return[t/r,e/i]}}static _normalizePagePoint(t,e,r){switch(r){case 90:return[1-e,t];case 180:return[1-t,1-e];case 270:return[e,1-t];default:return[t,e]}}static createBezierPoints(t,e,r,i,a,o){return[(t+5*r)/6,(e+5*i)/6,(5*r+a)/6,(5*i+o)/6,(r+a)/2,(i+o)/2]}}class dr{#t;#e=[];#n;#r;#i=[];#s=new Float32Array(18);#a;#o;#c;#u;#d;#l;#p=[];static#m=8;static#f=2;static#h=dr.#m+dr.#f;constructor({x:t,y:e},r,i,a,o,u=0){this.#t=r,this.#l=a*i,this.#r=o,this.#s.set([NaN,NaN,NaN,NaN,t,e],6),this.#n=u,this.#u=dr.#m*i,this.#c=dr.#h*i,this.#d=i,this.#p.push(t,e)}isEmpty(){return isNaN(this.#s[8])}#g(){const t=this.#s.subarray(4,6),e=this.#s.subarray(16,18),[r,i,a,o]=this.#t;return[(this.#a+(t[0]-e[0])/2-r)/a,(this.#o+(t[1]-e[1])/2-i)/o,(this.#a+(e[0]-t[0])/2-r)/a,(this.#o+(e[1]-t[1])/2-i)/o]}add({x:t,y:e}){this.#a=t,this.#o=e;const[r,i,a,o]=this.#t;let[u,c,d,p]=this.#s.subarray(8,12);const g=t-d,v=e-p,w=Math.hypot(g,v);if(w<this.#c)return!1;const S=w-this.#u,A=S/w,E=A*g,x=A*v;let R=u,C=c;u=d,c=p,d+=E,p+=x,this.#p?.push(t,e);const P=-x/S,T=E/S,I=P*this.#l,M=T*this.#l;return this.#s.set(this.#s.subarray(2,8),0),this.#s.set([d+I,p+M],4),this.#s.set(this.#s.subarray(14,18),12),this.#s.set([d-I,p-M],16),isNaN(this.#s[6])?(this.#i.length===0&&(this.#s.set([u+I,c+M],2),this.#i.push(NaN,NaN,NaN,NaN,(u+I-r)/a,(c+M-i)/o),this.#s.set([u-I,c-M],14),this.#e.push(NaN,NaN,NaN,NaN,(u-I-r)/a,(c-M-i)/o)),this.#s.set([R,C,u,c,d,p],6),!this.isEmpty()):(this.#s.set([R,C,u,c,d,p],6),Math.abs(Math.atan2(C-c,R-u)-Math.atan2(x,E))<Math.PI/2?([u,c,d,p]=this.#s.subarray(2,6),this.#i.push(NaN,NaN,NaN,NaN,((u+d)/2-r)/a,((c+p)/2-i)/o),[u,c,R,C]=this.#s.subarray(14,18),this.#e.push(NaN,NaN,NaN,NaN,((R+u)/2-r)/a,((C+c)/2-i)/o),!0):([R,C,u,c,d,p]=this.#s.subarray(0,6),this.#i.push(((R+5*u)/6-r)/a,((C+5*c)/6-i)/o,((5*u+d)/6-r)/a,((5*c+p)/6-i)/o,((u+d)/2-r)/a,((c+p)/2-i)/o),[d,p,u,c,R,C]=this.#s.subarray(12,18),this.#e.push(((R+5*u)/6-r)/a,((C+5*c)/6-i)/o,((5*u+d)/6-r)/a,((5*c+p)/6-i)/o,((u+d)/2-r)/a,((c+p)/2-i)/o),!0))}toSVGPath(){if(this.isEmpty())return"";const t=this.#i,e=this.#e;if(isNaN(this.#s[6])&&!this.isEmpty())return this.#w();const r=[];r.push(`M${t[4]} ${t[5]}`);for(let i=6;i<t.length;i+=6)isNaN(t[i])?r.push(`L${t[i+4]} ${t[i+5]}`):r.push(`C${t[i]} ${t[i+1]} ${t[i+2]} ${t[i+3]} ${t[i+4]} ${t[i+5]}`);this.#S(r);for(let i=e.length-6;i>=6;i-=6)isNaN(e[i])?r.push(`L${e[i+4]} ${e[i+5]}`):r.push(`C${e[i]} ${e[i+1]} ${e[i+2]} ${e[i+3]} ${e[i+4]} ${e[i+5]}`);return this.#v(r),r.join(" ")}#w(){const[t,e,r,i]=this.#t,[a,o,u,c]=this.#g();return`M${(this.#s[2]-t)/r} ${(this.#s[3]-e)/i} L${(this.#s[4]-t)/r} ${(this.#s[5]-e)/i} L${a} ${o} L${u} ${c} L${(this.#s[16]-t)/r} ${(this.#s[17]-e)/i} L${(this.#s[14]-t)/r} ${(this.#s[15]-e)/i} Z`}#v(t){const e=this.#e;t.push(`L${e[4]} ${e[5]} Z`)}#S(t){const[e,r,i,a]=this.#t,o=this.#s.subarray(4,6),u=this.#s.subarray(16,18),[c,d,p,g]=this.#g();t.push(`L${(o[0]-e)/i} ${(o[1]-r)/a} L${c} ${d} L${p} ${g} L${(u[0]-e)/i} ${(u[1]-r)/a}`)}newFreeDrawOutline(t,e,r,i,a,o){return new wf(t,e,r,i,a,o)}getOutlines(){const t=this.#i,e=this.#e,r=this.#s,[i,a,o,u]=this.#t,c=new Float32Array((this.#p?.length??0)+2);for(let g=0,v=c.length-2;g<v;g+=2)c[g]=(this.#p[g]-i)/o,c[g+1]=(this.#p[g+1]-a)/u;if(c[c.length-2]=(this.#a-i)/o,c[c.length-1]=(this.#o-a)/u,isNaN(r[6])&&!this.isEmpty())return this.#E(c);const d=new Float32Array(this.#i.length+24+this.#e.length);let p=t.length;for(let g=0;g<p;g+=2){if(isNaN(t[g])){d[g]=d[g+1]=NaN;continue}d[g]=t[g],d[g+1]=t[g+1]}p=this.#b(d,p);for(let g=e.length-6;g>=6;g-=6)for(let v=0;v<6;v+=2){if(isNaN(e[g+v])){d[p]=d[p+1]=NaN,p+=2;continue}d[p]=e[g+v],d[p+1]=e[g+v+1],p+=2}return this.#y(d,p),this.newFreeDrawOutline(d,c,this.#t,this.#d,this.#n,this.#r)}#E(t){const e=this.#s,[r,i,a,o]=this.#t,[u,c,d,p]=this.#g(),g=new Float32Array(36);return g.set([NaN,NaN,NaN,NaN,(e[2]-r)/a,(e[3]-i)/o,NaN,NaN,NaN,NaN,(e[4]-r)/a,(e[5]-i)/o,NaN,NaN,NaN,NaN,u,c,NaN,NaN,NaN,NaN,d,p,NaN,NaN,NaN,NaN,(e[16]-r)/a,(e[17]-i)/o,NaN,NaN,NaN,NaN,(e[14]-r)/a,(e[15]-i)/o],0),this.newFreeDrawOutline(g,t,this.#t,this.#d,this.#n,this.#r)}#y(t,e){const r=this.#e;return t.set([NaN,NaN,NaN,NaN,r[4],r[5]],e),e+=6}#b(t,e){const r=this.#s.subarray(4,6),i=this.#s.subarray(16,18),[a,o,u,c]=this.#t,[d,p,g,v]=this.#g();return t.set([NaN,NaN,NaN,NaN,(r[0]-a)/u,(r[1]-o)/c,NaN,NaN,NaN,NaN,d,p,NaN,NaN,NaN,NaN,g,v,NaN,NaN,NaN,NaN,(i[0]-a)/u,(i[1]-o)/c],e),e+=24}}class wf extends lt{#t;#e=new Float32Array(4);#n;#r;#i;#s;#a;constructor(t,e,r,i,a,o){super(),this.#a=t,this.#i=e,this.#t=r,this.#s=i,this.#n=a,this.#r=o,this.lastPoint=[NaN,NaN],this.#o(o);const[u,c,d,p]=this.#e;for(let g=0,v=t.length;g<v;g+=2)t[g]=(t[g]-u)/d,t[g+1]=(t[g+1]-c)/p;for(let g=0,v=e.length;g<v;g+=2)e[g]=(e[g]-u)/d,e[g+1]=(e[g+1]-c)/p}toSVGPath(){const t=[`M${this.#a[4]} ${this.#a[5]}`];for(let e=6,r=this.#a.length;e<r;e+=6){if(isNaN(this.#a[e])){t.push(`L${this.#a[e+4]} ${this.#a[e+5]}`);continue}t.push(`C${this.#a[e]} ${this.#a[e+1]} ${this.#a[e+2]} ${this.#a[e+3]} ${this.#a[e+4]} ${this.#a[e+5]}`)}return t.push("Z"),t.join(" ")}serialize([t,e,r,i],a){const o=r-t,u=i-e;let c,d;switch(a){case 0:c=lt._rescale(this.#a,t,i,o,-u),d=lt._rescale(this.#i,t,i,o,-u);break;case 90:c=lt._rescaleAndSwap(this.#a,t,e,o,u),d=lt._rescaleAndSwap(this.#i,t,e,o,u);break;case 180:c=lt._rescale(this.#a,r,e,-o,u),d=lt._rescale(this.#i,r,e,-o,u);break;case 270:c=lt._rescaleAndSwap(this.#a,r,i,-o,-u),d=lt._rescaleAndSwap(this.#i,r,i,-o,-u);break}return{outline:Array.from(c),points:[Array.from(d)]}}#o(t){const e=this.#a;let r=e[4],i=e[5];const a=[r,i,r,i];let o=r,u=i;const c=t?Math.max:Math.min;for(let p=6,g=e.length;p<g;p+=6){const v=e[p+4],w=e[p+5];if(isNaN(e[p]))pt.pointBoundingBox(v,w,a),u<w?(o=v,u=w):u===w&&(o=c(o,v));else{const S=[1/0,1/0,-1/0,-1/0];pt.bezierBoundingBox(r,i,...e.slice(p,p+6),S),pt.rectBoundingBox(...S,a),u<S[3]?(o=S[2],u=S[3]):u===S[3]&&(o=c(o,S[2]))}r=v,i=w}const d=this.#e;d[0]=a[0]-this.#n,d[1]=a[1]-this.#n,d[2]=a[2]-a[0]+2*this.#n,d[3]=a[3]-a[1]+2*this.#n,this.lastPoint=[o,u]}get box(){return this.#e}newOutliner(t,e,r,i,a,o=0){return new dr(t,e,r,i,a,o)}getNewOutline(t,e){const[r,i,a,o]=this.#e,[u,c,d,p]=this.#t,g=a*d,v=o*p,w=r*d+u,S=i*p+c,A=this.newOutliner({x:this.#i[0]*g+w,y:this.#i[1]*v+S},this.#t,this.#s,t,this.#r,e??this.#n);for(let E=2;E<this.#i.length;E+=2)A.add({x:this.#i[E]*g+w,y:this.#i[E+1]*v+S});return A.getOutlines()}}class Ql{#t;#e;#n=[];#r=[];constructor(t,e=0,r=0,i=!0){const a=[1/0,1/0,-1/0,-1/0],o=10**-4;for(const{x:w,y:S,width:A,height:E}of t){const x=Math.floor((w-e)/o)*o,R=Math.ceil((w+A+e)/o)*o,C=Math.floor((S-e)/o)*o,P=Math.ceil((S+E+e)/o)*o,T=[x,C,P,!0],I=[R,C,P,!1];this.#n.push(T,I),pt.rectBoundingBox(x,C,R,P,a)}const u=a[2]-a[0]+2*r,c=a[3]-a[1]+2*r,d=a[0]-r,p=a[1]-r,g=this.#n.at(i?-1:-2),v=[g[0],g[2]];for(const w of this.#n){const[S,A,E]=w;w[0]=(S-d)/u,w[1]=(A-p)/c,w[2]=(E-p)/c}this.#t=new Float32Array([d,p,u,c]),this.#e=v}getOutlines(){this.#n.sort((e,r)=>e[0]-r[0]||e[1]-r[1]||e[2]-r[2]);const t=[];for(const e of this.#n)e[3]?(t.push(...this.#c(e)),this.#a(e)):(this.#o(e),t.push(...this.#c(e)));return this.#i(t)}#i(t){const e=[],r=new Set;for(const o of t){const[u,c,d]=o;e.push([u,c,o],[u,d,o])}e.sort((o,u)=>o[1]-u[1]||o[0]-u[0]);for(let o=0,u=e.length;o<u;o+=2){const c=e[o][2],d=e[o+1][2];c.push(d),d.push(c),r.add(c),r.add(d)}const i=[];let a;for(;r.size>0;){const o=r.values().next().value;let[u,c,d,p,g]=o;r.delete(o);let v=u,w=c;for(a=[u,d],i.push(a);;){let S;if(r.has(p))S=p;else if(r.has(g))S=g;else break;r.delete(S),[u,c,d,p,g]=S,v!==u&&(a.push(v,w,u,w===c?c:d),v=u),w=w===c?d:c}a.push(v,w)}return new fv(i,this.#t,this.#e)}#s(t){const e=this.#r;let r=0,i=e.length-1;for(;r<=i;){const a=r+i>>1,o=e[a][0];if(o===t)return a;o<t?r=a+1:i=a-1}return i+1}#a([,t,e]){const r=this.#s(t);this.#r.splice(r,0,[t,e])}#o([,t,e]){const r=this.#s(t);for(let i=r;i<this.#r.length;i++){const[a,o]=this.#r[i];if(a!==t)break;if(a===t&&o===e){this.#r.splice(i,1);return}}for(let i=r-1;i>=0;i--){const[a,o]=this.#r[i];if(a!==t)break;if(a===t&&o===e){this.#r.splice(i,1);return}}}#c(t){const[e,r,i]=t,a=[[e,r,i]],o=this.#s(i);for(let u=0;u<o;u++){const[c,d]=this.#r[u];for(let p=0,g=a.length;p<g;p++){const[,v,w]=a[p];if(!(d<=v||w<=c)){if(v>=c){if(w>d)a[p][1]=d;else{if(g===1)return[];a.splice(p,1),p--,g--}continue}a[p][2]=c,w>d&&a.push([e,d,w])}}}return a}}class fv extends lt{#t;#e;constructor(t,e,r){super(),this.#e=t,this.#t=e,this.lastPoint=r}toSVGPath(){const t=[];for(const e of this.#e){let[r,i]=e;t.push(`M${r} ${i}`);for(let a=2;a<e.length;a+=2){const o=e[a],u=e[a+1];o===r?(t.push(`V${u}`),i=u):u===i&&(t.push(`H${o}`),r=o)}t.push("Z")}return t.join(" ")}serialize([t,e,r,i],a){const o=[],u=r-t,c=i-e;for(const d of this.#e){const p=new Array(d.length);for(let g=0;g<d.length;g+=2)p[g]=t+d[g]*u,p[g+1]=i-d[g+1]*c;o.push(p)}return o}get box(){return this.#t}get classNamesForOutlining(){return["highlightOutline"]}}class Jl extends dr{newFreeDrawOutline(t,e,r,i,a,o){return new pv(t,e,r,i,a,o)}}class pv extends wf{newOutliner(t,e,r,i,a,o=0){return new Jl(t,e,r,i,a,o)}}class Kt extends yt{#t=null;#e=0;#n;#r=null;#i=null;#s=null;#a=null;#o=0;#c=null;#u=null;#d=null;#l=!1;#p=null;#m;#f=null;#h="";#g;#w="";static _defaultColor=null;static _defaultOpacity=1;static _defaultThickness=12;static _type="highlight";static _editorType=xt.HIGHLIGHT;static _freeHighlightId=-1;static _freeHighlight=null;static _freeHighlightClipId="";static get _keyboardManager(){const t=Kt.prototype;return Tt(this,"_keyboardManager",new ni([[["ArrowLeft","mac+ArrowLeft"],t._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],t._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],t._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],t._moveCaret,{args:[3]}]]))}constructor(t){super({...t,name:"highlightEditor"}),this.color=t.color||Kt._defaultColor,this.#g=t.thickness||Kt._defaultThickness,this.#m=t.opacity||Kt._defaultOpacity,this.#n=t.boxes||null,this.#w=t.methodOfCreation||"",this.#h=t.text||"",this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",t.highlightId>-1?(this.#l=!0,this.#S(t),this.#x()):this.#n&&(this.#t=t.anchorNode,this.#e=t.anchorOffset,this.#a=t.focusNode,this.#o=t.focusOffset,this.#v(),this.#x(),this.rotate(this.rotation)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-highlight-added-alert")}get telemetryInitialData(){return{action:"added",type:this.#l?"free_highlight":"highlight",color:this._uiManager.getNonHCMColorName(this.color),thickness:this.#g,methodOfCreation:this.#w}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.getNonHCMColorName(this.color)}}get commentColor(){return this.color}static computeTelemetryFinalData(t){return{numberOfColors:t.get("color").size}}#v(){const t=new Ql(this.#n,.001);this.#u=t.getOutlines(),[this.x,this.y,this.width,this.height]=this.#u.box;const e=new Ql(this.#n,.0025,.001,this._uiManager.direction==="ltr");this.#s=e.getOutlines();const{lastPoint:r}=this.#s;this.#p=[(r[0]-this.x)/this.width,(r[1]-this.y)/this.height]}#S({highlightOutlines:t,highlightId:e,clipPathId:r}){this.#u=t;const i=1.5;if(this.#s=t.getNewOutline(this.#g/2+i,.0025),e>=0)this.#d=e,this.#r=r,this.parent.drawLayer.finalizeDraw(e,{bbox:t.box,path:{d:t.toSVGPath()}}),this.#f=this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:this.#s.box,path:{d:this.#s.toSVGPath()}},!0);else if(this.parent){const p=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(this.#d,{bbox:Kt.#k(this.#u.box,(p-this.rotation+360)%360),path:{d:t.toSVGPath()}}),this.parent.drawLayer.updateProperties(this.#f,{bbox:Kt.#k(this.#s.box,p),path:{d:this.#s.toSVGPath()}})}const[a,o,u,c]=t.box;switch(this.rotation){case 0:this.x=a,this.y=o,this.width=u,this.height=c;break;case 90:{const[p,g]=this.parentDimensions;this.x=o,this.y=1-a,this.width=u*g/p,this.height=c*p/g;break}case 180:this.x=1-a,this.y=1-o,this.width=u,this.height=c;break;case 270:{const[p,g]=this.parentDimensions;this.x=1-o,this.y=a,this.width=u*g/p,this.height=c*p/g;break}}const{lastPoint:d}=this.#s;this.#p=[(d[0]-a)/u,(d[1]-o)/c]}static initialize(t,e){yt.initialize(t,e),Kt._defaultColor||=e.highlightColors?.values().next().value||"#fff066"}static updateDefaultParams(t,e){switch(t){case Rt.HIGHLIGHT_COLOR:Kt._defaultColor=e;break;case Rt.HIGHLIGHT_THICKNESS:Kt._defaultThickness=e;break}}translateInPage(t,e){}get toolbarPosition(){return this.#p}updateParams(t,e){switch(t){case Rt.HIGHLIGHT_COLOR:this.#E(e);break;case Rt.HIGHLIGHT_THICKNESS:this.#y(e);break}}static get defaultPropertiesToUpdate(){return[[Rt.HIGHLIGHT_COLOR,Kt._defaultColor],[Rt.HIGHLIGHT_THICKNESS,Kt._defaultThickness]]}get propertiesToUpdate(){return[[Rt.HIGHLIGHT_COLOR,this.color||Kt._defaultColor],[Rt.HIGHLIGHT_THICKNESS,this.#g||Kt._defaultThickness],[Rt.HIGHLIGHT_FREE,this.#l]]}#E(t){const e=(a,o)=>{this.color=a,this.#m=o,this.parent?.drawLayer.updateProperties(this.#d,{root:{fill:a,"fill-opacity":o}}),this.#i?.updateColor(a)},r=this.color,i=this.#m;this.addCommands({cmd:e.bind(this,t,Kt._defaultOpacity),undo:e.bind(this,r,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Rt.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.getNonHCMColorName(t)},!0)}#y(t){const e=this.#g,r=i=>{this.#g=i,this.#b(i)};this.addCommands({cmd:r.bind(this,t),undo:r.bind(this,e),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Rt.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:t},!0)}get toolbarButtons(){return this._uiManager.highlightColors?[["colorPicker",this.#i=new Ye({editor:this})]]:super.toolbarButtons}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(this.#T())}getBaseTranslation(){return[0,0]}getRect(t,e){return super.getRect(t,e,this.#T())}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),t&&this.div.focus()}remove(){this.#I(),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#x(),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){let e=!1;this.parent&&!t?this.#I():t&&(this.#x(t),e=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(t),this.show(this._isVisible),e&&this.select()}#b(t){if(!this.#l)return;this.#S({highlightOutlines:this.#u.getNewOutline(t/2)}),this.fixAndSetPosition();const[e,r]=this.parentDimensions;this.setDims(this.width*e,this.height*r)}#I(){this.#d===null||!this.parent||(this.parent.drawLayer.remove(this.#d),this.#d=null,this.parent.drawLayer.remove(this.#f),this.#f=null)}#x(t=this.parent){this.#d===null&&({id:this.#d,clipPathId:this.#r}=t.drawLayer.draw({bbox:this.#u.box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":this.#m},rootClass:{highlight:!0,free:this.#l},path:{d:this.#u.toSVGPath()}},!1,!0),this.#f=t.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:this.#l},bbox:this.#s.box,path:{d:this.#s.toSVGPath()}},this.#l),this.#c&&(this.#c.style.clipPath=this.#r))}static#k([t,e,r,i],a){switch(a){case 90:return[1-e-i,t,i,r];case 180:return[1-t-r,1-e-i,r,i];case 270:return[e,1-t-r,i,r]}return[t,e,r,i]}rotate(t){const{drawLayer:e}=this.parent;let r;this.#l?(t=(t-this.rotation+360)%360,r=Kt.#k(this.#u.box,t)):r=Kt.#k([this.x,this.y,this.width,this.height],t),e.updateProperties(this.#d,{bbox:r,root:{"data-main-rotation":t}}),e.updateProperties(this.#f,{bbox:Kt.#k(this.#s.box,t),root:{"data-main-rotation":t}})}render(){if(this.div)return this.div;const t=super.render();this.#h&&(t.setAttribute("aria-label",this.#h),t.setAttribute("role","mark")),this.#l?t.classList.add("free"):this.div.addEventListener("keydown",this.#P.bind(this),{signal:this._uiManager._signal});const e=this.#c=document.createElement("div");t.append(e),e.setAttribute("aria-hidden","true"),e.className="internal",e.style.clipPath=this.#r;const[r,i]=this.parentDimensions;return this.setDims(this.width*r,this.height*i),Gd(this,this.#c,["pointerover","pointerleave"]),this.enableEditing(),t}pointerover(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#f,{rootClass:{hovered:!0}})}pointerleave(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#f,{rootClass:{hovered:!1}})}#P(t){Kt._keyboardManager.exec(this,t)}_moveCaret(t){switch(this.parent.unselect(this),t){case 0:case 2:this.#R(!0);break;case 1:case 3:this.#R(!1);break}}#R(t){if(!this.#t)return;const e=window.getSelection();t?e.setPosition(this.#t,this.#e):e.setPosition(this.#a,this.#o)}select(){super.select(),this.#f&&this.parent?.drawLayer.updateProperties(this.#f,{rootClass:{hovered:!1,selected:!0}})}unselect(){super.unselect(),this.#f&&(this.parent?.drawLayer.updateProperties(this.#f,{rootClass:{selected:!1}}),this.#l||this.#R(!1))}get _mustFixPosition(){return!this.#l}show(t=this._isVisible){super.show(t),this.parent&&(this.parent.drawLayer.updateProperties(this.#d,{rootClass:{hidden:!t}}),this.parent.drawLayer.updateProperties(this.#f,{rootClass:{hidden:!t}}))}#T(){return this.#l?this.rotation:0}#O(){if(this.#l)return null;const[t,e]=this.pageDimensions,[r,i]=this.pageTranslation,a=this.#n,o=new Float32Array(a.length*8);let u=0;for(const{x:c,y:d,width:p,height:g}of a){const v=c*t+r,w=(1-d)*e+i;o[u]=o[u+4]=v,o[u+1]=o[u+3]=w,o[u+2]=o[u+6]=v+p*t,o[u+5]=o[u+7]=w-g*e,u+=8}return o}#_(t){return this.#u.serialize(t,this.#T())}static startHighlighting(t,e,{target:r,x:i,y:a}){const{x:o,y:u,width:c,height:d}=r.getBoundingClientRect(),p=new AbortController,g=t.combinedSignal(p),v=w=>{p.abort(),this.#U(t,w)};window.addEventListener("blur",v,{signal:g}),window.addEventListener("pointerup",v,{signal:g}),window.addEventListener("pointerdown",te,{capture:!0,passive:!1,signal:g}),window.addEventListener("contextmenu",Ke,{signal:g}),r.addEventListener("pointermove",this.#L.bind(this,t),{signal:g}),this._freeHighlight=new Jl({x:i,y:a},[o,u,c,d],t.scale,this._defaultThickness/2,e,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=t.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static#L(t,e){this._freeHighlight.add(e)&&t.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})}static#U(t,e){this._freeHighlight.isEmpty()?t.drawLayer.remove(this._freeHighlightId):t.createAndAddNewEditor(e,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""}static async deserialize(t,e,r){let i=null;if(t instanceof vf){const{data:{quadPoints:S,rect:A,rotation:E,id:x,color:R,opacity:C,popupRef:P,contentsObj:T},parent:{page:{pageNumber:I}}}=t;i=t={annotationType:xt.HIGHLIGHT,color:Array.from(R),opacity:C,quadPoints:S,boxes:null,pageIndex:I-1,rect:A.slice(0),rotation:E,annotationElementId:x,id:x,deleted:!1,popupRef:P,comment:T?.str||null}}else if(t instanceof hu){const{data:{inkLists:S,rect:A,rotation:E,id:x,color:R,borderStyle:{rawWidth:C},popupRef:P,contentsObj:T},parent:{page:{pageNumber:I}}}=t;i=t={annotationType:xt.HIGHLIGHT,color:Array.from(R),thickness:C,inkLists:S,boxes:null,pageIndex:I-1,rect:A.slice(0),rotation:E,annotationElementId:x,id:x,deleted:!1,popupRef:P,comment:T?.str||null}}const{color:a,quadPoints:o,inkLists:u,opacity:c}=t,d=await super.deserialize(t,e,r);d.color=pt.makeHexColor(...a),d.#m=c||1,u&&(d.#g=t.thickness),d._initialData=i,t.comment&&d.setCommentData(t.comment);const[p,g]=d.pageDimensions,[v,w]=d.pageTranslation;if(o){const S=d.#n=[];for(let A=0;A<o.length;A+=8)S.push({x:(o[A]-v)/p,y:1-(o[A+1]-w)/g,width:(o[A+2]-o[A])/p,height:(o[A+1]-o[A+5])/g});d.#v(),d.#x(),d.rotate(d.rotation)}else if(u){d.#l=!0;const S=u[0],A={x:S[0]-v,y:g-(S[1]-w)},E=new Jl(A,[0,0,p,g],1,d.#g/2,!0,.001);for(let C=0,P=S.length;C<P;C+=2)A.x=S[C]-v,A.y=g-(S[C+1]-w),E.add(A);const{id:x,clipPathId:R}=e.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:d.color,"fill-opacity":d._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:E.toSVGPath()}},!0,!0);d.#S({highlightOutlines:E.getOutlines(),highlightId:x,clipPathId:R}),d.#x(),d.rotate(d.parentRotation)}return d}serialize(t=!1){if(this.isEmpty()||t)return null;if(this.deleted)return this.serializeDeleted();const e=this.getRect(0,0),r=yt._colorManager.convert(this._uiManager.getNonHCMColor(this.color)),i={annotationType:xt.HIGHLIGHT,color:r,opacity:this.#m,thickness:this.#g,quadPoints:this.#O(),outlines:this.#_(e),pageIndex:this.pageIndex,rect:e,rotation:this.#T(),structTreeParentId:this._structTreeParentId};return this.addComment(i),this.annotationElementId&&!this.#C(i)?null:(i.id=this.annotationElementId,i)}#C(t){const{color:e}=this._initialData;return this.hasEditedComment||t.color.some((r,i)=>r!==e[i])}renderAnnotationElement(t){const e={rect:this.getRect(0,0)};return this.hasEditedComment&&(e.popup=this.comment),t.updateEdited(e),null}static canCreateNewEmptyEditor(){return!1}}class Af{#t=Object.create(null);updateProperty(t,e){this[t]=e,this.updateSVGProperty(t,e)}updateProperties(t){if(t)for(const[e,r]of Object.entries(t))e.startsWith("_")||this.updateProperty(e,r)}updateSVGProperty(t,e){this.#t[t]=e}toSVGProperties(){const t=this.#t;return this.#t=Object.create(null),{root:t}}reset(){this.#t=Object.create(null)}updateAll(t=this){this.updateProperties(t)}clone(){Nt("Not implemented")}}class At extends yt{#t=null;#e;_colorPicker=null;_drawId=null;static _currentDrawId=-1;static _currentParent=null;static#n=null;static#r=null;static#i=null;static#s=NaN;static#a=null;static#o=null;static#c=NaN;static _INNER_MARGIN=3;constructor(t){super(t),this.#e=t.mustBeCommitted||!1,this._addOutlines(t)}_addOutlines(t){t.drawOutlines&&(this.#u(t),this.#p())}#u({drawOutlines:t,drawId:e,drawingOptions:r}){this.#t=t,this._drawingOptions||=r,this.annotationElementId||this._uiManager.a11yAlert(`pdfjs-editor-${this.editorType}-added-alert`),e>=0?(this._drawId=e,this.parent.drawLayer.finalizeDraw(e,t.defaultProperties)):this._drawId=this.#d(t,this.parent),this.#h(t.box)}#d(t,e){const{id:r}=e.drawLayer.draw(At._mergeSVGProperties(this._drawingOptions.toSVGProperties(),t.defaultSVGProperties),!1,!1);return r}static _mergeSVGProperties(t,e){const r=new Set(Object.keys(t));for(const[i,a]of Object.entries(e))r.has(i)?Object.assign(t[i],a):t[i]=a;return t}static getDefaultDrawingOptions(t){Nt("Not implemented")}static get typesMap(){Nt("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(t,e){const r=this.typesMap.get(t);r&&this._defaultDrawingOptions.updateProperty(r,e),this._currentParent&&(At.#n.updateProperty(r,e),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(t,e){const r=this.constructor.typesMap.get(t);r&&this._updateProperty(t,r,e)}static get defaultPropertiesToUpdate(){const t=[],e=this._defaultDrawingOptions;for(const[r,i]of this.typesMap)t.push([r,e[i]]);return t}get propertiesToUpdate(){const t=[],{_drawingOptions:e}=this;for(const[r,i]of this.constructor.typesMap)t.push([r,e[i]]);return t}_updateProperty(t,e,r){const i=this._drawingOptions,a=i[e],o=u=>{i.updateProperty(e,u);const c=this.#t.updateProperty(e,u);c&&this.#h(c),this.parent?.drawLayer.updateProperties(this._drawId,i.toSVGProperties()),t===this.colorType&&this._colorPicker?.update(u)};this.addCommands({cmd:o.bind(this,r),undo:o.bind(this,a),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:t,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){this.parent?.drawLayer.updateProperties(this._drawId,At._mergeSVGProperties(this.#t.getPathResizingSVGProperties(this.#f()),{bbox:this.#g()}))}_onResized(){this.parent?.drawLayer.updateProperties(this._drawId,At._mergeSVGProperties(this.#t.getPathResizedSVGProperties(this.#f()),{bbox:this.#g()}))}_onTranslating(t,e){this.parent?.drawLayer.updateProperties(this._drawId,{bbox:this.#g()})}_onTranslated(){this.parent?.drawLayer.updateProperties(this._drawId,At._mergeSVGProperties(this.#t.getPathTranslatedSVGProperties(this.#f(),this.parentDimensions),{bbox:this.#g()}))}_onStartDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,this.#e&&(this.#e=!1,this.commit(),this.parent.setSelected(this),t&&this.isOnScreen&&this.div.focus())}remove(){this.#l(),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#p(),this.#h(this.#t.box),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){let e=!1;this.parent&&!t?(this._uiManager.removeShouldRescale(this),this.#l()):t&&(this._uiManager.addShouldRescale(this),this.#p(t),e=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(t),e&&this.select()}#l(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())}#p(t=this.parent){if(!(this._drawId!==null&&this.parent===t)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,t.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=this.#d(this.#t,t)}}#m([t,e,r,i]){const{parentDimensions:[a,o],rotation:u}=this;switch(u){case 90:return[e,1-t,r*(o/a),i*(a/o)];case 180:return[1-t,1-e,r,i];case 270:return[1-e,t,r*(o/a),i*(a/o)];default:return[t,e,r,i]}}#f(){const{x:t,y:e,width:r,height:i,parentDimensions:[a,o],rotation:u}=this;switch(u){case 90:return[1-e,t,r*(a/o),i*(o/a)];case 180:return[1-t,1-e,r,i];case 270:return[e,1-t,r*(a/o),i*(o/a)];default:return[t,e,r,i]}}#h(t){if([this.x,this.y,this.width,this.height]=this.#m(t),this.div){this.fixAndSetPosition();const[e,r]=this.parentDimensions;this.setDims(this.width*e,this.height*r)}this._onResized()}#g(){const{x:t,y:e,width:r,height:i,rotation:a,parentRotation:o,parentDimensions:[u,c]}=this;switch((a*4+o)/90){case 1:return[1-e-i,t,i,r];case 2:return[1-t-r,1-e-i,r,i];case 3:return[e,1-t-r,i,r];case 4:return[t,e-r*(u/c),i*(c/u),r*(u/c)];case 5:return[1-e,t,r*(u/c),i*(c/u)];case 6:return[1-t-i*(c/u),1-e,i*(c/u),r*(u/c)];case 7:return[e-r*(u/c),1-t-i*(c/u),r*(u/c),i*(c/u)];case 8:return[t-r,e-i,r,i];case 9:return[1-e,t-r,i,r];case 10:return[1-t,1-e,r,i];case 11:return[e-i,1-t,i,r];case 12:return[t-i*(c/u),e,i*(c/u),r*(u/c)];case 13:return[1-e-r*(u/c),t-i*(c/u),r*(u/c),i*(c/u)];case 14:return[1-t,1-e-r*(u/c),i*(c/u),r*(u/c)];case 15:return[e,1-t,r*(u/c),i*(c/u)];default:return[t,e,r,i]}}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,At._mergeSVGProperties({bbox:this.#g()},this.#t.updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&this.#h(this.#t.updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let t,e;this._isCopy&&(t=this.x,e=this.y);const r=super.render();r.classList.add("draw");const i=document.createElement("div");r.append(i),i.setAttribute("aria-hidden","true"),i.className="internal";const[a,o]=this.parentDimensions;return this.setDims(this.width*a,this.height*o),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(t,e),r}static createDrawerInstance(t,e,r,i,a){Nt("Not implemented")}static startDrawing(t,e,r,i){const{target:a,offsetX:o,offsetY:u,pointerId:c,pointerType:d}=i;if(At.#a&&At.#a!==d)return;const{viewport:{rotation:p}}=t,{width:g,height:v}=a.getBoundingClientRect(),w=At.#r=new AbortController,S=t.combinedSignal(w);if(At.#s||=c,At.#a??=d,window.addEventListener("pointerup",A=>{At.#s===A.pointerId?this._endDraw(A):At.#o?.delete(A.pointerId)},{signal:S}),window.addEventListener("pointercancel",A=>{At.#s===A.pointerId?this._currentParent.endDrawingSession():At.#o?.delete(A.pointerId)},{signal:S}),window.addEventListener("pointerdown",A=>{At.#a===A.pointerType&&((At.#o||=new Set).add(A.pointerId),At.#n.isCancellable()&&(At.#n.removeLastElement(),At.#n.isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:S}),window.addEventListener("contextmenu",Ke,{signal:S}),a.addEventListener("pointermove",this._drawMove.bind(this),{signal:S}),a.addEventListener("touchmove",A=>{A.timeStamp===At.#c&&te(A)},{signal:S}),t.toggleDrawing(),e._editorUndoBar?.hide(),At.#n){t.drawLayer.updateProperties(this._currentDrawId,At.#n.startNew(o,u,g,v,p));return}e.updateUIForDefaultProperties(this),At.#n=this.createDrawerInstance(o,u,g,v,p),At.#i=this.getDefaultDrawingOptions(),this._currentParent=t,{id:this._currentDrawId}=t.drawLayer.draw(this._mergeSVGProperties(At.#i.toSVGProperties(),At.#n.defaultSVGProperties),!0,!1)}static _drawMove(t){if(At.#c=-1,!At.#n)return;const{offsetX:e,offsetY:r,pointerId:i}=t;if(At.#s===i){if(At.#o?.size>=1){this._endDraw(t);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,At.#n.add(e,r)),At.#c=t.timeStamp,te(t)}}static _cleanup(t){t&&(this._currentDrawId=-1,this._currentParent=null,At.#n=null,At.#i=null,At.#a=null,At.#c=NaN),At.#r&&(At.#r.abort(),At.#r=null,At.#s=NaN,At.#o=null)}static _endDraw(t){const e=this._currentParent;if(e){if(e.toggleDrawing(!0),this._cleanup(!1),t?.target===e.div&&e.drawLayer.updateProperties(this._currentDrawId,At.#n.end(t.offsetX,t.offsetY)),this.supportMultipleDrawings){const r=At.#n,i=this._currentDrawId,a=r.getLastElement();e.addCommands({cmd:()=>{e.drawLayer.updateProperties(i,r.setLastElement(a))},undo:()=>{e.drawLayer.updateProperties(i,r.removeLastElement())},mustExec:!1,type:Rt.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(t){const e=this._currentParent;if(!e)return null;if(e.toggleDrawing(!0),e.cleanUndoStack(Rt.DRAW_STEP),!At.#n.isEmpty()){const{pageDimensions:[r,i],scale:a}=e,o=e.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:At.#n.getOutlines(r*a,i*a,a,this._INNER_MARGIN),drawingOptions:At.#i,mustBeCommitted:!t});return this._cleanup(!0),o}return e.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(t){}static deserializeDraw(t,e,r,i,a,o){Nt("Not implemented")}static async deserialize(t,e,r){const{rawDims:{pageWidth:i,pageHeight:a,pageX:o,pageY:u}}=e.viewport,c=this.deserializeDraw(o,u,i,a,this._INNER_MARGIN,t),d=await super.deserialize(t,e,r);return d.createDrawingOptions(t),d.#u({drawOutlines:c}),d.#p(),d.onScaleChanging(),d.rotate(),d}serializeDraw(t){const[e,r]=this.pageTranslation,[i,a]=this.pageDimensions;return this.#t.serialize([e,r,i,a],t)}renderAnnotationElement(t){return t.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}}class gv{#t=new Float64Array(6);#e;#n;#r;#i;#s;#a="";#o=0;#c=new si;#u;#d;constructor(t,e,r,i,a,o){this.#u=r,this.#d=i,this.#r=a,this.#i=o,[t,e]=this.#l(t,e);const u=this.#e=[NaN,NaN,NaN,NaN,t,e];this.#s=[t,e],this.#n=[{line:u,points:this.#s}],this.#t.set(u,0)}updateProperty(t,e){t==="stroke-width"&&(this.#i=e)}#l(t,e){return lt._normalizePoint(t,e,this.#u,this.#d,this.#r)}isEmpty(){return!this.#n||this.#n.length===0}isCancellable(){return this.#s.length<=10}add(t,e){[t,e]=this.#l(t,e);const[r,i,a,o]=this.#t.subarray(2,6),u=t-a,c=e-o;return Math.hypot(this.#u*u,this.#d*c)<=2?null:(this.#s.push(t,e),isNaN(r)?(this.#t.set([a,o,t,e],2),this.#e.push(NaN,NaN,NaN,NaN,t,e),{path:{d:this.toSVGPath()}}):(isNaN(this.#t[0])&&this.#e.splice(6,6),this.#t.set([r,i,a,o,t,e],0),this.#e.push(...lt.createBezierPoints(r,i,a,o,t,e)),{path:{d:this.toSVGPath()}}))}end(t,e){const r=this.add(t,e);return r||(this.#s.length===2?{path:{d:this.toSVGPath()}}:null)}startNew(t,e,r,i,a){this.#u=r,this.#d=i,this.#r=a,[t,e]=this.#l(t,e);const o=this.#e=[NaN,NaN,NaN,NaN,t,e];this.#s=[t,e];const u=this.#n.at(-1);return u&&(u.line=new Float32Array(u.line),u.points=new Float32Array(u.points)),this.#n.push({line:o,points:this.#s}),this.#t.set(o,0),this.#o=0,this.toSVGPath(),null}getLastElement(){return this.#n.at(-1)}setLastElement(t){return this.#n?(this.#n.push(t),this.#e=t.line,this.#s=t.points,this.#o=0,{path:{d:this.toSVGPath()}}):this.#c.setLastElement(t)}removeLastElement(){if(!this.#n)return this.#c.removeLastElement();this.#n.pop(),this.#a="";for(let t=0,e=this.#n.length;t<e;t++){const{line:r,points:i}=this.#n[t];this.#e=r,this.#s=i,this.#o=0,this.toSVGPath()}return{path:{d:this.#a}}}toSVGPath(){const t=lt.svgRound(this.#e[4]),e=lt.svgRound(this.#e[5]);if(this.#s.length===2)return this.#a=`${this.#a} M ${t} ${e} Z`,this.#a;if(this.#s.length<=6){const i=this.#a.lastIndexOf("M");this.#a=`${this.#a.slice(0,i)} M ${t} ${e}`,this.#o=6}if(this.#s.length===4){const i=lt.svgRound(this.#e[10]),a=lt.svgRound(this.#e[11]);return this.#a=`${this.#a} L ${i} ${a}`,this.#o=12,this.#a}const r=[];this.#o===0&&(r.push(`M ${t} ${e}`),this.#o=6);for(let i=this.#o,a=this.#e.length;i<a;i+=6){const[o,u,c,d,p,g]=this.#e.slice(i,i+6).map(lt.svgRound);r.push(`C${o} ${u} ${c} ${d} ${p} ${g}`)}return this.#a+=r.join(" "),this.#o=this.#e.length,this.#a}getOutlines(t,e,r,i){const a=this.#n.at(-1);return a.line=new Float32Array(a.line),a.points=new Float32Array(a.points),this.#c.build(this.#n,t,e,r,this.#r,this.#i,i),this.#t=null,this.#e=null,this.#n=null,this.#a=null,this.#c}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}class si extends lt{#t;#e=0;#n;#r;#i;#s;#a;#o;#c;build(t,e,r,i,a,o,u){this.#i=e,this.#s=r,this.#a=i,this.#o=a,this.#c=o,this.#n=u??0,this.#r=t,this.#l()}get thickness(){return this.#c}setLastElement(t){return this.#r.push(t),{path:{d:this.toSVGPath()}}}removeLastElement(){return this.#r.pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const t=[];for(const{line:e}of this.#r){if(t.push(`M${lt.svgRound(e[4])} ${lt.svgRound(e[5])}`),e.length===6){t.push("Z");continue}if(e.length===12&&isNaN(e[6])){t.push(`L${lt.svgRound(e[10])} ${lt.svgRound(e[11])}`);continue}for(let r=6,i=e.length;r<i;r+=6){const[a,o,u,c,d,p]=e.subarray(r,r+6).map(lt.svgRound);t.push(`C${a} ${o} ${u} ${c} ${d} ${p}`)}}return t.join("")}serialize([t,e,r,i],a){const o=[],u=[],[c,d,p,g]=this.#d();let v,w,S,A,E,x,R,C,P;switch(this.#o){case 0:P=lt._rescale,v=t,w=e+i,S=r,A=-i,E=t+c*r,x=e+(1-d-g)*i,R=t+(c+p)*r,C=e+(1-d)*i;break;case 90:P=lt._rescaleAndSwap,v=t,w=e,S=r,A=i,E=t+d*r,x=e+c*i,R=t+(d+g)*r,C=e+(c+p)*i;break;case 180:P=lt._rescale,v=t+r,w=e,S=-r,A=i,E=t+(1-c-p)*r,x=e+d*i,R=t+(1-c)*r,C=e+(d+g)*i;break;case 270:P=lt._rescaleAndSwap,v=t+r,w=e+i,S=-r,A=-i,E=t+(1-d-g)*r,x=e+(1-c-p)*i,R=t+(1-d)*r,C=e+(1-c)*i;break}for(const{line:T,points:I}of this.#r)o.push(P(T,v,w,S,A,a?new Array(T.length):null)),u.push(P(I,v,w,S,A,a?new Array(I.length):null));return{lines:o,points:u,rect:[E,x,R,C]}}static deserialize(t,e,r,i,a,{paths:{lines:o,points:u},rotation:c,thickness:d}){const p=[];let g,v,w,S,A;switch(c){case 0:A=lt._rescale,g=-t/r,v=e/i+1,w=1/r,S=-1/i;break;case 90:A=lt._rescaleAndSwap,g=-e/i,v=-t/r,w=1/i,S=1/r;break;case 180:A=lt._rescale,g=t/r+1,v=-e/i,w=-1/r,S=1/i;break;case 270:A=lt._rescaleAndSwap,g=e/i+1,v=t/r+1,w=-1/i,S=-1/r;break}if(!o){o=[];for(const x of u){const R=x.length;if(R===2){o.push(new Float32Array([NaN,NaN,NaN,NaN,x[0],x[1]]));continue}if(R===4){o.push(new Float32Array([NaN,NaN,NaN,NaN,x[0],x[1],NaN,NaN,NaN,NaN,x[2],x[3]]));continue}const C=new Float32Array(3*(R-2));o.push(C);let[P,T,I,M]=x.subarray(0,4);C.set([NaN,NaN,NaN,NaN,P,T],0);for(let _=4;_<R;_+=2){const F=x[_],U=x[_+1];C.set(lt.createBezierPoints(P,T,I,M,F,U),(_-2)*3),[P,T,I,M]=[I,M,F,U]}}}for(let x=0,R=o.length;x<R;x++)p.push({line:A(o[x].map(C=>C??NaN),g,v,w,S),points:A(u[x].map(C=>C??NaN),g,v,w,S)});const E=new this.prototype.constructor;return E.build(p,r,i,1,c,d,a),E}#u(t=this.#c){const e=this.#n+t/2*this.#a;return this.#o%180===0?[e/this.#i,e/this.#s]:[e/this.#s,e/this.#i]}#d(){const[t,e,r,i]=this.#t,[a,o]=this.#u(0);return[t+a,e+o,r-2*a,i-2*o]}#l(){const t=this.#t=new Float32Array([1/0,1/0,-1/0,-1/0]);for(const{line:i}of this.#r){if(i.length<=12){for(let u=4,c=i.length;u<c;u+=6)pt.pointBoundingBox(i[u],i[u+1],t);continue}let a=i[4],o=i[5];for(let u=6,c=i.length;u<c;u+=6){const[d,p,g,v,w,S]=i.subarray(u,u+6);pt.bezierBoundingBox(a,o,d,p,g,v,w,S,t),a=w,o=S}}const[e,r]=this.#u();t[0]=be(t[0]-e,0,1),t[1]=be(t[1]-r,0,1),t[2]=be(t[2]+e,0,1),t[3]=be(t[3]+r,0,1),t[2]-=t[0],t[3]-=t[1]}get box(){return this.#t}updateProperty(t,e){return t==="stroke-width"?this.#p(e):null}#p(t){const[e,r]=this.#u();this.#c=t;const[i,a]=this.#u(),[o,u]=[i-e,a-r],c=this.#t;return c[0]-=o,c[1]-=u,c[2]+=2*o,c[3]+=2*u,c}updateParentDimensions([t,e],r){const[i,a]=this.#u();this.#i=t,this.#s=e,this.#a=r;const[o,u]=this.#u(),c=o-i,d=u-a,p=this.#t;return p[0]-=c,p[1]-=d,p[2]+=2*c,p[3]+=2*d,p}updateRotation(t){return this.#e=t,{path:{transform:this.rotationTransform}}}get viewBox(){return this.#t.map(lt.svgRound).join(" ")}get defaultProperties(){const[t,e]=this.#t;return{root:{viewBox:this.viewBox},path:{"transform-origin":`${lt.svgRound(t)} ${lt.svgRound(e)}`}}}get rotationTransform(){const[,,t,e]=this.#t;let r=0,i=0,a=0,o=0,u=0,c=0;switch(this.#e){case 90:i=e/t,a=-t/e,u=t;break;case 180:r=-1,o=-1,u=t,c=e;break;case 270:i=-e/t,a=t/e,c=e;break;default:return""}return`matrix(${r} ${i} ${a} ${o} ${lt.svgRound(u)} ${lt.svgRound(c)})`}getPathResizingSVGProperties([t,e,r,i]){const[a,o]=this.#u(),[u,c,d,p]=this.#t;if(Math.abs(d-a)<=lt.PRECISION||Math.abs(p-o)<=lt.PRECISION){const A=t+r/2-(u+d/2),E=e+i/2-(c+p/2);return{path:{"transform-origin":`${lt.svgRound(t)} ${lt.svgRound(e)}`,transform:`${this.rotationTransform} translate(${A} ${E})`}}}const g=(r-2*a)/(d-2*a),v=(i-2*o)/(p-2*o),w=d/r,S=p/i;return{path:{"transform-origin":`${lt.svgRound(u)} ${lt.svgRound(c)}`,transform:`${this.rotationTransform} scale(${w} ${S}) translate(${lt.svgRound(a)} ${lt.svgRound(o)}) scale(${g} ${v}) translate(${lt.svgRound(-a)} ${lt.svgRound(-o)})`}}}getPathResizedSVGProperties([t,e,r,i]){const[a,o]=this.#u(),u=this.#t,[c,d,p,g]=u;if(u[0]=t,u[1]=e,u[2]=r,u[3]=i,Math.abs(p-a)<=lt.PRECISION||Math.abs(g-o)<=lt.PRECISION){const E=t+r/2-(c+p/2),x=e+i/2-(d+g/2);for(const{line:R,points:C}of this.#r)lt._translate(R,E,x,R),lt._translate(C,E,x,C);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${lt.svgRound(t)} ${lt.svgRound(e)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const v=(r-2*a)/(p-2*a),w=(i-2*o)/(g-2*o),S=-v*(c+a)+t+a,A=-w*(d+o)+e+o;if(v!==1||w!==1||S!==0||A!==0)for(const{line:E,points:x}of this.#r)lt._rescale(E,S,A,v,w,E),lt._rescale(x,S,A,v,w,x);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${lt.svgRound(t)} ${lt.svgRound(e)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([t,e],r){const[i,a]=r,o=this.#t,u=t-o[0],c=e-o[1];if(this.#i===i&&this.#s===a)for(const{line:d,points:p}of this.#r)lt._translate(d,u,c,d),lt._translate(p,u,c,p);else{const d=this.#i/i,p=this.#s/a;this.#i=i,this.#s=a;for(const{line:g,points:v}of this.#r)lt._rescale(g,u,c,d,p,g),lt._rescale(v,u,c,d,p,v);o[2]*=d,o[3]*=p}return o[0]=t,o[1]=e,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${lt.svgRound(t)} ${lt.svgRound(e)}`}}}get defaultSVGProperties(){const t=this.#t;return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${lt.svgRound(t[0])} ${lt.svgRound(t[1])}`,transform:this.rotationTransform||null},bbox:t}}}class Fa extends Af{constructor(t){super(),this._viewParameters=t,super.updateProperties({fill:"none",stroke:yt._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(t,e){t==="stroke-width"&&(e??=this["stroke-width"],e*=this._viewParameters.realScale),super.updateSVGProperty(t,e)}clone(){const t=new Fa(this._viewParameters);return t.updateAll(this),t}}class fu extends At{static _type="ink";static _editorType=xt.INK;static _defaultDrawingOptions=null;constructor(t){super({...t,name:"inkEditor"}),this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(t,e){yt.initialize(t,e),this._defaultDrawingOptions=new Fa(e.viewParameters)}static getDefaultDrawingOptions(t){const e=this._defaultDrawingOptions.clone();return e.updateProperties(t),e}static get supportMultipleDrawings(){return!0}static get typesMap(){return Tt(this,"typesMap",new Map([[Rt.INK_THICKNESS,"stroke-width"],[Rt.INK_COLOR,"stroke"],[Rt.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(t,e,r,i,a){return new gv(t,e,r,i,a,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(t,e,r,i,a,o){return si.deserialize(t,e,r,i,a,o)}static async deserialize(t,e,r){let i=null;if(t instanceof hu){const{data:{inkLists:o,rect:u,rotation:c,id:d,color:p,opacity:g,borderStyle:{rawWidth:v},popupRef:w,contentsObj:S},parent:{page:{pageNumber:A}}}=t;i=t={annotationType:xt.INK,color:Array.from(p),thickness:v,opacity:g,paths:{points:o},boxes:null,pageIndex:A-1,rect:u.slice(0),rotation:c,annotationElementId:d,id:d,deleted:!1,popupRef:w,comment:S?.str||null}}const a=await super.deserialize(t,e,r);return a._initialData=i,t.comment&&a.setCommentData(t.comment),a}get toolbarButtons(){return this._colorPicker||=new Zs(this),[["colorPicker",this._colorPicker]]}get colorType(){return Rt.INK_COLOR}get colorValue(){return this._drawingOptions.stroke}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:t,_drawingOptions:e,parent:r}=this;e.updateSVGProperty("stroke-width"),r.drawLayer.updateProperties(t,e.toSVGProperties())}static onScaleChangingWhenDrawing(){const t=this._currentParent;t&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),t.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:t,thickness:e,opacity:r}){this._drawingOptions=fu.getDefaultDrawingOptions({stroke:pt.makeHexColor(...t),"stroke-width":e,"stroke-opacity":r})}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:e,points:r,rect:i}=this.serializeDraw(t),{_drawingOptions:{stroke:a,"stroke-opacity":o,"stroke-width":u}}=this,c={annotationType:xt.INK,color:yt._colorManager.convert(a),opacity:o,thickness:u,paths:{lines:e,points:r},pageIndex:this.pageIndex,rect:i,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return this.addComment(c),t?(c.isCopy=!0,c):this.annotationElementId&&!this.#t(c)?null:(c.id=this.annotationElementId,c)}#t(t){const{color:e,thickness:r,opacity:i,pageIndex:a}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized||t.color.some((o,u)=>o!==e[u])||t.thickness!==r||t.opacity!==i||t.pageIndex!==a}renderAnnotationElement(t){const{points:e,rect:r}=this.serializeDraw(!1),i={rect:r,thickness:this._drawingOptions["stroke-width"],points:e};return this.hasEditedComment&&(i.popup=this.comment),t.updateEdited(i),null}}class Zl extends si{toSVGPath(){let t=super.toSVGPath();return t.endsWith("Z")||(t+="Z"),t}}const Sa=8,Ws=3;class Kr{static#t={maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16};static#e(t,e,r,i){return r-=t,i-=e,r===0?i>0?0:4:r===1?i+6:2-i}static#n=new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]);static#r(t,e,r,i,a,o,u){const c=this.#e(r,i,a,o);for(let d=0;d<8;d++){const p=(-d+c-u+16)%8,g=this.#n[2*p],v=this.#n[2*p+1];if(t[(r+g)*e+(i+v)]!==0)return p}return-1}static#i(t,e,r,i,a,o,u){const c=this.#e(r,i,a,o);for(let d=0;d<8;d++){const p=(d+c+u+16)%8,g=this.#n[2*p],v=this.#n[2*p+1];if(t[(r+g)*e+(i+v)]!==0)return p}return-1}static#s(t,e,r,i){const a=t.length,o=new Int32Array(a);for(let p=0;p<a;p++)o[p]=t[p]<=i?1:0;for(let p=1;p<r-1;p++)o[p*e]=o[p*e+e-1]=0;for(let p=0;p<e;p++)o[p]=o[e*r-1-p]=0;let u=1,c;const d=[];for(let p=1;p<r-1;p++){c=1;for(let g=1;g<e-1;g++){const v=p*e+g,w=o[v];if(w===0)continue;let S=p,A=g;if(w===1&&o[v-1]===0)u+=1,A-=1;else if(w>=1&&o[v+1]===0)u+=1,A+=1,w>1&&(c=w);else{w!==1&&(c=Math.abs(w));continue}const E=[g,p],x=A===g+1,R={isHole:x,points:E,id:u,parent:0};d.push(R);let C;for(const W of d)if(W.id===c){C=W;break}C?C.isHole?R.parent=x?C.parent:c:R.parent=x?c:C.parent:R.parent=x?c:0;const P=this.#r(o,e,p,g,S,A,0);if(P===-1){o[v]=-u,o[v]!==1&&(c=Math.abs(o[v]));continue}let T=this.#n[2*P],I=this.#n[2*P+1];const M=p+T,_=g+I;S=M,A=_;let F=p,U=g;for(;;){const W=this.#i(o,e,F,U,S,A,1);T=this.#n[2*W],I=this.#n[2*W+1];const q=F+T,J=U+I;E.push(J,q);const rt=F*e+U;if(o[rt+1]===0?o[rt]=-u:o[rt]===1&&(o[rt]=u),q===p&&J===g&&F===M&&U===_){o[v]!==1&&(c=Math.abs(o[v]));break}else S=F,A=U,F=q,U=J}}}return d}static#a(t,e,r,i){if(r-e<=4){for(let M=e;M<r-2;M+=2)i.push(t[M],t[M+1]);return}const a=t[e],o=t[e+1],u=t[r-4]-a,c=t[r-3]-o,d=Math.hypot(u,c),p=u/d,g=c/d,v=p*o-g*a,w=c/u,S=1/d,A=Math.atan(w),E=Math.cos(A),x=Math.sin(A),R=S*(Math.abs(E)+Math.abs(x)),C=S*(1-R+R**2),P=Math.max(Math.atan(Math.abs(x+E)*C),Math.atan(Math.abs(x-E)*C));let T=0,I=e;for(let M=e+2;M<r-2;M+=2){const _=Math.abs(v-p*t[M+1]+g*t[M]);_>T&&(I=M,T=_)}T>(d*P)**2?(this.#a(t,e,I+2,i),this.#a(t,I,r,i)):i.push(a,o)}static#o(t){const e=[],r=t.length;return this.#a(t,0,r,e),e.push(t[r-2],t[r-1]),e.length<=4?null:e}static#c(t,e,r,i,a,o){const u=new Float32Array(o**2),c=-2*i**2,d=o>>1;for(let A=0;A<o;A++){const E=(A-d)**2;for(let x=0;x<o;x++)u[A*o+x]=Math.exp((E+(x-d)**2)/c)}const p=new Float32Array(256),g=-2*a**2;for(let A=0;A<256;A++)p[A]=Math.exp(A**2/g);const v=t.length,w=new Uint8Array(v),S=new Uint32Array(256);for(let A=0;A<r;A++)for(let E=0;E<e;E++){const x=A*e+E,R=t[x];let C=0,P=0;for(let I=0;I<o;I++){const M=A+I-d;if(!(M<0||M>=r))for(let _=0;_<o;_++){const F=E+_-d;if(F<0||F>=e)continue;const U=t[M*e+F],W=u[I*o+_]*p[Math.abs(U-R)];C+=U*W,P+=W}}const T=w[x]=Math.round(C/P);S[T]++}return[w,S]}static#u(t){const e=new Uint32Array(256);for(const r of t)e[r]++;return e}static#d(t){const e=t.length,r=new Uint8ClampedArray(e>>2);let i=-1/0,a=1/0;for(let u=0,c=r.length;u<c;u++){const d=r[u]=t[u<<2];i=Math.max(i,d),a=Math.min(a,d)}const o=255/(i-a);for(let u=0,c=r.length;u<c;u++)r[u]=(r[u]-a)*o;return r}static#l(t){let e,r=-1/0,i=-1/0;const a=t.findIndex(c=>c!==0);let o=a,u=a;for(e=a;e<256;e++){const c=t[e];c>r&&(e-o>i&&(i=e-o,u=e-1),r=c,o=e)}for(e=u-1;e>=0&&!(t[e]>t[e+1]);e--);return e}static#p(t){const e=t,{width:r,height:i}=t,{maxDim:a}=this.#t;let o=r,u=i;if(r>a||i>a){let v=r,w=i,S=Math.log2(Math.max(r,i)/a);const A=Math.floor(S);S=S===A?A-1:A;for(let x=0;x<S;x++){o=Math.ceil(v/2),u=Math.ceil(w/2);const R=new OffscreenCanvas(o,u);R.getContext("2d").drawImage(t,0,0,v,w,0,0,o,u),v=o,w=u,t!==e&&t.close(),t=R.transferToImageBitmap()}const E=Math.min(a/o,a/u);o=Math.round(o*E),u=Math.round(u*E)}const d=new OffscreenCanvas(o,u).getContext("2d",{willReadFrequently:!0});d.fillStyle="white",d.fillRect(0,0,o,u),d.filter="grayscale(1)",d.drawImage(t,0,0,t.width,t.height,0,0,o,u);const p=d.getImageData(0,0,o,u).data;return[this.#d(p),o,u]}static extractContoursFromText(t,{fontFamily:e,fontStyle:r,fontWeight:i},a,o,u,c){let d=new OffscreenCanvas(1,1),p=d.getContext("2d",{alpha:!1});const g=200,v=p.font=`${r} ${i} ${g}px ${e}`,{actualBoundingBoxLeft:w,actualBoundingBoxRight:S,actualBoundingBoxAscent:A,actualBoundingBoxDescent:E,fontBoundingBoxAscent:x,fontBoundingBoxDescent:R,width:C}=p.measureText(t),P=1.5,T=Math.ceil(Math.max(Math.abs(w)+Math.abs(S)||0,C)*P),I=Math.ceil(Math.max(Math.abs(A)+Math.abs(E)||g,Math.abs(x)+Math.abs(R)||g)*P);d=new OffscreenCanvas(T,I),p=d.getContext("2d",{alpha:!0,willReadFrequently:!0}),p.font=v,p.filter="grayscale(1)",p.fillStyle="white",p.fillRect(0,0,T,I),p.fillStyle="black",p.fillText(t,T*(P-1)/2,I*(3-P)/2);const M=this.#d(p.getImageData(0,0,T,I).data),_=this.#u(M),F=this.#l(_),U=this.#s(M,T,I,F);return this.processDrawnLines({lines:{curves:U,width:T,height:I},pageWidth:a,pageHeight:o,rotation:u,innerMargin:c,mustSmooth:!0,areContours:!0})}static process(t,e,r,i,a){const[o,u,c]=this.#p(t),[d,p]=this.#c(o,u,c,Math.hypot(u,c)*this.#t.sigmaSFactor,this.#t.sigmaR,this.#t.kernelSize),g=this.#l(p),v=this.#s(d,u,c,g);return this.processDrawnLines({lines:{curves:v,width:u,height:c},pageWidth:e,pageHeight:r,rotation:i,innerMargin:a,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:t,pageWidth:e,pageHeight:r,rotation:i,innerMargin:a,mustSmooth:o,areContours:u}){i%180!==0&&([e,r]=[r,e]);const{curves:c,width:d,height:p}=t,g=t.thickness??0,v=[],w=Math.min(e/d,r/p),S=w/e,A=w/r,E=[];for(const{points:R}of c){const C=o?this.#o(R):R;if(!C)continue;E.push(C);const P=C.length,T=new Float32Array(P),I=new Float32Array(3*(P===2?2:P-2));if(v.push({line:I,points:T}),P===2){T[0]=C[0]*S,T[1]=C[1]*A,I.set([NaN,NaN,NaN,NaN,T[0],T[1]],0);continue}let[M,_,F,U]=C;M*=S,_*=A,F*=S,U*=A,T.set([M,_,F,U],0),I.set([NaN,NaN,NaN,NaN,M,_],0);for(let W=4;W<P;W+=2){const q=T[W]=C[W]*S,J=T[W+1]=C[W+1]*A;I.set(lt.createBezierPoints(M,_,F,U,q,J),(W-2)*3),[M,_,F,U]=[F,U,q,J]}}if(v.length===0)return null;const x=u?new Zl:new si;return x.build(v,e,r,1,i,u?0:g,a),{outline:x,newCurves:E,areContours:u,thickness:g,width:d,height:p}}static async compressSignature({outlines:t,areContours:e,thickness:r,width:i,height:a}){let o=1/0,u=-1/0,c=0;for(const C of t){c+=C.length;for(let P=2,T=C.length;P<T;P++){const I=C[P]-C[P-2];o=Math.min(o,I),u=Math.max(u,I)}}let d;o>=-128&&u<=127?d=Int8Array:o>=-32768&&u<=32767?d=Int16Array:d=Int32Array;const p=t.length,g=Sa+Ws*p,v=new Uint32Array(g);let w=0;v[w++]=g*Uint32Array.BYTES_PER_ELEMENT+(c-2*p)*d.BYTES_PER_ELEMENT,v[w++]=0,v[w++]=i,v[w++]=a,v[w++]=e?0:1,v[w++]=Math.max(0,Math.floor(r??0)),v[w++]=p,v[w++]=d.BYTES_PER_ELEMENT;for(const C of t)v[w++]=C.length-2,v[w++]=C[0],v[w++]=C[1];const S=new CompressionStream("deflate-raw"),A=S.writable.getWriter();await A.ready,A.write(v);const E=d.prototype.constructor;for(const C of t){const P=new E(C.length-2);for(let T=2,I=C.length;T<I;T++)P[T-2]=C[T]-C[T-2];A.write(P)}A.close();const x=await new Response(S.readable).arrayBuffer(),R=new Uint8Array(x);return Wd(R)}static async decompressSignature(t){try{const e=zg(t),{readable:r,writable:i}=new DecompressionStream("deflate-raw"),a=i.getWriter();await a.ready,a.write(e).then(async()=>{await a.ready,await a.close()}).catch(()=>{});let o=null,u=0;for await(const C of r)o||=new Uint8Array(new Uint32Array(C.buffer,0,4)[0]),o.set(C,u),u+=C.length;const c=new Uint32Array(o.buffer,0,o.length>>2),d=c[1];if(d!==0)throw new Error(`Invalid version: ${d}`);const p=c[2],g=c[3],v=c[4]===0,w=c[5],S=c[6],A=c[7],E=[],x=(Sa+Ws*S)*Uint32Array.BYTES_PER_ELEMENT;let R;switch(A){case Int8Array.BYTES_PER_ELEMENT:R=new Int8Array(o.buffer,x);break;case Int16Array.BYTES_PER_ELEMENT:R=new Int16Array(o.buffer,x);break;case Int32Array.BYTES_PER_ELEMENT:R=new Int32Array(o.buffer,x);break}u=0;for(let C=0;C<S;C++){const P=c[Ws*C+Sa],T=new Float32Array(P+2);E.push(T);for(let I=0;I<Ws-1;I++)T[I]=c[Ws*C+Sa+I+1];for(let I=0;I<P;I++)T[I+2]=T[I]+R[u++]}return{areContours:v,thickness:w,outlines:E,width:p,height:g}}catch(e){return St(`decompressSignature: ${e}`),null}}}class pu extends Af{constructor(){super(),super.updateProperties({fill:yt._defaultLineColor,"stroke-width":0})}clone(){const t=new pu;return t.updateAll(this),t}}class gu extends Fa{constructor(t){super(t),super.updateProperties({stroke:yt._defaultLineColor,"stroke-width":1})}clone(){const t=new gu(this._viewParameters);return t.updateAll(this),t}}class gn extends At{#t=!1;#e=null;#n=null;#r=null;static _type="signature";static _editorType=xt.SIGNATURE;static _defaultDrawingOptions=null;constructor(t){super({...t,mustBeCommitted:!0,name:"signatureEditor"}),this._willKeepAspectRatio=!0,this.#n=t.signatureData||null,this.#e=null,this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(t,e){yt.initialize(t,e),this._defaultDrawingOptions=new pu,this._defaultDrawnSignatureOptions=new gu(e.viewParameters)}static getDefaultDrawingOptions(t){const e=this._defaultDrawingOptions.clone();return e.updateProperties(t),e}static get supportMultipleDrawings(){return!1}static get typesMap(){return Tt(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!this.#e}}static computeTelemetryFinalData(t){const e=t.get("hasDescription");return{hasAltText:e.get(!0)??0,hasNoAltText:e.get(!1)??0}}get isResizable(){return!0}onScaleChanging(){this._drawId!==null&&super.onScaleChanging()}render(){if(this.div)return this.div;let t,e;const{_isCopy:r}=this;if(r&&(this._isCopy=!1,t=this.x,e=this.y),super.render(),this._drawId===null)if(this.#n){const{lines:i,mustSmooth:a,areContours:o,description:u,uuid:c,heightInPage:d}=this.#n,{rawDims:{pageWidth:p,pageHeight:g},rotation:v}=this.parent.viewport,w=Kr.processDrawnLines({lines:i,pageWidth:p,pageHeight:g,rotation:v,innerMargin:gn._INNER_MARGIN,mustSmooth:a,areContours:o});this.addSignature(w,d,u,c)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);else this.div.setAttribute("data-l10n-args",JSON.stringify({description:this.#e||""}));return r&&(this._isCopy=!0,this._moveAfterPaste(t,e)),this.div}setUuid(t){this.#r=t,this.addEditToolbar()}getUuid(){return this.#r}get description(){return this.#e}set description(t){this.#e=t,this.div&&(this.div.setAttribute("data-l10n-args",JSON.stringify({description:t})),super.addEditToolbar().then(e=>{e?.updateEditSignatureButton(t)}))}getSignaturePreview(){const{newCurves:t,areContours:e,thickness:r,width:i,height:a}=this.#n,o=Math.max(i,a),u=Kr.processDrawnLines({lines:{curves:t.map(c=>({points:c})),thickness:r,width:i,height:a},pageWidth:o,pageHeight:o,rotation:0,innerMargin:0,mustSmooth:!1,areContours:e});return{areContours:e,outline:u.outline}}get toolbarButtons(){return this._uiManager.signatureManager?[["editSignature",this._uiManager.signatureManager]]:super.toolbarButtons}addSignature(t,e,r,i){const{x:a,y:o}=this,{outline:u}=this.#n=t;this.#t=u instanceof Zl,this.description=r;let c;this.#t?c=gn.getDefaultDrawingOptions():(c=gn._defaultDrawnSignatureOptions.clone(),c.updateProperties({"stroke-width":u.thickness})),this._addOutlines({drawOutlines:u,drawingOptions:c});const[d,p]=this.parentDimensions,[,g]=this.pageDimensions;let v=e/g;v=v>=1?.5:v,this.width*=v/this.height,this.width>=1&&(v*=.9/this.width,this.width=.9),this.height=v,this.setDims(d*this.width,p*this.height),this.x=a,this.y=o,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(i),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!i,hasDescription:!!r}}),this.div.hidden=!1}getFromImage(t){const{rawDims:{pageWidth:e,pageHeight:r},rotation:i}=this.parent.viewport;return Kr.process(t,e,r,i,gn._INNER_MARGIN)}getFromText(t,e){const{rawDims:{pageWidth:r,pageHeight:i},rotation:a}=this.parent.viewport;return Kr.extractContoursFromText(t,e,r,i,a,gn._INNER_MARGIN)}getDrawnSignature(t){const{rawDims:{pageWidth:e,pageHeight:r},rotation:i}=this.parent.viewport;return Kr.processDrawnLines({lines:t,pageWidth:e,pageHeight:r,rotation:i,innerMargin:gn._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:t,thickness:e}){t?this._drawingOptions=gn.getDefaultDrawingOptions():(this._drawingOptions=gn._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":e}))}serialize(t=!1){if(this.isEmpty())return null;const{lines:e,points:r,rect:i}=this.serializeDraw(t),{_drawingOptions:{"stroke-width":a}}=this,o={annotationType:xt.SIGNATURE,isSignature:!0,areContours:this.#t,color:[0,0,0],thickness:this.#t?0:a,pageIndex:this.pageIndex,rect:i,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return this.addComment(o),t?(o.paths={lines:e,points:r},o.uuid=this.#r,o.isCopy=!0):o.lines=e,this.#e&&(o.accessibilityData={type:"Figure",alt:this.#e}),o}static deserializeDraw(t,e,r,i,a,o){return o.areContours?Zl.deserialize(t,e,r,i,a,o):si.deserialize(t,e,r,i,a,o)}static async deserialize(t,e,r){const i=await super.deserialize(t,e,r);return i.#t=t.areContours,i.description=t.accessibilityData?.alt||"",i.#r=t.uuid,i}}class mv extends yt{#t=null;#e=null;#n=null;#r=null;#i=null;#s="";#a=null;#o=!1;#c=null;#u=!1;#d=!1;static _type="stamp";static _editorType=xt.STAMP;constructor(t){super({...t,name:"stampEditor"}),this.#r=t.bitmapUrl,this.#i=t.bitmapFile,this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(t,e){yt.initialize(t,e)}static isHandlingMimeForPasting(t){return Wl.includes(t)}static paste(t,e){e.pasteEditor({mode:xt.STAMP},{bitmapFile:t.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){return{type:"stamp",hasAltText:!!this.altTextData?.altText}}static computeTelemetryFinalData(t){const e=t.get("hasAltText");return{hasAltText:e.get(!0)??0,hasNoAltText:e.get(!1)??0}}#l(t,e=!1){if(!t){this.remove();return}this.#t=t.bitmap,e||(this.#e=t.id,this.#u=t.isSvg),t.file&&(this.#s=t.file.name),this.#f()}#p(){if(this.#n=null,this._uiManager.enableWaiting(!1),!!this.#a){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#t){this.addEditToolbar().then(()=>{this._editToolbar.hide(),this._uiManager.editAltText(this,!0)});return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#t){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}}async mlGuessAltText(t=null,e=!0){if(this.hasAltTextData())return null;const{mlManager:r}=this._uiManager;if(!r)throw new Error("No ML.");if(!await r.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:i,width:a,height:o}=t||this.copyCanvas(null,null,!0).imageData,u=await r.guess({name:"altText",request:{data:i,width:a,height:o,channels:i.length/(a*o)}});if(!u)throw new Error("No response from the AI service.");if(u.error)throw new Error("Error from the AI service.");if(u.cancel)return null;if(!u.output)throw new Error("No valid response from the AI service.");const c=u.output;return await this.setGuessedAltText(c),e&&!this.hasAltTextData()&&(this.altTextData={alt:c,decorative:!1}),c}#m(){if(this.#e){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(this.#e).then(r=>this.#l(r,!0)).finally(()=>this.#p());return}if(this.#r){const r=this.#r;this.#r=null,this._uiManager.enableWaiting(!0),this.#n=this._uiManager.imageManager.getFromUrl(r).then(i=>this.#l(i)).finally(()=>this.#p());return}if(this.#i){const r=this.#i;this.#i=null,this._uiManager.enableWaiting(!0),this.#n=this._uiManager.imageManager.getFromFile(r).then(i=>this.#l(i)).finally(()=>this.#p());return}const t=document.createElement("input");t.type="file",t.accept=Wl.join(",");const e=this._uiManager._signal;this.#n=new Promise(r=>{t.addEventListener("change",async()=>{if(!t.files||t.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const i=await this._uiManager.imageManager.getFromFile(t.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),this.#l(i)}r()},{signal:e}),t.addEventListener("cancel",()=>{this.remove(),r()},{signal:e})}).finally(()=>this.#p()),t.click()}remove(){this.#e&&(this.#t=null,this._uiManager.imageManager.deleteId(this.#e),this.#a?.remove(),this.#a=null,this.#c&&(clearTimeout(this.#c),this.#c=null)),super.remove()}rebuild(){if(!this.parent){this.#e&&this.#m();return}super.rebuild(),this.div!==null&&(this.#e&&this.#a===null&&this.#m(),this.isAttachedToDOM||this.parent.add(this))}onceAdded(t){this._isDraggable=!0,t&&this.div.focus()}isEmpty(){return!(this.#n||this.#t||this.#r||this.#i||this.#e||this.#o)}get toolbarButtons(){return[["altText",this.createAltText()]]}get isResizable(){return!0}render(){if(this.div)return this.div;let t,e;return this._isCopy&&(t=this.x,e=this.y),super.render(),this.div.hidden=!0,this.createAltText(),this.#o||(this.#t?this.#f():this.#m()),this._isCopy&&this._moveAfterPaste(t,e),this._uiManager.addShouldRescale(this),this.div}setCanvas(t,e){const{id:r,bitmap:i}=this._uiManager.imageManager.getFromCanvas(t,e);e.remove(),r&&this._uiManager.imageManager.isValidId(r)&&(this.#e=r,i&&(this.#t=i),this.#o=!1,this.#f())}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;this.#c!==null&&clearTimeout(this.#c);const t=200;this.#c=setTimeout(()=>{this.#c=null,this.#g()},t)}#f(){const{div:t}=this;let{width:e,height:r}=this.#t;const[i,a]=this.pageDimensions,o=.75;if(this.width)e=this.width*i,r=this.height*a;else if(e>o*i||r>o*a){const p=Math.min(o*i/e,o*a/r);e*=p,r*=p}const[u,c]=this.parentDimensions;this.setDims(e*u/i,r*c/a),this._uiManager.enableWaiting(!1);const d=this.#a=document.createElement("canvas");d.setAttribute("role","img"),this.addContainer(d),this.width=e/i,this.height=r/a,this._initialOptions?.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(t.hidden=!1),this.#g(),this.#d||(this.parent.addUndoableEditor(this),this.#d=!0),this._reportTelemetry({action:"inserted_image"}),this.#s&&this.div.setAttribute("aria-description",this.#s),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-stamp-added-alert")}copyCanvas(t,e,r=!1){t||(t=224);const{width:i,height:a}=this.#t,o=new vn;let u=this.#t,c=i,d=a,p=null;if(e){if(i>e||a>e){const I=Math.min(e/i,e/a);c=Math.floor(i*I),d=Math.floor(a*I)}p=document.createElement("canvas");const v=p.width=Math.ceil(c*o.sx),w=p.height=Math.ceil(d*o.sy);this.#u||(u=this.#h(v,w));const S=p.getContext("2d");S.filter=this._uiManager.hcmFilter;let A="white",E="#cfcfd8";this._uiManager.hcmFilter!=="none"?E="black":window.matchMedia?.("(prefers-color-scheme: dark)").matches&&(A="#8f8f9d",E="#42414d");const x=15,R=x*o.sx,C=x*o.sy,P=new OffscreenCanvas(R*2,C*2),T=P.getContext("2d");T.fillStyle=A,T.fillRect(0,0,R*2,C*2),T.fillStyle=E,T.fillRect(0,0,R,C),T.fillRect(R,C,R,C),S.fillStyle=S.createPattern(P,"repeat"),S.fillRect(0,0,v,w),S.drawImage(u,0,0,u.width,u.height,0,0,v,w)}let g=null;if(r){let v,w;if(o.symmetric&&u.width<t&&u.height<t)v=u.width,w=u.height;else if(u=this.#t,i>t||a>t){const E=Math.min(t/i,t/a);v=Math.floor(i*E),w=Math.floor(a*E),this.#u||(u=this.#h(v,w))}const A=new OffscreenCanvas(v,w).getContext("2d",{willReadFrequently:!0});A.drawImage(u,0,0,u.width,u.height,0,0,v,w),g={width:v,height:w,data:A.getImageData(0,0,v,w).data}}return{canvas:p,width:c,height:d,imageData:g}}#h(t,e){const{width:r,height:i}=this.#t;let a=r,o=i,u=this.#t;for(;a>2*t||o>2*e;){const c=a,d=o;a>2*t&&(a=a>=16384?Math.floor(a/2)-1:Math.ceil(a/2)),o>2*e&&(o=o>=16384?Math.floor(o/2)-1:Math.ceil(o/2));const p=new OffscreenCanvas(a,o);p.getContext("2d").drawImage(u,0,0,c,d,0,0,a,o),u=p.transferToImageBitmap()}return u}#g(){const[t,e]=this.parentDimensions,{width:r,height:i}=this,a=new vn,o=Math.ceil(r*t*a.sx),u=Math.ceil(i*e*a.sy),c=this.#a;if(!c||c.width===o&&c.height===u)return;c.width=o,c.height=u;const d=this.#u?this.#t:this.#h(o,u),p=c.getContext("2d");p.filter=this._uiManager.hcmFilter,p.drawImage(d,0,0,d.width,d.height,0,0,o,u)}#w(t){if(t){if(this.#u){const i=this._uiManager.imageManager.getSvgUrl(this.#e);if(i)return i}const e=document.createElement("canvas");return{width:e.width,height:e.height}=this.#t,e.getContext("2d").drawImage(this.#t,0,0),e.toDataURL()}if(this.#u){const[e,r]=this.pageDimensions,i=Math.round(this.width*e*es.PDF_TO_CSS_UNITS),a=Math.round(this.height*r*es.PDF_TO_CSS_UNITS),o=new OffscreenCanvas(i,a);return o.getContext("2d").drawImage(this.#t,0,0,this.#t.width,this.#t.height,0,0,i,a),o.transferToImageBitmap()}return structuredClone(this.#t)}static async deserialize(t,e,r){let i=null,a=!1;if(t instanceof yf){const{data:{rect:A,rotation:E,id:x,structParent:R,popupRef:C,contentsObj:P},container:T,parent:{page:{pageNumber:I}},canvas:M}=t;let _,F;M?(delete t.canvas,{id:_,bitmap:F}=r.imageManager.getFromCanvas(T.id,M),M.remove()):(a=!0,t._hasNoCanvas=!0);const U=(await e._structTree.getAriaAttributes(`${tu}${x}`))?.get("aria-label")||"";i=t={annotationType:xt.STAMP,bitmapId:_,bitmap:F,pageIndex:I-1,rect:A.slice(0),rotation:E,annotationElementId:x,id:x,deleted:!1,accessibilityData:{decorative:!1,altText:U},isSvg:!1,structParent:R,popupRef:C,comment:P?.str||null}}const o=await super.deserialize(t,e,r),{rect:u,bitmap:c,bitmapUrl:d,bitmapId:p,isSvg:g,accessibilityData:v}=t;a?(r.addMissingCanvas(t.id,o),o.#o=!0):p&&r.imageManager.isValidId(p)?(o.#e=p,c&&(o.#t=c)):o.#r=d,o.#u=g;const[w,S]=o.pageDimensions;return o.width=(u[2]-u[0])/w,o.height=(u[3]-u[1])/S,v&&(o.altTextData=v),o._initialData=i,t.comment&&o.setCommentData(t.comment),o.#d=!!i,o}serialize(t=!1,e=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const r={annotationType:xt.STAMP,bitmapId:this.#e,pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:this.#u,structTreeParentId:this._structTreeParentId};if(this.addComment(r),t)return r.bitmapUrl=this.#w(!0),r.accessibilityData=this.serializeAltText(!0),r.isCopy=!0,r;const{decorative:i,altText:a}=this.serializeAltText(!1);if(!i&&a&&(r.accessibilityData={type:"Figure",alt:a}),this.annotationElementId){const u=this.#v(r);if(u.isSame)return null;u.isSameAltText?delete r.accessibilityData:r.accessibilityData.structParent=this._initialData.structParent??-1}if(r.id=this.annotationElementId,e===null)return r;e.stamps||=new Map;const o=this.#u?(r.rect[2]-r.rect[0])*(r.rect[3]-r.rect[1]):null;if(!e.stamps.has(this.#e))e.stamps.set(this.#e,{area:o,serialized:r}),r.bitmap=this.#w(!1);else if(this.#u){const u=e.stamps.get(this.#e);o>u.area&&(u.area=o,u.serialized.bitmap.close(),u.serialized.bitmap=this.#w(!1))}return r}#v(t){const{pageIndex:e,accessibilityData:{altText:r}}=this._initialData,i=t.pageIndex===e,a=(t.accessibilityData?.alt||"")===r;return{isSame:!this.hasEditedComment&&!this._hasBeenMoved&&!this._hasBeenResized&&i&&a,isSameAltText:a}}renderAnnotationElement(t){const e={rect:this.getRect(0,0)};return this.hasEditedComment&&(e.popup=this.comment),t.updateEdited(e),null}}class Rn{#t;#e=!1;#n=null;#r=null;#i=null;#s=new Map;#a=!1;#o=!1;#c=!1;#u=null;#d=null;#l=null;#p=null;#m=null;#f=-1;#h;static _initialized=!1;static#g=new Map([se,fu,mv,Kt,gn].map(t=>[t._editorType,t]));constructor({uiManager:t,pageIndex:e,div:r,structTreeLayer:i,accessibilityManager:a,annotationLayer:o,drawLayer:u,textLayer:c,viewport:d,l10n:p}){const g=[...Rn.#g.values()];if(!Rn._initialized){Rn._initialized=!0;for(const v of g)v.initialize(p,t)}t.registerEditorTypes(g),this.#h=t,this.pageIndex=e,this.div=r,this.#t=a,this.#n=o,this.viewport=d,this.#l=c,this.drawLayer=u,this._structTree=i,this.#h.addLayer(this)}get isEmpty(){return this.#s.size===0}get isInvisible(){return this.isEmpty&&this.#h.getMode()===xt.NONE}updateToolbar(t){this.#h.updateToolbar(t)}updateMode(t=this.#h.getMode()){switch(this.#y(),t){case xt.NONE:this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case xt.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case xt.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:e}=this.div;for(const r of Rn.#g.values())e.toggle(`${r._type}Editing`,t===r._editorType);this.div.hidden=!1}hasTextLayer(t){return t===this.#l?.div}setEditingState(t){this.#h.setEditingState(t)}addCommands(t){this.#h.addCommands(t)}cleanUndoStack(t){this.#h.cleanUndoStack(t)}toggleDrawing(t=!1){this.div.classList.toggle("drawing",!t)}togglePointerEvents(t=!1){this.div.classList.toggle("disabled",!t)}toggleAnnotationLayerPointerEvents(t=!1){this.#n?.div.classList.toggle("disabled",!t)}async enable(){this.#c=!0,this.div.tabIndex=0,this.togglePointerEvents(!0),this.#m?.abort(),this.#m=null;const t=new Set;for(const r of this.#s.values())r.enableEditing(),r.show(!0),r.annotationElementId&&(this.#h.removeChangedExistingAnnotation(r),t.add(r.annotationElementId));if(!this.#n){this.#c=!1;return}const e=this.#n.getEditableAnnotations();for(const r of e){if(r.hide(),this.#h.isDeletedAnnotationElement(r.data.id)||t.has(r.data.id))continue;const i=await this.deserialize(r);i&&(this.addOrRebuild(i),i.enableEditing())}this.#c=!1}disable(){if(this.#o=!0,this.div.tabIndex=-1,this.togglePointerEvents(!1),this.#l&&!this.#m){this.#m=new AbortController;const i=this.#h.combinedSignal(this.#m);this.#l.div.addEventListener("pointerdown",a=>{const{clientX:u,clientY:c,timeStamp:d}=a,p=this.#f;if(d-p>500){this.#f=d;return}this.#f=-1;const{classList:g}=this.div;g.toggle("getElements",!0);const v=document.elementsFromPoint(u,c);if(g.toggle("getElements",!1),!this.div.contains(v[0]))return;let w;const S=new RegExp(`^${jd}[0-9]+$`);for(const E of v)if(S.test(E.id)){w=E.id;break}if(!w)return;const A=this.#s.get(w);A?.annotationElementId===null&&(a.stopPropagation(),a.preventDefault(),A.dblclick())},{signal:i,capture:!0})}const t=new Map,e=new Map;for(const i of this.#s.values())if(i.disableEditing(),!!i.annotationElementId){if(i.serialize()!==null){t.set(i.annotationElementId,i);continue}else e.set(i.annotationElementId,i);this.getEditableAnnotation(i.annotationElementId)?.show(),i.remove()}if(this.#n){const i=this.#n.getEditableAnnotations();for(const a of i){const{id:o}=a.data;if(this.#h.isDeletedAnnotationElement(o)){a.updateEdited({deleted:!0});continue}let u=e.get(o);if(u){u.resetAnnotationElement(a),u.show(!1),a.show();continue}u=t.get(o),u&&(this.#h.addChangedExistingAnnotation(u),u.renderAnnotationElement(a)&&u.show(!1)),a.show()}}this.#y(),this.isEmpty&&(this.div.hidden=!0);const{classList:r}=this.div;for(const i of Rn.#g.values())r.remove(`${i._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),this.#o=!1}getEditableAnnotation(t){return this.#n?.getEditableAnnotation(t)||null}setActiveEditor(t){this.#h.getActive()!==t&&this.#h.setActiveEditor(t)}enableTextSelection(){if(this.div.tabIndex=-1,this.#l?.div&&!this.#p){this.#p=new AbortController;const t=this.#h.combinedSignal(this.#p);this.#l.div.addEventListener("pointerdown",this.#w.bind(this),{signal:t}),this.#l.div.classList.add("highlighting")}}disableTextSelection(){this.div.tabIndex=0,this.#l?.div&&this.#p&&(this.#p.abort(),this.#p=null,this.#l.div.classList.remove("highlighting"))}#w(t){this.#h.unselectAll();const{target:e}=t;if(e===this.#l.div||(e.getAttribute("role")==="img"||e.classList.contains("endOfContent"))&&this.#l.div.contains(e)){const{isMac:r}=fe.platform;if(t.button!==0||t.ctrlKey&&r)return;this.#h.showAllEditors("highlight",!0,!0),this.#l.div.classList.add("free"),this.toggleDrawing(),Kt.startHighlighting(this,this.#h.direction==="ltr",{target:this.#l.div,x:t.x,y:t.y}),this.#l.div.addEventListener("pointerup",()=>{this.#l.div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:this.#h._signal}),t.preventDefault()}}enableClick(){if(this.#r)return;this.#r=new AbortController;const t=this.#h.combinedSignal(this.#r);this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:t});const e=this.pointerup.bind(this);this.div.addEventListener("pointerup",e,{signal:t}),this.div.addEventListener("pointercancel",e,{signal:t})}disableClick(){this.#r?.abort(),this.#r=null}attach(t){this.#s.set(t.id,t);const{annotationElementId:e}=t;e&&this.#h.isDeletedAnnotationElement(e)&&this.#h.removeDeletedAnnotationElement(t)}detach(t){this.#s.delete(t.id),this.#t?.removePointerInTextLayer(t.contentDiv),!this.#o&&t.annotationElementId&&this.#h.addDeletedAnnotationElement(t)}remove(t){this.detach(t),this.#h.removeEditor(t),t.div.remove(),t.isAttachedToDOM=!1}changeParent(t){t.parent!==this&&(t.parent&&t.annotationElementId&&(this.#h.addDeletedAnnotationElement(t.annotationElementId),yt.deleteAnnotationElement(t),t.annotationElementId=null),this.attach(t),t.parent?.detach(t),t.setParent(this),t.div&&t.isAttachedToDOM&&(t.div.remove(),this.div.append(t.div)))}add(t){if(!(t.parent===this&&t.isAttachedToDOM)){if(this.changeParent(t),this.#h.addEditor(t),this.attach(t),!t.isAttachedToDOM){const e=t.render();this.div.append(e),t.isAttachedToDOM=!0}t.fixAndSetPosition(),t.onceAdded(!this.#c),this.#h.addToAnnotationStorage(t),t._reportTelemetry(t.telemetryInitialData)}}moveEditorInDOM(t){if(!t.isAttachedToDOM)return;const{activeElement:e}=document;t.div.contains(e)&&!this.#i&&(t._focusEventsAllowed=!1,this.#i=setTimeout(()=>{this.#i=null,t.div.contains(document.activeElement)?t._focusEventsAllowed=!0:(t.div.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this.#h._signal}),e.focus())},0)),t._structTreeParentId=this.#t?.moveElementInDOM(this.div,t.div,t.contentDiv,!0)}addOrRebuild(t){t.needsToBeRebuilt()?(t.parent||=this,t.rebuild(),t.show()):this.add(t)}addUndoableEditor(t){const e=()=>t._uiManager.rebuild(t),r=()=>{t.remove()};this.addCommands({cmd:e,undo:r,mustExec:!1})}getNextId(){return this.#h.getId()}get#v(){return Rn.#g.get(this.#h.getMode())}combinedSignal(t){return this.#h.combinedSignal(t)}#S(t){const e=this.#v;return e?new e.prototype.constructor(t):null}canCreateNewEmptyEditor(){return this.#v?.canCreateNewEmptyEditor()}async pasteEditor(t,e){this.updateToolbar(t),await this.#h.updateMode(t.mode);const{offsetX:r,offsetY:i}=this.#E(),a=this.getNextId(),o=this.#S({parent:this,id:a,x:r,y:i,uiManager:this.#h,isCentered:!0,...e});o&&this.add(o)}async deserialize(t){return await Rn.#g.get(t.annotationType??t.annotationEditorType)?.deserialize(t,this,this.#h)||null}createAndAddNewEditor(t,e,r={}){const i=this.getNextId(),a=this.#S({parent:this,id:i,x:t.offsetX,y:t.offsetY,uiManager:this.#h,isCentered:e,...r});return a&&this.add(a),a}#E(){const{x:t,y:e,width:r,height:i}=this.div.getBoundingClientRect(),a=Math.max(0,t),o=Math.max(0,e),u=Math.min(window.innerWidth,t+r),c=Math.min(window.innerHeight,e+i),d=(a+u)/2-t,p=(o+c)/2-e,[g,v]=this.viewport.rotation%180===0?[d,p]:[p,d];return{offsetX:g,offsetY:v}}addNewEditor(t={}){this.createAndAddNewEditor(this.#E(),!0,t)}setSelected(t){this.#h.setSelected(t)}toggleSelected(t){this.#h.toggleSelected(t)}unselect(t){this.#h.unselect(t)}pointerup(t){const{isMac:e}=fe.platform;if(t.button!==0||t.ctrlKey&&e||t.target!==this.div||!this.#a||(this.#a=!1,this.#v?.isDrawer&&this.#v.supportMultipleDrawings))return;if(!this.#e){this.#e=!0;return}const r=this.#h.getMode();if(r===xt.STAMP||r===xt.SIGNATURE){this.#h.unselectAll();return}this.createAndAddNewEditor(t,!1)}pointerdown(t){if(this.#h.getMode()===xt.HIGHLIGHT&&this.enableTextSelection(),this.#a){this.#a=!1;return}const{isMac:e}=fe.platform;if(t.button!==0||t.ctrlKey&&e||t.target!==this.div)return;if(this.#a=!0,this.#v?.isDrawer){this.startDrawingSession(t);return}const r=this.#h.getActive();this.#e=!r||r.isEmpty()}startDrawingSession(t){if(this.div.focus({preventScroll:!0}),this.#u){this.#v.startDrawing(this,this.#h,!1,t);return}this.#h.setCurrentDrawingSession(this),this.#u=new AbortController;const e=this.#h.combinedSignal(this.#u);this.div.addEventListener("blur",({relatedTarget:r})=>{r&&!this.div.contains(r)&&(this.#d=null,this.commitOrRemove())},{signal:e}),this.#v.startDrawing(this,this.#h,!1,t)}pause(t){if(t){const{activeElement:e}=document;this.div.contains(e)&&(this.#d=e);return}this.#d&&setTimeout(()=>{this.#d?.focus(),this.#d=null},0)}endDrawingSession(t=!1){return this.#u?(this.#h.setCurrentDrawingSession(null),this.#u.abort(),this.#u=null,this.#d=null,this.#v.endDrawing(t)):null}findNewParent(t,e,r){const i=this.#h.findParent(e,r);return i===null||i===this?!1:(i.changeParent(t),!0)}commitOrRemove(){return this.#u?(this.endDrawingSession(),!0):!1}onScaleChanging(){this.#u&&this.#v.onScaleChangingWhenDrawing(this)}destroy(){this.commitOrRemove(),this.#h.getActive()?.parent===this&&(this.#h.commitOrRemove(),this.#h.setActiveEditor(null)),this.#i&&(clearTimeout(this.#i),this.#i=null);for(const t of this.#s.values())this.#t?.removePointerInTextLayer(t.contentDiv),t.setParent(null),t.isAttachedToDOM=!1,t.div.remove();this.div=null,this.#s.clear(),this.#h.removeLayer(this)}#y(){for(const t of this.#s.values())t.isEmpty()&&t.remove()}render({viewport:t}){this.viewport=t,mr(this.div,t);for(const e of this.#h.getEditors(this.pageIndex))this.add(e),e.rebuild();this.updateMode()}update({viewport:t}){this.#h.commitOrRemove(),this.#y();const e=this.viewport.rotation,r=t.rotation;if(this.viewport=t,mr(this.div,{rotation:r}),e!==r)for(const i of this.#s.values())i.rotate(r)}get pageDimensions(){const{pageWidth:t,pageHeight:e}=this.viewport.rawDims;return[t,e]}get scale(){return this.#h.viewParameters.realScale}}class he{#t=null;#e=new Map;#n=new Map;static#r=0;constructor({pageIndex:t}){this.pageIndex=t}setParent(t){if(!this.#t){this.#t=t;return}if(this.#t!==t){if(this.#e.size>0)for(const e of this.#e.values())e.remove(),t.append(e);this.#t=t}}static get _svgFactory(){return Tt(this,"_svgFactory",new Ra)}static#i(t,[e,r,i,a]){const{style:o}=t;o.top=`${100*r}%`,o.left=`${100*e}%`,o.width=`${100*i}%`,o.height=`${100*a}%`}#s(){const t=he._svgFactory.create(1,1,!0);return this.#t.append(t),t.setAttribute("aria-hidden",!0),t}#a(t,e){const r=he._svgFactory.createElement("clipPath");t.append(r);const i=`clip_${e}`;r.setAttribute("id",i),r.setAttribute("clipPathUnits","objectBoundingBox");const a=he._svgFactory.createElement("use");return r.append(a),a.setAttribute("href",`#${e}`),a.classList.add("clip"),i}#o(t,e){for(const[r,i]of Object.entries(e))i===null?t.removeAttribute(r):t.setAttribute(r,i)}draw(t,e=!1,r=!1){const i=he.#r++,a=this.#s(),o=he._svgFactory.createElement("defs");a.append(o);const u=he._svgFactory.createElement("path");o.append(u);const c=`path_p${this.pageIndex}_${i}`;u.setAttribute("id",c),u.setAttribute("vector-effect","non-scaling-stroke"),e&&this.#n.set(i,u);const d=r?this.#a(o,c):null,p=he._svgFactory.createElement("use");return a.append(p),p.setAttribute("href",`#${c}`),this.updateProperties(a,t),this.#e.set(i,a),{id:i,clipPathId:`url(#${d})`}}drawOutline(t,e){const r=he.#r++,i=this.#s(),a=he._svgFactory.createElement("defs");i.append(a);const o=he._svgFactory.createElement("path");a.append(o);const u=`path_p${this.pageIndex}_${r}`;o.setAttribute("id",u),o.setAttribute("vector-effect","non-scaling-stroke");let c;if(e){const g=he._svgFactory.createElement("mask");a.append(g),c=`mask_p${this.pageIndex}_${r}`,g.setAttribute("id",c),g.setAttribute("maskUnits","objectBoundingBox");const v=he._svgFactory.createElement("rect");g.append(v),v.setAttribute("width","1"),v.setAttribute("height","1"),v.setAttribute("fill","white");const w=he._svgFactory.createElement("use");g.append(w),w.setAttribute("href",`#${u}`),w.setAttribute("stroke","none"),w.setAttribute("fill","black"),w.setAttribute("fill-rule","nonzero"),w.classList.add("mask")}const d=he._svgFactory.createElement("use");i.append(d),d.setAttribute("href",`#${u}`),c&&d.setAttribute("mask",`url(#${c})`);const p=d.cloneNode();return i.append(p),d.classList.add("mainOutline"),p.classList.add("secondaryOutline"),this.updateProperties(i,t),this.#e.set(r,i),r}finalizeDraw(t,e){this.#n.delete(t),this.updateProperties(t,e)}updateProperties(t,e){if(!e)return;const{root:r,bbox:i,rootClass:a,path:o}=e,u=typeof t=="number"?this.#e.get(t):t;if(u){if(r&&this.#o(u,r),i&&he.#i(u,i),a){const{classList:c}=u;for(const[d,p]of Object.entries(a))c.toggle(d,p)}if(o){const d=u.firstChild.firstChild;this.#o(d,o)}}}updateParent(t,e){if(e===this)return;const r=this.#e.get(t);r&&(e.#t.append(r),this.#e.delete(t),e.#e.set(t,r))}remove(t){this.#n.delete(t),this.#t!==null&&(this.#e.get(t).remove(),this.#e.delete(t))}destroy(){this.#t=null;for(const t of this.#e.values())t.remove();this.#e.clear(),this.#n.clear()}}globalThis._pdfjsTestingUtils={HighlightOutliner:Ql};globalThis.pdfjsLib={AbortException:Jn,AnnotationEditorLayer:Rn,AnnotationEditorParamsType:Rt,AnnotationEditorType:xt,AnnotationEditorUIManager:Zn,AnnotationLayer:du,AnnotationMode:Kn,AnnotationType:qt,build:Xm,ColorPicker:Ye,createValidAbsoluteUrl:Ud,DOMSVGFactory:Ra,DrawLayer:he,FeatureTest:fe,fetchData:ti,getDocument:lf,getFilenameFromUrl:jg,getPdfFilenameFromUrl:Ug,getRGB:La,getUuid:Vd,getXfaPageViewport:$g,GlobalWorkerOptions:qr,ImageKind:Ea,InvalidPDFException:$l,isDataScheme:Oa,isPdfFile:nu,isValidExplicitDest:tm,MathClamp:be,noContextMenu:Ke,normalizeUnicode:_g,OPS:Ca,OutputScale:vn,PasswordResponses:Pg,PDFDataRangeTransport:uf,PDFDateString:Vl,PDFWorker:Js,PermissionFlag:Rg,PixelsPerInch:es,RenderingCancelledException:eu,ResponseException:Ta,setLayerDimensions:mr,shadow:Tt,SignatureExtractor:Kr,stopEvent:te,SupportedImageMimeTypes:Wl,TextLayer:Ee,TouchManager:Na,updateUrlHash:Hd,Util:pt,VerbosityLevel:Ia,version:df,XfaLayer:ff};qr.workerSrc=`https://cdnjs.cloudflare.com/ajax/libs/pdf.js/${df}/pdf.worker.min.js`;function zd(f){return Math.round(f*100)}function vv(){const[f,t]=Gr.useState(null),[e,r]=Gr.useState(1),[i,a]=Gr.useState(!1),o=Gr.useRef(null),u=Gr.useRef(null);async function c(g){const v=g.target.files?.[0];if(!v)return;a(!0);const w=await v.arrayBuffer(),A=await lf({data:w}).promise,E=v.name,x=A.numPages,R=v.name;t({pdf:A,numPages:x,title:R,id:E});const C=localStorage.getItem("rq_lastpage_"+E);r(C?Number(C):1),a(!1)}Gr.useEffect(()=>{let g=!1;async function v(){if(!f)return;const{pdf:w}=f;if(e<1||e>w.numPages)return;const S=await w.getPage(e),A=S.getViewport({scale:1.5}),E=o.current,x=E.getContext("2d");E.height=A.height,E.width=A.width;const R={canvasContext:x,viewport:A};await S.render(R).promise,!g&&localStorage.setItem("rq_lastpage_"+f.id,String(e))}return v(),()=>{g=!0}},[f,e]);function d(){r(g=>Math.max(1,g-1))}function p(){f&&r(g=>Math.min(f.numPages,g+1))}return Bt.jsxs("div",{className:"app-root",children:[Bt.jsxs("header",{className:"topbar",children:[Bt.jsx("h1",{children:"Reading Quest  MVP (PDF)"}),Bt.jsxs("div",{className:"uploader",children:[Bt.jsx("input",{ref:u,type:"file",accept:"application/pdf",onChange:c,style:{display:"none"}}),Bt.jsx("button",{className:"btn",onClick:()=>u.current.click(),children:"Upload PDF"})]})]}),Bt.jsx("main",{className:"reader-area",children:f?Bt.jsxs("div",{className:"reader-card",children:[Bt.jsxs("div",{className:"reader-header",children:[Bt.jsx("div",{className:"title",children:f.title}),Bt.jsxs("div",{className:"meta",children:["Page ",e," / ",f.numPages]})]}),Bt.jsx("div",{className:"canvas-wrap",children:Bt.jsx("canvas",{ref:o,className:"pdf-canvas"})}),Bt.jsxs("div",{className:"controls",children:[Bt.jsx("button",{className:"btn ghost",onClick:d,disabled:e===1,children:"Prev"}),Bt.jsxs("div",{className:"progress",children:[Bt.jsx("div",{className:"bar-bg",children:Bt.jsx("div",{className:"bar-fill",style:{width:zd((e-1)/(f.numPages-1))+"%"}})}),Bt.jsxs("div",{className:"progress-label",children:[zd(e/f.numPages),"% read"]})]}),Bt.jsx("button",{className:"btn",onClick:p,disabled:e===f.numPages,children:"Next"})]})]}):Bt.jsxs("div",{className:"empty",children:[Bt.jsx("p",{children:"No book loaded. Upload a PDF to start reading."}),Bt.jsx("p",{className:"muted",children:"Your file stays in your browser  nothing is uploaded."})]})}),Bt.jsx("footer",{className:"footer",children:"Simple MVP  Local only  Later we can add syncing & gamification"})]})}Cg.createRoot(document.getElementById("root")).render(Bt.jsx(vv,{}));
